"undefined"!=typeof angular&&(angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","components/rv-common-i18n/dist/locales/translation_").constant("LOCALES_SUFIX",".json"),angular.module("risevision.widget.common.storage-selector.config").value("STORAGE_MODAL","http://storage.risevision.com/~rvi/storage-client-rva-test/storage-modal.html#/files/"));var RiseVision=RiseVision||{};RiseVision.ImageFolder={},RiseVision.ImageFolder=function(e){"use strict";function t(){var t=m.getString("id");d.width=m.getInt("rsW"),d.height=m.getInt("rsH"),l=new RiseVision.ImageFolder.Storage(d),e.rpc.register("rsparam_set_"+t,l.getCompanyId),e.rpc.call("","rsparam_get",null,t,"companyId")}function n(e,n){Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(n)&&n.length>0&&(d=JSON.parse(n[0]),document.getElementById("container").style.height=m.getInt("rsH")+"px",t())}function r(e){u=new RiseVision.ImageFolder.Slider(d),u.init(e)}function i(){e.rpc.call("","rsevent_ready",null,m.getString("id"),!0,!0,!0,!0,!0)}function a(){e.rpc.call("","rsevent_done",null,m.getString("id"))}function o(){u.play()}function s(){u.pause()}function c(){s()}var d,l=null,u=null,m=new e.Prefs;return{ready:i,done:a,play:o,pause:s,stop:c,setParams:n,initSlider:r}}(gadgets);var RiseVision=RiseVision||{};RiseVision.ImageFolder=RiseVision.ImageFolder||{},RiseVision.ImageFolder.Slider=function(e){"use strict";function t(t){var n=document.querySelector(".tp-banner ul"),r=document.createDocumentFragment(),i=[],a=null,o=null,c="";s=t.length,t.forEach(function(t){switch(a=document.createElement("li"),o=document.createElement("img"),a.setAttribute("data-transition","fade"),a.setAttribute("data-masterspeed",500),o.src=t,e.position){case"top-left":c="left top";break;case"top-center":c="center top";break;case"top-right":c="right top";break;case"middle-left":c="left center";break;case"middle-center":c="center center";break;case"middle-right":c="right center";break;case"bottom-left":c="left bottom";break;case"bottom-center":c="center bottom";break;case"bottom-right":c="right bottom";break;default:c="left top"}o.setAttribute("data-bgposition",c),e.scaleToFit?o.setAttribute("data-bgfit","contain"):o.setAttribute("data-bgfit","normal"),a.appendChild(o),i.push(a)}),i.forEach(function(e){r.appendChild(e)}),n.appendChild(r)}function n(){m=!0,clearTimeout(l),l=setTimeout(function(){m=!1,c.revnext(),c.revresume()},1e3*e.pause),r()}function r(){e.autoHide&&(clearTimeout(d),d=setTimeout(function(){$(".tp-leftarrow, .tp-rightarrow").addClass("hidearrows")},g))}function i(i){t(i),c=$(".tp-banner").revolution({delay:1e3*e.duration,hideThumbs:0,hideTimerBar:"on",navigationType:"none",onHoverStop:"off",startwidth:e.width,startheight:e.height}),c.bind("revolution.slide.onloaded",function(){c.revpause(),RiseVision.ImageFolder.ready()}),c.bind("revolution.slide.onchange",function(e,t){m?c.revpause():u&&(u=!1,c.revpause(),RiseVision.ImageFolder.done()),t.slideIndex===s&&(u=!0)}),$("body").on("touchend",".tp-banner",function(){n(),$(".tp-leftarrow, .tp-rightarrow").removeClass("hidearrows")}),$("body").on("touchend",".tp-leftarrow, .tp-rightarrow",function(){n()}),r()}function a(){c&&c.revresume()}function o(){c&&c.revpause()}var s=0,c=null,d=null,l=null,u=!1,m=!1,g=3e3;return{init:i,play:a,pause:o}};var RiseVision=RiseVision||{};RiseVision.ImageFolder=RiseVision.ImageFolder||{},RiseVision.ImageFolder.Storage=function(e){"use strict";function t(){var t=document.querySelector("rise-storage"),n="",i="";switch(t.addEventListener("rise-storage-response",function(e){RiseVision.ImageFolder.initSlider(e.detail)}),t.setAttribute("companyId",r),t.setAttribute("folder",e.storage.folder),e.order){case"alpha-asc":n="name",i="asc";break;case"alpha-desc":n="name",i="desc";break;case"date-asc":n="date",i="asc";break;case"date-desc":n="date",i="desc";break;case"random":n="random";break;default:n="name",i="asc"}t.setAttribute("sort",n),t.setAttribute("sortDirection",i),t.go()}function n(e,n){"companyId"===e&&(r=n,t())}var r="";return{getCompanyId:n}},function(e,t,n){"use strict";function r(){RiseVision.ImageFolder.play()}function i(){RiseVision.ImageFolder.pause()}var a=(new n.Prefs).getString("id");e.oncontextmenu=function(){return!1},t.body.onmousedown=function(){return!1},$(t).ready(function(){n.rpc.register("rscmd_play_"+a,r),n.rpc.register("rscmd_pause_"+a,i),n.rpc.register("rsparam_set_"+a,RiseVision.ImageFolder.setParams),n.rpc.call("","rsparam_get",null,a,["additionalParams"])})}(window,document,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-3"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwidmFsdWUiLCJSaXNlVmlzaW9uIiwiSW1hZ2VGb2xkZXIiLCJnYWRnZXRzIiwiaW5pdCIsImlkIiwicHJlZnMiLCJnZXRTdHJpbmciLCJwYXJhbXMiLCJ3aWR0aCIsImdldEludCIsImhlaWdodCIsInN0b3JhZ2UiLCJTdG9yYWdlIiwicnBjIiwicmVnaXN0ZXIiLCJnZXRDb21wYW55SWQiLCJjYWxsIiwic2V0UGFyYW1zIiwibmFtZXMiLCJ2YWx1ZXMiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJKU09OIiwicGFyc2UiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJpbml0U2xpZGVyIiwidXJscyIsInNsaWRlciIsIlNsaWRlciIsInJlYWR5IiwiZG9uZSIsInBsYXkiLCJwYXVzZSIsInN0b3AiLCJQcmVmcyIsImFkZFNsaWRlcyIsImxpc3QiLCJxdWVyeVNlbGVjdG9yIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50Iiwic2xpZGVzIiwic2xpZGUiLCJpbWFnZSIsInBvc2l0aW9uIiwidG90YWxTbGlkZXMiLCJmb3JFYWNoIiwidXJsIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInNyYyIsInNjYWxlVG9GaXQiLCJhcHBlbmRDaGlsZCIsInB1c2giLCJoYW5kbGVVc2VyQWN0aXZpdHkiLCJpc1BhdXNlZCIsImNsZWFyVGltZW91dCIsInNsaWRlVGltZXIiLCJzZXRUaW1lb3V0IiwiYXBpIiwicmV2bmV4dCIsInJldnJlc3VtZSIsImhpZGVOYXYiLCJhdXRvSGlkZSIsIm5hdlRpbWVyIiwiJCIsImFkZENsYXNzIiwibmF2VGltZW91dCIsInJldm9sdXRpb24iLCJkZWxheSIsImR1cmF0aW9uIiwiaGlkZVRodW1icyIsImhpZGVUaW1lckJhciIsIm5hdmlnYXRpb25UeXBlIiwib25Ib3ZlclN0b3AiLCJzdGFydHdpZHRoIiwic3RhcnRoZWlnaHQiLCJiaW5kIiwicmV2cGF1c2UiLCJlIiwiZGF0YSIsImlzTGFzdFNsaWRlIiwic2xpZGVJbmRleCIsIm9uIiwicmVtb3ZlQ2xhc3MiLCJzb3J0Iiwic29ydERpcmVjdGlvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZXRhaWwiLCJjb21wYW55SWQiLCJmb2xkZXIiLCJvcmRlciIsImdvIiwibmFtZSIsIndpbmRvdyIsIm9uY29udGV4dG1lbnUiLCJib2R5Iiwib25tb3VzZWRvd24iLCJfZ2FxIiwiZ2EiLCJ0eXBlIiwiYXN5bmMiLCJsb2NhdGlvbiIsInByb3RvY29sIiwicyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSJdLCJtYXBwaW5ncyI6IkFBQXVCLG1CQUFaQSxXQUNUQSxRQUFRQyxPQUFPLG9DQUNaQyxTQUFTLGlCQUFrQix1REFDM0JBLFNBQVMsZ0JBQWlCLFNBRTdCRixRQUFRQyxPQUFPLG9EQUNaRSxNQUFNLGdCQUFpQix5RkFJNUIsSUFBSUMsWUFBYUEsY0FDakJBLFlBQVdDLGVBRVhELFdBQVdDLFlBQWMsU0FBV0MsR0FDbEMsWUFVQSxTQUFTQyxLQUNQLEdBQUlDLEdBQUtDLEVBQU1DLFVBQVUsS0FFekJDLEdBQU9DLE1BQVFILEVBQU1JLE9BQU8sT0FDNUJGLEVBQU9HLE9BQVNMLEVBQU1JLE9BQU8sT0FDN0JFLEVBQVUsR0FBSVgsWUFBV0MsWUFBWVcsUUFBUUwsR0FFN0NMLEVBQVFXLElBQUlDLFNBQVMsZUFBaUJWLEVBQUlPLEVBQVFJLGNBQ2xEYixFQUFRVyxJQUFJRyxLQUFLLEdBQUksY0FBZSxLQUFNWixFQUFJLGFBTWhELFFBQVNhLEdBQVVDLEVBQU9DLEdBQ3BCQyxNQUFNQyxRQUFRSCxJQUFVQSxFQUFNSSxPQUFTLEdBQWtCLHFCQUFiSixFQUFNLElBQ2hERSxNQUFNQyxRQUFRRixJQUFXQSxFQUFPRyxPQUFTLElBQzNDZixFQUFTZ0IsS0FBS0MsTUFBTUwsRUFBTyxJQUUz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d2lkZ2V0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImlmICh0eXBlb2YgYW5ndWxhciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24uY29tbW9uLmkxOG4uY29uZmlnXCIsIFtdKVxuICAgIC5jb25zdGFudChcIkxPQ0FMRVNfUFJFRklYXCIsIFwiY29tcG9uZW50cy9ydi1jb21tb24taTE4bi9kaXN0L2xvY2FsZXMvdHJhbnNsYXRpb25fXCIpXG4gICAgLmNvbnN0YW50KFwiTE9DQUxFU19TVUZJWFwiLCBcIi5qc29uXCIpO1xuXG4gIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi53aWRnZXQuY29tbW9uLnN0b3JhZ2Utc2VsZWN0b3IuY29uZmlnXCIpXG4gICAgLnZhbHVlKFwiU1RPUkFHRV9NT0RBTFwiLCBcImh0dHA6Ly9zdG9yYWdlLnJpc2V2aXNpb24uY29tL35ydmkvc3RvcmFnZS1jbGllbnQtcnZhLXRlc3Qvc3RvcmFnZS1tb2RhbC5odG1sIy9maWxlcy9cIik7XG59XG5cbi8qIGdsb2JhbCBnYWRnZXRzICovXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkltYWdlRm9sZGVyID0ge307XG5cblJpc2VWaXNpb24uSW1hZ2VGb2xkZXIgPSAoZnVuY3Rpb24gKGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHBhcmFtcyxcbiAgICBzdG9yYWdlID0gbnVsbCxcbiAgICBzbGlkZXIgPSBudWxsLFxuICAgIHByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKTtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBpZCA9IHByZWZzLmdldFN0cmluZyhcImlkXCIpO1xuXG4gICAgcGFyYW1zLndpZHRoID0gcHJlZnMuZ2V0SW50KFwicnNXXCIpO1xuICAgIHBhcmFtcy5oZWlnaHQgPSBwcmVmcy5nZXRJbnQoXCJyc0hcIik7XG4gICAgc3RvcmFnZSA9IG5ldyBSaXNlVmlzaW9uLkltYWdlRm9sZGVyLlN0b3JhZ2UocGFyYW1zKTtcblxuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNwYXJhbV9zZXRfXCIgKyBpZCwgc3RvcmFnZS5nZXRDb21wYW55SWQpO1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc3BhcmFtX2dldFwiLCBudWxsLCBpZCwgXCJjb21wYW55SWRcIik7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIHNldFBhcmFtcyhuYW1lcywgdmFsdWVzKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZXMpICYmIG5hbWVzLmxlbmd0aCA+IDAgJiYgbmFtZXNbMF0gPT09IFwiYWRkaXRpb25hbFBhcmFtc1wiKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZXMpICYmIHZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHBhcmFtcyA9IEpTT04ucGFyc2UodmFsdWVzWzBdKTtcblxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lclwiKS5zdHlsZS5oZWlnaHQgPSBwcmVmcy5nZXRJbnQoXCJyc0hcIikgKyBcInB4XCI7XG4gICAgICAgIGluaXQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpbml0U2xpZGVyKHVybHMpIHtcbiAgICBzbGlkZXIgPSBuZXcgUmlzZVZpc2lvbi5JbWFnZUZvbGRlci5TbGlkZXIocGFyYW1zKTtcbiAgICBzbGlkZXIuaW5pdCh1cmxzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWR5KCkge1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc2V2ZW50X3JlYWR5XCIsIG51bGwsIHByZWZzLmdldFN0cmluZyhcImlkXCIpLCB0cnVlLFxuICAgICAgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBkb25lKCkge1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc2V2ZW50X2RvbmVcIiwgbnVsbCwgcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIikpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBzbGlkZXIucGxheSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgc2xpZGVyLnBhdXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIHBhdXNlKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwicmVhZHlcIjogcmVhZHksXG4gICAgXCJkb25lXCI6IGRvbmUsXG4gICAgXCJwbGF5XCI6IHBsYXksXG4gICAgXCJwYXVzZVwiOiBwYXVzZSxcbiAgICBcInN0b3BcIjogc3RvcCxcbiAgICBcInNldFBhcmFtc1wiOiBzZXRQYXJhbXMsXG4gICAgXCJpbml0U2xpZGVyXCI6IGluaXRTbGlkZXJcbiAgfTtcbn0pKGdhZGdldHMpO1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkltYWdlRm9sZGVyID0gUmlzZVZpc2lvbi5JbWFnZUZvbGRlciB8fCB7fTtcblxuUmlzZVZpc2lvbi5JbWFnZUZvbGRlci5TbGlkZXIgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciB0b3RhbFNsaWRlcyA9IDAsXG4gICAgYXBpID0gbnVsbCxcbiAgICBuYXZUaW1lciA9IG51bGwsXG4gICAgc2xpZGVUaW1lciA9IG51bGwsXG4gICAgaXNMYXN0U2xpZGUgPSBmYWxzZSxcbiAgICBpc1BhdXNlZCA9IGZhbHNlLFxuICAgIG5hdlRpbWVvdXQgPSAzMDAwO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGFkZFNsaWRlcyh1cmxzKSB7XG4gICAgdmFyIGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRwLWJhbm5lciB1bFwiKSxcbiAgICAgIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgc2xpZGVzID0gW10sXG4gICAgICBzbGlkZSA9IG51bGwsXG4gICAgICBpbWFnZSA9IG51bGwsXG4gICAgICBwb3NpdGlvbiA9IFwiXCI7XG5cbiAgICB0b3RhbFNsaWRlcyA9IHVybHMubGVuZ3RoO1xuXG4gICAgdXJscy5mb3JFYWNoKGZ1bmN0aW9uKHVybCkge1xuICAgICAgc2xpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG5cbiAgICAgIC8vIFRyYW5zaXRpb25cbiAgICAgIHNsaWRlLnNldEF0dHJpYnV0ZShcImRhdGEtdHJhbnNpdGlvblwiLCBcImZhZGVcIik7XG4gICAgICBzbGlkZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1hc3RlcnNwZWVkXCIsIDUwMCk7XG5cbiAgICAgIGltYWdlLnNyYyA9IHVybDtcblxuICAgICAgLy8gQWxpZ25tZW50XG4gICAgICBzd2l0Y2ggKHBhcmFtcy5wb3NpdGlvbikge1xuICAgICAgICBjYXNlIFwidG9wLWxlZnRcIjpcbiAgICAgICAgICBwb3NpdGlvbiA9IFwibGVmdCB0b3BcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInRvcC1jZW50ZXJcIjpcbiAgICAgICAgICBwb3NpdGlvbiA9IFwiY2VudGVyIHRvcFwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwidG9wLXJpZ2h0XCI6XG4gICAgICAgICAgcG9zaXRpb24gPSBcInJpZ2h0IHRvcFwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibWlkZGxlLWxlZnRcIjpcbiAgICAgICAgICBwb3NpdGlvbiA9IFwibGVmdCBjZW50ZXJcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIm1pZGRsZS1jZW50ZXJcIjpcbiAgICAgICAgICBwb3NpdGlvbiA9IFwiY2VudGVyIGNlbnRlclwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibWlkZGxlLXJpZ2h0XCI6XG4gICAgICAgICAgcG9zaXRpb24gPSBcInJpZ2h0IGNlbnRlclwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYm90dG9tLWxlZnRcIjpcbiAgICAgICAgICBwb3NpdGlvbiA9IFwibGVmdCBib3R0b21cIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImJvdHRvbS1jZW50ZXJcIjpcbiAgICAgICAgICBwb3NpdGlvbiA9IFwiY2VudGVyIGJvdHRvbVwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYm90dG9tLXJpZ2h0XCI6XG4gICAgICAgICAgcG9zaXRpb24gPSBcInJpZ2h0IGJvdHRvbVwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHBvc2l0aW9uID0gXCJsZWZ0IHRvcFwiO1xuICAgICAgfVxuXG4gICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWJncG9zaXRpb25cIiwgcG9zaXRpb24pO1xuXG4gICAgICAvLyBTY2FsZSB0byBGaXRcbiAgICAgIGlmIChwYXJhbXMuc2NhbGVUb0ZpdCkge1xuICAgICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWJnZml0XCIsIFwiY29udGFpblwiKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWJnZml0XCIsIFwibm9ybWFsXCIpO1xuICAgICAgfVxuXG4gICAgICBzbGlkZS5hcHBlbmRDaGlsZChpbWFnZSk7XG4gICAgICBzbGlkZXMucHVzaChzbGlkZSk7XG4gICAgfSk7XG5cbiAgICBzbGlkZXMuZm9yRWFjaChmdW5jdGlvbihzbGlkZSkge1xuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoc2xpZGUpO1xuICAgIH0pO1xuXG4gICAgbGlzdC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gIH1cblxuICAvLyBVc2VyIGhhcyBpbnRlcmFjdGVkIHdpdGggdGhlIHNsaWRlc2hvdy5cbiAgZnVuY3Rpb24gaGFuZGxlVXNlckFjdGl2aXR5KCkge1xuICAgIGlzUGF1c2VkID0gdHJ1ZTtcbiAgICBjbGVhclRpbWVvdXQoc2xpZGVUaW1lcik7XG5cbiAgICAvLyBNb3ZlIHRvIG5leHQgc2xpZGUgYW5kIHJlc3VtZSB0aGUgc2xpZGVzaG93IGFmdGVyIGEgZGVsYXkuXG4gICAgc2xpZGVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBpc1BhdXNlZCA9IGZhbHNlO1xuICAgICAgYXBpLnJldm5leHQoKTtcbiAgICAgIGFwaS5yZXZyZXN1bWUoKTtcbiAgICB9LCBwYXJhbXMucGF1c2UgKiAxMDAwKTtcblxuICAgIGhpZGVOYXYoKTtcbiAgfVxuXG4gIC8vIEhpZGUgdGhlIG5hdmlnYXRpb24gYWZ0ZXIgYSBkZWxheS5cbiAgZnVuY3Rpb24gaGlkZU5hdigpIHtcbiAgICBpZiAocGFyYW1zLmF1dG9IaWRlKSB7XG4gICAgICBjbGVhclRpbWVvdXQobmF2VGltZXIpO1xuXG4gICAgICBuYXZUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoXCIudHAtbGVmdGFycm93LCAudHAtcmlnaHRhcnJvd1wiKS5hZGRDbGFzcyhcImhpZGVhcnJvd3NcIik7XG4gICAgICB9LCBuYXZUaW1lb3V0KTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQodXJscykge1xuICAgIGFkZFNsaWRlcyh1cmxzKTtcblxuICAgIGFwaSA9ICQoXCIudHAtYmFubmVyXCIpLnJldm9sdXRpb24oe1xuICAgICAgXCJkZWxheVwiOiBwYXJhbXMuZHVyYXRpb24gKiAxMDAwLFxuICAgICAgXCJoaWRlVGh1bWJzXCI6IDAsXG4gICAgICBcImhpZGVUaW1lckJhclwiOiBcIm9uXCIsXG4gICAgICBcIm5hdmlnYXRpb25UeXBlXCI6IFwibm9uZVwiLFxuICAgICAgXCJvbkhvdmVyU3RvcFwiOiBcIm9mZlwiLFxuICAgICAgXCJzdGFydHdpZHRoXCI6IHBhcmFtcy53aWR0aCxcbiAgICAgIFwic3RhcnRoZWlnaHRcIjogcGFyYW1zLmhlaWdodFxuICAgIH0pO1xuXG4gICAgYXBpLmJpbmQoXCJyZXZvbHV0aW9uLnNsaWRlLm9ubG9hZGVkXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gUGF1c2Ugc2xpZGVzaG93IHNpbmNlIGl0IHdpbGwgYXV0b3BsYXkgYW5kIHRoaXMgaXMgbm90IGNvbmZpZ3VyYWJsZS5cbiAgICAgIGFwaS5yZXZwYXVzZSgpO1xuICAgICAgUmlzZVZpc2lvbi5JbWFnZUZvbGRlci5yZWFkeSgpO1xuICAgIH0pO1xuXG4gICAgYXBpLmJpbmQoXCJyZXZvbHV0aW9uLnNsaWRlLm9uY2hhbmdlXCIsIGZ1bmN0aW9uIChlLCBkYXRhKSB7XG4gICAgICBpZiAoaXNQYXVzZWQpIHtcbiAgICAgICAgYXBpLnJldnBhdXNlKCk7XG4gICAgICB9XG4gICAgICAvLyBEb24ndCBjYWxsIFwiZG9uZVwiIGlmIHVzZXIgaXMgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgc2xpZGVzaG93LlxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmIChpc0xhc3RTbGlkZSkge1xuICAgICAgICAgIGlzTGFzdFNsaWRlID0gZmFsc2U7XG4gICAgICAgICAgYXBpLnJldnBhdXNlKCk7XG4gICAgICAgICAgUmlzZVZpc2lvbi5JbWFnZUZvbGRlci5kb25lKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGEuc2xpZGVJbmRleCA9PT0gdG90YWxTbGlkZXMpIHtcbiAgICAgICAgaXNMYXN0U2xpZGUgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gU3dpcGUgdGhlIHNsaWRlci5cbiAgICAkKFwiYm9keVwiKS5vbihcInRvdWNoZW5kXCIsIFwiLnRwLWJhbm5lclwiLCBmdW5jdGlvbigpIHtcbiAgICAgIGhhbmRsZVVzZXJBY3Rpdml0eSgpO1xuICAgICAgJChcIi50cC1sZWZ0YXJyb3csIC50cC1yaWdodGFycm93XCIpLnJlbW92ZUNsYXNzKFwiaGlkZWFycm93c1wiKTtcbiAgICB9KTtcblxuICAgIC8vIFRvdWNoIHRoZSBuYXZpZ2F0aW9uIGFycm93cy5cbiAgICAkKFwiYm9keVwiKS5vbihcInRvdWNoZW5kXCIsIFwiLnRwLWxlZnRhcnJvdywgLnRwLXJpZ2h0YXJyb3dcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBoYW5kbGVVc2VyQWN0aXZpdHkoKTtcbiAgICB9KTtcblxuICAgIGhpZGVOYXYoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgaWYgKGFwaSkge1xuICAgICAgYXBpLnJldnJlc3VtZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgIGlmIChhcGkpIHtcbiAgICAgIGFwaS5yZXZwYXVzZSgpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXQsXG4gICAgXCJwbGF5XCI6IHBsYXksXG4gICAgXCJwYXVzZVwiOiBwYXVzZVxuICB9O1xufTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5JbWFnZUZvbGRlciA9IFJpc2VWaXNpb24uSW1hZ2VGb2xkZXIgfHwge307XG5cblJpc2VWaXNpb24uSW1hZ2VGb2xkZXIuU3RvcmFnZSA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIGNvbXBhbnlJZCA9IFwiXCI7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgc3RvcmFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJyaXNlLXN0b3JhZ2VcIiksXG4gICAgICBzb3J0ID0gXCJcIixcbiAgICAgIHNvcnREaXJlY3Rpb24gPSBcIlwiO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXJlc3BvbnNlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIFJpc2VWaXNpb24uSW1hZ2VGb2xkZXIuaW5pdFNsaWRlcihlLmRldGFpbCk7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImNvbXBhbnlJZFwiLCBjb21wYW55SWQpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZm9sZGVyXCIsIHBhcmFtcy5zdG9yYWdlLmZvbGRlcik7XG5cbiAgICAvLyBTb3J0aW5nXG4gICAgc3dpdGNoIChwYXJhbXMub3JkZXIpIHtcbiAgICAgIGNhc2UgXCJhbHBoYS1hc2NcIjpcbiAgICAgICAgc29ydCA9IFwibmFtZVwiO1xuICAgICAgICBzb3J0RGlyZWN0aW9uID0gXCJhc2NcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiYWxwaGEtZGVzY1wiOlxuICAgICAgICBzb3J0ID0gXCJuYW1lXCI7XG4gICAgICAgIHNvcnREaXJlY3Rpb24gPSBcImRlc2NcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZGF0ZS1hc2NcIjpcbiAgICAgICAgc29ydCA9IFwiZGF0ZVwiO1xuICAgICAgICBzb3J0RGlyZWN0aW9uID0gXCJhc2NcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZGF0ZS1kZXNjXCI6XG4gICAgICAgIHNvcnQgPSBcImRhdGVcIjtcbiAgICAgICAgc29ydERpcmVjdGlvbiA9IFwiZGVzY1wiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJyYW5kb21cIjpcbiAgICAgICAgc29ydCA9IFwicmFuZG9tXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgc29ydCA9IFwibmFtZVwiO1xuICAgICAgICBzb3J0RGlyZWN0aW9uID0gXCJhc2NcIjtcbiAgICB9XG5cbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcInNvcnRcIiwgc29ydCk7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJzb3J0RGlyZWN0aW9uXCIsIHNvcnREaXJlY3Rpb24pO1xuICAgIHN0b3JhZ2UuZ28oKTtcbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gZ2V0Q29tcGFueUlkKG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKG5hbWUgPT09IFwiY29tcGFueUlkXCIpIHtcbiAgICAgIGNvbXBhbnlJZCA9IHZhbHVlO1xuICAgICAgaW5pdCgpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJnZXRDb21wYW55SWRcIjogZ2V0Q29tcGFueUlkXG4gIH07XG59O1xuXG4vKiBnbG9iYWwgUmlzZVZpc2lvbiwgZ2FkZ2V0cyAqL1xuKGZ1bmN0aW9uICh3aW5kb3csIGRvY3VtZW50LCBnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBpZCA9IG5ldyBnYWRnZXRzLlByZWZzKCkuZ2V0U3RyaW5nKFwiaWRcIik7XG5cbiAgd2luZG93Lm9uY29udGV4dG1lbnUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGRvY3VtZW50LmJvZHkub25tb3VzZWRvd24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBSaXNlVmlzaW9uLkltYWdlRm9sZGVyLnBsYXkoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgIFJpc2VWaXNpb24uSW1hZ2VGb2xkZXIucGF1c2UoKTtcbiAgfVxuXG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGxheV9cIiArIGlkLCBwbGF5KTtcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BhdXNlX1wiICsgaWQsIHBhdXNlKTtcblxuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNwYXJhbV9zZXRfXCIgKyBpZCwgUmlzZVZpc2lvbi5JbWFnZUZvbGRlci5zZXRQYXJhbXMpO1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc3BhcmFtX2dldFwiLCBudWxsLCBpZCwgW1wiYWRkaXRpb25hbFBhcmFtc1wiXSk7XG4gIH0pO1xufSkod2luZG93LCBkb2N1bWVudCwgZ2FkZ2V0cyk7XG5cbi8qIGpzaGludCBpZ25vcmU6c3RhcnQgKi9cbnZhciBfZ2FxID0gX2dhcSB8fCBbXTtcblxuX2dhcS5wdXNoKFsnX3NldEFjY291bnQnLCAnVUEtNTcwOTIxNTktMyddKTtcbl9nYXEucHVzaChbJ190cmFja1BhZ2V2aWV3J10pO1xuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBnYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOyBnYS50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7IGdhLmFzeW5jID0gdHJ1ZTtcbiAgZ2Euc3JjID0gKCdodHRwczonID09IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sID8gJ2h0dHBzOi8vc3NsJyA6ICdodHRwOi8vd3d3JykgKyAnLmdvb2dsZS1hbmFseXRpY3MuY29tL2dhLmpzJztcbiAgdmFyIHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07IHMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZ2EsIHMpO1xufSkoKTtcbi8qIGpzaGludCBpZ25vcmU6ZW5kICovXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=