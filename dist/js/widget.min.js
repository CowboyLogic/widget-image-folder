"undefined"!=typeof angular&&(angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","components/rv-common-i18n/dist/locales/translation_").constant("LOCALES_SUFIX",".json"),angular.module("risevision.widget.common.storage-selector.config").value("STORAGE_MODAL","http://storage.risevision.com/~rvi/storage-client-rva-test/storage-modal.html#/files/"));var RiseVision=RiseVision||{};RiseVision.ImageFolder={},RiseVision.ImageFolder=function(e){"use strict";function t(){var t=m.getString("id");l.width=m.getInt("rsW"),l.height=m.getInt("rsH"),d=new RiseVision.ImageFolder.Storage(l),e.rpc.register("rsparam_set_"+t,d.getCompanyId),e.rpc.call("","rsparam_get",null,t,"companyId")}function n(e,n){Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(n)&&n.length>0&&(l=JSON.parse(n[0]),document.getElementById("container").style.height=m.getInt("rsH")+"px",t())}function r(e){null===u&&(u=new RiseVision.ImageFolder.Slider(l),u.init(e))}function i(){e.rpc.call("","rsevent_ready",null,m.getString("id"),!0,!0,!0,!0,!0)}function a(){e.rpc.call("","rsevent_done",null,m.getString("id"))}function o(){u.play()}function s(){u.pause()}function c(){s()}var l,d=null,u=null,m=new e.Prefs;return{ready:i,done:a,play:o,pause:s,stop:c,setParams:n,initSlider:r}}(gadgets);var RiseVision=RiseVision||{};RiseVision.ImageFolder=RiseVision.ImageFolder||{},RiseVision.ImageFolder.Slider=function(e){"use strict";function t(t){var n=document.querySelector(".tp-banner ul"),r=document.createDocumentFragment(),i=[],a=null,o=null,c="";s=t.length,t.forEach(function(t){switch(a=document.createElement("li"),o=document.createElement("img"),a.setAttribute("data-transition","fade"),a.setAttribute("data-masterspeed",500),o.src=t,e.position){case"top-left":c="left top";break;case"top-center":c="center top";break;case"top-right":c="right top";break;case"middle-left":c="left center";break;case"middle-center":c="center center";break;case"middle-right":c="right center";break;case"bottom-left":c="left bottom";break;case"bottom-center":c="center bottom";break;case"bottom-right":c="right bottom";break;default:c="left top"}o.setAttribute("data-bgposition",c),e.scaleToFit?o.setAttribute("data-bgfit","contain"):o.setAttribute("data-bgfit","normal"),a.appendChild(o),i.push(a)}),i.forEach(function(e){r.appendChild(e)}),n.appendChild(r)}function n(){m=!0,clearTimeout(d),d=setTimeout(function(){m=!1,c.revnext(),c.revresume()},1e3*e.pause),r()}function r(){e.autoHide&&(clearTimeout(l),l=setTimeout(function(){$(".tp-leftarrow, .tp-rightarrow").addClass("hidearrows")},g))}function i(i){t(i),c=$(".tp-banner").revolution({delay:1e3*e.duration,hideThumbs:0,hideTimerBar:"on",navigationType:"none",onHoverStop:"off",startwidth:e.width,startheight:e.height}),c.bind("revolution.slide.onloaded",function(){c.revpause(),RiseVision.ImageFolder.ready()}),c.bind("revolution.slide.onchange",function(e,t){m?c.revpause():u&&(u=!1,c.revpause(),RiseVision.ImageFolder.done()),t.slideIndex===s&&(u=!0)}),$("body").on("touchend",".tp-banner",function(){n(),$(".tp-leftarrow, .tp-rightarrow").removeClass("hidearrows")}),$("body").on("touchend",".tp-leftarrow, .tp-rightarrow",function(){n()}),r()}function a(){c&&c.revresume()}function o(){c&&c.revpause()}var s=0,c=null,l=null,d=null,u=!1,m=!1,g=3e3;return{init:i,play:a,pause:o}};var RiseVision=RiseVision||{};RiseVision.ImageFolder=RiseVision.ImageFolder||{},RiseVision.ImageFolder.Storage=function(e){"use strict";function t(){var t=document.querySelector("rise-storage"),n="",i="";switch(t.addEventListener("rise-storage-response",function(e){RiseVision.ImageFolder.initSlider(e.detail)}),t.setAttribute("companyId",r),t.setAttribute("folder",e.storage.folder),e.order){case"alpha-asc":n="name",i="asc";break;case"alpha-desc":n="name",i="desc";break;case"date-asc":n="date",i="asc";break;case"date-desc":n="date",i="desc";break;case"random":n="random";break;default:n="name",i="asc"}t.setAttribute("sort",n),t.setAttribute("sortDirection",i),t.go()}function n(e,n){"companyId"===e&&(r=n,t())}var r="";return{getCompanyId:n}},function(e,t,n){"use strict";function r(){RiseVision.ImageFolder.play()}function i(){RiseVision.ImageFolder.pause()}var a=(new n.Prefs).getString("id");e.oncontextmenu=function(){return!1},t.body.onmousedown=function(){return!1},$(t).ready(function(){n.rpc.register("rscmd_play_"+a,r),n.rpc.register("rscmd_pause_"+a,i),n.rpc.register("rsparam_set_"+a,RiseVision.ImageFolder.setParams),n.rpc.call("","rsparam_get",null,a,["additionalParams"])})}(window,document,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-3"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwidmFsdWUiLCJSaXNlVmlzaW9uIiwiSW1hZ2VGb2xkZXIiLCJnYWRnZXRzIiwiaW5pdCIsImlkIiwicHJlZnMiLCJnZXRTdHJpbmciLCJwYXJhbXMiLCJ3aWR0aCIsImdldEludCIsImhlaWdodCIsInN0b3JhZ2UiLCJTdG9yYWdlIiwicnBjIiwicmVnaXN0ZXIiLCJnZXRDb21wYW55SWQiLCJjYWxsIiwic2V0UGFyYW1zIiwibmFtZXMiLCJ2YWx1ZXMiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJKU09OIiwicGFyc2UiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJpbml0U2xpZGVyIiwidXJscyIsInNsaWRlciIsIlNsaWRlciIsInJlYWR5IiwiZG9uZSIsInBsYXkiLCJwYXVzZSIsInN0b3AiLCJQcmVmcyIsImFkZFNsaWRlcyIsImxpc3QiLCJxdWVyeVNlbGVjdG9yIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50Iiwic2xpZGVzIiwic2xpZGUiLCJpbWFnZSIsInBvc2l0aW9uIiwidG90YWxTbGlkZXMiLCJmb3JFYWNoIiwidXJsIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInNyYyIsInNjYWxlVG9GaXQiLCJhcHBlbmRDaGlsZCIsInB1c2giLCJoYW5kbGVVc2VyQWN0aXZpdHkiLCJpc1BhdXNlZCIsImNsZWFyVGltZW91dCIsInNsaWRlVGltZXIiLCJzZXRUaW1lb3V0IiwiYXBpIiwicmV2bmV4dCIsInJldnJlc3VtZSIsImhpZGVOYXYiLCJhdXRvSGlkZSIsIm5hdlRpbWVyIiwiJCIsImFkZENsYXNzIiwibmF2VGltZW91dCIsInJldm9sdXRpb24iLCJkZWxheSIsImR1cmF0aW9uIiwiaGlkZVRodW1icyIsImhpZGVUaW1lckJhciIsIm5hdmlnYXRpb25UeXBlIiwib25Ib3ZlclN0b3AiLCJzdGFydHdpZHRoIiwic3RhcnRoZWlnaHQiLCJiaW5kIiwicmV2cGF1c2UiLCJlIiwiZGF0YSIsImlzTGFzdFNsaWRlIiwic2xpZGVJbmRleCIsIm9uIiwicmVtb3ZlQ2xhc3MiLCJzb3J0Iiwic29ydERpcmVjdGlvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZXRhaWwiLCJjb21wYW55SWQiLCJmb2xkZXIiLCJvcmRlciIsImdvIiwibmFtZSIsIndpbmRvdyIsIm9uY29udGV4dG1lbnUiLCJib2R5Iiwib25tb3VzZWRvd24iLCJfZ2FxIiwiZ2EiLCJ0eXBlIiwiYXN5bmMiLCJsb2NhdGlvbiIsInByb3RvY29sIiwicyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSJdLCJtYXBwaW5ncyI6IkFBQXVCLG1CQUFaQSxXQUNUQSxRQUFRQyxPQUFPLG9DQUNaQyxTQUFTLGlCQUFrQix1REFDM0JBLFNBQVMsZ0JBQWlCLFNBRTdCRixRQUFRQyxPQUFPLG9EQUNaRSxNQUFNLGdCQUFpQix5RkFJNUIsSUFBSUMsWUFBYUEsY0FDakJBLFlBQVdDLGVBRVhELFdBQVdDLFlBQWMsU0FBV0MsR0FDbEMsWUFVQSxTQUFTQyxLQUNQLEdBQUlDLEdBQUtDLEVBQU1DLFVBQVUsS0FFekJDLEdBQU9DLE1BQVFILEVBQU1JLE9BQU8sT0FDNUJGLEVBQU9HLE9BQVNMLEVBQU1JLE9BQU8sT0FDN0JFLEVBQVUsR0FBSVgsWUFBV0MsWUFBWVcsUUFBUUwsR0FFN0NMLEVBQVFXLElBQUlDLFNBQVMsZUFBaUJWLEVBQUlPLEVBQVFJLGNBQ2xEYixFQUFRVyxJQUFJRyxLQUFLLEdBQUksY0FBZSxLQUFNWixFQUFJLGFBTWhELFFBQVNhLEdBQVVDLEVBQU9DLEdBQ3BCQyxNQUFNQyxRQUFRSCxJQUFVQSxFQUFNSSxPQUFTLEdBQWtCLHFCQUFiSixFQUFNLElBQ2hERSxNQUFNQyxRQUFRRixJQUFXQSxFQUFPRyxPQUFTLElBQzNDZixFQUFTZ0IsS0FBS0MsTUFBTUwsRUFBTyxJQUUz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ImZpbGUiOiJqcy93aWRnZXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaWYgKHR5cGVvZiBhbmd1bGFyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi5jb21tb24uaTE4bi5jb25maWdcIiwgW10pXG4gICAgLmNvbnN0YW50KFwiTE9DQUxFU19QUkVGSVhcIiwgXCJjb21wb25lbnRzL3J2LWNvbW1vbi1pMThuL2Rpc3QvbG9jYWxlcy90cmFuc2xhdGlvbl9cIilcbiAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1NVRklYXCIsIFwiLmpzb25cIik7XG5cbiAgYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLndpZGdldC5jb21tb24uc3RvcmFnZS1zZWxlY3Rvci5jb25maWdcIilcbiAgICAudmFsdWUoXCJTVE9SQUdFX01PREFMXCIsIFwiaHR0cDovL3N0b3JhZ2UucmlzZXZpc2lvbi5jb20vfnJ2aS9zdG9yYWdlLWNsaWVudC1ydmEtdGVzdC9zdG9yYWdlLW1vZGFsLmh0bWwjL2ZpbGVzL1wiKTtcbn1cblxuLyogZ2xvYmFsIGdhZGdldHMgKi9cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uSW1hZ2VGb2xkZXIgPSB7fTtcblxuUmlzZVZpc2lvbi5JbWFnZUZvbGRlciA9IChmdW5jdGlvbiAoZ2FkZ2V0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgcGFyYW1zLFxuICAgIHN0b3JhZ2UgPSBudWxsLFxuICAgIHNsaWRlciA9IG51bGwsXG4gICAgcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIGlkID0gcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIik7XG5cbiAgICBwYXJhbXMud2lkdGggPSBwcmVmcy5nZXRJbnQoXCJyc1dcIik7XG4gICAgcGFyYW1zLmhlaWdodCA9IHByZWZzLmdldEludChcInJzSFwiKTtcbiAgICBzdG9yYWdlID0gbmV3IFJpc2VWaXNpb24uSW1hZ2VGb2xkZXIuU3RvcmFnZShwYXJhbXMpO1xuXG4gICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc3BhcmFtX3NldF9cIiArIGlkLCBzdG9yYWdlLmdldENvbXBhbnlJZCk7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzcGFyYW1fZ2V0XCIsIG51bGwsIGlkLCBcImNvbXBhbnlJZFwiKTtcbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gc2V0UGFyYW1zKG5hbWVzLCB2YWx1ZXMpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lcykgJiYgbmFtZXMubGVuZ3RoID4gMCAmJiBuYW1lc1swXSA9PT0gXCJhZGRpdGlvbmFsUGFyYW1zXCIpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlcykgJiYgdmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcGFyYW1zID0gSlNPTi5wYXJzZSh2YWx1ZXNbMF0pO1xuXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGFpbmVyXCIpLnN0eWxlLmhlaWdodCA9IHByZWZzLmdldEludChcInJzSFwiKSArIFwicHhcIjtcbiAgICAgICAgaW5pdCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXRTbGlkZXIodXJscykge1xuICAgIGlmIChzbGlkZXIgPT09IG51bGwpIHtcbiAgICAgIHNsaWRlciA9IG5ldyBSaXNlVmlzaW9uLkltYWdlRm9sZGVyLlNsaWRlcihwYXJhbXMpO1xuICAgICAgc2xpZGVyLmluaXQodXJscyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZHkoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzZXZlbnRfcmVhZHlcIiwgbnVsbCwgcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIiksIHRydWUsXG4gICAgICB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRvbmUoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzZXZlbnRfZG9uZVwiLCBudWxsLCBwcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSk7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIHNsaWRlci5wbGF5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBzbGlkZXIucGF1c2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgcGF1c2UoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJyZWFkeVwiOiByZWFkeSxcbiAgICBcImRvbmVcIjogZG9uZSxcbiAgICBcInBsYXlcIjogcGxheSxcbiAgICBcInBhdXNlXCI6IHBhdXNlLFxuICAgIFwic3RvcFwiOiBzdG9wLFxuICAgIFwic2V0UGFyYW1zXCI6IHNldFBhcmFtcyxcbiAgICBcImluaXRTbGlkZXJcIjogaW5pdFNsaWRlclxuICB9O1xufSkoZ2FkZ2V0cyk7XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uSW1hZ2VGb2xkZXIgPSBSaXNlVmlzaW9uLkltYWdlRm9sZGVyIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkltYWdlRm9sZGVyLlNsaWRlciA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHRvdGFsU2xpZGVzID0gMCxcbiAgICBhcGkgPSBudWxsLFxuICAgIG5hdlRpbWVyID0gbnVsbCxcbiAgICBzbGlkZVRpbWVyID0gbnVsbCxcbiAgICBpc0xhc3RTbGlkZSA9IGZhbHNlLFxuICAgIGlzUGF1c2VkID0gZmFsc2UsXG4gICAgbmF2VGltZW91dCA9IDMwMDA7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gYWRkU2xpZGVzKHVybHMpIHtcbiAgICB2YXIgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHAtYmFubmVyIHVsXCIpLFxuICAgICAgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG4gICAgICBzbGlkZXMgPSBbXSxcbiAgICAgIHNsaWRlID0gbnVsbCxcbiAgICAgIGltYWdlID0gbnVsbCxcbiAgICAgIHBvc2l0aW9uID0gXCJcIjtcblxuICAgIHRvdGFsU2xpZGVzID0gdXJscy5sZW5ndGg7XG5cbiAgICB1cmxzLmZvckVhY2goZnVuY3Rpb24odXJsKSB7XG4gICAgICBzbGlkZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICAgIGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcblxuICAgICAgLy8gVHJhbnNpdGlvblxuICAgICAgc2xpZGUuc2V0QXR0cmlidXRlKFwiZGF0YS10cmFuc2l0aW9uXCIsIFwiZmFkZVwiKTtcbiAgICAgIHNsaWRlLnNldEF0dHJpYnV0ZShcImRhdGEtbWFzdGVyc3BlZWRcIiwgNTAwKTtcblxuICAgICAgaW1hZ2Uuc3JjID0gdXJsO1xuXG4gICAgICAvLyBBbGlnbm1lbnRcbiAgICAgIHN3aXRjaCAocGFyYW1zLnBvc2l0aW9uKSB7XG4gICAgICAgIGNhc2UgXCJ0b3AtbGVmdFwiOlxuICAgICAgICAgIHBvc2l0aW9uID0gXCJsZWZ0IHRvcFwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwidG9wLWNlbnRlclwiOlxuICAgICAgICAgIHBvc2l0aW9uID0gXCJjZW50ZXIgdG9wXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ0b3AtcmlnaHRcIjpcbiAgICAgICAgICBwb3NpdGlvbiA9IFwicmlnaHQgdG9wXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJtaWRkbGUtbGVmdFwiOlxuICAgICAgICAgIHBvc2l0aW9uID0gXCJsZWZ0IGNlbnRlclwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibWlkZGxlLWNlbnRlclwiOlxuICAgICAgICAgIHBvc2l0aW9uID0gXCJjZW50ZXIgY2VudGVyXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJtaWRkbGUtcmlnaHRcIjpcbiAgICAgICAgICBwb3NpdGlvbiA9IFwicmlnaHQgY2VudGVyXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJib3R0b20tbGVmdFwiOlxuICAgICAgICAgIHBvc2l0aW9uID0gXCJsZWZ0IGJvdHRvbVwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYm90dG9tLWNlbnRlclwiOlxuICAgICAgICAgIHBvc2l0aW9uID0gXCJjZW50ZXIgYm90dG9tXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJib3R0b20tcmlnaHRcIjpcbiAgICAgICAgICBwb3NpdGlvbiA9IFwicmlnaHQgYm90dG9tXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcG9zaXRpb24gPSBcImxlZnQgdG9wXCI7XG4gICAgICB9XG5cbiAgICAgIGltYWdlLnNldEF0dHJpYnV0ZShcImRhdGEtYmdwb3NpdGlvblwiLCBwb3NpdGlvbik7XG5cbiAgICAgIC8vIFNjYWxlIHRvIEZpdFxuICAgICAgaWYgKHBhcmFtcy5zY2FsZVRvRml0KSB7XG4gICAgICAgIGltYWdlLnNldEF0dHJpYnV0ZShcImRhdGEtYmdmaXRcIiwgXCJjb250YWluXCIpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGltYWdlLnNldEF0dHJpYnV0ZShcImRhdGEtYmdmaXRcIiwgXCJub3JtYWxcIik7XG4gICAgICB9XG5cbiAgICAgIHNsaWRlLmFwcGVuZENoaWxkKGltYWdlKTtcbiAgICAgIHNsaWRlcy5wdXNoKHNsaWRlKTtcbiAgICB9KTtcblxuICAgIHNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uKHNsaWRlKSB7XG4gICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChzbGlkZSk7XG4gICAgfSk7XG5cbiAgICBsaXN0LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgfVxuXG4gIC8vIFVzZXIgaGFzIGludGVyYWN0ZWQgd2l0aCB0aGUgc2xpZGVzaG93LlxuICBmdW5jdGlvbiBoYW5kbGVVc2VyQWN0aXZpdHkoKSB7XG4gICAgaXNQYXVzZWQgPSB0cnVlO1xuICAgIGNsZWFyVGltZW91dChzbGlkZVRpbWVyKTtcblxuICAgIC8vIE1vdmUgdG8gbmV4dCBzbGlkZSBhbmQgcmVzdW1lIHRoZSBzbGlkZXNob3cgYWZ0ZXIgYSBkZWxheS5cbiAgICBzbGlkZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGlzUGF1c2VkID0gZmFsc2U7XG4gICAgICBhcGkucmV2bmV4dCgpO1xuICAgICAgYXBpLnJldnJlc3VtZSgpO1xuICAgIH0sIHBhcmFtcy5wYXVzZSAqIDEwMDApO1xuXG4gICAgaGlkZU5hdigpO1xuICB9XG5cbiAgLy8gSGlkZSB0aGUgbmF2aWdhdGlvbiBhZnRlciBhIGRlbGF5LlxuICBmdW5jdGlvbiBoaWRlTmF2KCkge1xuICAgIGlmIChwYXJhbXMuYXV0b0hpZGUpIHtcbiAgICAgIGNsZWFyVGltZW91dChuYXZUaW1lcik7XG5cbiAgICAgIG5hdlRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgJChcIi50cC1sZWZ0YXJyb3csIC50cC1yaWdodGFycm93XCIpLmFkZENsYXNzKFwiaGlkZWFycm93c1wiKTtcbiAgICAgIH0sIG5hdlRpbWVvdXQpO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaW5pdCh1cmxzKSB7XG4gICAgYWRkU2xpZGVzKHVybHMpO1xuXG4gICAgYXBpID0gJChcIi50cC1iYW5uZXJcIikucmV2b2x1dGlvbih7XG4gICAgICBcImRlbGF5XCI6IHBhcmFtcy5kdXJhdGlvbiAqIDEwMDAsXG4gICAgICBcImhpZGVUaHVtYnNcIjogMCxcbiAgICAgIFwiaGlkZVRpbWVyQmFyXCI6IFwib25cIixcbiAgICAgIFwibmF2aWdhdGlvblR5cGVcIjogXCJub25lXCIsXG4gICAgICBcIm9uSG92ZXJTdG9wXCI6IFwib2ZmXCIsXG4gICAgICBcInN0YXJ0d2lkdGhcIjogcGFyYW1zLndpZHRoLFxuICAgICAgXCJzdGFydGhlaWdodFwiOiBwYXJhbXMuaGVpZ2h0XG4gICAgfSk7XG5cbiAgICBhcGkuYmluZChcInJldm9sdXRpb24uc2xpZGUub25sb2FkZWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAvLyBQYXVzZSBzbGlkZXNob3cgc2luY2UgaXQgd2lsbCBhdXRvcGxheSBhbmQgdGhpcyBpcyBub3QgY29uZmlndXJhYmxlLlxuICAgICAgYXBpLnJldnBhdXNlKCk7XG4gICAgICBSaXNlVmlzaW9uLkltYWdlRm9sZGVyLnJlYWR5KCk7XG4gICAgfSk7XG5cbiAgICBhcGkuYmluZChcInJldm9sdXRpb24uc2xpZGUub25jaGFuZ2VcIiwgZnVuY3Rpb24gKGUsIGRhdGEpIHtcbiAgICAgIGlmIChpc1BhdXNlZCkge1xuICAgICAgICBhcGkucmV2cGF1c2UoKTtcbiAgICAgIH1cbiAgICAgIC8vIERvbid0IGNhbGwgXCJkb25lXCIgaWYgdXNlciBpcyBpbnRlcmFjdGluZyB3aXRoIHRoZSBzbGlkZXNob3cuXG4gICAgICBlbHNlIHtcbiAgICAgICAgaWYgKGlzTGFzdFNsaWRlKSB7XG4gICAgICAgICAgaXNMYXN0U2xpZGUgPSBmYWxzZTtcbiAgICAgICAgICBhcGkucmV2cGF1c2UoKTtcbiAgICAgICAgICBSaXNlVmlzaW9uLkltYWdlRm9sZGVyLmRvbmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YS5zbGlkZUluZGV4ID09PSB0b3RhbFNsaWRlcykge1xuICAgICAgICBpc0xhc3RTbGlkZSA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBTd2lwZSB0aGUgc2xpZGVyLlxuICAgICQoXCJib2R5XCIpLm9uKFwidG91Y2hlbmRcIiwgXCIudHAtYmFubmVyXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgaGFuZGxlVXNlckFjdGl2aXR5KCk7XG4gICAgICAkKFwiLnRwLWxlZnRhcnJvdywgLnRwLXJpZ2h0YXJyb3dcIikucmVtb3ZlQ2xhc3MoXCJoaWRlYXJyb3dzXCIpO1xuICAgIH0pO1xuXG4gICAgLy8gVG91Y2ggdGhlIG5hdmlnYXRpb24gYXJyb3dzLlxuICAgICQoXCJib2R5XCIpLm9uKFwidG91Y2hlbmRcIiwgXCIudHAtbGVmdGFycm93LCAudHAtcmlnaHRhcnJvd1wiLCBmdW5jdGlvbigpIHtcbiAgICAgIGhhbmRsZVVzZXJBY3Rpdml0eSgpO1xuICAgIH0pO1xuXG4gICAgaGlkZU5hdigpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBpZiAoYXBpKSB7XG4gICAgICBhcGkucmV2cmVzdW1lKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgaWYgKGFwaSkge1xuICAgICAgYXBpLnJldnBhdXNlKCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImluaXRcIjogaW5pdCxcbiAgICBcInBsYXlcIjogcGxheSxcbiAgICBcInBhdXNlXCI6IHBhdXNlXG4gIH07XG59O1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkltYWdlRm9sZGVyID0gUmlzZVZpc2lvbi5JbWFnZUZvbGRlciB8fCB7fTtcblxuUmlzZVZpc2lvbi5JbWFnZUZvbGRlci5TdG9yYWdlID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgY29tcGFueUlkID0gXCJcIjtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBzdG9yYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInJpc2Utc3RvcmFnZVwiKSxcbiAgICAgIHNvcnQgPSBcIlwiLFxuICAgICAgc29ydERpcmVjdGlvbiA9IFwiXCI7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtcmVzcG9uc2VcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgUmlzZVZpc2lvbi5JbWFnZUZvbGRlci5pbml0U2xpZGVyKGUuZGV0YWlsKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiY29tcGFueUlkXCIsIGNvbXBhbnlJZCk7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmb2xkZXJcIiwgcGFyYW1zLnN0b3JhZ2UuZm9sZGVyKTtcblxuICAgIC8vIFNvcnRpbmdcbiAgICBzd2l0Y2ggKHBhcmFtcy5vcmRlcikge1xuICAgICAgY2FzZSBcImFscGhhLWFzY1wiOlxuICAgICAgICBzb3J0ID0gXCJuYW1lXCI7XG4gICAgICAgIHNvcnREaXJlY3Rpb24gPSBcImFzY1wiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJhbHBoYS1kZXNjXCI6XG4gICAgICAgIHNvcnQgPSBcIm5hbWVcIjtcbiAgICAgICAgc29ydERpcmVjdGlvbiA9IFwiZGVzY1wiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJkYXRlLWFzY1wiOlxuICAgICAgICBzb3J0ID0gXCJkYXRlXCI7XG4gICAgICAgIHNvcnREaXJlY3Rpb24gPSBcImFzY1wiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJkYXRlLWRlc2NcIjpcbiAgICAgICAgc29ydCA9IFwiZGF0ZVwiO1xuICAgICAgICBzb3J0RGlyZWN0aW9uID0gXCJkZXNjXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInJhbmRvbVwiOlxuICAgICAgICBzb3J0ID0gXCJyYW5kb21cIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBzb3J0ID0gXCJuYW1lXCI7XG4gICAgICAgIHNvcnREaXJlY3Rpb24gPSBcImFzY1wiO1xuICAgIH1cblxuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwic29ydFwiLCBzb3J0KTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcInNvcnREaXJlY3Rpb25cIiwgc29ydERpcmVjdGlvbik7XG4gICAgc3RvcmFnZS5nbygpO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBnZXRDb21wYW55SWQobmFtZSwgdmFsdWUpIHtcbiAgICBpZiAobmFtZSA9PT0gXCJjb21wYW55SWRcIikge1xuICAgICAgY29tcGFueUlkID0gdmFsdWU7XG4gICAgICBpbml0KCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImdldENvbXBhbnlJZFwiOiBnZXRDb21wYW55SWRcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBSaXNlVmlzaW9uLCBnYWRnZXRzICovXG4oZnVuY3Rpb24gKHdpbmRvdywgZG9jdW1lbnQsIGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIGlkID0gbmV3IGdhZGdldHMuUHJlZnMoKS5nZXRTdHJpbmcoXCJpZFwiKTtcblxuICB3aW5kb3cub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgZG9jdW1lbnQuYm9keS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIFJpc2VWaXNpb24uSW1hZ2VGb2xkZXIucGxheSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgUmlzZVZpc2lvbi5JbWFnZUZvbGRlci5wYXVzZSgpO1xuICB9XG5cbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9wbGF5X1wiICsgaWQsIHBsYXkpO1xuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGF1c2VfXCIgKyBpZCwgcGF1c2UpO1xuXG4gICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc3BhcmFtX3NldF9cIiArIGlkLCBSaXNlVmlzaW9uLkltYWdlRm9sZGVyLnNldFBhcmFtcyk7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzcGFyYW1fZ2V0XCIsIG51bGwsIGlkLCBbXCJhZGRpdGlvbmFsUGFyYW1zXCJdKTtcbiAgfSk7XG59KSh3aW5kb3csIGRvY3VtZW50LCBnYWRnZXRzKTtcblxuLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xudmFyIF9nYXEgPSBfZ2FxIHx8IFtdO1xuXG5fZ2FxLnB1c2goWydfc2V0QWNjb3VudCcsICdVQS01NzA5MjE1OS0zJ10pO1xuX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7XG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIGdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IGdhLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgZ2EuYXN5bmMgPSB0cnVlO1xuICBnYS5zcmMgPSAoJ2h0dHBzOicgPT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyAnaHR0cHM6Ly9zc2wnIDogJ2h0dHA6Ly93d3cnKSArICcuZ29vZ2xlLWFuYWx5dGljcy5jb20vZ2EuanMnO1xuICB2YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTsgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnYSwgcyk7XG59KSgpO1xuLyoganNoaW50IGlnbm9yZTplbmQgKi9cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==