angular.module("pascalprecht.translate",["ng"]).run(["$translate",function(e){var t=e.storageKey(),n=e.storage(),a=function(){var a=e.preferredLanguage();angular.isString(a)?e.use(a):n.put(t,e.use())};n?n.get(t)?e.use(n.get(t))["catch"](a):a():angular.isString(e.preferredLanguage())&&e.use(e.preferredLanguage())}]),angular.module("pascalprecht.translate").provider("$translate",["$STORAGE_KEY",function(e){var t,n,a,i,r,o,l,s,c,u,d,p,g,f,m,h={},v=[],b=e,y=[],$=!1,w="translate-cloak",k=!1,x=".",D="2.5.2",C=function(){var e,t,n=window.navigator,a=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(n.languages))for(e=0;e<n.languages.length;e++)if(t=n.languages[e],t&&t.length)return t;for(e=0;e<a.length;e++)if(t=n[a[e]],t&&t.length)return t;return null};C.displayName="angular-translate/service: getFirstBrowserLanguage";var T=function(){return(C()||"").split("-").join("_")};T.displayName="angular-translate/service: getLocale";var E=function(e,t){for(var n=0,a=e.length;a>n;n++)if(e[n]===t)return n;return-1},S=function(){return this.replace(/^\s+|\s+$/g,"")},M=function(e){for(var t=[],a=angular.lowercase(e),i=0,r=v.length;r>i;i++)t.push(angular.lowercase(v[i]));if(E(t,a)>-1)return e;if(n){var o;for(var l in n){var s=!1,c=Object.prototype.hasOwnProperty.call(n,l)&&angular.lowercase(l)===angular.lowercase(e);if("*"===l.slice(-1)&&(s=l.slice(0,-1)===e.slice(0,l.length-1)),(c||s)&&(o=n[l],E(t,angular.lowercase(o))>-1))return o}}var u=e.split("_");return u.length>1&&E(t,angular.lowercase(u[0]))>-1?u[0]:e},O=function(e,t){if(!e&&!t)return h;if(e&&!t){if(angular.isString(e))return h[e]}else angular.isObject(h[e])||(h[e]={}),angular.extend(h[e],P(t));return this};this.translations=O,this.cloakClassName=function(e){return e?(w=e,this):w};var P=function(e,t,n,a){var i,r,o,l;t||(t=[]),n||(n={});for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(l=e[i],angular.isObject(l)?P(l,t.concat(i),n,i):(r=t.length?""+t.join(x)+x+i:i,t.length&&i===a&&(o=""+t.join(x),n[o]="@:"+r),n[r]=l));return n};this.addInterpolation=function(e){return y.push(e),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(e){return u=e,this},this.useSanitizeValueStrategy=function(e){return $=e,this},this.preferredLanguage=function(e){return A(e),this};var A=function(e){return e&&(t=e),t};this.translationNotFoundIndicator=function(e){return this.translationNotFoundIndicatorLeft(e),this.translationNotFoundIndicatorRight(e),this},this.translationNotFoundIndicatorLeft=function(e){return e?(g=e,this):g},this.translationNotFoundIndicatorRight=function(e){return e?(f=e,this):f},this.fallbackLanguage=function(e){return I(e),this};var I=function(e){return e?(angular.isString(e)?(i=!0,a=[e]):angular.isArray(e)&&(i=!1,a=e),angular.isString(t)&&E(a,t)<0&&a.push(t),this):i?a[0]:a};this.use=function(e){if(e){if(!h[e]&&!d)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+e+"'");return r=e,this}return r};var L=function(e){return e?(b=e,void 0):s?s+b:b};this.storageKey=L,this.useUrlLoader=function(e,t){return this.useLoader("$translateUrlLoader",angular.extend({url:e},t))},this.useStaticFilesLoader=function(e){return this.useLoader("$translateStaticFilesLoader",e)},this.useLoader=function(e,t){return d=e,p=t||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(e){return l=e,this},this.storagePrefix=function(e){return e?(s=e,this):e},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(e){return c=e,this},this.usePostCompiling=function(e){return k=!!e,this},this.determinePreferredLanguage=function(e){var n=e&&angular.isFunction(e)?e():T();return t=v.length?M(n):n,this},this.registerAvailableLanguageKeys=function(e,t){return e?(v=e,t&&(n=t),this):v},this.useLoaderCache=function(e){return e===!1?m=void 0:e===!0?m=!0:"undefined"==typeof e?m="$translationCache":e&&(m=e),this},this.$get=["$log","$injector","$rootScope","$q",function(e,n,s,v){var x,C,T,V=n.get(u||"$translateDefaultInterpolation"),_=!1,F={},U={},j=function(e,n,i){if(angular.isArray(e)){var o=function(e){for(var t={},a=[],r=function(e){var a=v.defer(),r=function(n){t[e]=n,a.resolve([e,n])};return j(e,n,i).then(r,r),a.promise},o=0,l=e.length;l>o;o++)a.push(r(e[o]));return v.all(a).then(function(){return t})};return o(e)}var s=v.defer();e&&(e=S.apply(e));var c=function(){var e=t?U[t]:U[r];if(C=0,l&&!e){var n=x.get(b);if(e=U[n],a&&a.length){var i=E(a,n);C=0===i?1:0,E(a,t)<0&&a.push(t)}}return e}();return c?c.then(function(){X(e,n,i).then(s.resolve,s.reject)},s.reject):X(e,n,i).then(s.resolve,s.reject),s.promise},q=function(e){return g&&(e=[g,e].join(" ")),f&&(e=[e,f].join(" ")),e},R=function(e){r=e,s.$emit("$translateChangeSuccess",{language:e}),l&&x.put(j.storageKey(),r),V.setLocale(r),angular.forEach(F,function(e,t){F[t].setLocale(r)}),s.$emit("$translateChangeEnd",{language:e})},H=function(e){if(!e)throw"No language key specified for loading.";var t=v.defer();s.$emit("$translateLoadingStart",{language:e}),_=!0;var a=m;"string"==typeof a&&(a=n.get(a));var i=angular.extend({},p,{key:e,$http:angular.extend({},{cache:a},p.$http)});return n.get(d)(i).then(function(n){var a={};s.$emit("$translateLoadingSuccess",{language:e}),angular.isArray(n)?angular.forEach(n,function(e){angular.extend(a,P(e))}):angular.extend(a,P(n)),_=!1,t.resolve({key:e,table:a}),s.$emit("$translateLoadingEnd",{language:e})},function(e){s.$emit("$translateLoadingError",{language:e}),t.reject(e),s.$emit("$translateLoadingEnd",{language:e})}),t.promise};if(l&&(x=n.get(l),!x.get||!x.put))throw new Error("Couldn't use storage '"+l+"', missing get() or put() method!");angular.isFunction(V.useSanitizeValueStrategy)&&V.useSanitizeValueStrategy($),y.length&&angular.forEach(y,function(e){var a=n.get(e);a.setLocale(t||r),angular.isFunction(a.useSanitizeValueStrategy)&&a.useSanitizeValueStrategy($),F[a.getInterpolationIdentifier()]=a});var N=function(e){var t=v.defer();return Object.prototype.hasOwnProperty.call(h,e)?t.resolve(h[e]):U[e]?U[e].then(function(e){O(e.key,e.table),t.resolve(e.table)},t.reject):t.reject(),t.promise},B=function(e,t,n,a){var i=v.defer();return N(e).then(function(o){Object.prototype.hasOwnProperty.call(o,t)?(a.setLocale(e),i.resolve(a.interpolate(o[t],n)),a.setLocale(r)):i.reject()},i.reject),i.promise},z=function(e,t,n,a){var i,o=h[e];return o&&Object.prototype.hasOwnProperty.call(o,t)&&(a.setLocale(e),i=a.interpolate(o[t],n),a.setLocale(r)),i},Y=function(e){if(c){var t=n.get(c)(e,r);return void 0!==t?t:e}return e},G=function(e,t,n,i){var r=v.defer();if(e<a.length){var o=a[e];B(o,t,n,i).then(r.resolve,function(){G(e+1,t,n,i).then(r.resolve)})}else r.resolve(Y(t));return r.promise},W=function(e,t,n,i){var r;if(e<a.length){var o=a[e];r=z(o,t,n,i),r||(r=W(e+1,t,n,i))}return r},K=function(e,t,n){return G(T>0?T:C,e,t,n)},J=function(e,t,n){return W(T>0?T:C,e,t,n)},X=function(e,t,n){var i=v.defer(),o=r?h[r]:h,l=n?F[n]:V;if(o&&Object.prototype.hasOwnProperty.call(o,e)){var s=o[e];"@:"===s.substr(0,2)?j(s.substr(2),t,n).then(i.resolve,i.reject):i.resolve(l.interpolate(s,t))}else{var u;c&&!_&&(u=Y(e)),r&&a&&a.length?K(e,t,l).then(function(e){i.resolve(e)},function(e){i.reject(q(e))}):c&&!_&&u?i.resolve(u):i.reject(q(e))}return i.promise},Z=function(e,t,n){var i,o=r?h[r]:h,l=n?F[n]:V;if(o&&Object.prototype.hasOwnProperty.call(o,e)){var s=o[e];i="@:"===s.substr(0,2)?Z(s.substr(2),t,n):l.interpolate(s,t)}else{var u;c&&!_&&(u=Y(e)),r&&a&&a.length?(C=0,i=J(e,t,l)):i=c&&!_&&u?u:q(e)}return i};if(j.preferredLanguage=function(e){return e&&A(e),t},j.cloakClassName=function(){return w},j.fallbackLanguage=function(e){if(void 0!==e&&null!==e){if(I(e),d&&a&&a.length)for(var t=0,n=a.length;n>t;t++)U[a[t]]||(U[a[t]]=H(a[t]));j.use(j.use())}return i?a[0]:a},j.useFallbackLanguage=function(e){if(void 0!==e&&null!==e)if(e){var t=E(a,e);t>-1&&(T=t)}else T=0},j.proposedLanguage=function(){return o},j.storage=function(){return x},j.use=function(e){if(!e)return r;var t=v.defer();s.$emit("$translateChangeStart",{language:e});var n=M(e);return n&&(e=n),h[e]||!d||U[e]?(t.resolve(e),R(e)):(o=e,U[e]=H(e).then(function(n){return O(n.key,n.table),t.resolve(n.key),R(n.key),o===e&&(o=void 0),n},function(e){o===e&&(o=void 0),s.$emit("$translateChangeError",{language:e}),t.reject(e),s.$emit("$translateChangeEnd",{language:e})})),t.promise},j.storageKey=function(){return L()},j.isPostCompilingEnabled=function(){return k},j.refresh=function(e){function t(){i.resolve(),s.$emit("$translateRefreshEnd",{language:e})}function n(){i.reject(),s.$emit("$translateRefreshEnd",{language:e})}if(!d)throw new Error("Couldn't refresh translation table, no loader registered!");var i=v.defer();if(s.$emit("$translateRefreshStart",{language:e}),e)h[e]?H(e).then(function(n){O(n.key,n.table),e===r&&R(r),t()},n):n();else{var o=[],l={};if(a&&a.length)for(var c=0,u=a.length;u>c;c++)o.push(H(a[c])),l[a[c]]=!0;r&&!l[r]&&o.push(H(r)),v.all(o).then(function(e){angular.forEach(e,function(e){h[e.key]&&delete h[e.key],O(e.key,e.table)}),r&&R(r),t()})}return i.promise},j.instant=function(e,n,i){if(null===e||angular.isUndefined(e))return e;if(angular.isArray(e)){for(var o={},l=0,s=e.length;s>l;l++)o[e[l]]=j.instant(e[l],n,i);return o}if(angular.isString(e)&&e.length<1)return e;e&&(e=S.apply(e));var u,d=[];t&&d.push(t),r&&d.push(r),a&&a.length&&(d=d.concat(a));for(var p=0,g=d.length;g>p;p++){var f=d[p];if(h[f]&&"undefined"!=typeof h[f][e]&&(u=Z(e,n,i)),"undefined"!=typeof u)break}return u||""===u||(u=V.interpolate(e,n),c&&!_&&(u=Y(e))),u},j.versionInfo=function(){return D},j.loaderCache=function(){return m},d&&(angular.equals(h,{})&&j.use(j.use()),a&&a.length))for(var Q=function(e){return O(e.key,e.table),s.$emit("$translateChangeEnd",{language:e.key}),e},et=0,tt=a.length;tt>et;et++)U[a[et]]=H(a[et]).then(Q);return j}]}]),angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",["$interpolate",function(e){var t,n={},a="default",i=null,r={escaped:function(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=angular.element("<div></div>").text(e[n]).html());return t}},o=function(e){var t;return t=angular.isFunction(r[i])?r[i](e):e};return n.setLocale=function(e){t=e},n.getInterpolationIdentifier=function(){return a},n.useSanitizeValueStrategy=function(e){return i=e,this},n.interpolate=function(t,n){return i&&(n=o(n)),e(t)(n||{})},n}]),angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",["$translate","$q","$interpolate","$compile","$parse","$rootScope",function(e,t,n,a,i,r){return{restrict:"AE",scope:!0,compile:function(t,o){var l=o.translateValues?o.translateValues:void 0,s=o.translateInterpolation?o.translateInterpolation:void 0,c=t[0].outerHTML.match(/translate-value-+/i),u="^(.*)("+n.startSymbol()+".*"+n.endSymbol()+")(.*)",d="^(.*)"+n.startSymbol()+"(.*)"+n.endSymbol()+"(.*)";return function(t,p,g){t.interpolateParams={},t.preText="",t.postText="";var f={},m=function(e){if(angular.equals(e,"")||!angular.isDefined(e)){var a=p.text().match(u);angular.isArray(a)?(t.preText=a[1],t.postText=a[3],f.translate=n(a[2])(t.$parent),watcherMatches=p.text().match(d),angular.isArray(watcherMatches)&&watcherMatches[2]&&watcherMatches[2].length&&t.$watch(watcherMatches[2],function(e){f.translate=e,$()})):f.translate=p.text().replace(/^\s+|\s+$/g,"")}else f.translate=e;$()},h=function(e){g.$observe(e,function(t){f[e]=t,$()})};g.$observe("translate",function(e){m(e)});for(var v in g)g.hasOwnProperty(v)&&"translateAttr"===v.substr(0,13)&&h(v);if(g.$observe("translateDefault",function(e){t.defaultText=e}),l&&g.$observe("translateValues",function(e){e&&t.$parent.$watch(function(){angular.extend(t.interpolateParams,i(e)(t.$parent))})}),c){var b=function(e){g.$observe(e,function(n){var a=angular.lowercase(e.substr(14,1))+e.substr(15);t.interpolateParams[a]=n})};for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&"translateValue"===y.substr(0,14)&&"translateValues"!==y&&b(y)}var $=function(){for(var e in f)f.hasOwnProperty(e)&&f[e]&&w(e,f[e],t,t.interpolateParams)},w=function(t,n,a,i){e(n,i,s).then(function(e){k(e,a,!0,t)},function(e){k(e,a,!1,t)})},k=function(t,n,i,r){if("translate"===r){i||"undefined"==typeof n.defaultText||(t=n.defaultText),p.html(n.preText+t+n.postText);var l=e.isPostCompilingEnabled(),s="undefined"!=typeof o.translateCompile,c=s&&"false"!==o.translateCompile;(l&&!s||c)&&a(p.contents())(n)}else{i||"undefined"==typeof n.defaultText||(t=n.defaultText);var u=g.$attr[r].substr(15);p.attr(u,t)}};t.$watch("interpolateParams",$,!0);var x=r.$on("$translateChangeSuccess",$);p.text().length&&m(""),$(),t.$on("$destroy",x)}}}}]),angular.module("pascalprecht.translate").directive("translateCloak",["$rootScope","$translate",function(e,t){return{compile:function(n){var a=function(){n.addClass(t.cloakClassName())},i=function(){n.removeClass(t.cloakClassName())},r=e.$on("$translateChangeEnd",function(){i(),r(),r=null});return a(),function(e,n,r){r.translateCloak&&r.translateCloak.length&&r.$observe("translateCloak",function(e){t(e).then(i,a)})}}}}]),angular.module("pascalprecht.translate").filter("translate",["$parse","$translate",function(e,t){var n=function(n,a,i){return angular.isObject(a)||(a=e(a)(this)),t.instant(n,a,i)};return n.$stateful=!0,n}]),angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",["$q","$http",function(e,t){return function(n){if(!n||!angular.isString(n.prefix)||!angular.isString(n.suffix))throw new Error("Couldn't load static files, no prefix or suffix specified!");var a=e.defer();return t(angular.extend({url:[n.prefix,n.key,n.suffix].join(""),method:"GET",params:""},n.$http)).success(function(e){a.resolve(e)}).error(function(){a.reject(n.key)}),a.promise}}]),angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",["$q","$http",function(e,t){function n(e,a){t(angular.extend({url:[e.prefix,e.key.toLowerCase(),e.suffix].join(""),method:"GET",params:""},e.$http)).success(function(e){a.resolve(e)}).error(function(){if(e.key.indexOf("_")>=0){var t=e.key.substr(0,e.key.lastIndexOf("_")),i=angular.extend({},e,{key:t});n(i,a)}else a.resolve("{}")})}return function(t){if(!t||!angular.isString(t.prefix)||!angular.isString(t.suffix))throw new Error('Couldn"t load static files, no prefix or suffix specified!');var a=e.defer();return n(t,a),a.promise}}]),angular.module("risevision.common.i18n",["pascalprecht.translate","risevision.common.i18n.config"]).config(["$translateProvider","LOCALES_PREFIX","LOCALES_SUFIX",function(e,t,n){e.useStaticFilesLoader({prefix:t,suffix:n}),e.determinePreferredLanguage().fallbackLanguage("en")}]),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,t,n){function a(e){for(var t in e)if(void 0!==r.style[t])return e[t]}var i=function(a,r,o){o=o||{};var l=e.defer(),s=i[o.animation?"animationEndEventName":"transitionEndEventName"],c=function(){n.$apply(function(){a.unbind(s,c),l.resolve(a)})};return s&&a.bind(s,c),t(function(){angular.isString(r)?a.addClass(r):angular.isFunction(r)?r(a):angular.isObject(r)&&a.css(r),s||l.resolve(a)}),l.promise.cancel=function(){s&&a.unbind(s,c),l.reject("Transition cancelled")},l.promise},r=document.createElement("trans"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},l={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return i.transitionEndEventName=a(o),i.animationEndEventName=a(l),i}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(e){return{link:function(t,n,a){function i(t){function a(){c===i&&(c=void 0)}var i=e(n,t);return c&&c.cancel(),c=i,i.then(a,a),i}function r(){u?(u=!1,o()):(n.removeClass("collapse").addClass("collapsing"),i({height:n[0].scrollHeight+"px"}).then(o))}function o(){n.removeClass("collapsing"),n.addClass("collapse in"),n.css({height:"auto"})}function l(){if(u)u=!1,s(),n.css({height:0});else{n.css({height:n[0].scrollHeight+"px"});{n[0].offsetWidth}n.removeClass("collapse in").addClass("collapsing"),i({height:0}).then(s)}}function s(){n.removeClass("collapsing"),n.addClass("collapse")}var c,u=!0;t.$watch(a.collapse,function(e){e?l():r()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,t,n){this.groups=[],this.closeOthers=function(a){var i=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):n.closeOthers;i&&angular.forEach(this.groups,function(e){e!==a&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,n,a){a.addGroup(e),e.$watch("isOpen",function(t){t&&a.closeOthers(e)}),e.toggleOpen=function(){e.isDisabled||(e.isOpen=!e.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(e,t,n,a,i){a.setHeading(i(e,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(e,t,n,a){e.$watch(function(){return a[n.accordionTransclude]},function(e){e&&(t.html(""),t.append(e))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(e,t){e.closeable="close"in t}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(e,t,n){t.addClass("ng-binding").data("$binding",n.bindHtmlUnsafe),e.$watch(n.bindHtmlUnsafe,function(e){t.html(e||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,t,n,a){var i=a[0],r=a[1];r.$render=function(){t.toggleClass(i.activeClass,angular.equals(r.$modelValue,e.$eval(n.btnRadio)))},t.bind(i.toggleEvent,function(){var a=t.hasClass(i.activeClass);(!a||angular.isDefined(n.uncheckable))&&e.$apply(function(){r.$setViewValue(a?null:e.$eval(n.btnRadio)),r.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(e,t,n,a){function i(){return o(n.btnCheckboxTrue,!0)}function r(){return o(n.btnCheckboxFalse,!1)}function o(t,n){var a=e.$eval(t);return angular.isDefined(a)?a:n}var l=a[0],s=a[1];s.$render=function(){t.toggleClass(l.activeClass,angular.equals(s.$modelValue,i()))},t.bind(l.toggleEvent,function(){e.$apply(function(){s.$setViewValue(t.hasClass(l.activeClass)?r():i()),s.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition",function(e,t,n){function a(){i();var n=+e.interval;!isNaN(n)&&n>=0&&(o=t(r,n))}function i(){o&&(t.cancel(o),o=null)}function r(){l?(e.next(),a()):e.pause()}var o,l,s=this,c=s.slides=e.slides=[],u=-1;s.currentSlide=null;var d=!1;s.select=e.select=function(i,r){function o(){if(!d){if(s.currentSlide&&angular.isString(r)&&!e.noTransition&&i.$element){i.$element.addClass(r);{i.$element[0].offsetWidth}angular.forEach(c,function(e){angular.extend(e,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(i,{direction:r,active:!0,entering:!0}),angular.extend(s.currentSlide||{},{direction:r,leaving:!0}),e.$currentTransition=n(i.$element,{}),function(t,n){e.$currentTransition.then(function(){l(t,n)},function(){l(t,n)})}(i,s.currentSlide)}else l(i,s.currentSlide);s.currentSlide=i,u=p,a()}}function l(t,n){angular.extend(t,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(n||{},{direction:"",active:!1,leaving:!1,entering:!1}),e.$currentTransition=null}var p=c.indexOf(i);void 0===r&&(r=p>u?"next":"prev"),i&&i!==s.currentSlide&&(e.$currentTransition?(e.$currentTransition.cancel(),t(o)):o())},e.$on("$destroy",function(){d=!0}),s.indexOfSlide=function(e){return c.indexOf(e)},e.next=function(){var t=(u+1)%c.length;return e.$currentTransition?void 0:s.select(c[t],"next")},e.prev=function(){var t=0>u-1?c.length-1:u-1;return e.$currentTransition?void 0:s.select(c[t],"prev")},e.isActive=function(e){return s.currentSlide===e},e.$watch("interval",a),e.$on("$destroy",i),e.play=function(){l||(l=!0,a())},e.pause=function(){e.noPause||(l=!1,i())},s.addSlide=function(t,n){t.$element=n,c.push(t),1===c.length||t.active?(s.select(c[c.length-1]),1==c.length&&e.play()):t.active=!1},s.removeSlide=function(e){var t=c.indexOf(e);c.splice(t,1),c.length>0&&e.active?t>=c.length?s.select(c[t-1]):s.select(c[t]):u>t&&u--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(e,t,n,a){a.addSlide(e,t),e.$on("$destroy",function(){a.removeSlide(e)}),e.$watch("active",function(t){t&&a.select(e)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(e,t){function n(e,t,n){return 1===t&&n>28?29===n&&(e%4===0&&e%100!==0||e%400===0):3===t||5===t||8===t||10===t?31>n:!0}this.parsers={};var a={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:e.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.MONTH.indexOf(t)}},MMM:{regex:e.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.SHORTMONTH.indexOf(t)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:e.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:e.DATETIME_FORMATS.SHORTDAY.join("|")}};this.createParser=function(e){var n=[],i=e.split("");return angular.forEach(a,function(t,a){var r=e.indexOf(a);if(r>-1){e=e.split(""),i[r]="("+t.regex+")",e[r]="$";for(var o=r+1,l=r+a.length;l>o;o++)i[o]="",e[o]="$";e=e.join(""),n.push({index:r,apply:t.apply})}}),{regex:new RegExp("^"+i.join("")+"$"),map:t(n,"index")}},this.parse=function(t,a){if(!angular.isString(t))return t;a=e.DATETIME_FORMATS[a]||a,this.parsers[a]||(this.parsers[a]=this.createParser(a));var i=this.parsers[a],r=i.regex,o=i.map,l=t.match(r);if(l&&l.length){for(var s,c={year:1900,month:0,date:1,hours:0},u=1,d=l.length;d>u;u++){var p=o[u-1];p.apply&&p.apply.call(c,l[u])}return n(c.year,c.month,c.date)&&(s=new Date(c.year,c.month,c.date,c.hours)),s}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function a(e){return"static"===(n(e,"position")||"static")}var i=function(t){for(var n=e[0],i=t.offsetParent||n;i&&i!==n&&a(i);)i=i.offsetParent;return i||n};return{position:function(t){var n=this.offset(t),a={top:0,left:0},r=i(t[0]);r!=e[0]&&(a=this.offset(angular.element(r)),a.top+=r.clientTop-r.scrollTop,a.left+=r.clientLeft-r.scrollLeft);var o=t[0].getBoundingClientRect();return{width:o.width||t.prop("offsetWidth"),height:o.height||t.prop("offsetHeight"),top:n.top-a.top,left:n.left-a.left}},offset:function(n){var a=n[0].getBoundingClientRect();return{width:a.width||n.prop("offsetWidth"),height:a.height||n.prop("offsetHeight"),top:a.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:a.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,n,a){var i,r,o,l,s=n.split("-"),c=s[0],u=s[1]||"center";i=a?this.offset(e):this.position(e),r=t.prop("offsetWidth"),o=t.prop("offsetHeight");var d={center:function(){return i.left+i.width/2-r/2},left:function(){return i.left},right:function(){return i.left+i.width}},p={center:function(){return i.top+i.height/2-o/2},top:function(){return i.top},bottom:function(){return i.top+i.height}};switch(c){case"right":l={top:p[u](),left:d[c]()};break;case"left":l={top:p[u](),left:i.left-r};break;case"bottom":l={top:p[c](),left:d[u]()};break;default:l={top:i.top-o,left:d[u]()}}return l}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(e,t,n,a,i,r,o,l){var s=this,c={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(n,i){s[n]=angular.isDefined(t[n])?8>i?a(t[n])(e.$parent):e.$parent.$eval(t[n]):l[n]}),angular.forEach(["minDate","maxDate"],function(a){t[a]?e.$parent.$watch(n(t[a]),function(e){s[a]=e?new Date(e):null,s.refreshView()}):s[a]=l[a]?new Date(l[a]):null}),e.datepickerMode=e.datepickerMode||l.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(t.initDate)?e.$parent.$eval(t.initDate):new Date,e.isActive=function(t){return 0===s.compare(t.date,s.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){c=e,c.$render=function(){s.render()}},this.render=function(){if(c.$modelValue){var e=new Date(c.$modelValue),t=!isNaN(e);t?this.activeDate=e:r.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),c.$setValidity("date",t)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=c.$modelValue?new Date(c.$modelValue):null;c.$setValidity("date-disabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var n=c.$modelValue?new Date(c.$modelValue):null;return{date:e,label:o(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),current:0===this.compare(e,new Date)}},this.isDisabled=function(n){return this.minDate&&this.compare(n,this.minDate)<0||this.maxDate&&this.compare(n,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:n,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},e.select=function(t){if(e.datepickerMode===s.minMode){var n=c.$modelValue?new Date(c.$modelValue):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),c.$setViewValue(n),c.$render()}else s.activeDate=t,e.datepickerMode=s.modes[s.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=s.activeDate.getFullYear()+e*(s.step.years||0),n=s.activeDate.getMonth()+e*(s.step.months||0);s.activeDate.setFullYear(t,n,1),s.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===s.maxMode&&1===t||e.datepickerMode===s.minMode&&-1===t||(e.datepickerMode=s.modes[s.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var u=function(){i(function(){s.element[0].focus()},0,!1)};e.$on("datepicker.focus",u),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),t.stopPropagation(),"enter"===n||"space"===n){if(s.isDisabled(s.activeDate))return;e.select(s.activeDate),u()}else!t.ctrlKey||"up"!==n&&"down"!==n?(s.handleKeyDown(n,t),s.refreshView()):(e.toggleMode("up"===n?1:-1),u())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,n,a){var i=a[0],r=a[1];r&&i.init(r)}}}).directive("daypicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(t,n,a,i){function r(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?s[t]:29}function o(e,t){var n=new Array(t),a=new Date(e),i=0;for(a.setHours(12);t>i;)n[i++]=new Date(a),a.setDate(a.getDate()+1);return n}function l(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}t.showWeeks=i.showWeeks,i.step={months:1},i.element=n;var s=[31,28,31,30,31,30,31,31,30,31,30,31];i._refreshView=function(){var n=i.activeDate.getFullYear(),a=i.activeDate.getMonth(),r=new Date(n,a,1),s=i.startingDay-r.getDay(),c=s>0?7-s:-s,u=new Date(r);c>0&&u.setDate(-c+1);for(var d=o(u,42),p=0;42>p;p++)d[p]=angular.extend(i.createDateObject(d[p],i.formatDay),{secondary:d[p].getMonth()!==a,uid:t.uniqueId+"-"+p});
t.labels=new Array(7);for(var g=0;7>g;g++)t.labels[g]={abbr:e(d[g].date,i.formatDayHeader),full:e(d[g].date,"EEEE")};if(t.title=e(i.activeDate,i.formatDayTitle),t.rows=i.split(d,7),t.showWeeks){t.weekNumbers=[];for(var f=l(t.rows[0][0].date),m=t.rows.length;t.weekNumbers.push(f++)<m;);}},i.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},i.handleKeyDown=function(e){var t=i.activeDate.getDate();if("left"===e)t-=1;else if("up"===e)t-=7;else if("right"===e)t+=1;else if("down"===e)t+=7;else if("pageup"===e||"pagedown"===e){var n=i.activeDate.getMonth()+("pageup"===e?-1:1);i.activeDate.setMonth(n,1),t=Math.min(r(i.activeDate.getFullYear(),i.activeDate.getMonth()),t)}else"home"===e?t=1:"end"===e&&(t=r(i.activeDate.getFullYear(),i.activeDate.getMonth()));i.activeDate.setDate(t)},i.refreshView()}}}]).directive("monthpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(t,n,a,i){i.step={years:1},i.element=n,i._refreshView=function(){for(var n=new Array(12),a=i.activeDate.getFullYear(),r=0;12>r;r++)n[r]=angular.extend(i.createDateObject(new Date(a,r,1),i.formatMonth),{uid:t.uniqueId+"-"+r});t.title=e(i.activeDate,i.formatMonthTitle),t.rows=i.split(n,3)},i.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},i.handleKeyDown=function(e){var t=i.activeDate.getMonth();if("left"===e)t-=1;else if("up"===e)t-=3;else if("right"===e)t+=1;else if("down"===e)t+=3;else if("pageup"===e||"pagedown"===e){var n=i.activeDate.getFullYear()+("pageup"===e?-1:1);i.activeDate.setFullYear(n)}else"home"===e?t=0:"end"===e&&(t=11);i.activeDate.setMonth(t)},i.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(e,t,n,a){function i(e){return parseInt((e-1)/r,10)*r+1}var r=a.yearRange;a.step={years:r},a.element=t,a._refreshView=function(){for(var t=new Array(r),n=0,o=i(a.activeDate.getFullYear());r>n;n++)t[n]=angular.extend(a.createDateObject(new Date(o+n,0,1),a.formatYear),{uid:e.uniqueId+"-"+n});e.title=[t[0].label,t[r-1].label].join(" - "),e.rows=a.split(t,5)},a.compare=function(e,t){return e.getFullYear()-t.getFullYear()},a.handleKeyDown=function(e){var t=a.activeDate.getFullYear();"left"===e?t-=1:"up"===e?t-=5:"right"===e?t+=1:"down"===e?t+=5:"pageup"===e||"pagedown"===e?t+=("pageup"===e?-1:1)*a.step.years:"home"===e?t=i(a.activeDate.getFullYear()):"end"===e&&(t=i(a.activeDate.getFullYear())+r-1),a.activeDate.setFullYear(t)},a.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(e,t,n,a,i,r,o){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(l,s,c,u){function d(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function p(e){if(e){if(angular.isDate(e)&&!isNaN(e))return u.$setValidity("date",!0),e;if(angular.isString(e)){var t=r.parse(e,g)||new Date(e);return isNaN(t)?(u.$setValidity("date",!1),void 0):(u.$setValidity("date",!0),t)}return u.$setValidity("date",!1),void 0}return u.$setValidity("date",!0),null}var g,f=angular.isDefined(c.closeOnDateSelection)?l.$parent.$eval(c.closeOnDateSelection):o.closeOnDateSelection,m=angular.isDefined(c.datepickerAppendToBody)?l.$parent.$eval(c.datepickerAppendToBody):o.appendToBody;l.showButtonBar=angular.isDefined(c.showButtonBar)?l.$parent.$eval(c.showButtonBar):o.showButtonBar,l.getText=function(e){return l[e+"Text"]||o[e+"Text"]},c.$observe("datepickerPopup",function(e){g=e||o.datepickerPopup,u.$render()});var h=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");h.attr({"ng-model":"date","ng-change":"dateSelection()"});var v=angular.element(h.children()[0]);c.datepickerOptions&&angular.forEach(l.$parent.$eval(c.datepickerOptions),function(e,t){v.attr(d(t),e)}),angular.forEach(["minDate","maxDate"],function(e){c[e]&&(l.$parent.$watch(t(c[e]),function(t){l[e]=t}),v.attr(d(e),e))}),c.dateDisabled&&v.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),u.$parsers.unshift(p),l.dateSelection=function(e){angular.isDefined(e)&&(l.date=e),u.$setViewValue(l.date),u.$render(),f&&(l.isOpen=!1,s[0].focus())},s.bind("input change keyup",function(){l.$apply(function(){l.date=u.$modelValue})}),u.$render=function(){var e=u.$viewValue?i(u.$viewValue,g):"";s.val(e),l.date=p(u.$modelValue)};var b=function(e){l.isOpen&&e.target!==s[0]&&l.$apply(function(){l.isOpen=!1})},y=function(e){l.keydown(e)};s.bind("keydown",y),l.keydown=function(e){27===e.which?(e.preventDefault(),e.stopPropagation(),l.close()):40!==e.which||l.isOpen||(l.isOpen=!0)},l.$watch("isOpen",function(e){e?(l.$broadcast("datepicker.focus"),l.position=m?a.offset(s):a.position(s),l.position.top=l.position.top+s.prop("offsetHeight"),n.bind("click",b)):n.unbind("click",b)}),l.select=function(e){if("today"===e){var t=new Date;angular.isDate(u.$modelValue)?(e=new Date(u.$modelValue),e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())):e=new Date(t.setHours(0,0,0,0))}l.dateSelection(e)},l.close=function(){l.isOpen=!1,s[0].focus()};var $=e(h)(l);m?n.find("body").append($):s.after($),l.$on("$destroy",function(){$.remove(),s.unbind("keydown",y),n.unbind("click",b)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(e,t){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(e){var t=null;this.open=function(i){t||(e.bind("click",n),e.bind("keydown",a)),t&&t!==i&&(t.isOpen=!1),t=i},this.close=function(i){t===i&&(t=null,e.unbind("click",n),e.unbind("keydown",a))};var n=function(e){e&&e.isDefaultPrevented()||t.$apply(function(){t.isOpen=!1})},a=function(e){27===e.which&&(t.focusToggleElement(),n())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(e,t,n,a,i,r){var o,l=this,s=e.$new(),c=a.openClass,u=angular.noop,d=t.onToggle?n(t.onToggle):angular.noop;this.init=function(a){l.$element=a,t.isOpen&&(o=n(t.isOpen),u=o.assign,e.$watch(o,function(e){s.isOpen=!!e}))},this.toggle=function(e){return s.isOpen=arguments.length?!!e:!s.isOpen},this.isOpen=function(){return s.isOpen},s.focusToggleElement=function(){l.toggleElement&&l.toggleElement[0].focus()},s.$watch("isOpen",function(t,n){r[t?"addClass":"removeClass"](l.$element,c),t?(s.focusToggleElement(),i.open(s)):i.close(s),u(e,t),angular.isDefined(t)&&t!==n&&d(e,{open:!!t})}),e.$on("$locationChangeSuccess",function(){s.isOpen=!1}),e.$on("$destroy",function(){s.$destroy()})}]).directive("dropdown",function(){return{restrict:"CA",controller:"DropdownController",link:function(e,t,n,a){a.init(t)}}}).directive("dropdownToggle",function(){return{restrict:"CA",require:"?^dropdown",link:function(e,t,n,a){if(a){a.toggleElement=t;var i=function(i){i.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply(function(){a.toggle()})};t.bind("click",i),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(a.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",i)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t==e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,a=0;a<e.length;a++)if(t==e[a].key){n=a;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalBackdrop",["$timeout",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(t){t.animate=!1,e(function(){t.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(n,a,i){a.addClass(i.windowClass||""),n.size=i.size,t(function(){n.animate=!0,a[0].focus()}),n.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!=n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(e,t,n,a,i,r){function o(){for(var e=-1,t=g.keys(),n=0;n<t.length;n++)g.get(t[n]).value.backdrop&&(e=n);return e}function l(e){var t=n.find("body").eq(0),a=g.get(e).value;g.remove(e),c(a.modalDomEl,a.modalScope,300,function(){a.modalScope.$destroy(),t.toggleClass(p,g.length()>0),s()})}function s(){if(u&&-1==o()){var e=d;c(u,d,150,function(){e.$destroy(),e=null}),u=void 0,d=void 0}}function c(n,a,i,r){function o(){o.done||(o.done=!0,n.remove(),r&&r())}a.animate=!1;var l=e.transitionEndEventName;if(l){var s=t(o,i);n.bind(l,function(){t.cancel(s),o(),a.$apply()})}else t(o,0)}var u,d,p="modal-open",g=r.createNew(),f={};return i.$watch(o,function(e){d&&(d.index=e)}),n.bind("keydown",function(e){var t;27===e.which&&(t=g.top(),t&&t.value.keyboard&&(e.preventDefault(),i.$apply(function(){f.dismiss(t.key,"escape key press")})))}),f.open=function(e,t){g.add(e,{deferred:t.deferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard});var r=n.find("body").eq(0),l=o();l>=0&&!u&&(d=i.$new(!0),d.index=l,u=a("<div modal-backdrop></div>")(d),r.append(u));var s=angular.element("<div modal-window></div>");s.attr({"template-url":t.windowTemplateUrl,"window-class":t.windowClass,size:t.size,index:g.length()-1,animate:"animate"}).html(t.content);var c=a(s)(t.scope);g.top().value.modalDomEl=c,r.append(c),r.addClass(p)},f.close=function(e,t){var n=g.get(e).value;n&&(n.deferred.resolve(t),l(e))},f.dismiss=function(e,t){var n=g.get(e).value;n&&(n.deferred.reject(t),l(e))},f.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},f.getTop=function(){return g.top()},f}]).provider("$modal",function(){var e={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,n,a,i,r,o,l){function s(e){return e.template?a.when(e.template):i.get(e.templateUrl,{cache:r}).then(function(e){return e.data})}function c(e){var n=[];return angular.forEach(e,function(e){(angular.isFunction(e)||angular.isArray(e))&&n.push(a.when(t.invoke(e)))}),n}var u={};return u.open=function(t){var i=a.defer(),r=a.defer(),u={result:i.promise,opened:r.promise,close:function(e){l.close(u,e)},dismiss:function(e){l.dismiss(u,e)}};if(t=angular.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var d=a.all([s(t)].concat(c(t.resolve)));return d.then(function(e){var a=(t.scope||n).$new();a.$close=u.close,a.$dismiss=u.dismiss;var r,s={},c=1;t.controller&&(s.$scope=a,s.$modalInstance=u,angular.forEach(t.resolve,function(t,n){s[n]=e[c++]}),r=o(t.controller,s)),l.open(u,{scope:a,deferred:i,content:e[0],backdrop:t.backdrop,keyboard:t.keyboard,windowClass:t.windowClass,windowTemplateUrl:t.windowTemplateUrl,size:t.size})},function(e){i.reject(e)}),d.then(function(){r.resolve(!0)},function(){r.reject(!1)}),u},u}]};return e}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(e,t,n){var a=this,i={$setViewValue:angular.noop},r=t.numPages?n(t.numPages).assign:angular.noop;this.init=function(r,o){i=r,this.config=o,i.$render=function(){a.render()},t.itemsPerPage?e.$parent.$watch(n(t.itemsPerPage),function(t){a.itemsPerPage=parseInt(t,10),e.totalPages=a.calculateTotalPages()}):this.itemsPerPage=o.itemsPerPage},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(i.$viewValue,10)||1},e.selectPage=function(t){e.page!==t&&t>0&&t<=e.totalPages&&(i.$setViewValue(t),i.$render())},e.getText=function(t){return e[t+"Text"]||a.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages},e.$watch("totalItems",function(){e.totalPages=a.calculateTotalPages()}),e.$watch("totalPages",function(t){r(e.$parent,t),e.page>t?e.selectPage(t):i.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,t){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(n,a,i,r){function o(e,t,n){return{number:e,text:t,active:n}}function l(e,t){var n=[],a=1,i=t,r=angular.isDefined(u)&&t>u;r&&(d?(a=Math.max(e-Math.floor(u/2),1),i=a+u-1,i>t&&(i=t,a=i-u+1)):(a=(Math.ceil(e/u)-1)*u+1,i=Math.min(a+u-1,t)));for(var l=a;i>=l;l++){var s=o(l,l,l===e);n.push(s)}if(r&&!d){if(a>1){var c=o(a-1,"...",!1);n.unshift(c)}if(t>i){var p=o(i+1,"...",!1);n.push(p)}}return n}var s=r[0],c=r[1];if(c){var u=angular.isDefined(i.maxSize)?n.$parent.$eval(i.maxSize):t.maxSize,d=angular.isDefined(i.rotate)?n.$parent.$eval(i.rotate):t.rotate;n.boundaryLinks=angular.isDefined(i.boundaryLinks)?n.$parent.$eval(i.boundaryLinks):t.boundaryLinks,n.directionLinks=angular.isDefined(i.directionLinks)?n.$parent.$eval(i.directionLinks):t.directionLinks,s.init(c,t),i.maxSize&&n.$parent.$watch(e(i.maxSize),function(e){u=parseInt(e,10),s.render()});var p=s.render;s.render=function(){p(),n.page>0&&n.page<=n.totalPages&&(n.pages=l(n.page,n.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,n,a,i){var r=i[0],o=i[1];o&&(t.align=angular.isDefined(a.align)?t.$parent.$eval(a.align):e.align,r.init(o,e))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function e(e){var t=/[A-Z]/g,n="-";return e.replace(t,function(e,t){return(t?n:"")+e.toLowerCase()})}var t={placement:"top",animation:!0,popupDelay:0},n={mouseenter:"mouseleave",click:"click",focus:"blur"},a={};this.options=function(e){angular.extend(a,e)},this.setTriggers=function(e){angular.extend(n,e)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(i,r,o,l,s,c,u){return function(i,d,p){function g(e){var t=e||f.trigger||p,a=n[t]||t;return{show:t,hide:a}}var f=angular.extend({},t,a),m=e(i),h=u.startSymbol(),v=u.endSymbol(),b="<div "+m+'-popup title="'+h+"tt_title"+v+'" content="'+h+"tt_content"+v+'" placement="'+h+"tt_placement"+v+'" animation="tt_animation" is-open="tt_isOpen"></div>';return{restrict:"EA",scope:!0,compile:function(){var e=r(b);return function(t,n,a){function r(){t.tt_isOpen?p():u()}function u(){(!D||t.$eval(a[d+"Enable"]))&&(t.tt_popupDelay?w||(w=o(m,t.tt_popupDelay,!1),w.then(function(e){e()})):m()())}function p(){t.$apply(function(){h()})}function m(){return w=null,$&&(o.cancel($),$=null),t.tt_content?(v(),y.css({top:0,left:0,display:"block"}),k?s.find("body").append(y):n.after(y),C(),t.tt_isOpen=!0,t.$digest(),C):angular.noop}function h(){t.tt_isOpen=!1,o.cancel(w),w=null,t.tt_animation?$||($=o(b,500)):b()}function v(){y&&b(),y=e(t,function(){}),t.$digest()}function b(){$=null,y&&(y.remove(),y=null)}var y,$,w,k=angular.isDefined(f.appendToBody)?f.appendToBody:!1,x=g(void 0),D=angular.isDefined(a[d+"Enable"]),C=function(){var e=c.positionElements(n,y,t.tt_placement,k);e.top+="px",e.left+="px",y.css(e)};t.tt_isOpen=!1,a.$observe(i,function(e){t.tt_content=e,!e&&t.tt_isOpen&&h()}),a.$observe(d+"Title",function(e){t.tt_title=e}),a.$observe(d+"Placement",function(e){t.tt_placement=angular.isDefined(e)?e:f.placement}),a.$observe(d+"PopupDelay",function(e){var n=parseInt(e,10);t.tt_popupDelay=isNaN(n)?f.popupDelay:n});var T=function(){n.unbind(x.show,u),n.unbind(x.hide,p)};a.$observe(d+"Trigger",function(e){T(),x=g(e),x.show===x.hide?n.bind(x.show,r):(n.bind(x.show,u),n.bind(x.hide,p))});var E=t.$eval(a[d+"Animation"]);t.tt_animation=angular.isDefined(E)?!!E:f.animation,a.$observe(d+"AppendToBody",function(e){k=angular.isDefined(e)?l(e)(t):k}),k&&t.$on("$locationChangeSuccess",function(){t.tt_isOpen&&h()}),t.$on("$destroy",function(){o.cancel($),o.cancel(w),T(),b()})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(e){return e("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(e,t,n){var a=this,i=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;this.bars=[],e.max=angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max,this.addBar=function(t,n){i||n.css({transition:"none"}),this.bars.push(t),t.$watch("value",function(n){t.percent=+(100*n/e.max).toFixed(2)}),t.$on("$destroy",function(){n=null,a.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(e,t,n,a){a.addBar(e,t)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(e,t,n,a){a.addBar(e,angular.element(t.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(e,t,n){var a={$setViewValue:angular.noop};this.init=function(i){a=i,a.$render=this.render,this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):n.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):n.stateOff;var r=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max);e.range=this.buildTemplateObjects(r)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;n>t;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff},e[t]);return e},e.rate=function(t){!e.readonly&&t>=0&&t<=e.range.length&&(a.$setViewValue(t),a.$render())},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=a.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=a.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(e,t,n,a){var i=a[0],r=a[1];r&&i.init(r)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(e){var t=this,n=t.tabs=e.tabs=[];t.select=function(e){angular.forEach(n,function(t){t.active&&t!==e&&(t.active=!1,t.onDeselect())}),e.active=!0,e.onSelect()},t.addTab=function(e){n.push(e),1===n.length?e.active=!0:e.active&&t.select(e)},t.removeTab=function(e){var a=n.indexOf(e);if(e.active&&n.length>1){var i=a==n.length-1?a-1:a+1;t.select(n[i])}n.splice(a,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,t,n){e.vertical=angular.isDefined(n.vertical)?e.$parent.$eval(n.vertical):!1,e.justified=angular.isDefined(n.justified)?e.$parent.$eval(n.justified):!1}}}).directive("tab",["$parse",function(e){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(t,n,a){return function(t,n,i,r){t.$watch("active",function(e){e&&r.select(t)}),t.disabled=!1,i.disabled&&t.$parent.$watch(e(i.disabled),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},r.addTab(t),t.$on("$destroy",function(){r.removeTab(t)}),t.$transcludeFn=a}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}]).directive("tabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(t,n,a){var i=t.$eval(a.tabContentTransclude);i.$transcludeFn(i.$parent,function(t){angular.forEach(t,function(t){e(t)?i.headingElement=t:n.append(t)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(e,t,n,a,i,r){function o(){var t=parseInt(e.hours,10),n=e.showMeridian?t>0&&13>t:t>=0&&24>t;return n?(e.showMeridian&&(12===t&&(t=0),e.meridian===m[1]&&(t+=12)),t):void 0}function l(){var t=parseInt(e.minutes,10);return t>=0&&60>t?t:void 0}function s(e){return angular.isDefined(e)&&e.toString().length<2?"0"+e:e}function c(e){u(),f.$setViewValue(new Date(g)),d(e)}function u(){f.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function d(t){var n=g.getHours(),a=g.getMinutes();e.showMeridian&&(n=0===n||12===n?12:n%12),e.hours="h"===t?n:s(n),e.minutes="m"===t?a:s(a),e.meridian=g.getHours()<12?m[0]:m[1]}function p(e){var t=new Date(g.getTime()+6e4*e);g.setHours(t.getHours(),t.getMinutes()),c()}var g=new Date,f={$setViewValue:angular.noop},m=angular.isDefined(t.meridians)?e.$parent.$eval(t.meridians):r.meridians||i.DATETIME_FORMATS.AMPMS;this.init=function(n,a){f=n,f.$render=this.render;var i=a.eq(0),o=a.eq(1),l=angular.isDefined(t.mousewheel)?e.$parent.$eval(t.mousewheel):r.mousewheel;l&&this.setupMousewheelEvents(i,o),e.readonlyInput=angular.isDefined(t.readonlyInput)?e.$parent.$eval(t.readonlyInput):r.readonlyInput,this.setupInputEvents(i,o)};var h=r.hourStep;t.hourStep&&e.$parent.$watch(n(t.hourStep),function(e){h=parseInt(e,10)});var v=r.minuteStep;t.minuteStep&&e.$parent.$watch(n(t.minuteStep),function(e){v=parseInt(e,10)}),e.showMeridian=r.showMeridian,t.showMeridian&&e.$parent.$watch(n(t.showMeridian),function(t){if(e.showMeridian=!!t,f.$error.time){var n=o(),a=l();angular.isDefined(n)&&angular.isDefined(a)&&(g.setHours(n),c())}else d()}),this.setupMousewheelEvents=function(t,n){var a=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){e.$apply(a(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),n.bind("mousewheel wheel",function(t){e.$apply(a(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()})},this.setupInputEvents=function(t,n){if(e.readonlyInput)return e.updateHours=angular.noop,e.updateMinutes=angular.noop,void 0;var a=function(t,n){f.$setViewValue(null),f.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t),angular.isDefined(n)&&(e.invalidMinutes=n)};e.updateHours=function(){var e=o();angular.isDefined(e)?(g.setHours(e),c("h")):a(!0)},t.bind("blur",function(){!e.invalidHours&&e.hours<10&&e.$apply(function(){e.hours=s(e.hours)})}),e.updateMinutes=function(){var e=l();angular.isDefined(e)?(g.setMinutes(e),c("m")):a(void 0,!0)},n.bind("blur",function(){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=s(e.minutes)})})},this.render=function(){var e=f.$modelValue?new Date(f.$modelValue):null;isNaN(e)?(f.$setValidity("time",!1),a.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(g=e),u(),d())},e.incrementHours=function(){p(60*h)},e.decrementHours=function(){p(60*-h)},e.incrementMinutes=function(){p(v)},e.decrementMinutes=function(){p(-v)},e.toggleMeridian=function(){p(720*(g.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,t,n,a){var i=a[0],r=a[1];r&&i.init(r,t.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(n){var a=n.match(t);if(!a)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:a[3],source:e(a[4]),viewMapper:e(a[2]||a[1]),modelMapper:e(a[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,t,n,a,i,r,o){var l=[9,13,27,38,40];return{require:"ngModel",link:function(s,c,u,d){var p,g=s.$eval(u.typeaheadMinLength)||1,f=s.$eval(u.typeaheadWaitMs)||0,m=s.$eval(u.typeaheadEditable)!==!1,h=t(u.typeaheadLoading).assign||angular.noop,v=t(u.typeaheadOnSelect),b=u.typeaheadInputFormatter?t(u.typeaheadInputFormatter):void 0,y=u.typeaheadAppendToBody?s.$eval(u.typeaheadAppendToBody):!1,$=t(u.ngModel).assign,w=o.parse(u.typeahead),k=s.$new();s.$on("$destroy",function(){k.$destroy()});var x="typeahead-"+k.$id+"-"+Math.floor(1e4*Math.random());c.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":x});var D=angular.element("<div typeahead-popup></div>");D.attr({id:x,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(u.typeaheadTemplateUrl)&&D.attr("template-url",u.typeaheadTemplateUrl);var C=function(){k.matches=[],k.activeIdx=-1,c.attr("aria-expanded",!1)},T=function(e){return x+"-option-"+e};k.$watch("activeIdx",function(e){0>e?c.removeAttr("aria-activedescendant"):c.attr("aria-activedescendant",T(e))});var E=function(e){var t={$viewValue:e};h(s,!0),n.when(w.source(s,t)).then(function(n){var a=e===d.$viewValue;if(a&&p)if(n.length>0){k.activeIdx=0,k.matches.length=0;for(var i=0;i<n.length;i++)t[w.itemName]=n[i],k.matches.push({id:T(i),label:w.viewMapper(k,t),model:n[i]});k.query=e,k.position=y?r.offset(c):r.position(c),k.position.top=k.position.top+c.prop("offsetHeight"),c.attr("aria-expanded",!0)}else C();a&&h(s,!1)},function(){C(),h(s,!1)})};C(),k.query=void 0;var S;d.$parsers.unshift(function(e){return p=!0,e&&e.length>=g?f>0?(S&&a.cancel(S),S=a(function(){E(e)},f)):E(e):(h(s,!1),C()),m?e:e?(d.$setValidity("editable",!1),void 0):(d.$setValidity("editable",!0),e)}),d.$formatters.push(function(e){var t,n,a={};return b?(a.$model=e,b(s,a)):(a[w.itemName]=e,t=w.viewMapper(s,a),a[w.itemName]=void 0,n=w.viewMapper(s,a),t!==n?t:e)}),k.select=function(e){var t,n,i={};i[w.itemName]=n=k.matches[e].model,t=w.modelMapper(s,i),$(s,t),d.$setValidity("editable",!0),v(s,{$item:n,$model:t,$label:w.viewMapper(s,i)}),C(),a(function(){c[0].focus()},0,!1)},c.bind("keydown",function(e){0!==k.matches.length&&-1!==l.indexOf(e.which)&&(e.preventDefault(),40===e.which?(k.activeIdx=(k.activeIdx+1)%k.matches.length,k.$digest()):38===e.which?(k.activeIdx=(k.activeIdx?k.activeIdx:k.matches.length)-1,k.$digest()):13===e.which||9===e.which?k.$apply(function(){k.select(k.activeIdx)}):27===e.which&&(e.stopPropagation(),C(),k.$digest()))}),c.bind("blur",function(){p=!1});var M=function(e){c[0]!==e.target&&(C(),k.$digest())};i.bind("click",M),s.$on("$destroy",function(){i.unbind("click",M)});var O=e(D)(k);y?i.find("body").append(O):c.after(O)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(e,t,n){e.templateUrl=n.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(e,t,n,a){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(i,r,o){var l=a(o.templateUrl)(i.$parent)||"template/typeahead/typeahead-match.html";e.get(l,{cache:t}).success(function(e){r.replaceWith(n(e.trim())(i))})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n?(""+t).replace(new RegExp(e(n),"gi"),"<strong>$&</strong>"):t}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("template/alert/alert.html",'<div class="alert" ng-class="{\'alert-{{type || \'warning\'}}\': true, \'alert-dismissable\': closeable}" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')
}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("template/modal/backdrop.html",'<div class="modal-backdrop fade"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(e){e.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" ng-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset-titles.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabset-titles.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n</ul>\n")}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabset.html",'\n<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-if="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>')}]),"undefined"!=typeof angular&&angular.module("risevision.widget.common.storage-selector.config",[]).value("STORAGE_MODAL","http://storage.risevision.com/storage-modal.html#/files/"),function(){"use strict";angular.module("risevision.widget.common.storage-selector",["ui.bootstrap","risevision.widget.common.storage-selector.config"]).directive("storageSelector",["$window","$templateCache","$modal","$sce","$log","STORAGE_MODAL",function(e,t,n,a,i,r){return{restrict:"EA",scope:{local:"@",useCtrl:"@",instanceTemplate:"@",companyId:"@"},template:t.get("storage-selector.html"),link:function(e){e.storageUrl="",e.open=function(){var t=n.open({templateUrl:e.instanceTemplate||"storage.html",controller:e.useCtrl||"StorageCtrl",size:"lg",backdrop:!0,resolve:{storageUrl:function(){return{url:a.trustAsResourceUrl(e.storageUrl)}}}});t.result.then(function(t){e.$emit("picked",t)},function(){i.info("Modal dismissed at: "+new Date)})},e.local?e.storageUrl=r+"local":e.$watch("companyId",function(t){t&&(e.storageUrl=r+t)})}}}])}(),angular.module("risevision.widget.common.storage-selector").controller("StorageCtrl",["$scope","$modalInstance","storageUrl","$window","$log",function(e,t,n,a){e.storageUrl=n,a.addEventListener("message",function(e){var n="storage-stage-rva-test.risevision.com",a="storage.risevision.com";(-1!==e.origin.indexOf(n)||-1!==e.origin.indexOf(a))&&(Array.isArray(e.data)?t.close(e.data):"string"==typeof e.data&&"close"===e.data&&t.dismiss("cancel"))})}]),function(){try{app=angular.module("risevision.widget.common.storage-selector")}catch(e){app=angular.module("risevision.widget.common.storage-selector",[])}app.run(["$templateCache",function(e){"use strict";e.put("storage-selector.html",'<button class="btn btn-widget-icon-storage" ng-click="open()" type="button" />\n<script type="text/ng-template" id="storage.html">\n        <iframe class="modal-dialog" scrolling="no" marginwidth="0" src="{{ storageUrl.url }}"></iframe>\n</script>\n')}])}(),function(){"use strict";angular.module("risevision.widget.common.tooltip",["ui.bootstrap"]).directive("rvTooltip",[function(){return{restrict:"A",link:function(e,t){t.addClass("fa"),t.addClass("fa-question-circle"),t.addClass("fa-lg")}}}])}(),function(){"use strict";angular.module("risevision.widget.common.url-field",["risevision.common.i18n","risevision.widget.common.tooltip","risevision.widget.common.storage-selector"]).directive("urlField",["$templateCache","$log",function(e,t){return{restrict:"E",require:"?ngModel",scope:{url:"=",hideLabel:"@",hideStorage:"@",companyId:"@",fileType:"@"},template:e.get("_angular/url-field/url-field.html"),link:function(e,n,a,i){function r(e,t){var n,a=e.toLowerCase();switch(t){case"image":n=[".jpg",".jpeg",".png",".bmp",".svg",".gif"];break;case"video":n=[".webm",".mp4",".ogv",".ogg"];break;default:n=[]}for(var i=0,r=n.length;r>i;i++)if(-1!==a.indexOf(n[i]))return!0;return!1}function o(t){var n,a;return n=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i,-1===t.indexOf("://")&&(t="http://"+t),a=n.test(t),a&&"undefined"!=typeof e.fileType?(a=r(t,e.fileType),a||(e.invalidType=e.fileType)):e.invalidType="url",a}e.doValidation=!0,e.forcedValid=!1,e.valid=!0,e.invalidType="url",e.allowInitEmpty="undefined"!=typeof a.initEmpty?!0:!1,e.hideStorage||e.$on("picked",function(t,n){e.url=n[0]}),e.blur=function(){e.$emit("urlFieldBlur")},e.$watch("url",function(t){"undefined"!=typeof t&&null!==t&&(""!==t&&e.allowInitEmpty&&(e.allowInitEmpty=!1),e.doValidation&&!e.allowInitEmpty&&(e.valid=o(e.url)))}),e.$watch("valid",function(e){i&&(t.info("Calling $setValidity() on parent controller"),i.$setValidity("valid",e))}),e.$watch("doValidation",function(t){"undefined"!=typeof e.url&&(t?(e.forcedValid=!1,e.allowInitEmpty||(e.valid=o(e.url))):(e.forcedValid=!0,e.valid=!0))})}}}])}(),function(){try{app=angular.module("risevision.widget.common.url-field")}catch(e){app=angular.module("risevision.widget.common.url-field",[])}app.run(["$templateCache",function(e){"use strict";e.put("_angular/url-field/url-field.html",'<div class="form-group" >\n  <label ng-if="!hideLabel">{{ "url.label" | translate }}</label>\n  <div ng-class="{\'input-group\':!hideStorage}">\n    <input name="url" type="text" ng-model="url" ng-blur="blur()" class="form-control" placeholder="http://">\n    <span class="input-url-addon" ng-if="!hideStorage"><storage-selector company-id="{{companyId}}"></storage-selector></span>\n  </div>\n  <p ng-if="!valid && invalidType === \'url\'" class="text-danger">{{ "url.errors.url" | translate }}</p>\n  <p ng-if="!valid && invalidType === \'image\'" class="text-danger">{{ "url.errors.image" | translate }}</p>\n  <p ng-if="!valid && invalidType === \'video\'" class="text-danger">{{ "url.errors.video" | translate }}</p>\n  <div class="checkbox" ng-show="forcedValid || !valid">\n    <label>\n      <input name="validate-url" ng-click="doValidation = !doValidation" type="checkbox"\n             value="validate-url" checked="checked"> {{"url.validate.label" | translate}}\n    </label>\n    <span popover="{{\'url.validate.tooltip\' | translate}}" popover-trigger="click"\n          popover-placement="top" rv-tooltip></span>\n  </div>\n</div>\n')}])}(),function(){"use strict";angular.module("risevision.widget.common.position-setting",["risevision.common.i18n"]).directive("positionSetting",["$templateCache","$log",function(e){return{restrict:"E",scope:{position:"=",hideLabel:"@"},template:e.get("_angular/position-setting/position-setting.html"),link:function(e){e.$watch("position",function(t){"undefined"==typeof t&&(e.position="top-left")})}}}])}(),function(){try{app=angular.module("risevision.widget.common.position-setting")}catch(e){app=angular.module("risevision.widget.common.position-setting",[])}app.run(["$templateCache",function(e){"use strict";e.put("_angular/position-setting/position-setting.html",'<div class="row">\n  <div class="col-md-3">\n    <label ng-if="!hideLabel"> {{\'widgets.alignment\' | translate}}</label>\n    <select name="position" ng-model="position" class="form-control">\n      <option value="top-left">{{\'position.top.left\' | translate}}</option>\n      <option value="top-center">{{\'position.top.center\' | translate}}</option>\n      <option value="top-right">{{\'position.top.right\' | translate}}</option>\n      <option value="middle-left">{{\'position.middle.left\' | translate}}</option>\n      <option value="middle-center">{{\'position.middle.center\' | translate}}</option>\n      <option value="middle-right">{{\'position.middle.right\' | translate}}</option>\n      <option value="bottom-left">{{\'position.bottom.left\' | translate}}</option>\n      <option value="bottom-center">{{\'position.bottom.center\' | translate}}</option>\n      <option value="bottom-right">{{\'position.bottom.right\' | translate}}</option>\n    </select>\n  </div>\n</div>\n')}])}(),function(){"use strict";angular.module("risevision.widget.common.widget-button-toolbar",["risevision.common.i18n"]).directive("widgetButtonToolbar",["$templateCache",function(e){return{restrict:"E",scope:{help:"@",contribute:"@",save:"&",cancel:"&",disableSave:"&"},template:e.get("_angular/widget-button-toolbar/widget-button-toolbar.html"),link:function(e,t,n){e.helpRef="",e.contributeRef="","undefined"!=typeof n.help&&""!==n.help&&(e.helpRef=n.help),"undefined"!=typeof n.contribute&&""!==n.contribute&&(e.contributeRef=n.contribute)}}}])}(),function(){try{app=angular.module("risevision.widget.common.widget-button-toolbar")}catch(e){app=angular.module("risevision.widget.common.widget-button-toolbar",[])}app.run(["$templateCache",function(e){"use strict";e.put("_angular/widget-button-toolbar/widget-button-toolbar.html",'<div class="btn-toolbar sticky-buttons">\n  <button id="save" class="btn btn-primary btn-fixed-width" type="button" ng-click="save()" ng-disabled="disableSave()">\n    <span>{{"common.save" | translate}}</span>\n    <i class="fa fa-white fa-check fa-lg icon-right"></i>\n  </button>\n  <button id="cancel" class="btn btn-default btn-fixed-width" type="button" ng-click="cancel()">\n    <span>{{"common.cancel" | translate}}</span>\n    <i class="fa fa-white fa-times fa-lg icon-right"></i>\n  </button>\n  <a type="button" class="btn btn-rv-help btn-fixed-width" target="_blank" href={{helpRef}} ng-if="helpRef !== \'\'">\n    <span>{{"common.help" | translate}}</span>\n    <i class="fa fa-question-circle fa-lg icon-right"></i>\n  </a>\n  <a type="button" class="btn btn-rv-help btn-fixed-width" target="_blank" href={{contributeRef}} ng-if="contributeRef !== \'\'">\n    <span>{{"common.contribute" | translate}}</span>\n    <i class="fa fa-github fa-lg icon-right"></i>\n  </a>\n</div>\n')}])}(),"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json"),angular.module("risevision.widget.imageFolder.settings",["risevision.common.i18n","risevision.widget.common","risevision.widget.common.tooltip","risevision.widget.common.widget-button-toolbar","risevision.widget.common.url-field","risevision.widget.common.position-setting"]),angular.module("risevision.widget.imageFolder.settings").controller("imageFolderSettingsController",["$scope","commonSettings",function(e,t){function n(t){var n,a=t.split("?");e.isFolder=!1;for(var i=0;i<a.length;i++)if(n=a[i].split("="),"prefix"===n[0]&&void 0!==n[1]&&""!==n[1]){e.isFolder=!0;break}return e.settingsForm.$setValidity("urlField",e.isFolder),e.isFolder}e.isFolder=!0,e.$watch("settings.additionalParams.url",function(a){void 0!==a&&""!==a&&(e.settingsForm.urlField.$valid?e.settings.additionalParams.storage=n(a)?t.getStorageUrlData(a):{}:(e.isFolder=!0,e.settings.additionalParams.storage={}))})}]).value("defaultSettings",{params:{},additionalParams:{url:"",storage:{},scaleToFit:!0,position:"top-left",order:"alpha-asc",duration:10,pause:10,autoHide:!1}}),angular.module("risevision.widget.common",[]),angular.module("risevision.widget.common").controller("settingsController",["$scope","settingsSaver","settingsGetter","settingsCloser",function(e,t,n,a){e.settings={params:{},additionalParams:{}},e.alerts=[],e.getAdditionalParam=function(t,n){var a=e.settings.additionalParams[t];return angular.isUndefined(a)?n:a},e.setAdditionalParam=function(t,n){e.settings.additionalParams[t]=n},e.loadAdditionalParams=function(){n.getAdditionalParams().then(function(t){e.settings.additionalParams=t,e.$broadcast("loadAdditionalParams",t)},function(e){alert(e)})},e.setAdditionalParams=function(t,n){e.settings.additionalParams[t]=n},e.saveSettings=function(){e.alerts=[],e.$broadcast("collectAdditionalParams"),t.saveSettings(e.settings).then(function(){},function(t){e.alerts=t.alerts})},e.closeSettings=function(){a.closeSettings().then(function(){},function(t){e.alerts=t.alerts})},e.settings.params=n.getParams(),e.loadAdditionalParams()}]).directive("scrollOnAlerts",function(){return{restrict:"A",scope:!1,link:function(e,t){e.$watchCollection("alerts",function(e,n){e.length>0&&0===n.length&&$("body").animate({scrollTop:t.offset().top},"fast")})}}}),angular.module("risevision.widget.common").constant("STORAGE_FILE_URL_BASE","storage.googleapis.com/risemedialibrary-").constant("STORAGE_FOLDER_URL_BASE","googleapis.com/storage/").factory("commonSettings",["$log","STORAGE_FILE_URL_BASE","STORAGE_FOLDER_URL_BASE",function(e,t,n){var a={getStorageUrlData:function(e){function a(e){return-1!==e.indexOf(t)?"file":-1!==e.indexOf(n)?"folder":null}function i(e){var t=e.split("risemedialibrary-");return t[1].slice(0,t[1].indexOf("/"))}var r,o,l,s,c={};if("file"===a(e))r=e.split(t)[1],r=decodeURIComponent(r.slice(r.indexOf("/")+1)),o=r.split("/"),c.companyId=i(e),c.fileName=o.pop(),c.folder=o.length>0?o.join("/"):"",""!==c.folder&&(c.folder+="/");else if("folder"===a(e)){l=e.split("?");for(var u=0;u<l.length;u++)if(s=l[u].split("="),"prefix"===s[0]&&"undefined"!=typeof s[1]&&""!==s[1]){c.companyId=i(e),c.folder=decodeURIComponent(s[1]),c.fileName="";break}}return c}};return a}]),angular.module("risevision.widget.common").factory("gadgetsApi",["$window",function(e){return e.gadgets}]),angular.module("risevision.widget.common").service("i18nLoader",["$window","$q",function(e,t){var n=t.defer();e.i18n.init({fallbackLng:"en",resGetPath:"locales/__ns_____lng__.json"},function(){n.resolve(e.i18n)}),this.get=function(){return n.promise}}]),angular.module("risevision.widget.common").factory("imageValidator",["$q",function(e){var t={isImage:function(t){var n=e.defer(),a=new Image;return a.onload=function(){n.resolve(!0)},a.onerror=function(){n.resolve(!1)},a.src=t,n.promise}};return t}]),angular.module("risevision.widget.common").service("settingsSaver",["$q","$log","gadgetsApi","settingsParser",function(e,t,n,a){function i(e){var t=angular.copy(e);return delete t.params.id,delete t.params.companyId,delete t.params.rsW,delete t.params.rsH,t}this.saveSettings=function(r,o){var l=e.defer(),s=[],c="";r=i(r),o&&(s=o(r)),s.length>0&&(t.debug("Validation failed.",s),l.reject({alerts:s})),r.params.hasOwnProperty("layoutURL")&&(c+=r.params.layoutURL+"?",delete r.params.layoutURL),c+=a.encodeParams(r.params);var u=a.encodeAdditionalParams(r.additionalParams);return n.rpc.call("","rscmd_saveSettings",function(e){t.debug("encoded settings",JSON.stringify(e)),t.debug("Settings saved. ",r),l.resolve(e)},{params:c,additionalParams:u}),l.promise}}]).service("settingsGetter",["$q","gadgetsApi","$log","settingsParser","$window","defaultSettings",function(e,t,n,a,i,r){this.getAdditionalParams=function(){var i=e.defer(),o=r.additionalParams||{};return t.rpc.call("","rscmd_getAdditionalParams",function(e){e=e?a.parseAdditionalParams(e):{},n.debug("getAdditionalParams returns ",e),i.resolve(angular.extend(o,e))}),i.promise},this.getParams=function(){var e=r.params||{};return angular.extend(e,a.parseParams(i.location.search))}}]).service("settingsParser",[function(){function e(e){return 0===e.indexOf("up_")?e.slice(3):null}this.parseAdditionalParams=function(e){return e?JSON.parse(e):{}},this.encodeAdditionalParams=function(e){return JSON.stringify(e)},this.encodeParams=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var a;a="object"==typeof e[n]?JSON.stringify(e[n]):e[n],t.push("up_"+encodeURIComponent(n)+"="+encodeURIComponent(a))}return t.join("&")},this.parseParams=function(t){"?"===t[0]&&(t=t.slice(1));for(var n={},a=t.split("&"),i=0;i<a.length;i++){var r=a[i].split("="),o=e(decodeURIComponent(r[0]));if(o)try{n[o]=JSON.parse(decodeURIComponent(r[1]))}catch(l){n[o]=decodeURIComponent(r[1])}}return n}}]).service("settingsCloser",["$q","$log","gadgetsApi",function(e,t,n){this.closeSettings=function(){var t=e.defer();return n.rpc.call("","rscmd_closeSettings",function(){t.resolve(!0)}),t.promise}}]).value("defaultSettings",{}),function(e){"use strict";e.module("risevision.widget.common.visualization",[]).factory("visualizationApi",["$q","$window",function(e,t){var n,a=e.defer(),i={get:function(){return n||(n=a.promise,t.google.visualization?a.resolve(t.google.visualization):t.google.setOnLoadCallback(function(){a.resolve(t.google.visualization)})),n}};return i}])}(angular);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3NldHRpbmdzLm1pbi5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwicnVuIiwiJHRyYW5zbGF0ZSIsImtleSIsInN0b3JhZ2VLZXkiLCJzdG9yYWdlIiwiZmFsbGJhY2tGcm9tSW5jb3JyZWN0U3RvcmFnZVZhbHVlIiwicHJlZmVycmVkIiwicHJlZmVycmVkTGFuZ3VhZ2UiLCJpc1N0cmluZyIsInVzZSIsInB1dCIsImdldCIsInByb3ZpZGVyIiwiJFNUT1JBR0VfS0VZIiwiJHByZWZlcnJlZExhbmd1YWdlIiwiJGxhbmd1YWdlS2V5QWxpYXNlcyIsIiRmYWxsYmFja0xhbmd1YWdlIiwiJGZhbGxiYWNrV2FzU3RyaW5nIiwiJHVzZXMiLCIkbmV4dExhbmciLCIkc3RvcmFnZUZhY3RvcnkiLCIkc3RvcmFnZVByZWZpeCIsIiRtaXNzaW5nVHJhbnNsYXRpb25IYW5kbGVyRmFjdG9yeSIsIiRpbnRlcnBvbGF0aW9uRmFjdG9yeSIsIiRsb2FkZXJGYWN0b3J5IiwiJGxvYWRlck9wdGlvbnMiLCIkbm90Rm91bmRJbmRpY2F0b3JMZWZ0IiwiJG5vdEZvdW5kSW5kaWNhdG9yUmlnaHQiLCJsb2FkZXJDYWNoZSIsIiR0cmFuc2xhdGlvblRhYmxlIiwiJGF2YWlsYWJsZUxhbmd1YWdlS2V5cyIsIiRzdG9yYWdlS2V5IiwiJGludGVycG9sYXRvckZhY3RvcmllcyIsIiRpbnRlcnBvbGF0aW9uU2FuaXRpemF0aW9uU3RyYXRlZ3kiLCIkY2xvYWtDbGFzc05hbWUiLCIkcG9zdENvbXBpbGluZ0VuYWJsZWQiLCJORVNURURfT0JKRUNUX0RFTElNSVRFUiIsInZlcnNpb24iLCJnZXRGaXJzdEJyb3dzZXJMYW5ndWFnZSIsImkiLCJsYW5ndWFnZSIsIm5hdiIsIndpbmRvdyIsIm5hdmlnYXRvciIsImJyb3dzZXJMYW5ndWFnZVByb3BlcnR5S2V5cyIsImlzQXJyYXkiLCJsYW5ndWFnZXMiLCJsZW5ndGgiLCJkaXNwbGF5TmFtZSIsImdldExvY2FsZSIsInNwbGl0Iiwiam9pbiIsImluZGV4T2YiLCJhcnJheSIsInNlYXJjaEVsZW1lbnQiLCJsZW4iLCJ0cmltIiwidGhpcyIsInJlcGxhY2UiLCJuZWdvdGlhdGVMb2NhbGUiLCJhdmFpbCIsImxvY2FsZSIsImxvd2VyY2FzZSIsIm4iLCJwdXNoIiwiYWxpYXMiLCJsYW5nS2V5QWxpYXMiLCJoYXNXaWxkY2FyZEtleSIsImhhc0V4YWN0S2V5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwic2xpY2UiLCJwYXJ0cyIsInRyYW5zbGF0aW9ucyIsImxhbmdLZXkiLCJ0cmFuc2xhdGlvblRhYmxlIiwiaXNPYmplY3QiLCJleHRlbmQiLCJmbGF0T2JqZWN0IiwiY2xvYWtDbGFzc05hbWUiLCJuYW1lIiwiZGF0YSIsInBhdGgiLCJyZXN1bHQiLCJwcmV2S2V5Iiwia2V5V2l0aFBhdGgiLCJrZXlXaXRoU2hvcnRQYXRoIiwidmFsIiwiY29uY2F0IiwiYWRkSW50ZXJwb2xhdGlvbiIsImZhY3RvcnkiLCJ1c2VNZXNzYWdlRm9ybWF0SW50ZXJwb2xhdGlvbiIsInVzZUludGVycG9sYXRpb24iLCJ1c2VTYW5pdGl6ZVZhbHVlU3RyYXRlZ3kiLCJ2YWx1ZSIsInNldHVwUHJlZmVycmVkTGFuZ3VhZ2UiLCJ0cmFuc2xhdGlvbk5vdEZvdW5kSW5kaWNhdG9yIiwiaW5kaWNhdG9yIiwidHJhbnNsYXRpb25Ob3RGb3VuZEluZGljYXRvckxlZnQiLCJ0cmFuc2xhdGlvbk5vdEZvdW5kSW5kaWNhdG9yUmlnaHQiLCJmYWxsYmFja0xhbmd1YWdlIiwiZmFsbGJhY2tTdGFjayIsIkVycm9yIiwidXNlVXJsTG9hZGVyIiwidXJsIiwib3B0aW9ucyIsInVzZUxvYWRlciIsInVzZVN0YXRpY0ZpbGVzTG9hZGVyIiwibG9hZGVyRmFjdG9yeSIsInVzZUxvY2FsU3RvcmFnZSIsInVzZVN0b3JhZ2UiLCJ1c2VDb29raWVTdG9yYWdlIiwic3RvcmFnZUZhY3RvcnkiLCJzdG9yYWdlUHJlZml4IiwicHJlZml4IiwidXNlTWlzc2luZ1RyYW5zbGF0aW9uSGFuZGxlckxvZyIsInVzZU1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXIiLCJ1c2VQb3N0Q29tcGlsaW5nIiwiZGV0ZXJtaW5lUHJlZmVycmVkTGFuZ3VhZ2UiLCJmbiIsImlzRnVuY3Rpb24iLCJyZWdpc3RlckF2YWlsYWJsZUxhbmd1YWdlS2V5cyIsImxhbmd1YWdlS2V5cyIsImFsaWFzZXMiLCJ1c2VMb2FkZXJDYWNoZSIsImNhY2hlIiwidW5kZWZpbmVkIiwiJGdldCIsIiRsb2ciLCIkaW5qZWN0b3IiLCIkcm9vdFNjb3BlIiwiJHEiLCJTdG9yYWdlIiwiZmFsbGJhY2tJbmRleCIsInN0YXJ0RmFsbGJhY2tJdGVyYXRpb24iLCJkZWZhdWx0SW50ZXJwb2xhdG9yIiwicGVuZGluZ0xvYWRlciIsImludGVycG9sYXRvckhhc2hNYXAiLCJsYW5nUHJvbWlzZXMiLCJ0cmFuc2xhdGlvbklkIiwiaW50ZXJwb2xhdGVQYXJhbXMiLCJpbnRlcnBvbGF0aW9uSWQiLCJ0cmFuc2xhdGVBbGwiLCJ0cmFuc2xhdGlvbklkcyIsInJlc3VsdHMiLCJwcm9taXNlcyIsInRyYW5zbGF0ZSIsImRlZmVycmVkIiwiZGVmZXIiLCJyZWdhcmRsZXNzIiwicmVzb2x2ZSIsInRoZW4iLCJwcm9taXNlIiwiYyIsImFsbCIsImFwcGx5IiwicHJvbWlzZVRvV2FpdEZvciIsImluZGV4IiwiZGV0ZXJtaW5lVHJhbnNsYXRpb24iLCJyZWplY3QiLCJhcHBseU5vdEZvdW5kSW5kaWNhdG9ycyIsInVzZUxhbmd1YWdlIiwiJGVtaXQiLCJzZXRMb2NhbGUiLCJmb3JFYWNoIiwiaW50ZXJwb2xhdG9yIiwiaWQiLCJsb2FkQXN5bmMiLCJsb2FkZXJPcHRpb25zIiwiJGh0dHAiLCJ0YWJsZSIsImludGVycG9sYXRvckZhY3RvcnkiLCJnZXRJbnRlcnBvbGF0aW9uSWRlbnRpZmllciIsImdldFRyYW5zbGF0aW9uVGFibGUiLCJnZXRGYWxsYmFja1RyYW5zbGF0aW9uIiwiSW50ZXJwb2xhdG9yIiwiaW50ZXJwb2xhdGUiLCJnZXRGYWxsYmFja1RyYW5zbGF0aW9uSW5zdGFudCIsInRyYW5zbGF0ZUJ5SGFuZGxlciIsInJlc3VsdFN0cmluZyIsInJlc29sdmVGb3JGYWxsYmFja0xhbmd1YWdlIiwiZmFsbGJhY2tMYW5ndWFnZUluZGV4IiwicmVzb2x2ZUZvckZhbGxiYWNrTGFuZ3VhZ2VJbnN0YW50IiwiZmFsbGJhY2tUcmFuc2xhdGlvbiIsImZhbGxiYWNrVHJhbnNsYXRpb25JbnN0YW50IiwidHJhbnNsYXRpb24iLCJzdWJzdHIiLCJtaXNzaW5nVHJhbnNsYXRpb25IYW5kbGVyVHJhbnNsYXRpb24iLCJfdHJhbnNsYXRpb25JZCIsImRldGVybWluZVRyYW5zbGF0aW9uSW5zdGFudCIsInVzZUZhbGxiYWNrTGFuZ3VhZ2UiLCJsYW5nS2V5UG9zaXRpb24iLCJwcm9wb3NlZExhbmd1YWdlIiwiYWxpYXNlZEtleSIsImlzUG9zdENvbXBpbGluZ0VuYWJsZWQiLCJyZWZyZXNoIiwidGFibGVzIiwibG9hZGluZ0tleXMiLCJ0YWJsZURhdGEiLCJpbnN0YW50IiwiaXNVbmRlZmluZWQiLCJwb3NzaWJsZUxhbmdLZXlzIiwiaiIsImQiLCJwb3NzaWJsZUxhbmdLZXkiLCJ2ZXJzaW9uSW5mbyIsImVxdWFscyIsInByb2Nlc3NBc3luY1Jlc3VsdCIsIiRpbnRlcnBvbGF0ZSIsIiRsb2NhbGUiLCIkdHJhbnNsYXRlSW50ZXJwb2xhdG9yIiwiJGlkZW50aWZpZXIiLCIkc2FuaXRpemVWYWx1ZVN0cmF0ZWd5Iiwic2FuaXRpemVWYWx1ZVN0cmF0ZWdpZXMiLCJlc2NhcGVkIiwicGFyYW1zIiwiZWxlbWVudCIsInRleHQiLCJodG1sIiwic2FuaXRpemVQYXJhbXMiLCJzdHJpbmciLCJjb25zdGFudCIsImRpcmVjdGl2ZSIsIiRjb21waWxlIiwiJHBhcnNlIiwicmVzdHJpY3QiLCJzY29wZSIsImNvbXBpbGUiLCJ0RWxlbWVudCIsInRBdHRyIiwidHJhbnNsYXRlVmFsdWVzRXhpc3QiLCJ0cmFuc2xhdGVWYWx1ZXMiLCJ0cmFuc2xhdGVJbnRlcnBvbGF0aW9uIiwidHJhbnNsYXRlVmFsdWVFeGlzdCIsIm91dGVySFRNTCIsIm1hdGNoIiwiaW50ZXJwb2xhdGVSZWdFeHAiLCJzdGFydFN5bWJvbCIsImVuZFN5bWJvbCIsIndhdGNoZXJSZWdFeHAiLCJpRWxlbWVudCIsImlBdHRyIiwicHJlVGV4dCIsInBvc3RUZXh0Iiwib2JzZXJ2ZUVsZW1lbnRUcmFuc2xhdGlvbiIsImlzRGVmaW5lZCIsImludGVycG9sYXRlTWF0Y2hlcyIsIiRwYXJlbnQiLCJ3YXRjaGVyTWF0Y2hlcyIsIiR3YXRjaCIsIm5ld1ZhbHVlIiwidXBkYXRlVHJhbnNsYXRpb25zIiwib2JzZXJ2ZUF0dHJpYnV0ZVRyYW5zbGF0aW9uIiwidHJhbnNsYXRlQXR0ciIsIiRvYnNlcnZlIiwiZGVmYXVsdFRleHQiLCJvYnNlcnZlVmFsdWVBdHRyaWJ1dGUiLCJhdHRyTmFtZSIsImF0dHJpYnV0ZU5hbWUiLCJhdHRyIiwidXBkYXRlVHJhbnNsYXRpb24iLCJhcHBseVRyYW5zbGF0aW9uIiwic3VjY2Vzc2Z1bCIsImdsb2JhbGx5RW5hYmxlZCIsImxvY2FsbHlEZWZpbmVkIiwidHJhbnNsYXRlQ29tcGlsZSIsImxvY2FsbHlFbmFibGVkIiwiY29udGVudHMiLCIkYXR0ciIsInVuYmluZCIsIiRvbiIsImFwcGx5Q2xvYWsiLCJhZGRDbGFzcyIsInJlbW92ZUNsb2FrIiwicmVtb3ZlQ2xhc3MiLCJyZW1vdmVMaXN0ZW5lciIsInRyYW5zbGF0ZUNsb2FrIiwiZmlsdGVyIiwidHJhbnNsYXRlRmlsdGVyIiwiaW50ZXJwb2xhdGlvbiIsIiRzdGF0ZWZ1bCIsInN1ZmZpeCIsIm1ldGhvZCIsInN1Y2Nlc3MiLCJlcnJvciIsImxvYWRUcmFuc2xhdGlvbkZpbGUiLCJ0b0xvd2VyQ2FzZSIsImxhc3RJbmRleE9mIiwib3B0cyIsImNvbmZpZyIsIiR0cmFuc2xhdGVQcm92aWRlciIsIkxPQ0FMRVNfUFJFRklYIiwiTE9DQUxFU19TVUZJWCIsIiR0aW1lb3V0IiwiZmluZEVuZEV2ZW50TmFtZSIsImVuZEV2ZW50TmFtZXMiLCJ0cmFuc0VsZW1lbnQiLCJzdHlsZSIsIiR0cmFuc2l0aW9uIiwidHJpZ2dlciIsImVuZEV2ZW50TmFtZSIsImFuaW1hdGlvbiIsInRyYW5zaXRpb25FbmRIYW5kbGVyIiwiJGFwcGx5IiwiYmluZCIsImNzcyIsImNhbmNlbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInRyYW5zaXRpb25FbmRFdmVudE5hbWVzIiwiV2Via2l0VHJhbnNpdGlvbiIsIk1velRyYW5zaXRpb24iLCJPVHJhbnNpdGlvbiIsInRyYW5zaXRpb24iLCJhbmltYXRpb25FbmRFdmVudE5hbWVzIiwidHJhbnNpdGlvbkVuZEV2ZW50TmFtZSIsImFuaW1hdGlvbkVuZEV2ZW50TmFtZSIsImxpbmsiLCJhdHRycyIsImRvVHJhbnNpdGlvbiIsImNoYW5nZSIsIm5ld1RyYW5zaXRpb25Eb25lIiwiY3VycmVudFRyYW5zaXRpb24iLCJuZXdUcmFuc2l0aW9uIiwiZXhwYW5kIiwiaW5pdGlhbEFuaW1Ta2lwIiwiZXhwYW5kRG9uZSIsImhlaWdodCIsInNjcm9sbEhlaWdodCIsImNvbGxhcHNlIiwiY29sbGFwc2VEb25lIiwib2Zmc2V0V2lkdGgiLCJzaG91bGRDb2xsYXBzZSIsImNsb3NlT3RoZXJzIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiRhdHRycyIsImFjY29yZGlvbkNvbmZpZyIsImdyb3VwcyIsIm9wZW5Hcm91cCIsIiRldmFsIiwiZ3JvdXAiLCJpc09wZW4iLCJhZGRHcm91cCIsImdyb3VwU2NvcGUiLCJ0aGF0IiwicmVtb3ZlR3JvdXAiLCJzcGxpY2UiLCJ0cmFuc2NsdWRlIiwidGVtcGxhdGVVcmwiLCJyZXF1aXJlIiwiaGVhZGluZyIsImlzRGlzYWJsZWQiLCJzZXRIZWFkaW5nIiwiYWNjb3JkaW9uQ3RybCIsInRvZ2dsZU9wZW4iLCJ0ZW1wbGF0ZSIsImFjY29yZGlvbkdyb3VwQ3RybCIsImFjY29yZGlvblRyYW5zY2x1ZGUiLCJhcHBlbmQiLCJjbG9zZWFibGUiLCJ0eXBlIiwiY2xvc2UiLCJiaW5kSHRtbFVuc2FmZSIsImFjdGl2ZUNsYXNzIiwidG9nZ2xlRXZlbnQiLCJidXR0b25Db25maWciLCJjdHJscyIsImJ1dHRvbnNDdHJsIiwibmdNb2RlbEN0cmwiLCIkcmVuZGVyIiwidG9nZ2xlQ2xhc3MiLCIkbW9kZWxWYWx1ZSIsImJ0blJhZGlvIiwiaXNBY3RpdmUiLCJoYXNDbGFzcyIsInVuY2hlY2thYmxlIiwiJHNldFZpZXdWYWx1ZSIsImdldFRydWVWYWx1ZSIsImdldENoZWNrYm94VmFsdWUiLCJidG5DaGVja2JveFRydWUiLCJnZXRGYWxzZVZhbHVlIiwiYnRuQ2hlY2tib3hGYWxzZSIsImF0dHJpYnV0ZVZhbHVlIiwiZGVmYXVsdFZhbHVlIiwicmVzdGFydFRpbWVyIiwicmVzZXRUaW1lciIsImludGVydmFsIiwiaXNOYU4iLCJjdXJyZW50VGltZW91dCIsInRpbWVyRm4iLCJpc1BsYXlpbmciLCJuZXh0IiwicGF1c2UiLCJzZWxmIiwic2xpZGVzIiwiY3VycmVudEluZGV4IiwiY3VycmVudFNsaWRlIiwiZGVzdHJveWVkIiwic2VsZWN0IiwibmV4dFNsaWRlIiwiZGlyZWN0aW9uIiwiZ29OZXh0Iiwibm9UcmFuc2l0aW9uIiwiJGVsZW1lbnQiLCJzbGlkZSIsImVudGVyaW5nIiwibGVhdmluZyIsImFjdGl2ZSIsIiRjdXJyZW50VHJhbnNpdGlvbiIsImN1cnJlbnQiLCJ0cmFuc2l0aW9uRG9uZSIsIm5leHRJbmRleCIsImluZGV4T2ZTbGlkZSIsIm5ld0luZGV4IiwicHJldiIsInBsYXkiLCJub1BhdXNlIiwiYWRkU2xpZGUiLCJyZW1vdmVTbGlkZSIsImNhcm91c2VsQ3RybCIsInNlcnZpY2UiLCJvcmRlckJ5RmlsdGVyIiwiaXNWYWxpZCIsInllYXIiLCJtb250aCIsImRhdGUiLCJwYXJzZXJzIiwiZm9ybWF0Q29kZVRvUmVnZXgiLCJ5eXl5IiwicmVnZXgiLCJ5eSIsInkiLCJNTU1NIiwiREFURVRJTUVfRk9STUFUUyIsIk1PTlRIIiwiTU1NIiwiU0hPUlRNT05USCIsIk1NIiwiTSIsImRkIiwiRUVFRSIsIkRBWSIsIkVFRSIsIlNIT1JUREFZIiwiY3JlYXRlUGFyc2VyIiwiZm9ybWF0IiwibWFwIiwiY29kZSIsIlJlZ0V4cCIsInBhcnNlIiwiaW5wdXQiLCJwYXJzZXIiLCJkdCIsImZpZWxkcyIsImhvdXJzIiwibWFwcGVyIiwiRGF0ZSIsIiRkb2N1bWVudCIsIiR3aW5kb3ciLCJnZXRTdHlsZSIsImVsIiwiY3NzcHJvcCIsImN1cnJlbnRTdHlsZSIsImdldENvbXB1dGVkU3R5bGUiLCJpc1N0YXRpY1Bvc2l0aW9uZWQiLCJwYXJlbnRPZmZzZXRFbCIsImRvY0RvbUVsIiwib2Zmc2V0UGFyZW50IiwicG9zaXRpb24iLCJlbEJDUiIsIm9mZnNldCIsIm9mZnNldFBhcmVudEJDUiIsInRvcCIsImxlZnQiLCJvZmZzZXRQYXJlbnRFbCIsImNsaWVudFRvcCIsInNjcm9sbFRvcCIsImNsaWVudExlZnQiLCJzY3JvbGxMZWZ0IiwiYm91bmRpbmdDbGllbnRSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwid2lkdGgiLCJwcm9wIiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudEVsZW1lbnQiLCJwYWdlWE9mZnNldCIsInBvc2l0aW9uRWxlbWVudHMiLCJob3N0RWwiLCJ0YXJnZXRFbCIsInBvc2l0aW9uU3RyIiwiYXBwZW5kVG9Cb2R5IiwiaG9zdEVsUG9zIiwidGFyZ2V0RWxXaWR0aCIsInRhcmdldEVsSGVpZ2h0IiwidGFyZ2V0RWxQb3MiLCJwb3NpdGlvblN0clBhcnRzIiwicG9zMCIsInBvczEiLCJzaGlmdFdpZHRoIiwiY2VudGVyIiwicmlnaHQiLCJzaGlmdEhlaWdodCIsImJvdHRvbSIsImZvcm1hdERheSIsImZvcm1hdE1vbnRoIiwiZm9ybWF0WWVhciIsImZvcm1hdERheUhlYWRlciIsImZvcm1hdERheVRpdGxlIiwiZm9ybWF0TW9udGhUaXRsZSIsImRhdGVwaWNrZXJNb2RlIiwibWluTW9kZSIsIm1heE1vZGUiLCJzaG93V2Vla3MiLCJzdGFydGluZ0RheSIsInllYXJSYW5nZSIsIm1pbkRhdGUiLCJtYXhEYXRlIiwiZGF0ZUZpbHRlciIsImRhdGVwaWNrZXJDb25maWciLCJub29wIiwibW9kZXMiLCJyZWZyZXNoVmlldyIsInVuaXF1ZUlkIiwiJGlkIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYWN0aXZlRGF0ZSIsImluaXREYXRlIiwiZGF0ZU9iamVjdCIsImNvbXBhcmUiLCJhY3RpdmVEYXRlSWQiLCJ1aWQiLCJpbml0IiwibmdNb2RlbEN0cmxfIiwicmVuZGVyIiwiJHNldFZhbGlkaXR5IiwiX3JlZnJlc2hWaWV3IiwiY3JlYXRlRGF0ZU9iamVjdCIsIm1vZGVsIiwibGFiZWwiLCJzZWxlY3RlZCIsImRpc2FibGVkIiwiZGF0ZURpc2FibGVkIiwibW9kZSIsImFyciIsInNpemUiLCJhcnJheXMiLCJzZXRGdWxsWWVhciIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwibW92ZSIsInN0ZXAiLCJ5ZWFycyIsIm1vbnRocyIsInRvZ2dsZU1vZGUiLCJrZXlzIiwxMywzMiwzMywzNCwzNSwzNiwzNywzOCwzOSw0MCwiZm9jdXNFbGVtZW50IiwiZm9jdXMiLCJrZXlkb3duIiwiZXZ0Iiwid2hpY2giLCJzaGlmdEtleSIsImFsdEtleSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiY3RybEtleSIsImhhbmRsZUtleURvd24iLCJkYXRlcGlja2VyQ3RybCIsImN0cmwiLCJnZXREYXlzSW5Nb250aCIsIkRBWVNfSU5fTU9OVEgiLCJnZXREYXRlcyIsInN0YXJ0RGF0ZSIsImRhdGVzIiwiQXJyYXkiLCJzZXRIb3VycyIsInNldERhdGUiLCJnZXRJU084NjAxV2Vla051bWJlciIsImNoZWNrRGF0ZSIsImdldERheSIsInRpbWUiLCJnZXRUaW1lIiwic2V0TW9udGgiLCJyb3VuZCIsImZpcnN0RGF5T2ZNb250aCIsImRpZmZlcmVuY2UiLCJudW1EaXNwbGF5ZWRGcm9tUHJldmlvdXNNb250aCIsImZpcnN0RGF0ZSIsImRheXMiLCJzZWNvbmRhcnkiLCJsYWJlbHMiLCJhYmJyIiwiZnVsbCIsInRpdGxlIiwicm93cyIsIndlZWtOdW1iZXJzIiwid2Vla051bWJlciIsIm51bVdlZWtzIiwiZGF0ZTEiLCJkYXRlMiIsIm1pbiIsImdldFN0YXJ0aW5nWWVhciIsInBhcnNlSW50IiwicmFuZ2UiLCJzdGFydCIsImRhdGVwaWNrZXJQb3B1cCIsImN1cnJlbnRUZXh0IiwiY2xlYXJUZXh0IiwiY2xvc2VUZXh0IiwiY2xvc2VPbkRhdGVTZWxlY3Rpb24iLCJzaG93QnV0dG9uQmFyIiwiJHBvc2l0aW9uIiwiZGF0ZVBhcnNlciIsImRhdGVwaWNrZXJQb3B1cENvbmZpZyIsIm5nTW9kZWwiLCJjYW1lbHRvRGFzaCIsIiQxIiwicGFyc2VEYXRlIiwidmlld1ZhbHVlIiwiaXNEYXRlIiwiZGF0ZUZvcm1hdCIsImRhdGVwaWNrZXJBcHBlbmRUb0JvZHkiLCJnZXRUZXh0IiwicG9wdXBFbCIsIm5nLW1vZGVsIiwibmctY2hhbmdlIiwiZGF0ZXBpY2tlckVsIiwiY2hpbGRyZW4iLCJkYXRlcGlja2VyT3B0aW9ucyIsIm9wdGlvbiIsIiRwYXJzZXJzIiwidW5zaGlmdCIsImRhdGVTZWxlY3Rpb24iLCIkdmlld1ZhbHVlIiwiZG9jdW1lbnRDbGlja0JpbmQiLCJldmVudCIsInRhcmdldCIsIiRicm9hZGNhc3QiLCJ0b2RheSIsIiRwb3B1cCIsImZpbmQiLCJhZnRlciIsInJlbW92ZSIsIm9wZW5DbGFzcyIsIm9wZW5TY29wZSIsIm9wZW4iLCJkcm9wZG93blNjb3BlIiwiY2xvc2VEcm9wZG93biIsImVzY2FwZUtleUJpbmQiLCJpc0RlZmF1bHRQcmV2ZW50ZWQiLCJmb2N1c1RvZ2dsZUVsZW1lbnQiLCJkcm9wZG93bkNvbmZpZyIsImRyb3Bkb3duU2VydmljZSIsIiRhbmltYXRlIiwiZ2V0SXNPcGVuIiwiJG5ldyIsInNldElzT3BlbiIsInRvZ2dsZUludm9rZXIiLCJvblRvZ2dsZSIsImFzc2lnbiIsInRvZ2dsZSIsImFyZ3VtZW50cyIsInRvZ2dsZUVsZW1lbnQiLCJ3YXNPcGVuIiwiJGRlc3Ryb3kiLCJkcm9wZG93bkN0cmwiLCJ0b2dnbGVEcm9wZG93biIsImFyaWEtaGFzcG9wdXAiLCJhcmlhLWV4cGFuZGVkIiwiY3JlYXRlTmV3Iiwic3RhY2siLCJhZGQiLCJpZHgiLCJyZW1vdmVUb3AiLCJhbmltYXRlIiwiJG1vZGFsU3RhY2siLCJ0QXR0cnMiLCJ3aW5kb3dDbGFzcyIsIm1vZGFsIiwiZ2V0VG9wIiwiYmFja2Ryb3AiLCJjdXJyZW50VGFyZ2V0IiwiZGlzbWlzcyIsIiQkc3RhY2tlZE1hcCIsImJhY2tkcm9wSW5kZXgiLCJ0b3BCYWNrZHJvcEluZGV4Iiwib3BlbmVkIiwib3BlbmVkV2luZG93cyIsInJlbW92ZU1vZGFsV2luZG93IiwibW9kYWxJbnN0YW5jZSIsImJvZHkiLCJlcSIsIm1vZGFsV2luZG93IiwicmVtb3ZlQWZ0ZXJBbmltYXRlIiwibW9kYWxEb21FbCIsIm1vZGFsU2NvcGUiLCJPUEVORURfTU9EQUxfQ0xBU1MiLCJjaGVja1JlbW92ZUJhY2tkcm9wIiwiYmFja2Ryb3BEb21FbCIsImJhY2tkcm9wU2NvcGVSZWYiLCJiYWNrZHJvcFNjb3BlIiwiZG9tRWwiLCJlbXVsYXRlVGltZSIsImRvbmUiLCJhZnRlckFuaW1hdGluZyIsInRpbWVvdXQiLCJuZXdCYWNrZHJvcEluZGV4Iiwia2V5Ym9hcmQiLCJjdXJyQmFja2Ryb3BJbmRleCIsImFuZ3VsYXJEb21FbCIsInRlbXBsYXRlLXVybCIsIndpbmRvd1RlbXBsYXRlVXJsIiwid2luZG93LWNsYXNzIiwiY29udGVudCIsInJlYXNvbiIsImRpc21pc3NBbGwiLCJ0b3BNb2RhbCIsIiRtb2RhbFByb3ZpZGVyIiwiJHRlbXBsYXRlQ2FjaGUiLCIkY29udHJvbGxlciIsImdldFRlbXBsYXRlUHJvbWlzZSIsIndoZW4iLCJnZXRSZXNvbHZlUHJvbWlzZXMiLCJyZXNvbHZlcyIsInByb21pc2VzQXJyIiwiaW52b2tlIiwiJG1vZGFsIiwibW9kYWxPcHRpb25zIiwibW9kYWxSZXN1bHREZWZlcnJlZCIsIm1vZGFsT3BlbmVkRGVmZXJyZWQiLCJ0ZW1wbGF0ZUFuZFJlc29sdmVQcm9taXNlIiwidHBsQW5kVmFycyIsIiRjbG9zZSIsIiRkaXNtaXNzIiwiY3RybEluc3RhbmNlIiwiY3RybExvY2FscyIsInJlc29sdmVJdGVyIiwiJG1vZGFsSW5zdGFuY2UiLCJzZXROdW1QYWdlcyIsIm51bVBhZ2VzIiwiaXRlbXNQZXJQYWdlIiwidG90YWxQYWdlcyIsImNhbGN1bGF0ZVRvdGFsUGFnZXMiLCJjZWlsIiwidG90YWxJdGVtcyIsIm1heCIsInBhZ2UiLCJzZWxlY3RQYWdlIiwibm9QcmV2aW91cyIsIm5vTmV4dCIsImJvdW5kYXJ5TGlua3MiLCJkaXJlY3Rpb25MaW5rcyIsImZpcnN0VGV4dCIsInByZXZpb3VzVGV4dCIsIm5leHRUZXh0IiwibGFzdFRleHQiLCJyb3RhdGUiLCJwYWdpbmF0aW9uQ29uZmlnIiwibWFrZVBhZ2UiLCJudW1iZXIiLCJnZXRQYWdlcyIsImN1cnJlbnRQYWdlIiwicGFnZXMiLCJzdGFydFBhZ2UiLCJlbmRQYWdlIiwiaXNNYXhTaXplZCIsIm1heFNpemUiLCJwcmV2aW91c1BhZ2VTZXQiLCJuZXh0UGFnZVNldCIsInBhZ2luYXRpb25DdHJsIiwib3JpZ2luYWxSZW5kZXIiLCJhbGlnbiIsInBhZ2VyQ29uZmlnIiwic25ha2VfY2FzZSIsInJlZ2V4cCIsInNlcGFyYXRvciIsImxldHRlciIsInBvcyIsImRlZmF1bHRPcHRpb25zIiwicGxhY2VtZW50IiwicG9wdXBEZWxheSIsInRyaWdnZXJNYXAiLCJtb3VzZWVudGVyIiwiY2xpY2siLCJnbG9iYWxPcHRpb25zIiwic2V0VHJpZ2dlcnMiLCJ0cmlnZ2VycyIsImRlZmF1bHRUcmlnZ2VyU2hvdyIsImdldFRyaWdnZXJzIiwic2hvdyIsImhpZGUiLCJkaXJlY3RpdmVOYW1lIiwic3RhcnRTeW0iLCJlbmRTeW0iLCJ0b29sdGlwTGlua2VyIiwidG9nZ2xlVG9vbHRpcEJpbmQiLCJ0dF9pc09wZW4iLCJoaWRlVG9vbHRpcEJpbmQiLCJzaG93VG9vbHRpcEJpbmQiLCJoYXNFbmFibGVFeHAiLCJ0dF9wb3B1cERlbGF5IiwicG9wdXBUaW1lb3V0IiwicmVwb3NpdGlvbiIsInRyYW5zaXRpb25UaW1lb3V0IiwidHRfY29udGVudCIsImNyZWF0ZVRvb2x0aXAiLCJ0b29sdGlwIiwiZGlzcGxheSIsInBvc2l0aW9uVG9vbHRpcCIsIiRkaWdlc3QiLCJ0dF9hbmltYXRpb24iLCJyZW1vdmVUb29sdGlwIiwidHRQb3NpdGlvbiIsInR0X3BsYWNlbWVudCIsInR0X3RpdGxlIiwiZGVsYXkiLCJ1bnJlZ2lzdGVyVHJpZ2dlcnMiLCIkdG9vbHRpcCIsInByb2dyZXNzQ29uZmlnIiwiYmFycyIsImFkZEJhciIsImJhciIsInBlcmNlbnQiLCJ0b0ZpeGVkIiwicmVtb3ZlQmFyIiwicHJvZ3Jlc3NDdHJsIiwic3RhdGVPbiIsInN0YXRlT2ZmIiwicmF0aW5nQ29uZmlnIiwicmF0aW5nU3RhdGVzIiwiYnVpbGRUZW1wbGF0ZU9iamVjdHMiLCJzdGF0ZXMiLCJyYXRlIiwicmVhZG9ubHkiLCJlbnRlciIsIm9uSG92ZXIiLCJyZXNldCIsIm9uTGVhdmUiLCJvbktleWRvd24iLCJ0ZXN0IiwicmF0aW5nQ3RybCIsInRhYnMiLCJzZWxlY3RlZFRhYiIsInRhYiIsIm9uRGVzZWxlY3QiLCJvblNlbGVjdCIsImFkZFRhYiIsInJlbW92ZVRhYiIsIm5ld0FjdGl2ZUluZGV4IiwidmVydGljYWwiLCJqdXN0aWZpZWQiLCJlbG0iLCJ0YWJzZXRDdHJsIiwiJHRyYW5zY2x1ZGVGbiIsImlzVGFiSGVhZGluZyIsIm5vZGUiLCJ0YWdOYW1lIiwiaGFzQXR0cmlidXRlIiwidGFiQ29udGVudFRyYW5zY2x1ZGUiLCJoZWFkaW5nRWxlbWVudCIsImhvdXJTdGVwIiwibWludXRlU3RlcCIsInNob3dNZXJpZGlhbiIsIm1lcmlkaWFucyIsInJlYWRvbmx5SW5wdXQiLCJtb3VzZXdoZWVsIiwidGltZXBpY2tlckNvbmZpZyIsImdldEhvdXJzRnJvbVRlbXBsYXRlIiwidmFsaWQiLCJtZXJpZGlhbiIsImdldE1pbnV0ZXNGcm9tVGVtcGxhdGUiLCJtaW51dGVzIiwicGFkIiwidG9TdHJpbmciLCJrZXlib2FyZENoYW5nZSIsIm1ha2VWYWxpZCIsInVwZGF0ZVRlbXBsYXRlIiwiaW52YWxpZEhvdXJzIiwiaW52YWxpZE1pbnV0ZXMiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJhZGRNaW51dGVzIiwiQU1QTVMiLCJpbnB1dHMiLCJob3Vyc0lucHV0RWwiLCJtaW51dGVzSW5wdXRFbCIsInNldHVwTW91c2V3aGVlbEV2ZW50cyIsInNldHVwSW5wdXRFdmVudHMiLCIkZXJyb3IiLCJpc1Njcm9sbGluZ1VwIiwiZSIsIm9yaWdpbmFsRXZlbnQiLCJkZWx0YSIsIndoZWVsRGVsdGEiLCJkZWx0YVkiLCJkZXRhaWwiLCJpbmNyZW1lbnRIb3VycyIsImRlY3JlbWVudEhvdXJzIiwiaW5jcmVtZW50TWludXRlcyIsImRlY3JlbWVudE1pbnV0ZXMiLCJ1cGRhdGVIb3VycyIsInVwZGF0ZU1pbnV0ZXMiLCJpbnZhbGlkYXRlIiwic2V0TWludXRlcyIsInRvZ2dsZU1lcmlkaWFuIiwidGltZXBpY2tlckN0cmwiLCJUWVBFQUhFQURfUkVHRVhQIiwiaXRlbU5hbWUiLCJzb3VyY2UiLCJ2aWV3TWFwcGVyIiwibW9kZWxNYXBwZXIiLCJ0eXBlYWhlYWRQYXJzZXIiLCJIT1RfS0VZUyIsIm9yaWdpbmFsU2NvcGUiLCJtb2RlbEN0cmwiLCJoYXNGb2N1cyIsIm1pblNlYXJjaCIsInR5cGVhaGVhZE1pbkxlbmd0aCIsIndhaXRUaW1lIiwidHlwZWFoZWFkV2FpdE1zIiwiaXNFZGl0YWJsZSIsInR5cGVhaGVhZEVkaXRhYmxlIiwiaXNMb2FkaW5nU2V0dGVyIiwidHlwZWFoZWFkTG9hZGluZyIsIm9uU2VsZWN0Q2FsbGJhY2siLCJ0eXBlYWhlYWRPblNlbGVjdCIsImlucHV0Rm9ybWF0dGVyIiwidHlwZWFoZWFkSW5wdXRGb3JtYXR0ZXIiLCJ0eXBlYWhlYWRBcHBlbmRUb0JvZHkiLCIkc2V0TW9kZWxWYWx1ZSIsInBhcnNlclJlc3VsdCIsInR5cGVhaGVhZCIsInBvcHVwSWQiLCJhcmlhLWF1dG9jb21wbGV0ZSIsImFyaWEtb3ducyIsInBvcFVwRWwiLCJtYXRjaGVzIiwicXVlcnkiLCJ0eXBlYWhlYWRUZW1wbGF0ZVVybCIsInJlc2V0TWF0Y2hlcyIsImFjdGl2ZUlkeCIsImdldE1hdGNoSWQiLCJyZW1vdmVBdHRyIiwiZ2V0TWF0Y2hlc0FzeW5jIiwiaW5wdXRWYWx1ZSIsImxvY2FscyIsIm9uQ3VycmVudFJlcXVlc3QiLCJ0aW1lb3V0UHJvbWlzZSIsIiRmb3JtYXR0ZXJzIiwibW9kZWxWYWx1ZSIsImNhbmRpZGF0ZVZpZXdWYWx1ZSIsImVtcHR5Vmlld1ZhbHVlIiwiaXRlbSIsIiRpdGVtIiwiJG1vZGVsIiwiJGxhYmVsIiwiZGlzbWlzc0NsaWNrSGFuZGxlciIsIm1hdGNoSWR4Iiwic2VsZWN0QWN0aXZlIiwic2VsZWN0TWF0Y2giLCJ0cGxVcmwiLCJ0cGxDb250ZW50IiwicmVwbGFjZVdpdGgiLCJlc2NhcGVSZWdleHAiLCJxdWVyeVRvRXNjYXBlIiwibWF0Y2hJdGVtIiwiJHNjZSIsIlNUT1JBR0VfTU9EQUwiLCJsb2NhbCIsInVzZUN0cmwiLCJpbnN0YW5jZVRlbXBsYXRlIiwiY29tcGFueUlkIiwic3RvcmFnZVVybCIsInRydXN0QXNSZXNvdXJjZVVybCIsImZpbGVzIiwiaW5mbyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdG9yYWdlVGVzdCIsInN0b3JhZ2VQcm9kIiwib3JpZ2luIiwiYXBwIiwiZXJyIiwiaGlkZUxhYmVsIiwiaGlkZVN0b3JhZ2UiLCJmaWxlVHlwZSIsImhhc1ZhbGlkRXh0ZW5zaW9uIiwiZXh0ZW5zaW9ucyIsInRlc3RVcmwiLCJ1cmxSZWdFeHAiLCJpbnZhbGlkVHlwZSIsImRvVmFsaWRhdGlvbiIsImZvcmNlZFZhbGlkIiwiYWxsb3dJbml0RW1wdHkiLCJpbml0RW1wdHkiLCJibHVyIiwiaGVscCIsImNvbnRyaWJ1dGUiLCJzYXZlIiwiZGlzYWJsZVNhdmUiLCJlbGVtIiwiaGVscFJlZiIsImNvbnRyaWJ1dGVSZWYiLCJjb21tb25TZXR0aW5ncyIsImlzRm9sZGVyU2VsZWN0ZWQiLCJwYWlyIiwiaXNGb2xkZXIiLCJzZXR0aW5nc0Zvcm0iLCJ1cmxGaWVsZCIsIiR2YWxpZCIsInNldHRpbmdzIiwiYWRkaXRpb25hbFBhcmFtcyIsImdldFN0b3JhZ2VVcmxEYXRhIiwic2NhbGVUb0ZpdCIsIm9yZGVyIiwiZHVyYXRpb24iLCJhdXRvSGlkZSIsInNldHRpbmdzU2F2ZXIiLCJzZXR0aW5nc0dldHRlciIsInNldHRpbmdzQ2xvc2VyIiwiYWxlcnRzIiwiZ2V0QWRkaXRpb25hbFBhcmFtIiwiZGVmYXVsdFZhbCIsInNldEFkZGl0aW9uYWxQYXJhbSIsImxvYWRBZGRpdGlvbmFsUGFyYW1zIiwiZ2V0QWRkaXRpb25hbFBhcmFtcyIsImFsZXJ0Iiwic2V0QWRkaXRpb25hbFBhcmFtcyIsInNhdmVTZXR0aW5ncyIsImNsb3NlU2V0dGluZ3MiLCJnZXRQYXJhbXMiLCIkZWxtIiwiJHdhdGNoQ29sbGVjdGlvbiIsIm5ld0FsZXJ0cyIsIm9sZEFsZXJ0cyIsIiQiLCJTVE9SQUdFX0ZJTEVfVVJMX0JBU0UiLCJTVE9SQUdFX0ZPTERFUl9VUkxfQkFTRSIsImdldFN0b3JhZ2VUeXBlIiwiZ2V0Q29tcGFueUlkIiwicCIsInN0ciIsImRlY29kZVVSSUNvbXBvbmVudCIsImZpbGVOYW1lIiwicG9wIiwiZm9sZGVyIiwiZ2FkZ2V0cyIsImkxOG4iLCJmYWxsYmFja0xuZyIsInJlc0dldFBhdGgiLCJpc0ltYWdlIiwic3JjIiwiaW1hZ2UiLCJJbWFnZSIsIm9ubG9hZCIsIm9uZXJyb3IiLCJnYWRnZXRzQXBpIiwic2V0dGluZ3NQYXJzZXIiLCJwcm9jZXNzU2V0dGluZ3MiLCJuZXdTZXR0aW5ncyIsImNvcHkiLCJyc1ciLCJyc0giLCJ2YWxpZGF0b3IiLCJkZWJ1ZyIsImxheW91dFVSTCIsImVuY29kZVBhcmFtcyIsImFkZGl0aW9uYWxQYXJhbXNTdHIiLCJlbmNvZGVBZGRpdGlvbmFsUGFyYW1zIiwicnBjIiwiSlNPTiIsInN0cmluZ2lmeSIsImRlZmF1bHRTZXR0aW5ncyIsImRlZmF1bHRBZGRpdGlvbmFsUGFyYW1zIiwicGFyc2VBZGRpdGlvbmFsUGFyYW1zIiwiZGVmYXVsdFBhcmFtcyIsInBhcnNlUGFyYW1zIiwibG9jYXRpb24iLCJzZWFyY2giLCJzdHJpcFByZWZpeCIsImVuY29kZVVSSUNvbXBvbmVudCIsInBhcmFtc1N0ciIsInZhcnMiLCJnb29nbGUiLCJ2aXN1YWxpemF0aW9uIiwic2V0T25Mb2FkQ2FsbGJhY2siXSwibWFwcGluZ3MiOiJBQVlBQSxRQUFRQyxPQUFPLDBCQUEyQixPQUV6Q0MsS0FBSyxhQUFjLFNBQVVDLEdBRTVCLEdBQUlDLEdBQU1ELEVBQVdFLGFBQ2pCQyxFQUFVSCxFQUFXRyxVQUVyQkMsRUFBb0MsV0FDdEMsR0FBSUMsR0FBWUwsRUFBV00sbUJBQ3ZCVCxTQUFRVSxTQUFTRixHQUNuQkwsRUFBV1EsSUFBSUgsR0FJZkYsRUFBUU0sSUFBSVIsRUFBS0QsRUFBV1EsT0FJNUJMLEdBQ0dBLEVBQVFPLElBQUlULEdBR2ZELEVBQVdRLElBQUlMLEVBQVFPLElBQUlULElBQU0sU0FBU0csR0FGMUNBLElBSU9QLFFBQVFVLFNBQVNQLEVBQVdNLHNCQUNyQ04sRUFBV1EsSUFBSVIsRUFBV00sd0JBYTlCVCxRQUFRQyxPQUFPLDBCQUEwQmEsU0FBUyxjQUFlLGVBQWdCLFNBQVVDLEdBRXpGLEdBQ0lDLEdBRUFDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBRUFDLEVBQ0FDLEVBQ0FDLEVBR0FDLEVBRUFDLEVBQ0FDLEVBQ0FDLEVBR0FDLEVBdEJBQyxLQUVBQyxLQU9BQyxFQUFjbEIsRUFJZG1CLEtBQ0FDLEdBQXFDLEVBRXJDQyxFQUFrQixrQkFJbEJDLEdBQXdCLEVBQ3hCQyxFQUEwQixJQUcxQkMsRUFBVSxRQUdWQyxFQUEwQixXQUM1QixHQUVJQyxHQUNBQyxFQUhBQyxFQUFNQyxPQUFPQyxVQUNiQyxHQUEr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T0FBT0MsY0FNbEJyN0IsRUFBU0csUUFBUXFULEVBQVE0bkIsT0FBT0MsZUFMaEM3bkIsRUFBUTRuQixPQUFPRSxrQkFBa0IsV0FDL0J0N0IsRUFBU0csUUFBUXFULEVBQVE0bkIsT0FBT0Msa0JBTy9CaDdCLEdBR1gsT0FBTzlELE9BSVY5RiIsImZpbGUiOiJqcy9zZXR0aW5ncy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIGFuZ3VsYXItdHJhbnNsYXRlIC0gdjIuNS4yIC0gMjAxNC0xMi0xMFxuICogaHR0cDovL2dpdGh1Yi5jb20vYW5ndWxhci10cmFuc2xhdGUvYW5ndWxhci10cmFuc2xhdGVcbiAqIENvcHlyaWdodCAoYykgMjAxNCA7IExpY2Vuc2VkIE1JVFxuICovXG4vKipcbiAqIEBuZ2RvYyBvdmVydmlld1xuICogQG5hbWUgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIG1haW4gbW9kdWxlIHdoaWNoIGhvbGRzIGV2ZXJ5dGhpbmcgdG9nZXRoZXIuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdwYXNjYWxwcmVjaHQudHJhbnNsYXRlJywgWyduZyddKVxuXG4ucnVuKFsnJHRyYW5zbGF0ZScsIGZ1bmN0aW9uICgkdHJhbnNsYXRlKSB7XG5cbiAgdmFyIGtleSA9ICR0cmFuc2xhdGUuc3RvcmFnZUtleSgpLFxuICAgICAgc3RvcmFnZSA9ICR0cmFuc2xhdGUuc3RvcmFnZSgpO1xuXG4gIHZhciBmYWxsYmFja0Zyb21JbmNvcnJlY3RTdG9yYWdlVmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcHJlZmVycmVkID0gJHRyYW5zbGF0ZS5wcmVmZXJyZWRMYW5ndWFnZSgpO1xuICAgIGlmIChhbmd1bGFyLmlzU3RyaW5nKHByZWZlcnJlZCkpIHtcbiAgICAgICR0cmFuc2xhdGUudXNlKHByZWZlcnJlZCk7XG4gICAgICAvLyAkdHJhbnNsYXRlLnVzZSgpIHdpbGwgYWxzbyByZW1lbWJlciB0aGUgbGFuZ3VhZ2UuXG4gICAgICAvLyBTbywgd2UgZG9uJ3QgbmVlZCB0byBjYWxsIHN0b3JhZ2UucHV0KCkgaGVyZS5cbiAgICB9IGVsc2Uge1xuICAgICAgc3RvcmFnZS5wdXQoa2V5LCAkdHJhbnNsYXRlLnVzZSgpKTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKHN0b3JhZ2UpIHtcbiAgICBpZiAoIXN0b3JhZ2UuZ2V0KGtleSkpIHtcbiAgICAgIGZhbGxiYWNrRnJvbUluY29ycmVjdFN0b3JhZ2VWYWx1ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkdHJhbnNsYXRlLnVzZShzdG9yYWdlLmdldChrZXkpKVsnY2F0Y2gnXShmYWxsYmFja0Zyb21JbmNvcnJlY3RTdG9yYWdlVmFsdWUpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChhbmd1bGFyLmlzU3RyaW5nKCR0cmFuc2xhdGUucHJlZmVycmVkTGFuZ3VhZ2UoKSkpIHtcbiAgICAkdHJhbnNsYXRlLnVzZSgkdHJhbnNsYXRlLnByZWZlcnJlZExhbmd1YWdlKCkpO1xuICB9XG59XSk7XG5cbi8qKlxuICogQG5nZG9jIG9iamVjdFxuICogQG5hbWUgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXJcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqICR0cmFuc2xhdGVQcm92aWRlciBhbGxvd3MgZGV2ZWxvcGVycyB0byByZWdpc3RlciB0cmFuc2xhdGlvbi10YWJsZXMsIGFzeW5jaHJvbm91cyBsb2FkZXJzXG4gKiBhbmQgc2ltaWxhciB0byBjb25maWd1cmUgdHJhbnNsYXRpb24gYmVoYXZpb3IgZGlyZWN0bHkgaW5zaWRlIG9mIGEgbW9kdWxlLlxuICpcbiAqL1xuYW5ndWxhci5tb2R1bGUoJ3Bhc2NhbHByZWNodC50cmFuc2xhdGUnKS5wcm92aWRlcignJHRyYW5zbGF0ZScsIFsnJFNUT1JBR0VfS0VZJywgZnVuY3Rpb24gKCRTVE9SQUdFX0tFWSkge1xuXG4gIHZhciAkdHJhbnNsYXRpb25UYWJsZSA9IHt9LFxuICAgICAgJHByZWZlcnJlZExhbmd1YWdlLFxuICAgICAgJGF2YWlsYWJsZUxhbmd1YWdlS2V5cyA9IFtdLFxuICAgICAgJGxhbmd1YWdlS2V5QWxpYXNlcyxcbiAgICAgICRmYWxsYmFja0xhbmd1YWdlLFxuICAgICAgJGZhbGxiYWNrV2FzU3RyaW5nLFxuICAgICAgJHVzZXMsXG4gICAgICAkbmV4dExhbmcsXG4gICAgICAkc3RvcmFnZUZhY3RvcnksXG4gICAgICAkc3RvcmFnZUtleSA9ICRTVE9SQUdFX0tFWSxcbiAgICAgICRzdG9yYWdlUHJlZml4LFxuICAgICAgJG1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXJGYWN0b3J5LFxuICAgICAgJGludGVycG9sYXRpb25GYWN0b3J5LFxuICAgICAgJGludGVycG9sYXRvckZhY3RvcmllcyA9IFtdLFxuICAgICAgJGludGVycG9sYXRpb25TYW5pdGl6YXRpb25TdHJhdGVneSA9IGZhbHNlLFxuICAgICAgJGxvYWRlckZhY3RvcnksXG4gICAgICAkY2xvYWtDbGFzc05hbWUgPSAndHJhbnNsYXRlLWNsb2FrJyxcbiAgICAgICRsb2FkZXJPcHRpb25zLFxuICAgICAgJG5vdEZvdW5kSW5kaWNhdG9yTGVmdCxcbiAgICAgICRub3RGb3VuZEluZGljYXRvclJpZ2h0LFxuICAgICAgJHBvc3RDb21waWxpbmdFbmFibGVkID0gZmFsc2UsXG4gICAgICBORVNURURfT0JKRUNUX0RFTElNSVRFUiA9ICcuJyxcbiAgICAgIGxvYWRlckNhY2hlO1xuXG4gIHZhciB2ZXJzaW9uID0gJzIuNS4yJztcblxuICAvLyB0cmllcyB0byBkZXRlcm1pbmUgdGhlIGJyb3dzZXJzIGxhbmd1YWdlXG4gIHZhciBnZXRGaXJzdEJyb3dzZXJMYW5ndWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbmF2ID0gd2luZG93Lm5hdmlnYXRvcixcbiAgICAgICAgYnJvd3Nlckxhbmd1YWdlUHJvcGVydHlLZXlzID0gWydsYW5ndWFnZScsICdicm93c2VyTGFuZ3VhZ2UnLCAnc3lzdGVtTGFuZ3VhZ2UnLCAndXNlckxhbmd1YWdlJ10sXG4gICAgICAgIGksXG4gICAgICAgIGxhbmd1YWdlO1xuXG4gICAgLy8gc3VwcG9ydCBmb3IgSFRNTCA1LjEgXCJuYXZpZ2F0b3IubGFuZ3VhZ2VzXCJcbiAgICBpZiAoYW5ndWxhci5pc0FycmF5KG5hdi5sYW5ndWFnZXMpKSB7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbmF2Lmxhbmd1YWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsYW5ndWFnZSA9IG5hdi5sYW5ndWFnZXNbaV07XG4gICAgICAgIGlmIChsYW5ndWFnZSAmJiBsYW5ndWFnZS5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gbGFuZ3VhZ2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBzdXBwb3J0IGZvciBvdGhlciB3ZWxsIGtub3duIHByb3BlcnRpZXMgaW4gYnJvd3NlcnNcbiAgICBmb3IgKGkgPSAwOyBpIDwgYnJvd3Nlckxhbmd1YWdlUHJvcGVydHlLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsYW5ndWFnZSA9IG5hdlticm93c2VyTGFuZ3VhZ2VQcm9wZXJ0eUtleXNbaV1dO1xuICAgICAgaWYgKGxhbmd1YWdlICYmIGxhbmd1YWdlLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gbGFuZ3VhZ2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG4gIGdldEZpcnN0QnJvd3Nlckxhbmd1YWdlLmRpc3BsYXlOYW1lID0gJ2FuZ3VsYXItdHJhbnNsYXRlL3NlcnZpY2U6IGdldEZpcnN0QnJvd3Nlckxhbmd1YWdlJztcblxuICAvLyB0cmllcyB0byBkZXRlcm1pbmUgdGhlIGJyb3dzZXJzIGxvY2FsZVxuICB2YXIgZ2V0TG9jYWxlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAoZ2V0Rmlyc3RCcm93c2VyTGFuZ3VhZ2UoKSB8fCAnJykuc3BsaXQoJy0nKS5qb2luKCdfJyk7XG4gIH07XG4gIGdldExvY2FsZS5kaXNwbGF5TmFtZSA9ICdhbmd1bGFyLXRyYW5zbGF0ZS9zZXJ2aWNlOiBnZXRMb2NhbGUnO1xuXG4gIC8qKlxuICAgKiBAbmFtZSBpbmRleE9mXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBpbmRleE9mIHBvbHlmaWxsLiBLaW5kYSBzb3J0YS5cbiAgICpcbiAgICogQHBhcmFtIHthcnJheX0gYXJyYXkgQXJyYXkgdG8gc2VhcmNoIGluLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VhcmNoRWxlbWVudCBFbGVtZW50IHRvIHNlYXJjaCBmb3IuXG4gICAqXG4gICAqIEByZXR1cm5zIHtpbnR9IEluZGV4IG9mIHNlYXJjaCBlbGVtZW50LlxuICAgKi9cbiAgdmFyIGluZGV4T2YgPSBmdW5jdGlvbihhcnJheSwgc2VhcmNoRWxlbWVudCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKGFycmF5W2ldID09PSBzZWFyY2hFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuYW1lIHRyaW1cbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIHRyaW0gcG9seWZpbGxcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIHN0cmluZyBzdHJpcHBlZCBvZiB3aGl0ZXNwYWNlIGZyb20gYm90aCBlbmRzXG4gICAqL1xuICB2YXIgdHJpbSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcbiAgfTtcblxuICB2YXIgbmVnb3RpYXRlTG9jYWxlID0gZnVuY3Rpb24gKHByZWZlcnJlZCkge1xuXG4gICAgdmFyIGF2YWlsID0gW10sXG4gICAgICAgIGxvY2FsZSA9IGFuZ3VsYXIubG93ZXJjYXNlKHByZWZlcnJlZCksXG4gICAgICAgIGkgPSAwLFxuICAgICAgICBuID0gJGF2YWlsYWJsZUxhbmd1YWdlS2V5cy5sZW5ndGg7XG5cbiAgICBmb3IgKDsgaSA8IG47IGkrKykge1xuICAgICAgYXZhaWwucHVzaChhbmd1bGFyLmxvd2VyY2FzZSgkYXZhaWxhYmxlTGFuZ3VhZ2VLZXlzW2ldKSk7XG4gICAgfVxuXG4gICAgaWYgKGluZGV4T2YoYXZhaWwsIGxvY2FsZSkgPiAtMSkge1xuICAgICAgcmV0dXJuIHByZWZlcnJlZDtcbiAgICB9XG5cbiAgICBpZiAoJGxhbmd1YWdlS2V5QWxpYXNlcykge1xuICAgICAgdmFyIGFsaWFzO1xuICAgICAgZm9yICh2YXIgbGFuZ0tleUFsaWFzIGluICRsYW5ndWFnZUtleUFsaWFzZXMpIHtcbiAgICAgICAgdmFyIGhhc1dpbGRjYXJkS2V5ID0gZmFsc2U7XG4gICAgICAgIHZhciBoYXNFeGFjdEtleSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCgkbGFuZ3VhZ2VLZXlBbGlhc2VzLCBsYW5nS2V5QWxpYXMpICYmXG4gICAgICAgICAgYW5ndWxhci5sb3dlcmNhc2UobGFuZ0tleUFsaWFzKSA9PT0gYW5ndWxhci5sb3dlcmNhc2UocHJlZmVycmVkKTtcblxuICAgICAgICBpZiAobGFuZ0tleUFsaWFzLnNsaWNlKC0xKSA9PT0gJyonKSB7XG4gICAgICAgICAgaGFzV2lsZGNhcmRLZXkgPSBsYW5nS2V5QWxpYXMuc2xpY2UoMCwgLTEpID09PSBwcmVmZXJyZWQuc2xpY2UoMCwgbGFuZ0tleUFsaWFzLmxlbmd0aC0xKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzRXhhY3RLZXkgfHwgaGFzV2lsZGNhcmRLZXkpIHtcbiAgICAgICAgICBhbGlhcyA9ICRsYW5ndWFnZUtleUFsaWFzZXNbbGFuZ0tleUFsaWFzXTtcbiAgICAgICAgICBpZiAoaW5kZXhPZihhdmFpbCwgYW5ndWxhci5sb3dlcmNhc2UoYWxpYXMpKSA+IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gYWxpYXM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHBhcnRzID0gcHJlZmVycmVkLnNwbGl0KCdfJyk7XG5cbiAgICBpZiAocGFydHMubGVuZ3RoID4gMSAmJiBpbmRleE9mKGF2YWlsLCBhbmd1bGFyLmxvd2VyY2FzZShwYXJ0c1swXSkpID4gLTEpIHtcbiAgICAgIHJldHVybiBwYXJ0c1swXTtcbiAgICB9XG5cbiAgICAvLyBJZiBldmVyeXRoaW5nIGZhaWxzLCBqdXN0IHJldHVybiB0aGUgcHJlZmVycmVkLCB1bmNoYW5nZWQuXG4gICAgcmV0dXJuIHByZWZlcnJlZDtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyI3RyYW5zbGF0aW9uc1xuICAgKiBAbWV0aG9kT2YgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJlZ2lzdGVycyBhIG5ldyB0cmFuc2xhdGlvbiB0YWJsZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2Uga2V5LlxuICAgKlxuICAgKiBUbyByZWdpc3RlciBhIHRyYW5zbGF0aW9uIHRhYmxlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSwgcGFzcyBhIGRlZmluZWQgbGFuZ3VhZ2VcbiAgICoga2V5IGFzIGZpcnN0IHBhcmFtZXRlci5cbiAgICpcbiAgICogPHByZT5cbiAgICogIC8vIHJlZ2lzdGVyIHRyYW5zbGF0aW9uIHRhYmxlIGZvciBsYW5ndWFnZTogJ2RlX0RFJ1xuICAgKiAgJHRyYW5zbGF0ZVByb3ZpZGVyLnRyYW5zbGF0aW9ucygnZGVfREUnLCB7XG4gICAqICAgICdHUkVFVElORyc6ICdIYWxsbyBXZWx0ISdcbiAgICogIH0pO1xuICAgKlxuICAgKiAgLy8gcmVnaXN0ZXIgYW5vdGhlciBvbmVcbiAgICogICR0cmFuc2xhdGVQcm92aWRlci50cmFuc2xhdGlvbnMoJ2VuX1VTJywge1xuICAgKiAgICAnR1JFRVRJTkcnOiAnSGVsbG8gd29ybGQhJ1xuICAgKiAgfSk7XG4gICAqIDwvcHJlPlxuICAgKlxuICAgKiBXaGVuIHJlZ2lzdGVyaW5nIG11bHRpcGxlIHRyYW5zbGF0aW9uIHRhYmxlcyBmb3IgZm9yIHRoZSBzYW1lIGxhbmd1YWdlIGtleSxcbiAgICogdGhlIGFjdHVhbCB0cmFuc2xhdGlvbiB0YWJsZSBnZXRzIGV4dGVuZGVkLiBUaGlzIGFsbG93cyB5b3UgdG8gZGVmaW5lIG1vZHVsZVxuICAgKiBzcGVjaWZpYyB0cmFuc2xhdGlvbiB3aGljaCBvbmx5IGdldCBhZGRlZCwgb25jZSBhIHNwZWNpZmljIG1vZHVsZSBpcyBsb2FkZWQgaW5cbiAgICogeW91ciBhcHAuXG4gICAqXG4gICAqIEludm9raW5nIHRoaXMgbWV0aG9kIHdpdGggbm8gYXJndW1lbnRzIHJldHVybnMgdGhlIHRyYW5zbGF0aW9uIHRhYmxlIHdoaWNoIHdhc1xuICAgKiByZWdpc3RlcmVkIHdpdGggbm8gbGFuZ3VhZ2Uga2V5LiBJbnZva2luZyBpdCB3aXRoIGEgbGFuZ3VhZ2Uga2V5IHJldHVybnMgdGhlXG4gICAqIHJlbGF0ZWQgdHJhbnNsYXRpb24gdGFibGUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgQSBsYW5ndWFnZSBrZXkuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSB0cmFuc2xhdGlvblRhYmxlIEEgcGxhaW4gb2xkIEphdmFTY3JpcHQgb2JqZWN0IHRoYXQgcmVwcmVzZW50cyBhIHRyYW5zbGF0aW9uIHRhYmxlLlxuICAgKlxuICAgKi9cbiAgdmFyIHRyYW5zbGF0aW9ucyA9IGZ1bmN0aW9uIChsYW5nS2V5LCB0cmFuc2xhdGlvblRhYmxlKSB7XG5cbiAgICBpZiAoIWxhbmdLZXkgJiYgIXRyYW5zbGF0aW9uVGFibGUpIHtcbiAgICAgIHJldHVybiAkdHJhbnNsYXRpb25UYWJsZTtcbiAgICB9XG5cbiAgICBpZiAobGFuZ0tleSAmJiAhdHJhbnNsYXRpb25UYWJsZSkge1xuICAgICAgaWYgKGFuZ3VsYXIuaXNTdHJpbmcobGFuZ0tleSkpIHtcbiAgICAgICAgcmV0dXJuICR0cmFuc2xhdGlvblRhYmxlW2xhbmdLZXldO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIWFuZ3VsYXIuaXNPYmplY3QoJHRyYW5zbGF0aW9uVGFibGVbbGFuZ0tleV0pKSB7XG4gICAgICAgICR0cmFuc2xhdGlvblRhYmxlW2xhbmdLZXldID0ge307XG4gICAgICB9XG4gICAgICBhbmd1bGFyLmV4dGVuZCgkdHJhbnNsYXRpb25UYWJsZVtsYW5nS2V5XSwgZmxhdE9iamVjdCh0cmFuc2xhdGlvblRhYmxlKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHRoaXMudHJhbnNsYXRpb25zID0gdHJhbnNsYXRpb25zO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICogQG5hbWUgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXIjY2xvYWtDbGFzc05hbWVcbiAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBMZXQncyB5b3UgY2hhbmdlIHRoZSBjbGFzcyBuYW1lIGZvciBgdHJhbnNsYXRlLWNsb2FrYCBkaXJlY3RpdmUuXG4gICAqIERlZmF1bHQgY2xhc3MgbmFtZSBpcyBgdHJhbnNsYXRlLWNsb2FrYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgdHJhbnNsYXRlLWNsb2FrIGNsYXNzIG5hbWVcbiAgICovXG4gIHRoaXMuY2xvYWtDbGFzc05hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIGlmICghbmFtZSkge1xuICAgICAgcmV0dXJuICRjbG9ha0NsYXNzTmFtZTtcbiAgICB9XG4gICAgJGNsb2FrQ2xhc3NOYW1lID0gbmFtZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQG5hbWUgZmxhdE9iamVjdFxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogRmxhdHMgYW4gb2JqZWN0LiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gZmxhdHRlbiBnaXZlbiB0cmFuc2xhdGlvbiBkYXRhIHdpdGhcbiAgICogbmFtZXNwYWNlcywgc28gdGhleSBhcmUgbGF0ZXIgYWNjZXNzaWJsZSB2aWEgZG90IG5vdGF0aW9uLlxuICAgKi9cbiAgdmFyIGZsYXRPYmplY3QgPSBmdW5jdGlvbiAoZGF0YSwgcGF0aCwgcmVzdWx0LCBwcmV2S2V5KSB7XG4gICAgdmFyIGtleSwga2V5V2l0aFBhdGgsIGtleVdpdGhTaG9ydFBhdGgsIHZhbDtcblxuICAgIGlmICghcGF0aCkge1xuICAgICAgcGF0aCA9IFtdO1xuICAgIH1cbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgcmVzdWx0ID0ge307XG4gICAgfVxuICAgIGZvciAoa2V5IGluIGRhdGEpIHtcbiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YWwgPSBkYXRhW2tleV07XG4gICAgICBpZiAoYW5ndWxhci5pc09iamVjdCh2YWwpKSB7XG4gICAgICAgIGZsYXRPYmplY3QodmFsLCBwYXRoLmNvbmNhdChrZXkpLCByZXN1bHQsIGtleSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBrZXlXaXRoUGF0aCA9IHBhdGgubGVuZ3RoID8gKCcnICsgcGF0aC5qb2luKE5FU1RFRF9PQkpFQ1RfREVMSU1JVEVSKSArIE5FU1RFRF9PQkpFQ1RfREVMSU1JVEVSICsga2V5KSA6IGtleTtcbiAgICAgICAgaWYocGF0aC5sZW5ndGggJiYga2V5ID09PSBwcmV2S2V5KXtcbiAgICAgICAgICAvLyBDcmVhdGUgc2hvcnRjdXQgcGF0aCAoZm9vLmJhciA9PSBmb28uYmFyLmJhcilcbiAgICAgICAgICBrZXlXaXRoU2hvcnRQYXRoID0gJycgKyBwYXRoLmpvaW4oTkVTVEVEX09CSkVDVF9ERUxJTUlURVIpO1xuICAgICAgICAgIC8vIExpbmsgaXQgdG8gb3JpZ2luYWwgcGF0aFxuICAgICAgICAgIHJlc3VsdFtrZXlXaXRoU2hvcnRQYXRoXSA9ICdAOicgKyBrZXlXaXRoUGF0aDtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHRba2V5V2l0aFBhdGhdID0gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICogQG5hbWUgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXIjYWRkSW50ZXJwb2xhdGlvblxuICAgKiBAbWV0aG9kT2YgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEFkZHMgaW50ZXJwb2xhdGlvbiBzZXJ2aWNlcyB0byBhbmd1bGFyLXRyYW5zbGF0ZSwgc28gaXQgY2FuIG1hbmFnZSB0aGVtLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZmFjdG9yeSBJbnRlcnBvbGF0aW9uIHNlcnZpY2UgZmFjdG9yeVxuICAgKi9cbiAgdGhpcy5hZGRJbnRlcnBvbGF0aW9uID0gZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICAkaW50ZXJwb2xhdG9yRmFjdG9yaWVzLnB1c2goZmFjdG9yeSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBmdW5jdGlvblxuICAgKiBAbmFtZSBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGVQcm92aWRlciN1c2VNZXNzYWdlRm9ybWF0SW50ZXJwb2xhdGlvblxuICAgKiBAbWV0aG9kT2YgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRlbGxzIGFuZ3VsYXItdHJhbnNsYXRlIHRvIHVzZSBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uYWxpdHkgb2YgbWVzc2FnZWZvcm1hdC5qcy5cbiAgICogVGhpcyBpcyB1c2VmdWwgd2hlbiBoYXZpbmcgaGlnaCBsZXZlbCBwbHVyYWxpemF0aW9uIGFuZCBnZW5kZXIgc2VsZWN0aW9uLlxuICAgKi9cbiAgdGhpcy51c2VNZXNzYWdlRm9ybWF0SW50ZXJwb2xhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy51c2VJbnRlcnBvbGF0aW9uKCckdHJhbnNsYXRlTWVzc2FnZUZvcm1hdEludGVycG9sYXRpb24nKTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyI3VzZUludGVycG9sYXRpb25cbiAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUZWxscyBhbmd1bGFyLXRyYW5zbGF0ZSB3aGljaCBpbnRlcnBvbGF0aW9uIHN0eWxlIHRvIHVzZSBhcyBkZWZhdWx0LCBhcHBsaWNhdGlvbi13aWRlLlxuICAgKiBTaW1wbHkgcGFzcyBhIGZhY3Rvcnkvc2VydmljZSBuYW1lLiBUaGUgaW50ZXJwb2xhdGlvbiBzZXJ2aWNlIGhhcyB0byBpbXBsZW1lbnRcbiAgICogdGhlIGNvcnJlY3QgaW50ZXJmYWNlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmFjdG9yeSBJbnRlcnBvbGF0aW9uIHNlcnZpY2UgbmFtZS5cbiAgICovXG4gIHRoaXMudXNlSW50ZXJwb2xhdGlvbiA9IGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gICAgJGludGVycG9sYXRpb25GYWN0b3J5ID0gZmFjdG9yeTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyI3VzZVNhbml0aXplU3RyYXRlZ3lcbiAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTaW1wbHkgc2V0cyBhIHNhbml0YXRpb24gc3RyYXRlZ3kgdHlwZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFN0cmF0ZWd5IHR5cGUuXG4gICAqL1xuICB0aGlzLnVzZVNhbml0aXplVmFsdWVTdHJhdGVneSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICRpbnRlcnBvbGF0aW9uU2FuaXRpemF0aW9uU3RyYXRlZ3kgPSB2YWx1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuIC8qKlxuICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICogQG5hbWUgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXIjcHJlZmVycmVkTGFuZ3VhZ2VcbiAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUZWxscyB0aGUgbW9kdWxlIHdoaWNoIG9mIHRoZSByZWdpc3RlcmVkIHRyYW5zbGF0aW9uIHRhYmxlcyB0byB1c2UgZm9yIHRyYW5zbGF0aW9uXG4gICAqIGF0IGluaXRpYWwgc3RhcnR1cCBieSBwYXNzaW5nIGEgbGFuZ3VhZ2Uga2V5LiBTaW1pbGFyIHRvIGAkdHJhbnNsYXRlUHJvdmlkZXIjdXNlYFxuICAgKiBvbmx5IHRoYXQgaXQgc2F5cyB3aGljaCBsYW5ndWFnZSB0byAqKnByZWZlcioqLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZ0tleSBBIGxhbmd1YWdlIGtleS5cbiAgICpcbiAgICovXG4gIHRoaXMucHJlZmVycmVkTGFuZ3VhZ2UgPSBmdW5jdGlvbihsYW5nS2V5KSB7XG4gICAgc2V0dXBQcmVmZXJyZWRMYW5ndWFnZShsYW5nS2V5KTtcbiAgICByZXR1cm4gdGhpcztcblxuICB9O1xuICB2YXIgc2V0dXBQcmVmZXJyZWRMYW5ndWFnZSA9IGZ1bmN0aW9uIChsYW5nS2V5KSB7XG4gICAgaWYgKGxhbmdLZXkpIHtcbiAgICAgICRwcmVmZXJyZWRMYW5ndWFnZSA9IGxhbmdLZXk7XG4gICAgfVxuICAgIHJldHVybiAkcHJlZmVycmVkTGFuZ3VhZ2U7XG4gIH07XG4gIC8qKlxuICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICogQG5hbWUgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXIjdHJhbnNsYXRpb25Ob3RGb3VuZEluZGljYXRvclxuICAgKiBAbWV0aG9kT2YgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgYW4gaW5kaWNhdG9yIHdoaWNoIGlzIHVzZWQgd2hlbiBhIHRyYW5zbGF0aW9uIGlzbid0IGZvdW5kLiBFLmcuIHdoZW5cbiAgICogc2V0dGluZyB0aGUgaW5kaWNhdG9yIGFzICdYJyBhbmQgb25lIHRyaWVzIHRvIHRyYW5zbGF0ZSBhIHRyYW5zbGF0aW9uIGlkXG4gICAqIGNhbGxlZCBgTk9UX0ZPVU5EYCwgdGhpcyB3aWxsIHJlc3VsdCBpbiBgWCBOT1RfRk9VTkQgWGAuXG4gICAqXG4gICAqIEludGVybmFsbHkgdGhpcyBtZXRob2RzIHNldHMgYSBsZWZ0IGluZGljYXRvciBhbmQgYSByaWdodCBpbmRpY2F0b3IgdXNpbmdcbiAgICogYCR0cmFuc2xhdGVQcm92aWRlci50cmFuc2xhdGlvbk5vdEZvdW5kSW5kaWNhdG9yTGVmdCgpYCBhbmRcbiAgICogYCR0cmFuc2xhdGVQcm92aWRlci50cmFuc2xhdGlvbk5vdEZvdW5kSW5kaWNhdG9yUmlnaHQoKWAuXG4gICAqXG4gICAqICoqTm90ZSoqOiBUaGVzZSBtZXRob2RzIGF1dG9tYXRpY2FsbHkgYWRkIGEgd2hpdGVzcGFjZSBiZXR3ZWVuIHRoZSBpbmRpY2F0b3JzXG4gICAqIGFuZCB0aGUgdHJhbnNsYXRpb24gaWQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpbmRpY2F0b3IgQW4gaW5kaWNhdG9yLCBjb3VsZCBiZSBhbnkgc3RyaW5nLlxuICAgKi9cbiAgdGhpcy50cmFuc2xhdGlvbk5vdEZvdW5kSW5kaWNhdG9yID0gZnVuY3Rpb24gKGluZGljYXRvcikge1xuICAgIHRoaXMudHJhbnNsYXRpb25Ob3RGb3VuZEluZGljYXRvckxlZnQoaW5kaWNhdG9yKTtcbiAgICB0aGlzLnRyYW5zbGF0aW9uTm90Rm91bmRJbmRpY2F0b3JSaWdodChpbmRpY2F0b3IpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBuZ2RvYyBmdW5jdGlvblxuICAgKiBAbmFtZSBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGVQcm92aWRlciN0cmFuc2xhdGlvbk5vdEZvdW5kSW5kaWNhdG9yTGVmdFxuICAgKiBAbWV0aG9kT2YgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgYW4gaW5kaWNhdG9yIHdoaWNoIGlzIHVzZWQgd2hlbiBhIHRyYW5zbGF0aW9uIGlzbid0IGZvdW5kIGxlZnQgdG8gdGhlXG4gICAqIHRyYW5zbGF0aW9uIGlkLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaW5kaWNhdG9yIEFuIGluZGljYXRvci5cbiAgICovXG4gIHRoaXMudHJhbnNsYXRpb25Ob3RGb3VuZEluZGljYXRvckxlZnQgPSBmdW5jdGlvbiAoaW5kaWNhdG9yKSB7XG4gICAgaWYgKCFpbmRpY2F0b3IpIHtcbiAgICAgIHJldHVybiAkbm90Rm91bmRJbmRpY2F0b3JMZWZ0O1xuICAgIH1cbiAgICAkbm90Rm91bmRJbmRpY2F0b3JMZWZ0ID0gaW5kaWNhdG9yO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBuZ2RvYyBmdW5jdGlvblxuICAgKiBAbmFtZSBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGVQcm92aWRlciN0cmFuc2xhdGlvbk5vdEZvdW5kSW5kaWNhdG9yTGVmdFxuICAgKiBAbWV0aG9kT2YgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgYW4gaW5kaWNhdG9yIHdoaWNoIGlzIHVzZWQgd2hlbiBhIHRyYW5zbGF0aW9uIGlzbid0IGZvdW5kIHJpZ2h0IHRvIHRoZVxuICAgKiB0cmFuc2xhdGlvbiBpZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGluZGljYXRvciBBbiBpbmRpY2F0b3IuXG4gICAqL1xuICB0aGlzLnRyYW5zbGF0aW9uTm90Rm91bmRJbmRpY2F0b3JSaWdodCA9IGZ1bmN0aW9uIChpbmRpY2F0b3IpIHtcbiAgICBpZiAoIWluZGljYXRvcikge1xuICAgICAgcmV0dXJuICRub3RGb3VuZEluZGljYXRvclJpZ2h0O1xuICAgIH1cbiAgICAkbm90Rm91bmRJbmRpY2F0b3JSaWdodCA9IGluZGljYXRvcjtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyI2ZhbGxiYWNrTGFuZ3VhZ2VcbiAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUZWxscyB0aGUgbW9kdWxlIHdoaWNoIG9mIHRoZSByZWdpc3RlcmVkIHRyYW5zbGF0aW9uIHRhYmxlcyB0byB1c2Ugd2hlbiBtaXNzaW5nIHRyYW5zbGF0aW9uc1xuICAgKiBhdCBpbml0aWFsIHN0YXJ0dXAgYnkgcGFzc2luZyBhIGxhbmd1YWdlIGtleS4gU2ltaWxhciB0byBgJHRyYW5zbGF0ZVByb3ZpZGVyI3VzZWBcbiAgICogb25seSB0aGF0IGl0IHNheXMgd2hpY2ggbGFuZ3VhZ2UgdG8gKipmYWxsYmFjayoqLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3x8YXJyYXl9IGxhbmdLZXkgQSBsYW5ndWFnZSBrZXkuXG4gICAqXG4gICAqL1xuICB0aGlzLmZhbGxiYWNrTGFuZ3VhZ2UgPSBmdW5jdGlvbiAobGFuZ0tleSkge1xuICAgIGZhbGxiYWNrU3RhY2sobGFuZ0tleSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgdmFyIGZhbGxiYWNrU3RhY2sgPSBmdW5jdGlvbiAobGFuZ0tleSkge1xuICAgIGlmIChsYW5nS2V5KSB7XG4gICAgICBpZiAoYW5ndWxhci5pc1N0cmluZyhsYW5nS2V5KSkge1xuICAgICAgICAkZmFsbGJhY2tXYXNTdHJpbmcgPSB0cnVlO1xuICAgICAgICAkZmFsbGJhY2tMYW5ndWFnZSA9IFsgbGFuZ0tleSBdO1xuICAgICAgfSBlbHNlIGlmIChhbmd1bGFyLmlzQXJyYXkobGFuZ0tleSkpIHtcbiAgICAgICAgJGZhbGxiYWNrV2FzU3RyaW5nID0gZmFsc2U7XG4gICAgICAgICRmYWxsYmFja0xhbmd1YWdlID0gbGFuZ0tleTtcbiAgICAgIH1cbiAgICAgIGlmIChhbmd1bGFyLmlzU3RyaW5nKCRwcmVmZXJyZWRMYW5ndWFnZSkgICYmIGluZGV4T2YoJGZhbGxiYWNrTGFuZ3VhZ2UsICRwcmVmZXJyZWRMYW5ndWFnZSkgPCAwKSB7XG4gICAgICAgICRmYWxsYmFja0xhbmd1YWdlLnB1c2goJHByZWZlcnJlZExhbmd1YWdlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICgkZmFsbGJhY2tXYXNTdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuICRmYWxsYmFja0xhbmd1YWdlWzBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICRmYWxsYmFja0xhbmd1YWdlO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyI3VzZVxuICAgKiBAbWV0aG9kT2YgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldCB3aGljaCB0cmFuc2xhdGlvbiB0YWJsZSB0byB1c2UgZm9yIHRyYW5zbGF0aW9uIGJ5IGdpdmVuIGxhbmd1YWdlIGtleS4gV2hlblxuICAgKiB0cnlpbmcgdG8gJ3VzZScgYSBsYW5ndWFnZSB3aGljaCBpc24ndCBwcm92aWRlZCwgaXQnbGwgdGhyb3cgYW4gZXJyb3IuXG4gICAqXG4gICAqIFlvdSBhY3R1YWxseSBkb24ndCBoYXZlIHRvIHVzZSB0aGlzIG1ldGhvZCBzaW5jZSBgJHRyYW5zbGF0ZVByb3ZpZGVyI3ByZWZlcnJlZExhbmd1YWdlYFxuICAgKiBkb2VzIHRoZSBqb2IgdG9vLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZ0tleSBBIGxhbmd1YWdlIGtleS5cbiAgICovXG4gIHRoaXMudXNlID0gZnVuY3Rpb24gKGxhbmdLZXkpIHtcbiAgICBpZiAobGFuZ0tleSkge1xuICAgICAgaWYgKCEkdHJhbnNsYXRpb25UYWJsZVtsYW5nS2V5XSAmJiAoISRsb2FkZXJGYWN0b3J5KSkge1xuICAgICAgICAvLyBvbmx5IHRocm93IGFuIGVycm9yLCB3aGVuIG5vdCBsb2FkaW5nIHRyYW5zbGF0aW9uIGRhdGEgYXN5bmNocm9ub3VzbHlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJHRyYW5zbGF0ZVByb3ZpZGVyIGNvdWxkbid0IGZpbmQgdHJhbnNsYXRpb25UYWJsZSBmb3IgbGFuZ0tleTogJ1wiICsgbGFuZ0tleSArIFwiJ1wiKTtcbiAgICAgIH1cbiAgICAgICR1c2VzID0gbGFuZ0tleTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gJHVzZXM7XG4gIH07XG5cbiAvKipcbiAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyI3N0b3JhZ2VLZXlcbiAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUZWxscyB0aGUgbW9kdWxlIHdoaWNoIGtleSBtdXN0IHJlcHJlc2VudCB0aGUgY2hvb3NlZCBsYW5ndWFnZSBieSBhIHVzZXIgaW4gdGhlIHN0b3JhZ2UuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgQSBrZXkgZm9yIHRoZSBzdG9yYWdlLlxuICAgKi9cbiAgdmFyIHN0b3JhZ2VLZXkgPSBmdW5jdGlvbihrZXkpIHtcbiAgICBpZiAoIWtleSkge1xuICAgICAgaWYgKCRzdG9yYWdlUHJlZml4KSB7XG4gICAgICAgIHJldHVybiAkc3RvcmFnZVByZWZpeCArICRzdG9yYWdlS2V5O1xuICAgICAgfVxuICAgICAgcmV0dXJuICRzdG9yYWdlS2V5O1xuICAgIH1cbiAgICAkc3RvcmFnZUtleSA9IGtleTtcbiAgfTtcblxuICB0aGlzLnN0b3JhZ2VLZXkgPSBzdG9yYWdlS2V5O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICogQG5hbWUgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXIjdXNlVXJsTG9hZGVyXG4gICAqIEBtZXRob2RPZiBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGVQcm92aWRlclxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGVsbHMgYW5ndWxhci10cmFuc2xhdGUgdG8gdXNlIGAkdHJhbnNsYXRlVXJsTG9hZGVyYCBleHRlbnNpb24gc2VydmljZSBhcyBsb2FkZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVXJsXG4gICAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9ucyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdFxuICAgKi9cbiAgdGhpcy51c2VVcmxMb2FkZXIgPSBmdW5jdGlvbiAodXJsLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlTG9hZGVyKCckdHJhbnNsYXRlVXJsTG9hZGVyJywgYW5ndWxhci5leHRlbmQoeyB1cmw6IHVybCB9LCBvcHRpb25zKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBmdW5jdGlvblxuICAgKiBAbmFtZSBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGVQcm92aWRlciN1c2VTdGF0aWNGaWxlc0xvYWRlclxuICAgKiBAbWV0aG9kT2YgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRlbGxzIGFuZ3VsYXItdHJhbnNsYXRlIHRvIHVzZSBgJHRyYW5zbGF0ZVN0YXRpY0ZpbGVzTG9hZGVyYCBleHRlbnNpb24gc2VydmljZSBhcyBsb2FkZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9ucyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdFxuICAgKi9cbiAgdGhpcy51c2VTdGF0aWNGaWxlc0xvYWRlciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlTG9hZGVyKCckdHJhbnNsYXRlU3RhdGljRmlsZXNMb2FkZXInLCBvcHRpb25zKTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyI3VzZUxvYWRlclxuICAgKiBAbWV0aG9kT2YgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRlbGxzIGFuZ3VsYXItdHJhbnNsYXRlIHRvIHVzZSBhbnkgb3RoZXIgc2VydmljZSBhcyBsb2FkZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsb2FkZXJGYWN0b3J5IEZhY3RvcnkgbmFtZSB0byB1c2VcbiAgICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0XG4gICAqL1xuICB0aGlzLnVzZUxvYWRlciA9IGZ1bmN0aW9uIChsb2FkZXJGYWN0b3J5LCBvcHRpb25zKSB7XG4gICAgJGxvYWRlckZhY3RvcnkgPSBsb2FkZXJGYWN0b3J5O1xuICAgICRsb2FkZXJPcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyI3VzZUxvY2FsU3RvcmFnZVxuICAgKiBAbWV0aG9kT2YgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRlbGxzIGFuZ3VsYXItdHJhbnNsYXRlIHRvIHVzZSBgJHRyYW5zbGF0ZUxvY2FsU3RvcmFnZWAgc2VydmljZSBhcyBzdG9yYWdlIGxheWVyLlxuICAgKlxuICAgKi9cbiAgdGhpcy51c2VMb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlU3RvcmFnZSgnJHRyYW5zbGF0ZUxvY2FsU3RvcmFnZScpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICogQG5hbWUgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXIjdXNlQ29va2llU3RvcmFnZVxuICAgKiBAbWV0aG9kT2YgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRlbGxzIGFuZ3VsYXItdHJhbnNsYXRlIHRvIHVzZSBgJHRyYW5zbGF0ZUNvb2tpZVN0b3JhZ2VgIHNlcnZpY2UgYXMgc3RvcmFnZSBsYXllci5cbiAgICovXG4gIHRoaXMudXNlQ29va2llU3RvcmFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy51c2VTdG9yYWdlKCckdHJhbnNsYXRlQ29va2llU3RvcmFnZScpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICogQG5hbWUgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXIjdXNlU3RvcmFnZVxuICAgKiBAbWV0aG9kT2YgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRlbGxzIGFuZ3VsYXItdHJhbnNsYXRlIHRvIHVzZSBjdXN0b20gc2VydmljZSBhcyBzdG9yYWdlIGxheWVyLlxuICAgKi9cbiAgdGhpcy51c2VTdG9yYWdlID0gZnVuY3Rpb24gKHN0b3JhZ2VGYWN0b3J5KSB7XG4gICAgJHN0b3JhZ2VGYWN0b3J5ID0gc3RvcmFnZUZhY3Rvcnk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBmdW5jdGlvblxuICAgKiBAbmFtZSBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGVQcm92aWRlciNzdG9yYWdlUHJlZml4XG4gICAqIEBtZXRob2RPZiBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGVQcm92aWRlclxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyBwcmVmaXggZm9yIHN0b3JhZ2Uga2V5LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJlZml4IFN0b3JhZ2Uga2V5IHByZWZpeFxuICAgKi9cbiAgdGhpcy5zdG9yYWdlUHJlZml4ID0gZnVuY3Rpb24gKHByZWZpeCkge1xuICAgIGlmICghcHJlZml4KSB7XG4gICAgICByZXR1cm4gcHJlZml4O1xuICAgIH1cbiAgICAkc3RvcmFnZVByZWZpeCA9IHByZWZpeDtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyI3VzZU1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXJMb2dcbiAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUZWxscyBhbmd1bGFyLXRyYW5zbGF0ZSB0byB1c2UgYnVpbHQtaW4gbG9nIGhhbmRsZXIgd2hlbiB0cnlpbmcgdG8gdHJhbnNsYXRlXG4gICAqIGEgdHJhbnNsYXRpb24gSWQgd2hpY2ggZG9lc24ndCBleGlzdC5cbiAgICpcbiAgICogVGhpcyBpcyBhY3R1YWxseSBhIHNob3J0Y3V0IG1ldGhvZCBmb3IgYHVzZU1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXIoKWAuXG4gICAqXG4gICAqL1xuICB0aGlzLnVzZU1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXJMb2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlTWlzc2luZ1RyYW5zbGF0aW9uSGFuZGxlcignJHRyYW5zbGF0ZU1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXJMb2cnKTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyI3VzZU1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXJcbiAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBFeHBlY3RzIGEgZmFjdG9yeSBuYW1lIHdoaWNoIGxhdGVyIGdldHMgaW5zdGFudGlhdGVkIHdpdGggYCRpbmplY3RvcmAuXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIHRvIHRlbGwgYW5ndWxhci10cmFuc2xhdGUgdG8gdXNlIGEgY3VzdG9tXG4gICAqIG1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXIuIEp1c3QgYnVpbGQgYSBmYWN0b3J5IHdoaWNoIHJldHVybnMgYSBmdW5jdGlvblxuICAgKiBhbmQgZXhwZWN0cyBhIHRyYW5zbGF0aW9uIGlkIGFzIGFyZ3VtZW50LlxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKiA8cHJlPlxuICAgKiAgYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHRyYW5zbGF0ZVByb3ZpZGVyKSB7XG4gICAqICAgICR0cmFuc2xhdGVQcm92aWRlci51c2VNaXNzaW5nVHJhbnNsYXRpb25IYW5kbGVyKCdjdXN0b21IYW5kbGVyJyk7XG4gICAqICB9KTtcbiAgICpcbiAgICogIGFwcC5mYWN0b3J5KCdjdXN0b21IYW5kbGVyJywgZnVuY3Rpb24gKGRlcDEsIGRlcDIpIHtcbiAgICogICAgcmV0dXJuIGZ1bmN0aW9uICh0cmFuc2xhdGlvbklkKSB7XG4gICAqICAgICAgLy8gc29tZXRoaW5nIHdpdGggdHJhbnNsYXRpb25JZCBhbmQgZGVwMSBhbmQgZGVwMlxuICAgKiAgICB9O1xuICAgKiAgfSk7XG4gICAqIDwvcHJlPlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmFjdG9yeSBGYWN0b3J5IG5hbWVcbiAgICovXG4gIHRoaXMudXNlTWlzc2luZ1RyYW5zbGF0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gICAgJG1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXJGYWN0b3J5ID0gZmFjdG9yeTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyI3VzZVBvc3RDb21waWxpbmdcbiAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBJZiBwb3N0IGNvbXBpbGluZyBpcyBlbmFibGVkLCBhbGwgdHJhbnNsYXRlZCB2YWx1ZXMgd2lsbCBiZSBwcm9jZXNzZWRcbiAgICogYWdhaW4gd2l0aCBBbmd1bGFySlMnICRjb21waWxlLlxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKiA8cHJlPlxuICAgKiAgYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHRyYW5zbGF0ZVByb3ZpZGVyKSB7XG4gICAqICAgICR0cmFuc2xhdGVQcm92aWRlci51c2VQb3N0Q29tcGlsaW5nKHRydWUpO1xuICAgKiAgfSk7XG4gICAqIDwvcHJlPlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmFjdG9yeSBGYWN0b3J5IG5hbWVcbiAgICovXG4gIHRoaXMudXNlUG9zdENvbXBpbGluZyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICRwb3N0Q29tcGlsaW5nRW5hYmxlZCA9ICEoIXZhbHVlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyI2RldGVybWluZVByZWZlcnJlZExhbmd1YWdlXG4gICAqIEBtZXRob2RPZiBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGVQcm92aWRlclxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGVsbHMgYW5ndWxhci10cmFuc2xhdGUgdG8gdHJ5IHRvIGRldGVybWluZSBvbiBpdHMgb3duIHdoaWNoIGxhbmd1YWdlIGtleVxuICAgKiB0byBzZXQgYXMgcHJlZmVycmVkIGxhbmd1YWdlLiBXaGVuIGBmbmAgaXMgZ2l2ZW4sIGFuZ3VsYXItdHJhbnNsYXRlIHVzZXMgaXRcbiAgICogdG8gZGV0ZXJtaW5lIGEgbGFuZ3VhZ2Uga2V5LCBvdGhlcndpc2UgaXQgdXNlcyB0aGUgYnVpbHQtaW4gYGdldExvY2FsZSgpYFxuICAgKiBtZXRob2QuXG4gICAqXG4gICAqIFRoZSBgZ2V0TG9jYWxlKClgIHJldHVybnMgYSBsYW5ndWFnZSBrZXkgaW4gdGhlIGZvcm1hdCBgW2xhbmddX1tjb3VudHJ5XWAgb3JcbiAgICogYFtsYW5nXWAgZGVwZW5kaW5nIG9uIHdoYXQgdGhlIGJyb3dzZXIgcHJvdmlkZXMuXG4gICAqXG4gICAqIFVzZSB0aGlzIG1ldGhvZCBhdCB5b3VyIG93biByaXNrLCBzaW5jZSBub3QgYWxsIGJyb3dzZXJzIHJldHVybiBhIHZhbGlkXG4gICAqIGxvY2FsZS5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3Q9fSBmbiBGdW5jdGlvbiB0byBkZXRlcm1pbmUgYSBicm93c2VyJ3MgbG9jYWxlXG4gICAqL1xuICB0aGlzLmRldGVybWluZVByZWZlcnJlZExhbmd1YWdlID0gZnVuY3Rpb24gKGZuKSB7XG5cbiAgICB2YXIgbG9jYWxlID0gKGZuICYmIGFuZ3VsYXIuaXNGdW5jdGlvbihmbikpID8gZm4oKSA6IGdldExvY2FsZSgpO1xuXG4gICAgaWYgKCEkYXZhaWxhYmxlTGFuZ3VhZ2VLZXlzLmxlbmd0aCkge1xuICAgICAgJHByZWZlcnJlZExhbmd1YWdlID0gbG9jYWxlO1xuICAgIH0gZWxzZSB7XG4gICAgICAkcHJlZmVycmVkTGFuZ3VhZ2UgPSBuZWdvdGlhdGVMb2NhbGUobG9jYWxlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyI3JlZ2lzdGVyQXZhaWxhYmxlTGFuZ3VhZ2VLZXlzXG4gICAqIEBtZXRob2RPZiBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGVQcm92aWRlclxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmVnaXN0ZXJzIGEgc2V0IG9mIGxhbmd1YWdlIGtleXMgdGhlIGFwcCB3aWxsIHdvcmsgd2l0aC4gVXNlIHRoaXMgbWV0aG9kIGluXG4gICAqIGNvbWJpbmF0aW9uIHdpdGhcbiAgICoge0BsaW5rIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyI2RldGVybWluZVByZWZlcnJlZExhbmd1YWdlIGRldGVybWluZVByZWZlcnJlZExhbmd1YWdlfS5cbiAgICogV2hlbiBhdmFpbGFibGUgbGFuZ3VhZ2VzIGtleXMgYXJlIHJlZ2lzdGVyZWQsIGFuZ3VsYXItdHJhbnNsYXRlXG4gICAqIHRyaWVzIHRvIGZpbmQgdGhlIGJlc3QgZml0dGluZyBsYW5ndWFnZSBrZXkgZGVwZW5kaW5nIG9uIHRoZSBicm93c2VycyBsb2NhbGUsXG4gICAqIGNvbnNpZGVyaW5nIHlvdXIgbGFuZ3VhZ2Uga2V5IGNvbnZlbnRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBsYW5ndWFnZUtleXMgQXJyYXkgb2YgbGFuZ3VhZ2Uga2V5cyB0aGUgeW91ciBhcHAgd2lsbCB1c2VcbiAgICogQHBhcmFtIHtvYmplY3Q9fSBhbGlhc2VzIEFsaWFzIG1hcC5cbiAgICovXG4gIHRoaXMucmVnaXN0ZXJBdmFpbGFibGVMYW5ndWFnZUtleXMgPSBmdW5jdGlvbiAobGFuZ3VhZ2VLZXlzLCBhbGlhc2VzKSB7XG4gICAgaWYgKGxhbmd1YWdlS2V5cykge1xuICAgICAgJGF2YWlsYWJsZUxhbmd1YWdlS2V5cyA9IGxhbmd1YWdlS2V5cztcbiAgICAgIGlmIChhbGlhc2VzKSB7XG4gICAgICAgICRsYW5ndWFnZUtleUFsaWFzZXMgPSBhbGlhc2VzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiAkYXZhaWxhYmxlTGFuZ3VhZ2VLZXlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICogQG5hbWUgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXIjdXNlTG9hZGVyQ2FjaGVcbiAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZWdpc3RlcnMgYSBjYWNoZSBmb3IgaW50ZXJuYWwgJGh0dHAgYmFzZWQgbG9hZGVycy5cbiAgICoge0BsaW5rIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVByb3ZpZGVyI2RldGVybWluZVByZWZlcnJlZExhbmd1YWdlIGRldGVybWluZVByZWZlcnJlZExhbmd1YWdlfS5cbiAgICogV2hlbiBmYWxzZSB0aGUgY2FjaGUgd2lsbCBiZSBkaXNhYmxlZCAoZGVmYXVsdCkuIFdoZW4gdHJ1ZSBvciB1bmRlZmluZWRcbiAgICogdGhlIGNhY2hlIHdpbGwgYmUgYSBkZWZhdWx0IChzZWUgJGNhY2hlRmFjdG9yeSkuIFdoZW4gYW4gb2JqZWN0IGl0IHdpbGxcbiAgICogYmUgdHJlYXQgYXMgYSBjYWNoZSBvYmplY3QgaXRzZWxmOiB0aGUgdXNhZ2UgaXMgJGh0dHAoe2NhY2hlOiBjYWNoZX0pXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWNoZSBib29sZWFuLCBzdHJpbmcgb3IgY2FjaGUtb2JqZWN0XG4gICAqL1xuICB0aGlzLnVzZUxvYWRlckNhY2hlID0gZnVuY3Rpb24gKGNhY2hlKSB7XG4gICAgaWYgKGNhY2hlID09PSBmYWxzZSkge1xuICAgICAgLy8gZGlzYWJsZSBjYWNoZVxuICAgICAgbG9hZGVyQ2FjaGUgPSB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmIChjYWNoZSA9PT0gdHJ1ZSkge1xuICAgICAgLy8gZW5hYmxlIGNhY2hlIHVzaW5nIEFKUyBkZWZhdWx0c1xuICAgICAgbG9hZGVyQ2FjaGUgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mKGNhY2hlKSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIGVuYWJsZSBjYWNoZSB1c2luZyBkZWZhdWx0XG4gICAgICBsb2FkZXJDYWNoZSA9ICckdHJhbnNsYXRpb25DYWNoZSc7XG4gICAgfSBlbHNlIGlmIChjYWNoZSkge1xuICAgICAgLy8gZW5hYmxlIGNhY2hlIHVzaW5nIGdpdmVuIG9uZSAoc2VlICRjYWNoZUZhY3RvcnkpXG4gICAgICBsb2FkZXJDYWNoZSA9IGNhY2hlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG9iamVjdFxuICAgKiBAbmFtZSBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGVcbiAgICogQHJlcXVpcmVzICRpbnRlcnBvbGF0ZVxuICAgKiBAcmVxdWlyZXMgJGxvZ1xuICAgKiBAcmVxdWlyZXMgJHJvb3RTY29wZVxuICAgKiBAcmVxdWlyZXMgJHFcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoZSBgJHRyYW5zbGF0ZWAgc2VydmljZSBpcyB0aGUgYWN0dWFsIGNvcmUgb2YgYW5ndWxhci10cmFuc2xhdGUuIEl0IGV4cGVjdHMgYSB0cmFuc2xhdGlvbiBpZFxuICAgKiBhbmQgb3B0aW9uYWwgaW50ZXJwb2xhdGUgcGFyYW1ldGVycyB0byB0cmFuc2xhdGUgY29udGVudHMuXG4gICAqXG4gICAqIDxwcmU+XG4gICAqICAkdHJhbnNsYXRlKCdIRUFETElORV9URVhUJykudGhlbihmdW5jdGlvbiAodHJhbnNsYXRpb24pIHtcbiAgICogICAgJHNjb3BlLnRyYW5zbGF0ZWRUZXh0ID0gdHJhbnNsYXRpb247XG4gICAqICB9KTtcbiAgICogPC9wcmU+XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfGFycmF5fSB0cmFuc2xhdGlvbklkIEEgdG9rZW4gd2hpY2ggcmVwcmVzZW50cyBhIHRyYW5zbGF0aW9uIGlkXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoaXMgY2FuIGJlIG9wdGlvbmFsbHkgYW4gYXJyYXkgb2YgdHJhbnNsYXRpb24gaWRzIHdoaWNoXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgdGhhdCB0aGUgZnVuY3Rpb24gcmV0dXJucyBhbiBvYmplY3Qgd2hlcmUgZWFjaCBrZXlcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXMgdGhlIHRyYW5zbGF0aW9uIGlkIGFuZCB0aGUgdmFsdWUgdGhlIHRyYW5zbGF0aW9uLlxuICAgKiBAcGFyYW0ge29iamVjdD19IGludGVycG9sYXRlUGFyYW1zIEFuIG9iamVjdCBoYXNoIGZvciBkeW5hbWljIHZhbHVlc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gaW50ZXJwb2xhdGlvbklkIFRoZSBpZCBvZiB0aGUgaW50ZXJwb2xhdGlvbiB0byB1c2VcbiAgICogQHJldHVybnMge29iamVjdH0gcHJvbWlzZVxuICAgKi9cbiAgdGhpcy4kZ2V0ID0gW1xuICAgICckbG9nJyxcbiAgICAnJGluamVjdG9yJyxcbiAgICAnJHJvb3RTY29wZScsXG4gICAgJyRxJyxcbiAgICBmdW5jdGlvbiAoJGxvZywgJGluamVjdG9yLCAkcm9vdFNjb3BlLCAkcSkge1xuXG4gICAgICB2YXIgU3RvcmFnZSxcbiAgICAgICAgICBkZWZhdWx0SW50ZXJwb2xhdG9yID0gJGluamVjdG9yLmdldCgkaW50ZXJwb2xhdGlvbkZhY3RvcnkgfHwgJyR0cmFuc2xhdGVEZWZhdWx0SW50ZXJwb2xhdGlvbicpLFxuICAgICAgICAgIHBlbmRpbmdMb2FkZXIgPSBmYWxzZSxcbiAgICAgICAgICBpbnRlcnBvbGF0b3JIYXNoTWFwID0ge30sXG4gICAgICAgICAgbGFuZ1Byb21pc2VzID0ge30sXG4gICAgICAgICAgZmFsbGJhY2tJbmRleCxcbiAgICAgICAgICBzdGFydEZhbGxiYWNrSXRlcmF0aW9uO1xuXG4gICAgICB2YXIgJHRyYW5zbGF0ZSA9IGZ1bmN0aW9uICh0cmFuc2xhdGlvbklkLCBpbnRlcnBvbGF0ZVBhcmFtcywgaW50ZXJwb2xhdGlvbklkKSB7XG5cbiAgICAgICAgLy8gRHVjayBkZXRlY3Rpb246IElmIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBhbiBhcnJheSwgYSBidW5jaCBvZiB0cmFuc2xhdGlvbnMgd2FzIHJlcXVlc3RlZC5cbiAgICAgICAgLy8gVGhlIHJlc3VsdCBpcyBhbiBvYmplY3QuXG4gICAgICAgIGlmIChhbmd1bGFyLmlzQXJyYXkodHJhbnNsYXRpb25JZCkpIHtcbiAgICAgICAgICAvLyBJbnNwaXJlZCBieSBRLmFsbFNldHRsZWQgYnkgS3JpcyBLb3dhbFxuICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9rcmlza293YWwvcS9ibG9iL2IwZmE3Mjk4MDcxN2RjMjAyZmZjM2NiZjAzYjkzNmUxMGViYmI5ZDcvcS5qcyNMMTU1My0xNTYzXG4gICAgICAgICAgLy8gVGhpcyB0cmFuc2Zvcm1zIGFsbCBwcm9taXNlcyByZWdhcmRsZXNzIHJlc29sdmVkIG9yIHJlamVjdGVkXG4gICAgICAgICAgdmFyIHRyYW5zbGF0ZUFsbCA9IGZ1bmN0aW9uICh0cmFuc2xhdGlvbklkcykge1xuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSB7fTsgLy8gc3RvcmluZyB0aGUgYWN0dWFsIHJlc3VsdHNcbiAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdOyAvLyBwcm9taXNlcyB0byB3YWl0IGZvclxuICAgICAgICAgICAgLy8gV3JhcHMgdGhlIHByb21pc2UgYSkgYmVpbmcgYWx3YXlzIHJlc29sdmVkIGFuZCBiKSBzdG9yaW5nIHRoZSBsaW5rIGlkLT52YWx1ZVxuICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZSA9IGZ1bmN0aW9uICh0cmFuc2xhdGlvbklkKSB7XG4gICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICAgIHZhciByZWdhcmRsZXNzID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0c1t0cmFuc2xhdGlvbklkXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoW3RyYW5zbGF0aW9uSWQsIHZhbHVlXSk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIC8vIHdlIGRvbid0IGNhcmUgd2hldGhlciB0aGUgcHJvbWlzZSB3YXMgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQ7IGp1c3Qgc3RvcmUgdGhlIHZhbHVlc1xuICAgICAgICAgICAgICAkdHJhbnNsYXRlKHRyYW5zbGF0aW9uSWQsIGludGVycG9sYXRlUGFyYW1zLCBpbnRlcnBvbGF0aW9uSWQpLnRoZW4ocmVnYXJkbGVzcywgcmVnYXJkbGVzcyk7XG4gICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBjID0gdHJhbnNsYXRpb25JZHMubGVuZ3RoOyBpIDwgYzsgaSsrKSB7XG4gICAgICAgICAgICAgIHByb21pc2VzLnB1c2godHJhbnNsYXRlKHRyYW5zbGF0aW9uSWRzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB3YWl0IGZvciBhbGwgKGluY2x1ZGluZyBzdG9yaW5nIHRvIHJlc3VsdHMpXG4gICAgICAgICAgICByZXR1cm4gJHEuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgLy8gcmV0dXJuIHRoZSByZXN1bHRzXG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXR1cm4gdHJhbnNsYXRlQWxsKHRyYW5zbGF0aW9uSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAvLyB0cmltIG9mZiBhbnkgd2hpdGVzcGFjZVxuICAgICAgICBpZiAodHJhbnNsYXRpb25JZCkge1xuICAgICAgICAgIHRyYW5zbGF0aW9uSWQgPSB0cmltLmFwcGx5KHRyYW5zbGF0aW9uSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHByb21pc2VUb1dhaXRGb3IgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBwcm9taXNlID0gJHByZWZlcnJlZExhbmd1YWdlID9cbiAgICAgICAgICAgIGxhbmdQcm9taXNlc1skcHJlZmVycmVkTGFuZ3VhZ2VdIDpcbiAgICAgICAgICAgIGxhbmdQcm9taXNlc1skdXNlc107XG5cbiAgICAgICAgICBmYWxsYmFja0luZGV4ID0gMDtcblxuICAgICAgICAgIGlmICgkc3RvcmFnZUZhY3RvcnkgJiYgIXByb21pc2UpIHtcbiAgICAgICAgICAgIC8vIGxvb2tzIGxpa2UgdGhlcmUncyBubyBwZW5kaW5nIHByb21pc2UgZm9yICRwcmVmZXJyZWRMYW5ndWFnZSBvclxuICAgICAgICAgICAgLy8gJHVzZXMuIE1heWJlIHRoZXJlJ3Mgb25lIHBlbmRpbmcgZm9yIGEgbGFuZ3VhZ2UgdGhhdCBjb21lcyBmcm9tXG4gICAgICAgICAgICAvLyBzdG9yYWdlLlxuICAgICAgICAgICAgdmFyIGxhbmdLZXkgPSBTdG9yYWdlLmdldCgkc3RvcmFnZUtleSk7XG4gICAgICAgICAgICBwcm9taXNlID0gbGFuZ1Byb21pc2VzW2xhbmdLZXldO1xuXG4gICAgICAgICAgICBpZiAoJGZhbGxiYWNrTGFuZ3VhZ2UgJiYgJGZhbGxiYWNrTGFuZ3VhZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gaW5kZXhPZigkZmFsbGJhY2tMYW5ndWFnZSwgbGFuZ0tleSk7XG4gICAgICAgICAgICAgICAgLy8gbWF5YmUgdGhlIGxhbmd1YWdlIGZyb20gc3RvcmFnZSBpcyBhbHNvIGRlZmluZWQgYXMgZmFsbGJhY2sgbGFuZ3VhZ2VcbiAgICAgICAgICAgICAgICAvLyB3ZSBpbmNyZWFzZSB0aGUgZmFsbGJhY2sgbGFuZ3VhZ2UgaW5kZXggdG8gbm90IHNlYXJjaCBpbiB0aGF0IGxhbmd1YWdlXG4gICAgICAgICAgICAgICAgLy8gYXMgZmFsbGJhY2ssIHNpbmNlIGl0J3MgcHJvYmFibHkgdGhlIGZpcnN0IHVzZWQgbGFuZ3VhZ2VcbiAgICAgICAgICAgICAgICAvLyBpbiB0aGF0IGNhc2UgdGhlIGluZGV4IHN0YXJ0cyBhZnRlciB0aGUgZmlyc3QgZWxlbWVudFxuICAgICAgICAgICAgICAgIGZhbGxiYWNrSW5kZXggPSAoaW5kZXggPT09IDApID8gMSA6IDA7XG5cbiAgICAgICAgICAgICAgICAvLyBidXQgd2UgY2FuIG1ha2Ugc3VyZSB0byBBTFdBWVMgZmFsbGJhY2sgdG8gcHJlZmVycmVkIGxhbmd1YWdlIGF0IGxlYXN0XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4T2YoJGZhbGxiYWNrTGFuZ3VhZ2UsICRwcmVmZXJyZWRMYW5ndWFnZSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAkZmFsbGJhY2tMYW5ndWFnZS5wdXNoKCRwcmVmZXJyZWRMYW5ndWFnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgfSgpKTtcblxuICAgICAgICBpZiAoIXByb21pc2VUb1dhaXRGb3IpIHtcbiAgICAgICAgICAvLyBubyBwcm9taXNlIHRvIHdhaXQgZm9yPyBva2F5LiBUaGVuIHRoZXJlJ3Mgbm8gbG9hZGVyIHJlZ2lzdGVyZWRcbiAgICAgICAgICAvLyBub3IgaXMgYSBvbmUgcGVuZGluZyBmb3IgbGFuZ3VhZ2UgdGhhdCBjb21lcyBmcm9tIHN0b3JhZ2UuXG4gICAgICAgICAgLy8gV2UgY2FuIGp1c3QgdHJhbnNsYXRlLlxuICAgICAgICAgIGRldGVybWluZVRyYW5zbGF0aW9uKHRyYW5zbGF0aW9uSWQsIGludGVycG9sYXRlUGFyYW1zLCBpbnRlcnBvbGF0aW9uSWQpLnRoZW4oZGVmZXJyZWQucmVzb2x2ZSwgZGVmZXJyZWQucmVqZWN0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9taXNlVG9XYWl0Rm9yLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGV0ZXJtaW5lVHJhbnNsYXRpb24odHJhbnNsYXRpb25JZCwgaW50ZXJwb2xhdGVQYXJhbXMsIGludGVycG9sYXRpb25JZCkudGhlbihkZWZlcnJlZC5yZXNvbHZlLCBkZWZlcnJlZC5yZWplY3QpO1xuICAgICAgICAgIH0sIGRlZmVycmVkLnJlamVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIEBuYW1lIGFwcGx5Tm90Rm91bmRJbmRpY2F0b3JzXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQXBwbGllcyBub3QgZm91bnQgaW5kaWNhdG9ycyB0byBnaXZlbiB0cmFuc2xhdGlvbiBpZCwgaWYgbmVlZGVkLlxuICAgICAgICogVGhpcyBmdW5jdGlvbiBnZXRzIG9ubHkgZXhlY3V0ZWQsIGlmIGEgdHJhbnNsYXRpb24gaWQgZG9lc24ndCBleGlzdCxcbiAgICAgICAqIHdoaWNoIGlzIHdoeSBhIHRyYW5zbGF0aW9uIGlkIGlzIGV4cGVjdGVkIGFzIGFyZ3VtZW50LlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0cmFuc2xhdGlvbklkIFRyYW5zbGF0aW9uIGlkLlxuICAgICAgICogQHJldHVybnMge3N0cmluZ30gU2FtZSBhcyBnaXZlbiB0cmFuc2xhdGlvbiBpZCBidXQgYXBwbGllZCB3aXRoIG5vdCBmb3VuZFxuICAgICAgICogaW5kaWNhdG9ycy5cbiAgICAgICAqL1xuICAgICAgdmFyIGFwcGx5Tm90Rm91bmRJbmRpY2F0b3JzID0gZnVuY3Rpb24gKHRyYW5zbGF0aW9uSWQpIHtcbiAgICAgICAgLy8gYXBwbHlpbmcgbm90Rm91bmRJbmRpY2F0b3JzXG4gICAgICAgIGlmICgkbm90Rm91bmRJbmRpY2F0b3JMZWZ0KSB7XG4gICAgICAgICAgdHJhbnNsYXRpb25JZCA9IFskbm90Rm91bmRJbmRpY2F0b3JMZWZ0LCB0cmFuc2xhdGlvbklkXS5qb2luKCcgJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRub3RGb3VuZEluZGljYXRvclJpZ2h0KSB7XG4gICAgICAgICAgdHJhbnNsYXRpb25JZCA9IFt0cmFuc2xhdGlvbklkLCAkbm90Rm91bmRJbmRpY2F0b3JSaWdodF0uam9pbignICcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cmFuc2xhdGlvbklkO1xuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmFtZSB1c2VMYW5ndWFnZVxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIE1ha2VzIGFjdHVhbCB1c2Ugb2YgYSBsYW5ndWFnZSBieSBzZXR0aW5nIGEgZ2l2ZW4gbGFuZ3VhZ2Uga2V5IGFzIHVzZWRcbiAgICAgICAqIGxhbmd1YWdlIGFuZCBpbmZvcm1zIHJlZ2lzdGVyZWQgaW50ZXJwb2xhdG9ycyB0byBhbHNvIHVzZSB0aGUgZ2l2ZW5cbiAgICAgICAqIGtleSBhcyBsb2NhbGUuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtrZXl9IExvY2FsZSBrZXkuXG4gICAgICAgKi9cbiAgICAgIHZhciB1c2VMYW5ndWFnZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgJHVzZXMgPSBrZXk7XG4gICAgICAgICRyb290U2NvcGUuJGVtaXQoJyR0cmFuc2xhdGVDaGFuZ2VTdWNjZXNzJywge2xhbmd1YWdlOiBrZXl9KTtcblxuICAgICAgICBpZiAoJHN0b3JhZ2VGYWN0b3J5KSB7XG4gICAgICAgICAgU3RvcmFnZS5wdXQoJHRyYW5zbGF0ZS5zdG9yYWdlS2V5KCksICR1c2VzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpbmZvcm0gZGVmYXVsdCBpbnRlcnBvbGF0b3JcbiAgICAgICAgZGVmYXVsdEludGVycG9sYXRvci5zZXRMb2NhbGUoJHVzZXMpO1xuICAgICAgICAvLyBpbmZvcm0gYWxsIG90aGVycyB0b28hXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChpbnRlcnBvbGF0b3JIYXNoTWFwLCBmdW5jdGlvbiAoaW50ZXJwb2xhdG9yLCBpZCkge1xuICAgICAgICAgIGludGVycG9sYXRvckhhc2hNYXBbaWRdLnNldExvY2FsZSgkdXNlcyk7XG4gICAgICAgIH0pO1xuICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KCckdHJhbnNsYXRlQ2hhbmdlRW5kJywge2xhbmd1YWdlOiBrZXl9KTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogQG5hbWUgbG9hZEFzeW5jXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogS2lja3Mgb2YgcmVnaXN0ZXJlZCBhc3luYyBsb2FkZXIgdXNpbmcgYCRpbmplY3RvcmAgYW5kIGFwcGxpZXMgZXhpc3RpbmdcbiAgICAgICAqIGxvYWRlciBvcHRpb25zLiBXaGVuIHJlc29sdmVkLCBpdCB1cGRhdGVzIHRyYW5zbGF0aW9uIHRhYmxlcyBhY2NvcmRpbmdseVxuICAgICAgICogb3IgcmVqZWN0cyB3aXRoIGdpdmVuIGxhbmd1YWdlIGtleS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IExhbmd1YWdlIGtleS5cbiAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IEEgcHJvbWlzZS5cbiAgICAgICAqL1xuICAgICAgdmFyIGxvYWRBc3luYyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKCFrZXkpIHtcbiAgICAgICAgICB0aHJvdyAnTm8gbGFuZ3VhZ2Uga2V5IHNwZWNpZmllZCBmb3IgbG9hZGluZy4nO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KCckdHJhbnNsYXRlTG9hZGluZ1N0YXJ0Jywge2xhbmd1YWdlOiBrZXl9KTtcbiAgICAgICAgcGVuZGluZ0xvYWRlciA9IHRydWU7XG5cbiAgICAgICAgdmFyIGNhY2hlID0gbG9hZGVyQ2FjaGU7XG4gICAgICAgIGlmICh0eXBlb2YoY2FjaGUpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIC8vIGdldHRpbmcgb24tZGVtYW5kIGluc3RhbmNlIG9mIGxvYWRlclxuICAgICAgICAgIGNhY2hlID0gJGluamVjdG9yLmdldChjYWNoZSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbG9hZGVyT3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKHt9LCAkbG9hZGVyT3B0aW9ucywge1xuICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICRodHRwOiBhbmd1bGFyLmV4dGVuZCh7fSwge1xuICAgICAgICAgICAgY2FjaGU6IGNhY2hlXG4gICAgICAgICAgfSwgJGxvYWRlck9wdGlvbnMuJGh0dHApXG4gICAgICAgIH0pO1xuXG4gICAgICAgICRpbmplY3Rvci5nZXQoJGxvYWRlckZhY3RvcnkpKGxvYWRlck9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICB2YXIgdHJhbnNsYXRpb25UYWJsZSA9IHt9O1xuICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoJyR0cmFuc2xhdGVMb2FkaW5nU3VjY2VzcycsIHtsYW5ndWFnZToga2V5fSk7XG5cbiAgICAgICAgICBpZiAoYW5ndWxhci5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZGF0YSwgZnVuY3Rpb24gKHRhYmxlKSB7XG4gICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHRyYW5zbGF0aW9uVGFibGUsIGZsYXRPYmplY3QodGFibGUpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh0cmFuc2xhdGlvblRhYmxlLCBmbGF0T2JqZWN0KGRhdGEpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGVuZGluZ0xvYWRlciA9IGZhbHNlO1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoe1xuICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICB0YWJsZTogdHJhbnNsYXRpb25UYWJsZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoJyR0cmFuc2xhdGVMb2FkaW5nRW5kJywge2xhbmd1YWdlOiBrZXl9KTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoJyR0cmFuc2xhdGVMb2FkaW5nRXJyb3InLCB7bGFuZ3VhZ2U6IGtleX0pO1xuICAgICAgICAgIGRlZmVycmVkLnJlamVjdChrZXkpO1xuICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoJyR0cmFuc2xhdGVMb2FkaW5nRW5kJywge2xhbmd1YWdlOiBrZXl9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgfTtcblxuICAgICAgaWYgKCRzdG9yYWdlRmFjdG9yeSkge1xuICAgICAgICBTdG9yYWdlID0gJGluamVjdG9yLmdldCgkc3RvcmFnZUZhY3RvcnkpO1xuXG4gICAgICAgIGlmICghU3RvcmFnZS5nZXQgfHwgIVN0b3JhZ2UucHV0KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZG5cXCd0IHVzZSBzdG9yYWdlIFxcJycgKyAkc3RvcmFnZUZhY3RvcnkgKyAnXFwnLCBtaXNzaW5nIGdldCgpIG9yIHB1dCgpIG1ldGhvZCEnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBhcHBseSBhZGRpdGlvbmFsIHNldHRpbmdzXG4gICAgICBpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKGRlZmF1bHRJbnRlcnBvbGF0b3IudXNlU2FuaXRpemVWYWx1ZVN0cmF0ZWd5KSkge1xuICAgICAgICBkZWZhdWx0SW50ZXJwb2xhdG9yLnVzZVNhbml0aXplVmFsdWVTdHJhdGVneSgkaW50ZXJwb2xhdGlvblNhbml0aXphdGlvblN0cmF0ZWd5KTtcbiAgICAgIH1cblxuICAgICAgLy8gaWYgd2UgaGF2ZSBhZGRpdGlvbmFsIGludGVycG9sYXRpb25zIHRoYXQgd2VyZSBhZGRlZCB2aWFcbiAgICAgIC8vICR0cmFuc2xhdGVQcm92aWRlci5hZGRJbnRlcnBvbGF0aW9uKCksIHdlIGhhdmUgdG8gbWFwJ2VtXG4gICAgICBpZiAoJGludGVycG9sYXRvckZhY3Rvcmllcy5sZW5ndGgpIHtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKCRpbnRlcnBvbGF0b3JGYWN0b3JpZXMsIGZ1bmN0aW9uIChpbnRlcnBvbGF0b3JGYWN0b3J5KSB7XG4gICAgICAgICAgdmFyIGludGVycG9sYXRvciA9ICRpbmplY3Rvci5nZXQoaW50ZXJwb2xhdG9yRmFjdG9yeSk7XG4gICAgICAgICAgLy8gc2V0dGluZyBpbml0aWFsIGxvY2FsZSBmb3IgZWFjaCBpbnRlcnBvbGF0aW9uIHNlcnZpY2VcbiAgICAgICAgICBpbnRlcnBvbGF0b3Iuc2V0TG9jYWxlKCRwcmVmZXJyZWRMYW5ndWFnZSB8fCAkdXNlcyk7XG4gICAgICAgICAgLy8gYXBwbHkgYWRkaXRpb25hbCBzZXR0aW5nc1xuICAgICAgICAgIGlmIChhbmd1bGFyLmlzRnVuY3Rpb24oaW50ZXJwb2xhdG9yLnVzZVNhbml0aXplVmFsdWVTdHJhdGVneSkpIHtcbiAgICAgICAgICAgIGludGVycG9sYXRvci51c2VTYW5pdGl6ZVZhbHVlU3RyYXRlZ3koJGludGVycG9sYXRpb25TYW5pdGl6YXRpb25TdHJhdGVneSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIG1ha2UnZW0gcmVjb2duaXphYmxlIHRocm91Z2ggaWRcbiAgICAgICAgICBpbnRlcnBvbGF0b3JIYXNoTWFwW2ludGVycG9sYXRvci5nZXRJbnRlcnBvbGF0aW9uSWRlbnRpZmllcigpXSA9IGludGVycG9sYXRvcjtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQG5hbWUgZ2V0VHJhbnNsYXRpb25UYWJsZVxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIHRyYW5zbGF0aW9uIHRhYmxlXG4gICAgICAgKiBvciBpcyByZWplY3RlZCBpZiBhbiBlcnJvciBvY2N1cnJlZC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0gbGFuZ0tleVxuICAgICAgICogQHJldHVybnMge1EucHJvbWlzZX1cbiAgICAgICAqL1xuICAgICAgdmFyIGdldFRyYW5zbGF0aW9uVGFibGUgPSBmdW5jdGlvbiAobGFuZ0tleSkge1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKCR0cmFuc2xhdGlvblRhYmxlLCBsYW5nS2V5KSkge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJHRyYW5zbGF0aW9uVGFibGVbbGFuZ0tleV0pO1xuICAgICAgICB9IGVsc2UgaWYgKGxhbmdQcm9taXNlc1tsYW5nS2V5XSkge1xuICAgICAgICAgIGxhbmdQcm9taXNlc1tsYW5nS2V5XS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB0cmFuc2xhdGlvbnMoZGF0YS5rZXksIGRhdGEudGFibGUpO1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhLnRhYmxlKTtcbiAgICAgICAgICB9LCBkZWZlcnJlZC5yZWplY3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmFtZSBnZXRGYWxsYmFja1RyYW5zbGF0aW9uXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgdG8gdGhlIHRyYW5zbGF0aW9uXG4gICAgICAgKiBvciBiZSByZWplY3RlZCBpZiBubyB0cmFuc2xhdGlvbiB3YXMgZm91bmQgZm9yIHRoZSBsYW5ndWFnZS5cbiAgICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgY3VycmVudGx5IG9ubHkgdXNlZCBmb3IgZmFsbGJhY2sgbGFuZ3VhZ2UgdHJhbnNsYXRpb24uXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIGxhbmdLZXkgVGhlIGxhbmd1YWdlIHRvIHRyYW5zbGF0ZSB0by5cbiAgICAgICAqIEBwYXJhbSB0cmFuc2xhdGlvbklkXG4gICAgICAgKiBAcGFyYW0gaW50ZXJwb2xhdGVQYXJhbXNcbiAgICAgICAqIEBwYXJhbSBJbnRlcnBvbGF0b3JcbiAgICAgICAqIEByZXR1cm5zIHtRLnByb21pc2V9XG4gICAgICAgKi9cbiAgICAgIHZhciBnZXRGYWxsYmFja1RyYW5zbGF0aW9uID0gZnVuY3Rpb24gKGxhbmdLZXksIHRyYW5zbGF0aW9uSWQsIGludGVycG9sYXRlUGFyYW1zLCBJbnRlcnBvbGF0b3IpIHtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICBnZXRUcmFuc2xhdGlvblRhYmxlKGxhbmdLZXkpLnRoZW4oZnVuY3Rpb24gKHRyYW5zbGF0aW9uVGFibGUpIHtcbiAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRyYW5zbGF0aW9uVGFibGUsIHRyYW5zbGF0aW9uSWQpKSB7XG4gICAgICAgICAgICBJbnRlcnBvbGF0b3Iuc2V0TG9jYWxlKGxhbmdLZXkpO1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShJbnRlcnBvbGF0b3IuaW50ZXJwb2xhdGUodHJhbnNsYXRpb25UYWJsZVt0cmFuc2xhdGlvbklkXSwgaW50ZXJwb2xhdGVQYXJhbXMpKTtcbiAgICAgICAgICAgIEludGVycG9sYXRvci5zZXRMb2NhbGUoJHVzZXMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGRlZmVycmVkLnJlamVjdCk7XG5cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIEBuYW1lIGdldEZhbGxiYWNrVHJhbnNsYXRpb25JbnN0YW50XG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogUmV0dXJucyBhIHRyYW5zbGF0aW9uXG4gICAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGN1cnJlbnRseSBvbmx5IHVzZWQgZm9yIGZhbGxiYWNrIGxhbmd1YWdlIHRyYW5zbGF0aW9uLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSBsYW5nS2V5IFRoZSBsYW5ndWFnZSB0byB0cmFuc2xhdGUgdG8uXG4gICAgICAgKiBAcGFyYW0gdHJhbnNsYXRpb25JZFxuICAgICAgICogQHBhcmFtIGludGVycG9sYXRlUGFyYW1zXG4gICAgICAgKiBAcGFyYW0gSW50ZXJwb2xhdG9yXG4gICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0cmFuc2xhdGlvblxuICAgICAgICovXG4gICAgICB2YXIgZ2V0RmFsbGJhY2tUcmFuc2xhdGlvbkluc3RhbnQgPSBmdW5jdGlvbiAobGFuZ0tleSwgdHJhbnNsYXRpb25JZCwgaW50ZXJwb2xhdGVQYXJhbXMsIEludGVycG9sYXRvcikge1xuICAgICAgICB2YXIgcmVzdWx0LCB0cmFuc2xhdGlvblRhYmxlID0gJHRyYW5zbGF0aW9uVGFibGVbbGFuZ0tleV07XG5cbiAgICAgICAgaWYgKHRyYW5zbGF0aW9uVGFibGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRyYW5zbGF0aW9uVGFibGUsIHRyYW5zbGF0aW9uSWQpKSB7XG4gICAgICAgICAgSW50ZXJwb2xhdG9yLnNldExvY2FsZShsYW5nS2V5KTtcbiAgICAgICAgICByZXN1bHQgPSBJbnRlcnBvbGF0b3IuaW50ZXJwb2xhdGUodHJhbnNsYXRpb25UYWJsZVt0cmFuc2xhdGlvbklkXSwgaW50ZXJwb2xhdGVQYXJhbXMpO1xuICAgICAgICAgIEludGVycG9sYXRvci5zZXRMb2NhbGUoJHVzZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG5cblxuICAgICAgLyoqXG4gICAgICAgKiBAbmFtZSB0cmFuc2xhdGVCeUhhbmRsZXJcbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKlxuICAgICAgICogVHJhbnNsYXRlIGJ5IG1pc3NpbmcgdHJhbnNsYXRpb24gaGFuZGxlci5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0gdHJhbnNsYXRpb25JZFxuICAgICAgICogQHJldHVybnMgdHJhbnNsYXRpb24gY3JlYXRlZCBieSAkbWlzc2luZ1RyYW5zbGF0aW9uSGFuZGxlciBvciB0cmFuc2xhdGlvbklkIGlzICRtaXNzaW5nVHJhbnNsYXRpb25IYW5kbGVyIGlzXG4gICAgICAgKiBhYnNlbnRcbiAgICAgICAqL1xuICAgICAgdmFyIHRyYW5zbGF0ZUJ5SGFuZGxlciA9IGZ1bmN0aW9uICh0cmFuc2xhdGlvbklkKSB7XG4gICAgICAgIC8vIElmIHdlIGhhdmUgYSBoYW5kbGVyIGZhY3RvcnkgLSB3ZSBtaWdodCBhbHNvIGNhbGwgaXQgaGVyZSB0byBkZXRlcm1pbmUgaWYgaXQgcHJvdmlkZXNcbiAgICAgICAgLy8gYSBkZWZhdWx0IHRleHQgZm9yIGEgdHJhbnNsYXRpb25pZCB0aGF0IGNhbid0IGJlIGZvdW5kIGFueXdoZXJlIGluIG91ciB0YWJsZXNcbiAgICAgICAgaWYgKCRtaXNzaW5nVHJhbnNsYXRpb25IYW5kbGVyRmFjdG9yeSkge1xuICAgICAgICAgIHZhciByZXN1bHRTdHJpbmcgPSAkaW5qZWN0b3IuZ2V0KCRtaXNzaW5nVHJhbnNsYXRpb25IYW5kbGVyRmFjdG9yeSkodHJhbnNsYXRpb25JZCwgJHVzZXMpO1xuICAgICAgICAgIGlmIChyZXN1bHRTdHJpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFN0cmluZztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRyYW5zbGF0aW9uSWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0cmFuc2xhdGlvbklkO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIEBuYW1lIHJlc29sdmVGb3JGYWxsYmFja0xhbmd1YWdlXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICpcbiAgICAgICAqIFJlY3Vyc2l2ZSBoZWxwZXIgZnVuY3Rpb24gZm9yIGZhbGxiYWNrVHJhbnNsYXRpb24gdGhhdCB3aWxsIHNlcXVlbnRpYWxseSBsb29rXG4gICAgICAgKiBmb3IgYSB0cmFuc2xhdGlvbiBpbiB0aGUgZmFsbGJhY2tMYW5ndWFnZXMgc3RhcnRpbmcgd2l0aCBmYWxsYmFja0xhbmd1YWdlSW5kZXguXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIGZhbGxiYWNrTGFuZ3VhZ2VJbmRleFxuICAgICAgICogQHBhcmFtIHRyYW5zbGF0aW9uSWRcbiAgICAgICAqIEBwYXJhbSBpbnRlcnBvbGF0ZVBhcmFtc1xuICAgICAgICogQHBhcmFtIEludGVycG9sYXRvclxuICAgICAgICogQHJldHVybnMge1EucHJvbWlzZX0gUHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSB0byB0aGUgdHJhbnNsYXRpb24uXG4gICAgICAgKi9cbiAgICAgIHZhciByZXNvbHZlRm9yRmFsbGJhY2tMYW5ndWFnZSA9IGZ1bmN0aW9uIChmYWxsYmFja0xhbmd1YWdlSW5kZXgsIHRyYW5zbGF0aW9uSWQsIGludGVycG9sYXRlUGFyYW1zLCBJbnRlcnBvbGF0b3IpIHtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICBpZiAoZmFsbGJhY2tMYW5ndWFnZUluZGV4IDwgJGZhbGxiYWNrTGFuZ3VhZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIGxhbmdLZXkgPSAkZmFsbGJhY2tMYW5ndWFnZVtmYWxsYmFja0xhbmd1YWdlSW5kZXhdO1xuICAgICAgICAgIGdldEZhbGxiYWNrVHJhbnNsYXRpb24obGFuZ0tleSwgdHJhbnNsYXRpb25JZCwgaW50ZXJwb2xhdGVQYXJhbXMsIEludGVycG9sYXRvcikudGhlbihcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUsXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIC8vIExvb2sgaW4gdGhlIG5leHQgZmFsbGJhY2sgbGFuZ3VhZ2UgZm9yIGEgdHJhbnNsYXRpb24uXG4gICAgICAgICAgICAgIC8vIEl0IGRlbGF5cyB0aGUgcmVzb2x2aW5nIGJ5IHBhc3NpbmcgYW5vdGhlciBwcm9taXNlIHRvIHJlc29sdmUuXG4gICAgICAgICAgICAgIHJlc29sdmVGb3JGYWxsYmFja0xhbmd1YWdlKGZhbGxiYWNrTGFuZ3VhZ2VJbmRleCArIDEsIHRyYW5zbGF0aW9uSWQsIGludGVycG9sYXRlUGFyYW1zLCBJbnRlcnBvbGF0b3IpLnRoZW4oZGVmZXJyZWQucmVzb2x2ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBObyB0cmFuc2xhdGlvbiBmb3VuZCBpbiBhbnkgZmFsbGJhY2sgbGFuZ3VhZ2VcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHRyYW5zbGF0ZUJ5SGFuZGxlcih0cmFuc2xhdGlvbklkKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIEBuYW1lIHJlc29sdmVGb3JGYWxsYmFja0xhbmd1YWdlSW5zdGFudFxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqXG4gICAgICAgKiBSZWN1cnNpdmUgaGVscGVyIGZ1bmN0aW9uIGZvciBmYWxsYmFja1RyYW5zbGF0aW9uIHRoYXQgd2lsbCBzZXF1ZW50aWFsbHkgbG9va1xuICAgICAgICogZm9yIGEgdHJhbnNsYXRpb24gaW4gdGhlIGZhbGxiYWNrTGFuZ3VhZ2VzIHN0YXJ0aW5nIHdpdGggZmFsbGJhY2tMYW5ndWFnZUluZGV4LlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSBmYWxsYmFja0xhbmd1YWdlSW5kZXhcbiAgICAgICAqIEBwYXJhbSB0cmFuc2xhdGlvbklkXG4gICAgICAgKiBAcGFyYW0gaW50ZXJwb2xhdGVQYXJhbXNcbiAgICAgICAqIEBwYXJhbSBJbnRlcnBvbGF0b3JcbiAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRyYW5zbGF0aW9uXG4gICAgICAgKi9cbiAgICAgIHZhciByZXNvbHZlRm9yRmFsbGJhY2tMYW5ndWFnZUluc3RhbnQgPSBmdW5jdGlvbiAoZmFsbGJhY2tMYW5ndWFnZUluZGV4LCB0cmFuc2xhdGlvbklkLCBpbnRlcnBvbGF0ZVBhcmFtcywgSW50ZXJwb2xhdG9yKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG5cbiAgICAgICAgaWYgKGZhbGxiYWNrTGFuZ3VhZ2VJbmRleCA8ICRmYWxsYmFja0xhbmd1YWdlLmxlbmd0aCkge1xuICAgICAgICAgIHZhciBsYW5nS2V5ID0gJGZhbGxiYWNrTGFuZ3VhZ2VbZmFsbGJhY2tMYW5ndWFnZUluZGV4XTtcbiAgICAgICAgICByZXN1bHQgPSBnZXRGYWxsYmFja1RyYW5zbGF0aW9uSW5zdGFudChsYW5nS2V5LCB0cmFuc2xhdGlvbklkLCBpbnRlcnBvbGF0ZVBhcmFtcywgSW50ZXJwb2xhdG9yKTtcbiAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVzb2x2ZUZvckZhbGxiYWNrTGFuZ3VhZ2VJbnN0YW50KGZhbGxiYWNrTGFuZ3VhZ2VJbmRleCArIDEsIHRyYW5zbGF0aW9uSWQsIGludGVycG9sYXRlUGFyYW1zLCBJbnRlcnBvbGF0b3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiBUcmFuc2xhdGVzIHdpdGggdGhlIHVzYWdlIG9mIHRoZSBmYWxsYmFjayBsYW5ndWFnZXMuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHRyYW5zbGF0aW9uSWRcbiAgICAgICAqIEBwYXJhbSBpbnRlcnBvbGF0ZVBhcmFtc1xuICAgICAgICogQHBhcmFtIEludGVycG9sYXRvclxuICAgICAgICogQHJldHVybnMge1EucHJvbWlzZX0gUHJvbWlzZSwgdGhhdCByZXNvbHZlcyB0byB0aGUgdHJhbnNsYXRpb24uXG4gICAgICAgKi9cbiAgICAgIHZhciBmYWxsYmFja1RyYW5zbGF0aW9uID0gZnVuY3Rpb24gKHRyYW5zbGF0aW9uSWQsIGludGVycG9sYXRlUGFyYW1zLCBJbnRlcnBvbGF0b3IpIHtcbiAgICAgICAgLy8gU3RhcnQgd2l0aCB0aGUgZmFsbGJhY2tMYW5ndWFnZSB3aXRoIGluZGV4IDBcbiAgICAgICAgcmV0dXJuIHJlc29sdmVGb3JGYWxsYmFja0xhbmd1YWdlKChzdGFydEZhbGxiYWNrSXRlcmF0aW9uPjAgPyBzdGFydEZhbGxiYWNrSXRlcmF0aW9uIDogZmFsbGJhY2tJbmRleCksIHRyYW5zbGF0aW9uSWQsIGludGVycG9sYXRlUGFyYW1zLCBJbnRlcnBvbGF0b3IpO1xuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiBUcmFuc2xhdGVzIHdpdGggdGhlIHVzYWdlIG9mIHRoZSBmYWxsYmFjayBsYW5ndWFnZXMuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHRyYW5zbGF0aW9uSWRcbiAgICAgICAqIEBwYXJhbSBpbnRlcnBvbGF0ZVBhcmFtc1xuICAgICAgICogQHBhcmFtIEludGVycG9sYXRvclxuICAgICAgICogQHJldHVybnMge1N0cmluZ30gdHJhbnNsYXRpb25cbiAgICAgICAqL1xuICAgICAgdmFyIGZhbGxiYWNrVHJhbnNsYXRpb25JbnN0YW50ID0gZnVuY3Rpb24gKHRyYW5zbGF0aW9uSWQsIGludGVycG9sYXRlUGFyYW1zLCBJbnRlcnBvbGF0b3IpIHtcbiAgICAgICAgLy8gU3RhcnQgd2l0aCB0aGUgZmFsbGJhY2tMYW5ndWFnZSB3aXRoIGluZGV4IDBcbiAgICAgICAgcmV0dXJuIHJlc29sdmVGb3JGYWxsYmFja0xhbmd1YWdlSW5zdGFudCgoc3RhcnRGYWxsYmFja0l0ZXJhdGlvbj4wID8gc3RhcnRGYWxsYmFja0l0ZXJhdGlvbiA6IGZhbGxiYWNrSW5kZXgpLCB0cmFuc2xhdGlvbklkLCBpbnRlcnBvbGF0ZVBhcmFtcywgSW50ZXJwb2xhdG9yKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBkZXRlcm1pbmVUcmFuc2xhdGlvbiA9IGZ1bmN0aW9uICh0cmFuc2xhdGlvbklkLCBpbnRlcnBvbGF0ZVBhcmFtcywgaW50ZXJwb2xhdGlvbklkKSB7XG5cbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICB2YXIgdGFibGUgPSAkdXNlcyA/ICR0cmFuc2xhdGlvblRhYmxlWyR1c2VzXSA6ICR0cmFuc2xhdGlvblRhYmxlLFxuICAgICAgICAgICAgSW50ZXJwb2xhdG9yID0gKGludGVycG9sYXRpb25JZCkgPyBpbnRlcnBvbGF0b3JIYXNoTWFwW2ludGVycG9sYXRpb25JZF0gOiBkZWZhdWx0SW50ZXJwb2xhdG9yO1xuXG4gICAgICAgIC8vIGlmIHRoZSB0cmFuc2xhdGlvbiBpZCBleGlzdHMsIHdlIGNhbiBqdXN0IGludGVycG9sYXRlIGl0XG4gICAgICAgIGlmICh0YWJsZSAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGFibGUsIHRyYW5zbGF0aW9uSWQpKSB7XG4gICAgICAgICAgdmFyIHRyYW5zbGF0aW9uID0gdGFibGVbdHJhbnNsYXRpb25JZF07XG5cbiAgICAgICAgICAvLyBJZiB1c2luZyBsaW5rLCByZXJ1biAkdHJhbnNsYXRlIHdpdGggbGlua2VkIHRyYW5zbGF0aW9uSWQgYW5kIHJldHVybiBpdFxuICAgICAgICAgIGlmICh0cmFuc2xhdGlvbi5zdWJzdHIoMCwgMikgPT09ICdAOicpIHtcblxuICAgICAgICAgICAgJHRyYW5zbGF0ZSh0cmFuc2xhdGlvbi5zdWJzdHIoMiksIGludGVycG9sYXRlUGFyYW1zLCBpbnRlcnBvbGF0aW9uSWQpXG4gICAgICAgICAgICAgIC50aGVuKGRlZmVycmVkLnJlc29sdmUsIGRlZmVycmVkLnJlamVjdCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoSW50ZXJwb2xhdG9yLmludGVycG9sYXRlKHRyYW5zbGF0aW9uLCBpbnRlcnBvbGF0ZVBhcmFtcykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgbWlzc2luZ1RyYW5zbGF0aW9uSGFuZGxlclRyYW5zbGF0aW9uO1xuICAgICAgICAgIC8vIGZvciBsb2dnaW5nIHB1cnBvc2VzIG9ubHkgKGFzIGluICR0cmFuc2xhdGVNaXNzaW5nVHJhbnNsYXRpb25IYW5kbGVyTG9nKSwgdmFsdWUgaXMgbm90IHJldHVybmVkIHRvIHByb21pc2VcbiAgICAgICAgICBpZiAoJG1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXJGYWN0b3J5ICYmICFwZW5kaW5nTG9hZGVyKSB7XG4gICAgICAgICAgICBtaXNzaW5nVHJhbnNsYXRpb25IYW5kbGVyVHJhbnNsYXRpb24gPSB0cmFuc2xhdGVCeUhhbmRsZXIodHJhbnNsYXRpb25JZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gc2luY2Ugd2UgY291bGRuJ3QgdHJhbnNsYXRlIHRoZSBpbml0YWwgcmVxdWVzdGVkIHRyYW5zbGF0aW9uIGlkLFxuICAgICAgICAgIC8vIHdlIHRyeSBpdCBub3cgd2l0aCBvbmUgb3IgbW9yZSBmYWxsYmFjayBsYW5ndWFnZXMsIGlmIGZhbGxiYWNrIGxhbmd1YWdlKHMpIGlzXG4gICAgICAgICAgLy8gY29uZmlndXJlZC5cbiAgICAgICAgICBpZiAoJHVzZXMgJiYgJGZhbGxiYWNrTGFuZ3VhZ2UgJiYgJGZhbGxiYWNrTGFuZ3VhZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgICBmYWxsYmFja1RyYW5zbGF0aW9uKHRyYW5zbGF0aW9uSWQsIGludGVycG9sYXRlUGFyYW1zLCBJbnRlcnBvbGF0b3IpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHRyYW5zbGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHRyYW5zbGF0aW9uKTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoX3RyYW5zbGF0aW9uSWQpIHtcbiAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChhcHBseU5vdEZvdW5kSW5kaWNhdG9ycyhfdHJhbnNsYXRpb25JZCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoJG1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXJGYWN0b3J5ICYmICFwZW5kaW5nTG9hZGVyICYmIG1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXJUcmFuc2xhdGlvbikge1xuICAgICAgICAgICAgLy8gbG9va3MgbGlrZSB0aGUgcmVxdWVzdGVkIHRyYW5zbGF0aW9uIGlkIGRvZXNuJ3QgZXhpc3RzLlxuICAgICAgICAgICAgLy8gTm93LCBpZiB0aGVyZSBpcyBhIHJlZ2lzdGVyZWQgaGFuZGxlciBmb3IgbWlzc2luZyB0cmFuc2xhdGlvbnMgYW5kIG5vXG4gICAgICAgICAgICAvLyBhc3luY0xvYWRlciBpcyBwZW5kaW5nLCB3ZSBleGVjdXRlIHRoZSBoYW5kbGVyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKG1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXJUcmFuc2xhdGlvbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChhcHBseU5vdEZvdW5kSW5kaWNhdG9ycyh0cmFuc2xhdGlvbklkKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgfTtcblxuICAgICAgdmFyIGRldGVybWluZVRyYW5zbGF0aW9uSW5zdGFudCA9IGZ1bmN0aW9uICh0cmFuc2xhdGlvbklkLCBpbnRlcnBvbGF0ZVBhcmFtcywgaW50ZXJwb2xhdGlvbklkKSB7XG5cbiAgICAgICAgdmFyIHJlc3VsdCwgdGFibGUgPSAkdXNlcyA/ICR0cmFuc2xhdGlvblRhYmxlWyR1c2VzXSA6ICR0cmFuc2xhdGlvblRhYmxlLFxuICAgICAgICAgICAgSW50ZXJwb2xhdG9yID0gKGludGVycG9sYXRpb25JZCkgPyBpbnRlcnBvbGF0b3JIYXNoTWFwW2ludGVycG9sYXRpb25JZF0gOiBkZWZhdWx0SW50ZXJwb2xhdG9yO1xuXG4gICAgICAgIC8vIGlmIHRoZSB0cmFuc2xhdGlvbiBpZCBleGlzdHMsIHdlIGNhbiBqdXN0IGludGVycG9sYXRlIGl0XG4gICAgICAgIGlmICh0YWJsZSAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGFibGUsIHRyYW5zbGF0aW9uSWQpKSB7XG4gICAgICAgICAgdmFyIHRyYW5zbGF0aW9uID0gdGFibGVbdHJhbnNsYXRpb25JZF07XG5cbiAgICAgICAgICAvLyBJZiB1c2luZyBsaW5rLCByZXJ1biAkdHJhbnNsYXRlIHdpdGggbGlua2VkIHRyYW5zbGF0aW9uSWQgYW5kIHJldHVybiBpdFxuICAgICAgICAgIGlmICh0cmFuc2xhdGlvbi5zdWJzdHIoMCwgMikgPT09ICdAOicpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGRldGVybWluZVRyYW5zbGF0aW9uSW5zdGFudCh0cmFuc2xhdGlvbi5zdWJzdHIoMiksIGludGVycG9sYXRlUGFyYW1zLCBpbnRlcnBvbGF0aW9uSWQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSBJbnRlcnBvbGF0b3IuaW50ZXJwb2xhdGUodHJhbnNsYXRpb24sIGludGVycG9sYXRlUGFyYW1zKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIG1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXJUcmFuc2xhdGlvbjtcbiAgICAgICAgICAvLyBmb3IgbG9nZ2luZyBwdXJwb3NlcyBvbmx5IChhcyBpbiAkdHJhbnNsYXRlTWlzc2luZ1RyYW5zbGF0aW9uSGFuZGxlckxvZyksIHZhbHVlIGlzIG5vdCByZXR1cm5lZCB0byBwcm9taXNlXG4gICAgICAgICAgaWYgKCRtaXNzaW5nVHJhbnNsYXRpb25IYW5kbGVyRmFjdG9yeSAmJiAhcGVuZGluZ0xvYWRlcikge1xuICAgICAgICAgICAgbWlzc2luZ1RyYW5zbGF0aW9uSGFuZGxlclRyYW5zbGF0aW9uID0gdHJhbnNsYXRlQnlIYW5kbGVyKHRyYW5zbGF0aW9uSWQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHNpbmNlIHdlIGNvdWxkbid0IHRyYW5zbGF0ZSB0aGUgaW5pdGFsIHJlcXVlc3RlZCB0cmFuc2xhdGlvbiBpZCxcbiAgICAgICAgICAvLyB3ZSB0cnkgaXQgbm93IHdpdGggb25lIG9yIG1vcmUgZmFsbGJhY2sgbGFuZ3VhZ2VzLCBpZiBmYWxsYmFjayBsYW5ndWFnZShzKSBpc1xuICAgICAgICAgIC8vIGNvbmZpZ3VyZWQuXG4gICAgICAgICAgaWYgKCR1c2VzICYmICRmYWxsYmFja0xhbmd1YWdlICYmICRmYWxsYmFja0xhbmd1YWdlLmxlbmd0aCkge1xuICAgICAgICAgICAgZmFsbGJhY2tJbmRleCA9IDA7XG4gICAgICAgICAgICByZXN1bHQgPSBmYWxsYmFja1RyYW5zbGF0aW9uSW5zdGFudCh0cmFuc2xhdGlvbklkLCBpbnRlcnBvbGF0ZVBhcmFtcywgSW50ZXJwb2xhdG9yKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCRtaXNzaW5nVHJhbnNsYXRpb25IYW5kbGVyRmFjdG9yeSAmJiAhcGVuZGluZ0xvYWRlciAmJiBtaXNzaW5nVHJhbnNsYXRpb25IYW5kbGVyVHJhbnNsYXRpb24pIHtcbiAgICAgICAgICAgIC8vIGxvb2tzIGxpa2UgdGhlIHJlcXVlc3RlZCB0cmFuc2xhdGlvbiBpZCBkb2Vzbid0IGV4aXN0cy5cbiAgICAgICAgICAgIC8vIE5vdywgaWYgdGhlcmUgaXMgYSByZWdpc3RlcmVkIGhhbmRsZXIgZm9yIG1pc3NpbmcgdHJhbnNsYXRpb25zIGFuZCBub1xuICAgICAgICAgICAgLy8gYXN5bmNMb2FkZXIgaXMgcGVuZGluZywgd2UgZXhlY3V0ZSB0aGUgaGFuZGxlclxuICAgICAgICAgICAgcmVzdWx0ID0gbWlzc2luZ1RyYW5zbGF0aW9uSGFuZGxlclRyYW5zbGF0aW9uO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSBhcHBseU5vdEZvdW5kSW5kaWNhdG9ycyh0cmFuc2xhdGlvbklkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICAgICAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZSNwcmVmZXJyZWRMYW5ndWFnZVxuICAgICAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogUmV0dXJucyB0aGUgbGFuZ3VhZ2Uga2V5IGZvciB0aGUgcHJlZmVycmVkIGxhbmd1YWdlLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5nS2V5IGxhbmd1YWdlIFN0cmluZyBvciBBcnJheSB0byBiZSB1c2VkIGFzIHByZWZlcnJlZExhbmd1YWdlIChjaGFuZ2luZyBhdCBydW50aW1lKVxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gcHJlZmVycmVkIGxhbmd1YWdlIGtleVxuICAgICAgICovXG4gICAgICAkdHJhbnNsYXRlLnByZWZlcnJlZExhbmd1YWdlID0gZnVuY3Rpb24gKGxhbmdLZXkpIHtcbiAgICAgICAgaWYobGFuZ0tleSkge1xuICAgICAgICAgIHNldHVwUHJlZmVycmVkTGFuZ3VhZ2UobGFuZ0tleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICRwcmVmZXJyZWRMYW5ndWFnZTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAgICAgKiBAbmFtZSBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGUjY2xvYWtDbGFzc05hbWVcbiAgICAgICAqIEBtZXRob2RPZiBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGVcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFJldHVybnMgdGhlIGNvbmZpZ3VyZWQgY2xhc3MgbmFtZSBmb3IgYHRyYW5zbGF0ZS1jbG9ha2AgZGlyZWN0aXZlLlxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gY2xvYWtDbGFzc05hbWVcbiAgICAgICAqL1xuICAgICAgJHRyYW5zbGF0ZS5jbG9ha0NsYXNzTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICRjbG9ha0NsYXNzTmFtZTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAgICAgKiBAbmFtZSBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGUjZmFsbGJhY2tMYW5ndWFnZVxuICAgICAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogUmV0dXJucyB0aGUgbGFuZ3VhZ2Uga2V5IGZvciB0aGUgZmFsbGJhY2sgbGFuZ3VhZ2VzIG9yIHNldHMgYSBuZXcgZmFsbGJhY2sgc3RhY2suXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmc9fSBsYW5nS2V5IGxhbmd1YWdlIFN0cmluZyBvciBBcnJheSBvZiBmYWxsYmFjayBsYW5ndWFnZXMgdG8gYmUgdXNlZCAodG8gY2hhbmdlIHN0YWNrIGF0IHJ1bnRpbWUpXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7c3RyaW5nfHxhcnJheX0gZmFsbGJhY2sgbGFuZ3VhZ2Uga2V5XG4gICAgICAgKi9cbiAgICAgICR0cmFuc2xhdGUuZmFsbGJhY2tMYW5ndWFnZSA9IGZ1bmN0aW9uIChsYW5nS2V5KSB7XG4gICAgICAgIGlmIChsYW5nS2V5ICE9PSB1bmRlZmluZWQgJiYgbGFuZ0tleSAhPT0gbnVsbCkge1xuICAgICAgICAgIGZhbGxiYWNrU3RhY2sobGFuZ0tleSk7XG5cbiAgICAgICAgICAvLyBhcyB3ZSBtaWdodCBoYXZlIGFuIGFzeW5jIGxvYWRlciBpbml0aWF0ZWQgYW5kIGEgbmV3IHRyYW5zbGF0aW9uIGxhbmd1YWdlIG1pZ2h0IGhhdmUgYmVlbiBkZWZpbmVkXG4gICAgICAgICAgLy8gd2UgbmVlZCB0byBhZGQgdGhlIHByb21pc2UgdG8gdGhlIHN0YWNrIGFsc28uIFNvIC0gaXRlcmF0ZS5cbiAgICAgICAgICBpZiAoJGxvYWRlckZhY3RvcnkpIHtcbiAgICAgICAgICAgIGlmICgkZmFsbGJhY2tMYW5ndWFnZSAmJiAkZmFsbGJhY2tMYW5ndWFnZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9ICRmYWxsYmFja0xhbmd1YWdlLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFsYW5nUHJvbWlzZXNbJGZhbGxiYWNrTGFuZ3VhZ2VbaV1dKSB7XG4gICAgICAgICAgICAgICAgICBsYW5nUHJvbWlzZXNbJGZhbGxiYWNrTGFuZ3VhZ2VbaV1dID0gbG9hZEFzeW5jKCRmYWxsYmFja0xhbmd1YWdlW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgJHRyYW5zbGF0ZS51c2UoJHRyYW5zbGF0ZS51c2UoKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRmYWxsYmFja1dhc1N0cmluZykge1xuICAgICAgICAgIHJldHVybiAkZmFsbGJhY2tMYW5ndWFnZVswXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gJGZhbGxiYWNrTGFuZ3VhZ2U7XG4gICAgICAgIH1cblxuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICAgICAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZSN1c2VGYWxsYmFja0xhbmd1YWdlXG4gICAgICAgKiBAbWV0aG9kT2YgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBTZXRzIHRoZSBmaXJzdCBrZXkgb2YgdGhlIGZhbGxiYWNrIGxhbmd1YWdlIHN0YWNrIHRvIGJlIHVzZWQgZm9yIHRyYW5zbGF0aW9uLlxuICAgICAgICogVGhlcmVmb3JlIGFsbCBsYW5ndWFnZXMgaW4gdGhlIGZhbGxiYWNrIGFycmF5IEJFRk9SRSB0aGlzIGtleSB3aWxsIGJlIHNraXBwZWQhXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmc9fSBsYW5nS2V5IENvbnRhaW5zIHRoZSBsYW5nS2V5IHRoZSBpdGVyYXRpb24gc2hhbGwgc3RhcnQgd2l0aC4gU2V0IHRvIGZhbHNlIGlmIHlvdSB3YW50IHRvXG4gICAgICAgKiBnZXQgYmFjayB0byB0aGUgd2hvbGUgc3RhY2tcbiAgICAgICAqL1xuICAgICAgJHRyYW5zbGF0ZS51c2VGYWxsYmFja0xhbmd1YWdlID0gZnVuY3Rpb24gKGxhbmdLZXkpIHtcbiAgICAgICAgaWYgKGxhbmdLZXkgIT09IHVuZGVmaW5lZCAmJiBsYW5nS2V5ICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKCFsYW5nS2V5KSB7XG4gICAgICAgICAgICBzdGFydEZhbGxiYWNrSXRlcmF0aW9uID0gMDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGxhbmdLZXlQb3NpdGlvbiA9IGluZGV4T2YoJGZhbGxiYWNrTGFuZ3VhZ2UsIGxhbmdLZXkpO1xuICAgICAgICAgICAgaWYgKGxhbmdLZXlQb3NpdGlvbiA+IC0xKSB7XG4gICAgICAgICAgICAgIHN0YXJ0RmFsbGJhY2tJdGVyYXRpb24gPSBsYW5nS2V5UG9zaXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICAgICAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZSNwcm9wb3NlZExhbmd1YWdlXG4gICAgICAgKiBAbWV0aG9kT2YgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBSZXR1cm5zIHRoZSBsYW5ndWFnZSBrZXkgb2YgbGFuZ3VhZ2UgdGhhdCBpcyBjdXJyZW50bHkgbG9hZGVkIGFzeW5jaHJvbm91c2x5LlxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gbGFuZ3VhZ2Uga2V5XG4gICAgICAgKi9cbiAgICAgICR0cmFuc2xhdGUucHJvcG9zZWRMYW5ndWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICRuZXh0TGFuZztcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAgICAgKiBAbmFtZSBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGUjc3RvcmFnZVxuICAgICAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogUmV0dXJucyByZWdpc3RlcmVkIHN0b3JhZ2UuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7b2JqZWN0fSBTdG9yYWdlXG4gICAgICAgKi9cbiAgICAgICR0cmFuc2xhdGUuc3RvcmFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFN0b3JhZ2U7XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBmdW5jdGlvblxuICAgICAgICogQG5hbWUgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlI3VzZVxuICAgICAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogVGVsbHMgYW5ndWxhci10cmFuc2xhdGUgd2hpY2ggbGFuZ3VhZ2UgdG8gdXNlIGJ5IGdpdmVuIGxhbmd1YWdlIGtleS4gVGhpcyBtZXRob2QgaXNcbiAgICAgICAqIHVzZWQgdG8gY2hhbmdlIGxhbmd1YWdlIGF0IHJ1bnRpbWUuIEl0IGFsc28gdGFrZXMgY2FyZSBvZiBzdG9yaW5nIHRoZSBsYW5ndWFnZVxuICAgICAgICoga2V5IGluIGEgY29uZmlndXJlZCBzdG9yZSB0byBsZXQgeW91ciBhcHAgcmVtZW1iZXIgdGhlIGNob29zZWQgbGFuZ3VhZ2UuXG4gICAgICAgKlxuICAgICAgICogV2hlbiB0cnlpbmcgdG8gJ3VzZScgYSBsYW5ndWFnZSB3aGljaCBpc24ndCBhdmFpbGFibGUgaXQgdHJpZXMgdG8gbG9hZCBpdFxuICAgICAgICogYXN5bmNocm9ub3VzbHkgd2l0aCByZWdpc3RlcmVkIGxvYWRlcnMuXG4gICAgICAgKlxuICAgICAgICogUmV0dXJucyBwcm9taXNlIG9iamVjdCB3aXRoIGxvYWRlZCBsYW5ndWFnZSBmaWxlIGRhdGFcbiAgICAgICAqIEBleGFtcGxlXG4gICAgICAgKiAkdHJhbnNsYXRlLnVzZShcImVuX1VTXCIpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgKiAgICRzY29wZS50ZXh0ID0gJHRyYW5zbGF0ZShcIkhFTExPXCIpO1xuICAgICAgICogfSk7XG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBMYW5ndWFnZSBrZXlcbiAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gTGFuZ3VhZ2Uga2V5XG4gICAgICAgKi9cbiAgICAgICR0cmFuc2xhdGUudXNlID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAoIWtleSkge1xuICAgICAgICAgIHJldHVybiAkdXNlcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnJHRyYW5zbGF0ZUNoYW5nZVN0YXJ0Jywge2xhbmd1YWdlOiBrZXl9KTtcblxuICAgICAgICAvLyBUcnkgdG8gZ2V0IHRoZSBhbGlhc2VkIGxhbmd1YWdlIGtleVxuICAgICAgICB2YXIgYWxpYXNlZEtleSA9IG5lZ290aWF0ZUxvY2FsZShrZXkpO1xuICAgICAgICBpZiAoYWxpYXNlZEtleSkge1xuICAgICAgICAgIGtleSA9IGFsaWFzZWRLZXk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiB0aGVyZSBpc24ndCBhIHRyYW5zbGF0aW9uIHRhYmxlIGZvciB0aGUgbGFuZ3VhZ2Ugd2UndmUgcmVxdWVzdGVkLFxuICAgICAgICAvLyB3ZSBsb2FkIGl0IGFzeW5jaHJvbm91c2x5XG4gICAgICAgIGlmICghJHRyYW5zbGF0aW9uVGFibGVba2V5XSAmJiAkbG9hZGVyRmFjdG9yeSAmJiAhbGFuZ1Byb21pc2VzW2tleV0pIHtcbiAgICAgICAgICAkbmV4dExhbmcgPSBrZXk7XG4gICAgICAgICAgbGFuZ1Byb21pc2VzW2tleV0gPSBsb2FkQXN5bmMoa2V5KS50aGVuKGZ1bmN0aW9uICh0cmFuc2xhdGlvbikge1xuICAgICAgICAgICAgdHJhbnNsYXRpb25zKHRyYW5zbGF0aW9uLmtleSwgdHJhbnNsYXRpb24udGFibGUpO1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh0cmFuc2xhdGlvbi5rZXkpO1xuXG4gICAgICAgICAgICB1c2VMYW5ndWFnZSh0cmFuc2xhdGlvbi5rZXkpO1xuICAgICAgICAgICAgaWYgKCRuZXh0TGFuZyA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICRuZXh0TGFuZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cmFuc2xhdGlvbjtcbiAgICAgICAgICB9LCBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBpZiAoJG5leHRMYW5nID09PSBrZXkpIHtcbiAgICAgICAgICAgICAgJG5leHRMYW5nID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnJHRyYW5zbGF0ZUNoYW5nZUVycm9yJywge2xhbmd1YWdlOiBrZXl9KTtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChrZXkpO1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnJHRyYW5zbGF0ZUNoYW5nZUVuZCcsIHtsYW5ndWFnZToga2V5fSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShrZXkpO1xuICAgICAgICAgIHVzZUxhbmd1YWdlKGtleSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAgICAgKiBAbmFtZSBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGUjc3RvcmFnZUtleVxuICAgICAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogUmV0dXJucyB0aGUga2V5IGZvciB0aGUgc3RvcmFnZS5cbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IHN0b3JhZ2Uga2V5XG4gICAgICAgKi9cbiAgICAgICR0cmFuc2xhdGUuc3RvcmFnZUtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHN0b3JhZ2VLZXkoKTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAgICAgKiBAbmFtZSBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGUjaXNQb3N0Q29tcGlsaW5nRW5hYmxlZFxuICAgICAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogUmV0dXJucyB3aGV0aGVyIHBvc3QgY29tcGlsaW5nIGlzIGVuYWJsZWQgb3Igbm90XG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7Ym9vbH0gc3RvcmFnZSBrZXlcbiAgICAgICAqL1xuICAgICAgJHRyYW5zbGF0ZS5pc1Bvc3RDb21waWxpbmdFbmFibGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJHBvc3RDb21waWxpbmdFbmFibGVkO1xuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICAgICAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZSNyZWZyZXNoXG4gICAgICAgKiBAbWV0aG9kT2YgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBSZWZyZXNoZXMgYSB0cmFuc2xhdGlvbiB0YWJsZSBwb2ludGVkIGJ5IHRoZSBnaXZlbiBsYW5nS2V5LiBJZiBsYW5nS2V5IGlzIG5vdCBzcGVjaWZpZWQsXG4gICAgICAgKiB0aGUgbW9kdWxlIHdpbGwgZHJvcCBhbGwgZXhpc3RlbnQgdHJhbnNsYXRpb24gdGFibGVzIGFuZCBsb2FkIG5ldyB2ZXJzaW9uIG9mIHRob3NlIHdoaWNoXG4gICAgICAgKiBhcmUgY3VycmVudGx5IGluIHVzZS5cbiAgICAgICAqXG4gICAgICAgKiBSZWZyZXNoIG1lYW5zIHRoYXQgdGhlIG1vZHVsZSB3aWxsIGRyb3AgdGFyZ2V0IHRyYW5zbGF0aW9uIHRhYmxlIGFuZCB0cnkgdG8gbG9hZCBpdCBhZ2Fpbi5cbiAgICAgICAqXG4gICAgICAgKiBJbiBjYXNlIHRoZXJlIGFyZSBubyBsb2FkZXJzIHJlZ2lzdGVyZWQgdGhlIHJlZnJlc2goKSBtZXRob2Qgd2lsbCB0aHJvdyBhbiBFcnJvci5cbiAgICAgICAqXG4gICAgICAgKiBJZiB0aGUgbW9kdWxlIGlzIGFibGUgdG8gcmVmcmVzaCB0cmFuc2xhdGlvbiB0YWJsZXMgcmVmcmVzaCgpIG1ldGhvZCB3aWxsIGJyb2FkY2FzdFxuICAgICAgICogJHRyYW5zbGF0ZVJlZnJlc2hTdGFydCBhbmQgJHRyYW5zbGF0ZVJlZnJlc2hFbmQgZXZlbnRzLlxuICAgICAgICpcbiAgICAgICAqIEBleGFtcGxlXG4gICAgICAgKiAvLyB0aGlzIHdpbGwgZHJvcCBhbGwgY3VycmVudGx5IGV4aXN0ZW50IHRyYW5zbGF0aW9uIHRhYmxlcyBhbmQgcmVsb2FkIHRob3NlIHdoaWNoIGFyZVxuICAgICAgICogLy8gY3VycmVudGx5IGluIHVzZVxuICAgICAgICogJHRyYW5zbGF0ZS5yZWZyZXNoKCk7XG4gICAgICAgKiAvLyB0aGlzIHdpbGwgcmVmcmVzaCBhIHRyYW5zbGF0aW9uIHRhYmxlIGZvciB0aGUgZW5fVVMgbGFuZ3VhZ2VcbiAgICAgICAqICR0cmFuc2xhdGUucmVmcmVzaCgnZW5fVVMnKTtcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZ0tleSBBIGxhbmd1YWdlIGtleSBvZiB0aGUgdGFibGUsIHdoaWNoIGhhcyB0byBiZSByZWZyZXNoZWRcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJuIHtwcm9taXNlfSBQcm9taXNlLCB3aGljaCB3aWxsIGJlIHJlc29sdmVkIGluIGNhc2UgYSB0cmFuc2xhdGlvbiB0YWJsZXMgcmVmcmVzaGluZ1xuICAgICAgICogcHJvY2VzcyBpcyBmaW5pc2hlZCBzdWNjZXNzZnVsbHksIGFuZCByZWplY3QgaWYgbm90LlxuICAgICAgICovXG4gICAgICAkdHJhbnNsYXRlLnJlZnJlc2ggPSBmdW5jdGlvbiAobGFuZ0tleSkge1xuICAgICAgICBpZiAoISRsb2FkZXJGYWN0b3J5KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZG5cXCd0IHJlZnJlc2ggdHJhbnNsYXRpb24gdGFibGUsIG5vIGxvYWRlciByZWdpc3RlcmVkIScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICBmdW5jdGlvbiByZXNvbHZlKCkge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KCckdHJhbnNsYXRlUmVmcmVzaEVuZCcsIHtsYW5ndWFnZTogbGFuZ0tleX0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0KCkge1xuICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoJyR0cmFuc2xhdGVSZWZyZXNoRW5kJywge2xhbmd1YWdlOiBsYW5nS2V5fSk7XG4gICAgICAgIH1cblxuICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KCckdHJhbnNsYXRlUmVmcmVzaFN0YXJ0Jywge2xhbmd1YWdlOiBsYW5nS2V5fSk7XG5cbiAgICAgICAgaWYgKCFsYW5nS2V5KSB7XG4gICAgICAgICAgLy8gaWYgdGhlcmUncyBubyBsYW5ndWFnZSBrZXkgc3BlY2lmaWVkIHdlIHJlZnJlc2ggQUxMIFRIRSBUSElOR1MhXG4gICAgICAgICAgdmFyIHRhYmxlcyA9IFtdLCBsb2FkaW5nS2V5cyA9IHt9O1xuXG4gICAgICAgICAgLy8gcmVsb2FkIHJlZ2lzdGVyZWQgZmFsbGJhY2sgbGFuZ3VhZ2VzXG4gICAgICAgICAgaWYgKCRmYWxsYmFja0xhbmd1YWdlICYmICRmYWxsYmFja0xhbmd1YWdlLmxlbmd0aCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9ICRmYWxsYmFja0xhbmd1YWdlLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgIHRhYmxlcy5wdXNoKGxvYWRBc3luYygkZmFsbGJhY2tMYW5ndWFnZVtpXSkpO1xuICAgICAgICAgICAgICBsb2FkaW5nS2V5c1skZmFsbGJhY2tMYW5ndWFnZVtpXV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHJlbG9hZCBjdXJyZW50bHkgdXNlZCBsYW5ndWFnZVxuICAgICAgICAgIGlmICgkdXNlcyAmJiAhbG9hZGluZ0tleXNbJHVzZXNdKSB7XG4gICAgICAgICAgICB0YWJsZXMucHVzaChsb2FkQXN5bmMoJHVzZXMpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkcS5hbGwodGFibGVzKS50aGVuKGZ1bmN0aW9uICh0YWJsZURhdGEpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh0YWJsZURhdGEsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIGlmICgkdHJhbnNsYXRpb25UYWJsZVtkYXRhLmtleV0pIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgJHRyYW5zbGF0aW9uVGFibGVbZGF0YS5rZXldO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRyYW5zbGF0aW9ucyhkYXRhLmtleSwgZGF0YS50YWJsZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICgkdXNlcykge1xuICAgICAgICAgICAgICB1c2VMYW5ndWFnZSgkdXNlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgfSBlbHNlIGlmICgkdHJhbnNsYXRpb25UYWJsZVtsYW5nS2V5XSkge1xuXG4gICAgICAgICAgbG9hZEFzeW5jKGxhbmdLZXkpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHRyYW5zbGF0aW9ucyhkYXRhLmtleSwgZGF0YS50YWJsZSk7XG4gICAgICAgICAgICBpZiAobGFuZ0tleSA9PT0gJHVzZXMpIHtcbiAgICAgICAgICAgICAgdXNlTGFuZ3VhZ2UoJHVzZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIH0sIHJlamVjdCk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAgICAgKiBAbmFtZSBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGUjaW5zdGFudFxuICAgICAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogUmV0dXJucyBhIHRyYW5zbGF0aW9uIGluc3RhbnRseSBmcm9tIHRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBsb2FkZWQgdHJhbnNsYXRpb24uIEFsbCBydWxlc1xuICAgICAgICogcmVnYXJkaW5nIHRoZSBjdXJyZW50IGxhbmd1YWdlLCB0aGUgcHJlZmVycmVkIGxhbmd1YWdlIG9mIGV2ZW4gZmFsbGJhY2sgbGFuZ3VhZ2VzIHdpbGwgYmVcbiAgICAgICAqIHVzZWQgZXhjZXB0IGFueSBwcm9taXNlIGhhbmRsaW5nLiBJZiBhIGxhbmd1YWdlIHdhcyBub3QgZm91bmQsIGFuIGFzeW5jaHJvbm91cyBsb2FkaW5nXG4gICAgICAgKiB3aWxsIGJlIGludm9rZWQgaW4gdGhlIGJhY2tncm91bmQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd8YXJyYXl9IHRyYW5zbGF0aW9uSWQgQSB0b2tlbiB3aGljaCByZXByZXNlbnRzIGEgdHJhbnNsYXRpb24gaWRcbiAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoaXMgY2FuIGJlIG9wdGlvbmFsbHkgYW4gYXJyYXkgb2YgdHJhbnNsYXRpb24gaWRzIHdoaWNoXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzIHRoYXQgdGhlIGZ1bmN0aW9uJ3MgcHJvbWlzZSByZXR1cm5zIGFuIG9iamVjdCB3aGVyZVxuICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFjaCBrZXkgaXMgdGhlIHRyYW5zbGF0aW9uIGlkIGFuZCB0aGUgdmFsdWUgdGhlIHRyYW5zbGF0aW9uLlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IGludGVycG9sYXRlUGFyYW1zIFBhcmFtc1xuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGludGVycG9sYXRpb25JZCBUaGUgaWQgb2YgdGhlIGludGVycG9sYXRpb24gdG8gdXNlXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7c3RyaW5nfSB0cmFuc2xhdGlvblxuICAgICAgICovXG4gICAgICAkdHJhbnNsYXRlLmluc3RhbnQgPSBmdW5jdGlvbiAodHJhbnNsYXRpb25JZCwgaW50ZXJwb2xhdGVQYXJhbXMsIGludGVycG9sYXRpb25JZCkge1xuXG4gICAgICAgIC8vIERldGVjdCB1bmRlZmluZWQgYW5kIG51bGwgdmFsdWVzIHRvIHNob3J0ZW4gdGhlIGV4ZWN1dGlvbiBhbmQgcHJldmVudCBleGNlcHRpb25zXG4gICAgICAgIGlmICh0cmFuc2xhdGlvbklkID09PSBudWxsIHx8IGFuZ3VsYXIuaXNVbmRlZmluZWQodHJhbnNsYXRpb25JZCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJhbnNsYXRpb25JZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIER1Y2sgZGV0ZWN0aW9uOiBJZiB0aGUgZmlyc3QgYXJndW1lbnQgaXMgYW4gYXJyYXksIGEgYnVuY2ggb2YgdHJhbnNsYXRpb25zIHdhcyByZXF1ZXN0ZWQuXG4gICAgICAgIC8vIFRoZSByZXN1bHQgaXMgYW4gb2JqZWN0LlxuICAgICAgICBpZiAoYW5ndWxhci5pc0FycmF5KHRyYW5zbGF0aW9uSWQpKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdHMgPSB7fTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgYyA9IHRyYW5zbGF0aW9uSWQubGVuZ3RoOyBpIDwgYzsgaSsrKSB7XG4gICAgICAgICAgICByZXN1bHRzW3RyYW5zbGF0aW9uSWRbaV1dID0gJHRyYW5zbGF0ZS5pbnN0YW50KHRyYW5zbGF0aW9uSWRbaV0sIGludGVycG9sYXRlUGFyYW1zLCBpbnRlcnBvbGF0aW9uSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdlIGRpc2NhcmRlZCB1bmFjY2VwdGFibGUgdmFsdWVzLiBTbyB3ZSBqdXN0IG5lZWQgdG8gdmVyaWZ5IGlmIHRyYW5zbGF0aW9uSWQgaXMgZW1wdHkgU3RyaW5nXG4gICAgICAgIGlmIChhbmd1bGFyLmlzU3RyaW5nKHRyYW5zbGF0aW9uSWQpICYmIHRyYW5zbGF0aW9uSWQubGVuZ3RoIDwgMSkge1xuICAgICAgICAgIHJldHVybiB0cmFuc2xhdGlvbklkO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdHJpbSBvZmYgYW55IHdoaXRlc3BhY2VcbiAgICAgICAgaWYgKHRyYW5zbGF0aW9uSWQpIHtcbiAgICAgICAgICB0cmFuc2xhdGlvbklkID0gdHJpbS5hcHBseSh0cmFuc2xhdGlvbklkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXN1bHQsIHBvc3NpYmxlTGFuZ0tleXMgPSBbXTtcbiAgICAgICAgaWYgKCRwcmVmZXJyZWRMYW5ndWFnZSkge1xuICAgICAgICAgIHBvc3NpYmxlTGFuZ0tleXMucHVzaCgkcHJlZmVycmVkTGFuZ3VhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkdXNlcykge1xuICAgICAgICAgIHBvc3NpYmxlTGFuZ0tleXMucHVzaCgkdXNlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRmYWxsYmFja0xhbmd1YWdlICYmICRmYWxsYmFja0xhbmd1YWdlLmxlbmd0aCkge1xuICAgICAgICAgIHBvc3NpYmxlTGFuZ0tleXMgPSBwb3NzaWJsZUxhbmdLZXlzLmNvbmNhdCgkZmFsbGJhY2tMYW5ndWFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaiA9IDAsIGQgPSBwb3NzaWJsZUxhbmdLZXlzLmxlbmd0aDsgaiA8IGQ7IGorKykge1xuICAgICAgICAgIHZhciBwb3NzaWJsZUxhbmdLZXkgPSBwb3NzaWJsZUxhbmdLZXlzW2pdO1xuICAgICAgICAgIGlmICgkdHJhbnNsYXRpb25UYWJsZVtwb3NzaWJsZUxhbmdLZXldKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mICR0cmFuc2xhdGlvblRhYmxlW3Bvc3NpYmxlTGFuZ0tleV1bdHJhbnNsYXRpb25JZF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHJlc3VsdCA9IGRldGVybWluZVRyYW5zbGF0aW9uSW5zdGFudCh0cmFuc2xhdGlvbklkLCBpbnRlcnBvbGF0ZVBhcmFtcywgaW50ZXJwb2xhdGlvbklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJlc3VsdCAmJiByZXN1bHQgIT09ICcnKSB7XG4gICAgICAgICAgLy8gUmV0dXJuIHRyYW5zbGF0aW9uIG9mIGRlZmF1bHQgaW50ZXJwb2xhdG9yIGlmIG5vdCBmb3VuZCBhbnl0aGluZy5cbiAgICAgICAgICByZXN1bHQgPSBkZWZhdWx0SW50ZXJwb2xhdG9yLmludGVycG9sYXRlKHRyYW5zbGF0aW9uSWQsIGludGVycG9sYXRlUGFyYW1zKTtcbiAgICAgICAgICBpZiAoJG1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXJGYWN0b3J5ICYmICFwZW5kaW5nTG9hZGVyKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0cmFuc2xhdGVCeUhhbmRsZXIodHJhbnNsYXRpb25JZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAgICAgKiBAbmFtZSBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGUjdmVyc2lvbkluZm9cbiAgICAgICAqIEBtZXRob2RPZiBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGVcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdmVyc2lvbiBpbmZvcm1hdGlvbiBmb3IgdGhlIGFuZ3VsYXItdHJhbnNsYXRlIGxpYnJhcnlcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IGFuZ3VsYXItdHJhbnNsYXRlIHZlcnNpb25cbiAgICAgICAqL1xuICAgICAgJHRyYW5zbGF0ZS52ZXJzaW9uSW5mbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHZlcnNpb247XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBmdW5jdGlvblxuICAgICAgICogQG5hbWUgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlI2xvYWRlckNhY2hlXG4gICAgICAgKiBAbWV0aG9kT2YgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBSZXR1cm5zIHRoZSBkZWZpbmVkIGxvYWRlckNhY2hlLlxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW58c3RyaW5nfG9iamVjdH0gY3VycmVudCB2YWx1ZSBvZiBsb2FkZXJDYWNoZVxuICAgICAgICovXG4gICAgICAkdHJhbnNsYXRlLmxvYWRlckNhY2hlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbG9hZGVyQ2FjaGU7XG4gICAgICB9O1xuXG4gICAgICBpZiAoJGxvYWRlckZhY3RvcnkpIHtcblxuICAgICAgICAvLyBJZiBhdCBsZWFzdCBvbmUgYXN5bmMgbG9hZGVyIGlzIGRlZmluZWQgYW5kIHRoZXJlIGFyZSBub1xuICAgICAgICAvLyAoZGVmYXVsdCkgdHJhbnNsYXRpb25zIGF2YWlsYWJsZSB3ZSBzaG91bGQgdHJ5IHRvIGxvYWQgdGhlbS5cbiAgICAgICAgaWYgKGFuZ3VsYXIuZXF1YWxzKCR0cmFuc2xhdGlvblRhYmxlLCB7fSkpIHtcbiAgICAgICAgICAkdHJhbnNsYXRlLnVzZSgkdHJhbnNsYXRlLnVzZSgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFsc28sIGlmIHRoZXJlIGFyZSBhbnkgZmFsbGJhY2sgbGFuZ3VhZ2UgcmVnaXN0ZXJlZCwgd2Ugc3RhcnRcbiAgICAgICAgLy8gbG9hZGluZyB0aGVtIGFzeW5jaHJvbm91c2x5IGFzIHNvb24gYXMgd2UgY2FuLlxuICAgICAgICBpZiAoJGZhbGxiYWNrTGFuZ3VhZ2UgJiYgJGZhbGxiYWNrTGFuZ3VhZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIHByb2Nlc3NBc3luY1Jlc3VsdCA9IGZ1bmN0aW9uICh0cmFuc2xhdGlvbikge1xuICAgICAgICAgICAgdHJhbnNsYXRpb25zKHRyYW5zbGF0aW9uLmtleSwgdHJhbnNsYXRpb24udGFibGUpO1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnJHRyYW5zbGF0ZUNoYW5nZUVuZCcsIHsgbGFuZ3VhZ2U6IHRyYW5zbGF0aW9uLmtleSB9KTtcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2xhdGlvbjtcbiAgICAgICAgICB9O1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSAkZmFsbGJhY2tMYW5ndWFnZS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgbGFuZ1Byb21pc2VzWyRmYWxsYmFja0xhbmd1YWdlW2ldXSA9IGxvYWRBc3luYygkZmFsbGJhY2tMYW5ndWFnZVtpXSkudGhlbihwcm9jZXNzQXN5bmNSZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gJHRyYW5zbGF0ZTtcbiAgICB9XG4gIF07XG59XSk7XG5cbi8qKlxuICogQG5nZG9jIG9iamVjdFxuICogQG5hbWUgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlRGVmYXVsdEludGVycG9sYXRpb25cbiAqIEByZXF1aXJlcyAkaW50ZXJwb2xhdGVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFVzZXMgYW5ndWxhcidzIGAkaW50ZXJwb2xhdGVgIHNlcnZpY2VzIHRvIGludGVycG9sYXRlIHN0cmluZ3MgYWdhaW5zdCBzb21lIHZhbHVlcy5cbiAqXG4gKiBAcmV0dXJuIHtvYmplY3R9ICR0cmFuc2xhdGVJbnRlcnBvbGF0b3IgSW50ZXJwb2xhdG9yIHNlcnZpY2VcbiAqL1xuYW5ndWxhci5tb2R1bGUoJ3Bhc2NhbHByZWNodC50cmFuc2xhdGUnKS5mYWN0b3J5KCckdHJhbnNsYXRlRGVmYXVsdEludGVycG9sYXRpb24nLCBbJyRpbnRlcnBvbGF0ZScsIGZ1bmN0aW9uICgkaW50ZXJwb2xhdGUpIHtcblxuICB2YXIgJHRyYW5zbGF0ZUludGVycG9sYXRvciA9IHt9LFxuICAgICAgJGxvY2FsZSxcbiAgICAgICRpZGVudGlmaWVyID0gJ2RlZmF1bHQnLFxuICAgICAgJHNhbml0aXplVmFsdWVTdHJhdGVneSA9IG51bGwsXG4gICAgICAvLyBtYXAgb2YgYWxsIHNhbml0aXplIHN0cmF0ZWdpZXNcbiAgICAgIHNhbml0aXplVmFsdWVTdHJhdGVnaWVzID0ge1xuICAgICAgICBlc2NhcGVkOiBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwYXJhbXMpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocGFyYW1zLCBrZXkpKSB7XG4gICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gYW5ndWxhci5lbGVtZW50KCc8ZGl2PjwvZGl2PicpLnRleHQocGFyYW1zW2tleV0pLmh0bWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICB2YXIgc2FuaXRpemVQYXJhbXMgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgdmFyIHJlc3VsdDtcbiAgICBpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKHNhbml0aXplVmFsdWVTdHJhdGVnaWVzWyRzYW5pdGl6ZVZhbHVlU3RyYXRlZ3ldKSkge1xuICAgICAgcmVzdWx0ID0gc2FuaXRpemVWYWx1ZVN0cmF0ZWdpZXNbJHNhbml0aXplVmFsdWVTdHJhdGVneV0ocGFyYW1zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0gcGFyYW1zO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICogQG5hbWUgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlRGVmYXVsdEludGVycG9sYXRpb24jc2V0TG9jYWxlXG4gICAqIEBtZXRob2RPZiBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGVEZWZhdWx0SW50ZXJwb2xhdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyBjdXJyZW50IGxvY2FsZSAodGhpcyBpcyBjdXJyZW50bHkgbm90IHVzZSBpbiB0aGlzIGludGVycG9sYXRpb24pLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbG9jYWxlIExhbmd1YWdlIGtleSBvciBsb2NhbGUuXG4gICAqL1xuICAkdHJhbnNsYXRlSW50ZXJwb2xhdG9yLnNldExvY2FsZSA9IGZ1bmN0aW9uIChsb2NhbGUpIHtcbiAgICAkbG9jYWxlID0gbG9jYWxlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICogQG5hbWUgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlRGVmYXVsdEludGVycG9sYXRpb24jZ2V0SW50ZXJwb2xhdGlvbklkZW50aWZpZXJcbiAgICogQG1ldGhvZE9mIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZURlZmF1bHRJbnRlcnBvbGF0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZXR1cm5zIGFuIGlkZW50aWZpZXIgZm9yIHRoaXMgaW50ZXJwb2xhdGlvbiBzZXJ2aWNlLlxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSAkaWRlbnRpZmllclxuICAgKi9cbiAgJHRyYW5zbGF0ZUludGVycG9sYXRvci5nZXRJbnRlcnBvbGF0aW9uSWRlbnRpZmllciA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJGlkZW50aWZpZXI7XG4gIH07XG5cbiAgJHRyYW5zbGF0ZUludGVycG9sYXRvci51c2VTYW5pdGl6ZVZhbHVlU3RyYXRlZ3kgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAkc2FuaXRpemVWYWx1ZVN0cmF0ZWd5ID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBmdW5jdGlvblxuICAgKiBAbmFtZSBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGVEZWZhdWx0SW50ZXJwb2xhdGlvbiNpbnRlcnBvbGF0ZVxuICAgKiBAbWV0aG9kT2YgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlRGVmYXVsdEludGVycG9sYXRpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEludGVycG9sYXRlcyBnaXZlbiBzdHJpbmcgYWdhaW5zIGdpdmVuIGludGVycG9sYXRlIHBhcmFtcyB1c2luZyBhbmd1bGFyc1xuICAgKiBgJGludGVycG9sYXRlYCBzZXJ2aWNlLlxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBpbnRlcnBvbGF0ZWQgc3RyaW5nLlxuICAgKi9cbiAgJHRyYW5zbGF0ZUludGVycG9sYXRvci5pbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uIChzdHJpbmcsIGludGVycG9sYXRlUGFyYW1zKSB7XG4gICAgaWYgKCRzYW5pdGl6ZVZhbHVlU3RyYXRlZ3kpIHtcbiAgICAgIGludGVycG9sYXRlUGFyYW1zID0gc2FuaXRpemVQYXJhbXMoaW50ZXJwb2xhdGVQYXJhbXMpO1xuICAgIH1cbiAgICByZXR1cm4gJGludGVycG9sYXRlKHN0cmluZykoaW50ZXJwb2xhdGVQYXJhbXMgfHwge30pO1xuICB9O1xuXG4gIHJldHVybiAkdHJhbnNsYXRlSW50ZXJwb2xhdG9yO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZSgncGFzY2FscHJlY2h0LnRyYW5zbGF0ZScpLmNvbnN0YW50KCckU1RPUkFHRV9LRVknLCAnTkdfVFJBTlNMQVRFX0xBTkdfS0VZJyk7XG5cbmFuZ3VsYXIubW9kdWxlKCdwYXNjYWxwcmVjaHQudHJhbnNsYXRlJylcbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS5kaXJlY3RpdmU6dHJhbnNsYXRlXG4gKiBAcmVxdWlyZXMgJGNvbXBpbGVcbiAqIEByZXF1aXJlcyAkZmlsdGVyXG4gKiBAcmVxdWlyZXMgJGludGVycG9sYXRlXG4gKiBAcmVzdHJpY3QgQVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVHJhbnNsYXRlcyBnaXZlbiB0cmFuc2xhdGlvbiBpZCBlaXRoZXIgdGhyb3VnaCBhdHRyaWJ1dGUgb3IgRE9NIGNvbnRlbnQuXG4gKiBJbnRlcm5hbGx5IGl0IHVzZXMgYHRyYW5zbGF0ZWAgZmlsdGVyIHRvIHRyYW5zbGF0ZSB0cmFuc2xhdGlvbiBpZC4gSXQgcG9zc2libGUgdG9cbiAqIHBhc3MgYW4gb3B0aW9uYWwgYHRyYW5zbGF0ZS12YWx1ZXNgIG9iamVjdCBsaXRlcmFsIGFzIHN0cmluZyBpbnRvIHRyYW5zbGF0aW9uIGlkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nPX0gdHJhbnNsYXRlIFRyYW5zbGF0aW9uIGlkIHdoaWNoIGNvdWxkIGJlIGVpdGhlciBzdHJpbmcgb3IgaW50ZXJwb2xhdGVkIHN0cmluZy5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gdHJhbnNsYXRlLXZhbHVlcyBWYWx1ZXMgdG8gcGFzcyBpbnRvIHRyYW5zbGF0aW9uIGlkLiBDYW4gYmUgcGFzc2VkIGFzIG9iamVjdCBsaXRlcmFsIHN0cmluZyBvciBpbnRlcnBvbGF0ZWQgb2JqZWN0LlxuICogQHBhcmFtIHtzdHJpbmc9fSB0cmFuc2xhdGUtYXR0ci1BVFRSIHRyYW5zbGF0ZSBUcmFuc2xhdGlvbiBpZCBhbmQgcHV0IGl0IGludG8gQVRUUiBhdHRyaWJ1dGUuXG4gKiBAcGFyYW0ge3N0cmluZz19IHRyYW5zbGF0ZS1kZWZhdWx0IHdpbGwgYmUgdXNlZCB1bmxlc3MgdHJhbnNsYXRpb24gd2FzIHN1Y2Nlc3NmdWxcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IHRyYW5zbGF0ZS1jb21waWxlIChkZWZhdWx0IHRydWUgaWYgcHJlc2VudCkgZGVmaW5lcyBsb2NhbGx5IGFjdGl2YXRpb24gb2Yge0BsaW5rIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZSN1c2VQb3N0Q29tcGlsaW5nfVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ1ZpZXdcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiVHJhbnNsYXRlQ3RybFwiPlxuXG4gICAgICAgIDxwcmUgdHJhbnNsYXRlPVwiVFJBTlNMQVRJT05fSURcIj48L3ByZT5cbiAgICAgICAgPHByZSB0cmFuc2xhdGU+VFJBTlNMQVRJT05fSUQ8L3ByZT5cbiAgICAgICAgPHByZSB0cmFuc2xhdGUgdHJhbnNsYXRlLWF0dHItdGl0bGU9XCJUUkFOU0xBVElPTl9JRFwiPjwvcHJlPlxuICAgICAgICA8cHJlIHRyYW5zbGF0ZT1cInt7dHJhbnNsYXRpb25JZH19XCI+PC9wcmU+XG4gICAgICAgIDxwcmUgdHJhbnNsYXRlPnt7dHJhbnNsYXRpb25JZH19PC9wcmU+XG4gICAgICAgIDxwcmUgdHJhbnNsYXRlPVwiV0lUSF9WQUxVRVNcIiB0cmFuc2xhdGUtdmFsdWVzPVwie3ZhbHVlOiA1fVwiPjwvcHJlPlxuICAgICAgICA8cHJlIHRyYW5zbGF0ZSB0cmFuc2xhdGUtdmFsdWVzPVwie3ZhbHVlOiA1fVwiPldJVEhfVkFMVUVTPC9wcmU+XG4gICAgICAgIDxwcmUgdHJhbnNsYXRlPVwiV0lUSF9WQUxVRVNcIiB0cmFuc2xhdGUtdmFsdWVzPVwie3t2YWx1ZXN9fVwiPjwvcHJlPlxuICAgICAgICA8cHJlIHRyYW5zbGF0ZSB0cmFuc2xhdGUtdmFsdWVzPVwie3t2YWx1ZXN9fVwiPldJVEhfVkFMVUVTPC9wcmU+XG4gICAgICAgIDxwcmUgdHJhbnNsYXRlIHRyYW5zbGF0ZS1hdHRyLXRpdGxlPVwiV0lUSF9WQUxVRVNcIiB0cmFuc2xhdGUtdmFsdWVzPVwie3t2YWx1ZXN9fVwiPjwvcHJlPlxuXG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ25nVmlldycsIFsncGFzY2FscHJlY2h0LnRyYW5zbGF0ZSddKVxuXG4gICAgICAuY29uZmlnKGZ1bmN0aW9uICgkdHJhbnNsYXRlUHJvdmlkZXIpIHtcblxuICAgICAgICAkdHJhbnNsYXRlUHJvdmlkZXIudHJhbnNsYXRpb25zKCdlbicse1xuICAgICAgICAgICdUUkFOU0xBVElPTl9JRCc6ICdIZWxsbyB0aGVyZSEnLFxuICAgICAgICAgICdXSVRIX1ZBTFVFUyc6ICdUaGUgZm9sbG93aW5nIHZhbHVlIGlzIGR5bmFtaWM6IHt7dmFsdWV9fSdcbiAgICAgICAgfSkucHJlZmVycmVkTGFuZ3VhZ2UoJ2VuJyk7XG5cbiAgICAgIH0pO1xuXG4gICAgICBhbmd1bGFyLm1vZHVsZSgnbmdWaWV3JykuY29udHJvbGxlcignVHJhbnNsYXRlQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUpIHtcbiAgICAgICAgJHNjb3BlLnRyYW5zbGF0aW9uSWQgPSAnVFJBTlNMQVRJT05fSUQnO1xuXG4gICAgICAgICRzY29wZS52YWx1ZXMgPSB7XG4gICAgICAgICAgdmFsdWU6IDc4XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjZW5hcmlvLmpzXCI+XG4gICAgICBpdCgnc2hvdWxkIHRyYW5zbGF0ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaW5qZWN0KGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkY29tcGlsZSkge1xuICAgICAgICAgICRyb290U2NvcGUudHJhbnNsYXRpb25JZCA9ICdUUkFOU0xBVElPTl9JRCc7XG5cbiAgICAgICAgICBlbGVtZW50ID0gJGNvbXBpbGUoJzxwIHRyYW5zbGF0ZT1cIlRSQU5TTEFUSU9OX0lEXCI+PC9wPicpKCRyb290U2NvcGUpO1xuICAgICAgICAgICRyb290U2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50LnRleHQoKSkudG9CZSgnSGVsbG8gdGhlcmUhJyk7XG5cbiAgICAgICAgICBlbGVtZW50ID0gJGNvbXBpbGUoJzxwIHRyYW5zbGF0ZT1cInt7dHJhbnNsYXRpb25JZH19XCI+PC9wPicpKCRyb290U2NvcGUpO1xuICAgICAgICAgICRyb290U2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50LnRleHQoKSkudG9CZSgnSGVsbG8gdGhlcmUhJyk7XG5cbiAgICAgICAgICBlbGVtZW50ID0gJGNvbXBpbGUoJzxwIHRyYW5zbGF0ZT5UUkFOU0xBVElPTl9JRDwvcD4nKSgkcm9vdFNjb3BlKTtcbiAgICAgICAgICAkcm9vdFNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudC50ZXh0KCkpLnRvQmUoJ0hlbGxvIHRoZXJlIScpO1xuXG4gICAgICAgICAgZWxlbWVudCA9ICRjb21waWxlKCc8cCB0cmFuc2xhdGU+e3t0cmFuc2xhdGlvbklkfX08L3A+JykoJHJvb3RTY29wZSk7XG4gICAgICAgICAgJHJvb3RTY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQudGV4dCgpKS50b0JlKCdIZWxsbyB0aGVyZSEnKTtcblxuICAgICAgICAgIGVsZW1lbnQgPSAkY29tcGlsZSgnPHAgdHJhbnNsYXRlIHRyYW5zbGF0ZS1hdHRyLXRpdGxlPVwiVFJBTlNMQVRJT05fSURcIj48L3A+JykoJHJvb3RTY29wZSk7XG4gICAgICAgICAgJHJvb3RTY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQuYXR0cigndGl0bGUnKSkudG9CZSgnSGVsbG8gdGhlcmUhJyk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG4uZGlyZWN0aXZlKCd0cmFuc2xhdGUnLCBbJyR0cmFuc2xhdGUnLCAnJHEnLCAnJGludGVycG9sYXRlJywgJyRjb21waWxlJywgJyRwYXJzZScsICckcm9vdFNjb3BlJywgZnVuY3Rpb24gKCR0cmFuc2xhdGUsICRxLCAkaW50ZXJwb2xhdGUsICRjb21waWxlLCAkcGFyc2UsICRyb290U2NvcGUpIHtcblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgIHNjb3BlOiB0cnVlLFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uICh0RWxlbWVudCwgdEF0dHIpIHtcblxuICAgICAgdmFyIHRyYW5zbGF0ZVZhbHVlc0V4aXN0ID0gKHRBdHRyLnRyYW5zbGF0ZVZhbHVlcykgP1xuICAgICAgICB0QXR0ci50cmFuc2xhdGVWYWx1ZXMgOiB1bmRlZmluZWQ7XG5cbiAgICAgIHZhciB0cmFuc2xhdGVJbnRlcnBvbGF0aW9uID0gKHRBdHRyLnRyYW5zbGF0ZUludGVycG9sYXRpb24pID9cbiAgICAgICAgdEF0dHIudHJhbnNsYXRlSW50ZXJwb2xhdGlvbiA6IHVuZGVmaW5lZDtcblxuICAgICAgdmFyIHRyYW5zbGF0ZVZhbHVlRXhpc3QgPSB0RWxlbWVudFswXS5vdXRlckhUTUwubWF0Y2goL3RyYW5zbGF0ZS12YWx1ZS0rL2kpO1xuXG4gICAgICB2YXIgaW50ZXJwb2xhdGVSZWdFeHAgPSBcIl4oLiopKFwiICsgJGludGVycG9sYXRlLnN0YXJ0U3ltYm9sKCkgKyBcIi4qXCIgKyAkaW50ZXJwb2xhdGUuZW5kU3ltYm9sKCkgKyBcIikoLiopXCIsXG4gICAgICAgICAgd2F0Y2hlclJlZ0V4cCA9IFwiXiguKilcIiArICRpbnRlcnBvbGF0ZS5zdGFydFN5bWJvbCgpICsgXCIoLiopXCIgKyAkaW50ZXJwb2xhdGUuZW5kU3ltYm9sKCkgKyBcIiguKilcIjtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxpbmtGbihzY29wZSwgaUVsZW1lbnQsIGlBdHRyKSB7XG5cbiAgICAgICAgc2NvcGUuaW50ZXJwb2xhdGVQYXJhbXMgPSB7fTtcbiAgICAgICAgc2NvcGUucHJlVGV4dCA9IFwiXCI7XG4gICAgICAgIHNjb3BlLnBvc3RUZXh0ID0gXCJcIjtcbiAgICAgICAgdmFyIHRyYW5zbGF0aW9uSWRzID0ge307XG5cbiAgICAgICAgLy8gRW5zdXJlcyBhbnkgY2hhbmdlIG9mIHRoZSBhdHRyaWJ1dGUgXCJ0cmFuc2xhdGVcIiBjb250YWluaW5nIHRoZSBpZCB3aWxsXG4gICAgICAgIC8vIGJlIHJlLXN0b3JlZCB0byB0aGUgc2NvcGUncyBcInRyYW5zbGF0aW9uSWRcIi5cbiAgICAgICAgLy8gSWYgdGhlIGF0dHJpYnV0ZSBoYXMgbm8gY29udGVudCwgdGhlIGVsZW1lbnQncyB0ZXh0IHZhbHVlICh3aGl0ZSBzcGFjZXMgdHJpbW1lZCBvZmYpIHdpbGwgYmUgdXNlZC5cbiAgICAgICAgdmFyIG9ic2VydmVFbGVtZW50VHJhbnNsYXRpb24gPSBmdW5jdGlvbiAodHJhbnNsYXRpb25JZCkge1xuICAgICAgICAgIGlmIChhbmd1bGFyLmVxdWFscyh0cmFuc2xhdGlvbklkICwgJycpIHx8ICFhbmd1bGFyLmlzRGVmaW5lZCh0cmFuc2xhdGlvbklkKSkge1xuICAgICAgICAgICAgLy8gUmVzb2x2ZSB0cmFuc2xhdGlvbiBpZCBieSBpbm5lciBodG1sIGlmIHJlcXVpcmVkXG4gICAgICAgICAgICB2YXIgaW50ZXJwb2xhdGVNYXRjaGVzID0gaUVsZW1lbnQudGV4dCgpLm1hdGNoKGludGVycG9sYXRlUmVnRXhwKTtcbiAgICAgICAgICAgIC8vIEludGVycG9sYXRlIHRyYW5zbGF0aW9uIGlkIGlmIHJlcXVpcmVkXG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc0FycmF5KGludGVycG9sYXRlTWF0Y2hlcykpIHtcbiAgICAgICAgICAgICAgc2NvcGUucHJlVGV4dCA9IGludGVycG9sYXRlTWF0Y2hlc1sxXTtcbiAgICAgICAgICAgICAgc2NvcGUucG9zdFRleHQgPSBpbnRlcnBvbGF0ZU1hdGNoZXNbM107XG4gICAgICAgICAgICAgIHRyYW5zbGF0aW9uSWRzLnRyYW5zbGF0ZSA9ICRpbnRlcnBvbGF0ZShpbnRlcnBvbGF0ZU1hdGNoZXNbMl0pKHNjb3BlLiRwYXJlbnQpO1xuICAgICAgICAgICAgICB3YXRjaGVyTWF0Y2hlcyA9IGlFbGVtZW50LnRleHQoKS5tYXRjaCh3YXRjaGVyUmVnRXhwKTtcbiAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNBcnJheSh3YXRjaGVyTWF0Y2hlcykgJiYgd2F0Y2hlck1hdGNoZXNbMl0gJiYgd2F0Y2hlck1hdGNoZXNbMl0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKHdhdGNoZXJNYXRjaGVzWzJdLCBmdW5jdGlvbiAobmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9uSWRzLnRyYW5zbGF0ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICAgICAgdXBkYXRlVHJhbnNsYXRpb25zKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRyYW5zbGF0aW9uSWRzLnRyYW5zbGF0ZSA9IGlFbGVtZW50LnRleHQoKS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHJhbnNsYXRpb25JZHMudHJhbnNsYXRlID0gdHJhbnNsYXRpb25JZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlVHJhbnNsYXRpb25zKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIG9ic2VydmVBdHRyaWJ1dGVUcmFuc2xhdGlvbiA9IGZ1bmN0aW9uICh0cmFuc2xhdGVBdHRyKSB7XG4gICAgICAgICAgaUF0dHIuJG9ic2VydmUodHJhbnNsYXRlQXR0ciwgZnVuY3Rpb24gKHRyYW5zbGF0aW9uSWQpIHtcbiAgICAgICAgICAgIHRyYW5zbGF0aW9uSWRzW3RyYW5zbGF0ZUF0dHJdID0gdHJhbnNsYXRpb25JZDtcbiAgICAgICAgICAgIHVwZGF0ZVRyYW5zbGF0aW9ucygpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlBdHRyLiRvYnNlcnZlKCd0cmFuc2xhdGUnLCBmdW5jdGlvbiAodHJhbnNsYXRpb25JZCkge1xuICAgICAgICAgIG9ic2VydmVFbGVtZW50VHJhbnNsYXRpb24odHJhbnNsYXRpb25JZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvciAodmFyIHRyYW5zbGF0ZUF0dHIgaW4gaUF0dHIpIHtcbiAgICAgICAgICBpZihpQXR0ci5oYXNPd25Qcm9wZXJ0eSh0cmFuc2xhdGVBdHRyKSAmJiB0cmFuc2xhdGVBdHRyLnN1YnN0cigwLCAxMykgPT09ICd0cmFuc2xhdGVBdHRyJykge1xuICAgICAgICAgICAgb2JzZXJ2ZUF0dHJpYnV0ZVRyYW5zbGF0aW9uKHRyYW5zbGF0ZUF0dHIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlBdHRyLiRvYnNlcnZlKCd0cmFuc2xhdGVEZWZhdWx0JywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgc2NvcGUuZGVmYXVsdFRleHQgPSB2YWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRyYW5zbGF0ZVZhbHVlc0V4aXN0KSB7XG4gICAgICAgICAgaUF0dHIuJG9ic2VydmUoJ3RyYW5zbGF0ZVZhbHVlcycsIGZ1bmN0aW9uIChpbnRlcnBvbGF0ZVBhcmFtcykge1xuICAgICAgICAgICAgaWYgKGludGVycG9sYXRlUGFyYW1zKSB7XG4gICAgICAgICAgICAgIHNjb3BlLiRwYXJlbnQuJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChzY29wZS5pbnRlcnBvbGF0ZVBhcmFtcywgJHBhcnNlKGludGVycG9sYXRlUGFyYW1zKShzY29wZS4kcGFyZW50KSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRyYW5zbGF0ZVZhbHVlRXhpc3QpIHtcbiAgICAgICAgICB2YXIgb2JzZXJ2ZVZhbHVlQXR0cmlidXRlID0gZnVuY3Rpb24gKGF0dHJOYW1lKSB7XG4gICAgICAgICAgICBpQXR0ci4kb2JzZXJ2ZShhdHRyTmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVOYW1lID0gYW5ndWxhci5sb3dlcmNhc2UoYXR0ck5hbWUuc3Vic3RyKDE0LCAxKSkgKyBhdHRyTmFtZS5zdWJzdHIoMTUpO1xuICAgICAgICAgICAgICBzY29wZS5pbnRlcnBvbGF0ZVBhcmFtc1thdHRyaWJ1dGVOYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBmb3IgKHZhciBhdHRyIGluIGlBdHRyKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGlBdHRyLCBhdHRyKSAmJiBhdHRyLnN1YnN0cigwLCAxNCkgPT09ICd0cmFuc2xhdGVWYWx1ZScgJiYgYXR0ciAhPT0gJ3RyYW5zbGF0ZVZhbHVlcycpIHtcbiAgICAgICAgICAgICAgb2JzZXJ2ZVZhbHVlQXR0cmlidXRlKGF0dHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE1hc3RlciB1cGRhdGUgZnVuY3Rpb25cbiAgICAgICAgdmFyIHVwZGF0ZVRyYW5zbGF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdHJhbnNsYXRpb25JZHMpIHtcbiAgICAgICAgICAgIGlmICh0cmFuc2xhdGlvbklkcy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIHRyYW5zbGF0aW9uSWRzW2tleV0pIHtcbiAgICAgICAgICAgICAgdXBkYXRlVHJhbnNsYXRpb24oa2V5LCB0cmFuc2xhdGlvbklkc1trZXldLCBzY29wZSwgc2NvcGUuaW50ZXJwb2xhdGVQYXJhbXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBQdXQgdHJhbnNsYXRpb24gcHJvY2Vzc2luZyBmdW5jdGlvbiBvdXRzaWRlIGxvb3BcbiAgICAgICAgdmFyIHVwZGF0ZVRyYW5zbGF0aW9uID0gZnVuY3Rpb24odHJhbnNsYXRlQXR0ciwgdHJhbnNsYXRpb25JZCwgc2NvcGUsIGludGVycG9sYXRlUGFyYW1zKSB7XG4gICAgICAgICAgJHRyYW5zbGF0ZSh0cmFuc2xhdGlvbklkLCBpbnRlcnBvbGF0ZVBhcmFtcywgdHJhbnNsYXRlSW50ZXJwb2xhdGlvbilcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh0cmFuc2xhdGlvbikge1xuICAgICAgICAgICAgICBhcHBseVRyYW5zbGF0aW9uKHRyYW5zbGF0aW9uLCBzY29wZSwgdHJ1ZSwgdHJhbnNsYXRlQXR0cik7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAodHJhbnNsYXRpb25JZCkge1xuICAgICAgICAgICAgICBhcHBseVRyYW5zbGF0aW9uKHRyYW5zbGF0aW9uSWQsIHNjb3BlLCBmYWxzZSwgdHJhbnNsYXRlQXR0cik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYXBwbHlUcmFuc2xhdGlvbiA9IGZ1bmN0aW9uICh2YWx1ZSwgc2NvcGUsIHN1Y2Nlc3NmdWwsIHRyYW5zbGF0ZUF0dHIpIHtcbiAgICAgICAgICBpZiAodHJhbnNsYXRlQXR0ciA9PT0gJ3RyYW5zbGF0ZScpIHtcbiAgICAgICAgICAgIC8vIGRlZmF1bHQgdHJhbnNsYXRlIGludG8gaW5uZXJIVE1MXG4gICAgICAgICAgICBpZiAoIXN1Y2Nlc3NmdWwgJiYgdHlwZW9mIHNjb3BlLmRlZmF1bHRUZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB2YWx1ZSA9IHNjb3BlLmRlZmF1bHRUZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaUVsZW1lbnQuaHRtbChzY29wZS5wcmVUZXh0ICsgdmFsdWUgKyBzY29wZS5wb3N0VGV4dCk7XG4gICAgICAgICAgICB2YXIgZ2xvYmFsbHlFbmFibGVkID0gJHRyYW5zbGF0ZS5pc1Bvc3RDb21waWxpbmdFbmFibGVkKCk7XG4gICAgICAgICAgICB2YXIgbG9jYWxseURlZmluZWQgPSB0eXBlb2YgdEF0dHIudHJhbnNsYXRlQ29tcGlsZSAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgICAgICAgICB2YXIgbG9jYWxseUVuYWJsZWQgPSBsb2NhbGx5RGVmaW5lZCAmJiB0QXR0ci50cmFuc2xhdGVDb21waWxlICE9PSAnZmFsc2UnO1xuICAgICAgICAgICAgaWYgKChnbG9iYWxseUVuYWJsZWQgJiYgIWxvY2FsbHlEZWZpbmVkKSB8fCBsb2NhbGx5RW5hYmxlZCkge1xuICAgICAgICAgICAgICAkY29tcGlsZShpRWxlbWVudC5jb250ZW50cygpKShzY29wZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHRyYW5zbGF0ZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgIGlmICghc3VjY2Vzc2Z1bCAmJiB0eXBlb2Ygc2NvcGUuZGVmYXVsdFRleHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gc2NvcGUuZGVmYXVsdFRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXR0cmlidXRlTmFtZSA9IGlBdHRyLiRhdHRyW3RyYW5zbGF0ZUF0dHJdLnN1YnN0cigxNSk7XG4gICAgICAgICAgICBpRWxlbWVudC5hdHRyKGF0dHJpYnV0ZU5hbWUsIHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2NvcGUuJHdhdGNoKCdpbnRlcnBvbGF0ZVBhcmFtcycsIHVwZGF0ZVRyYW5zbGF0aW9ucywgdHJ1ZSk7XG5cbiAgICAgICAgLy8gRW5zdXJlcyB0aGUgdGV4dCB3aWxsIGJlIHJlZnJlc2hlZCBhZnRlciB0aGUgY3VycmVudCBsYW5ndWFnZSB3YXMgY2hhbmdlZFxuICAgICAgICAvLyB3LyAkdHJhbnNsYXRlLnVzZSguLi4pXG4gICAgICAgIHZhciB1bmJpbmQgPSAkcm9vdFNjb3BlLiRvbignJHRyYW5zbGF0ZUNoYW5nZVN1Y2Nlc3MnLCB1cGRhdGVUcmFuc2xhdGlvbnMpO1xuXG4gICAgICAgIC8vIGVuc3VyZSB0cmFuc2xhdGlvbiB3aWxsIGJlIGxvb2tlZCB1cCBhdCBsZWFzdCBvbmVcbiAgICAgICAgaWYgKGlFbGVtZW50LnRleHQoKS5sZW5ndGgpIHtcbiAgICAgICAgICBvYnNlcnZlRWxlbWVudFRyYW5zbGF0aW9uKCcnKTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVUcmFuc2xhdGlvbnMoKTtcbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIHVuYmluZCk7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoJ3Bhc2NhbHByZWNodC50cmFuc2xhdGUnKVxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBwYXNjYWxwcmVjaHQudHJhbnNsYXRlLmRpcmVjdGl2ZTp0cmFuc2xhdGVDbG9ha1xuICogQHJlcXVpcmVzICRyb290U2NvcGVcbiAqIEByZXF1aXJlcyAkdHJhbnNsYXRlXG4gKiBAcmVzdHJpY3QgQVxuICpcbiAqICRkZXNjcmlwdGlvblxuICogQWRkcyBhIGB0cmFuc2xhdGUtY2xvYWtgIGNsYXNzIG5hbWUgdG8gdGhlIGdpdmVuIGVsZW1lbnQgd2hlcmUgdGhpcyBkaXJlY3RpdmVcbiAqIGlzIGFwcGxpZWQgaW5pdGlhbGx5IGFuZCByZW1vdmVzIGl0LCBvbmNlIGEgbG9hZGVyIGhhcyBmaW5pc2hlZCBsb2FkaW5nLlxuICpcbiAqIFRoaXMgZGlyZWN0aXZlIGNhbiBiZSB1c2VkIHRvIHByZXZlbnQgaW5pdGlhbCBmbGlja2VyaW5nIHdoZW4gbG9hZGluZyB0cmFuc2xhdGlvblxuICogZGF0YSBhc3luY2hyb25vdXNseS5cbiAqXG4gKiBUaGUgY2xhc3MgbmFtZSBpcyBkZWZpbmVkIGluXG4gKiB7QGxpbmsgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlUHJvdmlkZXIjY2xvYWtDbGFzc05hbWUgJHRyYW5zbGF0ZS5jbG9ha0NsYXNzTmFtZSgpfS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZz19IHRyYW5zbGF0ZS1jbG9hayBJZiBhIHRyYW5zbGF0aW9uSWQgaXMgcHJvdmlkZWQsIGl0IHdpbGwgYmUgdXNlZCBmb3Igc2hvd2luZ1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgaGlkaW5nIHRoZSBjbG9hay4gQmFzaWNhbGx5IGl0IHJlbGllcyBvbiB0aGUgdHJhbnNsYXRpb25cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUuXG4gKi9cbi5kaXJlY3RpdmUoJ3RyYW5zbGF0ZUNsb2FrJywgWyckcm9vdFNjb3BlJywgJyR0cmFuc2xhdGUnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHRyYW5zbGF0ZSkge1xuXG4gIHJldHVybiB7XG4gICAgY29tcGlsZTogZnVuY3Rpb24gKHRFbGVtZW50KSB7XG4gICAgICB2YXIgYXBwbHlDbG9hayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdEVsZW1lbnQuYWRkQ2xhc3MoJHRyYW5zbGF0ZS5jbG9ha0NsYXNzTmFtZSgpKTtcbiAgICAgIH0sXG4gICAgICByZW1vdmVDbG9hayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdEVsZW1lbnQucmVtb3ZlQ2xhc3MoJHRyYW5zbGF0ZS5jbG9ha0NsYXNzTmFtZSgpKTtcbiAgICAgIH0sXG4gICAgICByZW1vdmVMaXN0ZW5lciA9ICRyb290U2NvcGUuJG9uKCckdHJhbnNsYXRlQ2hhbmdlRW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZW1vdmVDbG9haygpO1xuICAgICAgICByZW1vdmVMaXN0ZW5lcigpO1xuICAgICAgICByZW1vdmVMaXN0ZW5lciA9IG51bGw7XG4gICAgICB9KTtcbiAgICAgIGFwcGx5Q2xvYWsoKTtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxpbmtGbihzY29wZSwgaUVsZW1lbnQsIGlBdHRyKSB7XG4gICAgICAgIC8vIFJlZ2lzdGVyIGEgd2F0Y2hlciBmb3IgdGhlIGRlZmluZWQgdHJhbnNsYXRpb24gYWxsb3dpbmcgYSBmaW5lIHR1bmVkIGNsb2FrXG4gICAgICAgIGlmIChpQXR0ci50cmFuc2xhdGVDbG9hayAmJiBpQXR0ci50cmFuc2xhdGVDbG9hay5sZW5ndGgpIHtcbiAgICAgICAgICBpQXR0ci4kb2JzZXJ2ZSgndHJhbnNsYXRlQ2xvYWsnLCBmdW5jdGlvbiAodHJhbnNsYXRpb25JZCkge1xuICAgICAgICAgICAgJHRyYW5zbGF0ZSh0cmFuc2xhdGlvbklkKS50aGVuKHJlbW92ZUNsb2FrLCBhcHBseUNsb2FrKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdwYXNjYWxwcmVjaHQudHJhbnNsYXRlJylcbi8qKlxuICogQG5nZG9jIGZpbHRlclxuICogQG5hbWUgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS5maWx0ZXI6dHJhbnNsYXRlXG4gKiBAcmVxdWlyZXMgJHBhcnNlXG4gKiBAcmVxdWlyZXMgcGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlXG4gKiBAZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFVzZXMgYCR0cmFuc2xhdGVgIHNlcnZpY2UgdG8gdHJhbnNsYXRlIGNvbnRlbnRzLiBBY2NlcHRzIGludGVycG9sYXRlIHBhcmFtZXRlcnNcbiAqIHRvIHBhc3MgZHluYW1pemVkIHZhbHVlcyB0aG91Z2ggdHJhbnNsYXRpb24uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRyYW5zbGF0aW9uSWQgQSB0cmFuc2xhdGlvbiBpZCB0byBiZSB0cmFuc2xhdGVkLlxuICogQHBhcmFtIHsqPX0gaW50ZXJwb2xhdGVQYXJhbXMgT3B0aW9uYWwgb2JqZWN0IGxpdGVyYWwgKGFzIGhhc2ggb3Igc3RyaW5nKSB0byBwYXNzIHZhbHVlcyBpbnRvIHRyYW5zbGF0aW9uLlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRyYW5zbGF0ZWQgdGV4dC5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwibmdWaWV3XCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIlRyYW5zbGF0ZUN0cmxcIj5cblxuICAgICAgICA8cHJlPnt7ICdUUkFOU0xBVElPTl9JRCcgfCB0cmFuc2xhdGUgfX08L3ByZT5cbiAgICAgICAgPHByZT57eyB0cmFuc2xhdGlvbklkIHwgdHJhbnNsYXRlIH19PC9wcmU+XG4gICAgICAgIDxwcmU+e3sgJ1dJVEhfVkFMVUVTJyB8IHRyYW5zbGF0ZTone3ZhbHVlOiA1fScgfX08L3ByZT5cbiAgICAgICAgPHByZT57eyAnV0lUSF9WQUxVRVMnIHwgdHJhbnNsYXRlOnZhbHVlcyB9fTwvcHJlPlxuXG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ25nVmlldycsIFsncGFzY2FscHJlY2h0LnRyYW5zbGF0ZSddKVxuXG4gICAgICAuY29uZmlnKGZ1bmN0aW9uICgkdHJhbnNsYXRlUHJvdmlkZXIpIHtcblxuICAgICAgICAkdHJhbnNsYXRlUHJvdmlkZXIudHJhbnNsYXRpb25zKCdlbicsIHtcbiAgICAgICAgICAnVFJBTlNMQVRJT05fSUQnOiAnSGVsbG8gdGhlcmUhJyxcbiAgICAgICAgICAnV0lUSF9WQUxVRVMnOiAnVGhlIGZvbGxvd2luZyB2YWx1ZSBpcyBkeW5hbWljOiB7e3ZhbHVlfX0nXG4gICAgICAgIH0pO1xuICAgICAgICAkdHJhbnNsYXRlUHJvdmlkZXIucHJlZmVycmVkTGFuZ3VhZ2UoJ2VuJyk7XG5cbiAgICAgIH0pO1xuXG4gICAgICBhbmd1bGFyLm1vZHVsZSgnbmdWaWV3JykuY29udHJvbGxlcignVHJhbnNsYXRlQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUpIHtcbiAgICAgICAgJHNjb3BlLnRyYW5zbGF0aW9uSWQgPSAnVFJBTlNMQVRJT05fSUQnO1xuXG4gICAgICAgICRzY29wZS52YWx1ZXMgPSB7XG4gICAgICAgICAgdmFsdWU6IDc4XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbi5maWx0ZXIoJ3RyYW5zbGF0ZScsIFsnJHBhcnNlJywgJyR0cmFuc2xhdGUnLCBmdW5jdGlvbiAoJHBhcnNlLCAkdHJhbnNsYXRlKSB7XG4gIHZhciB0cmFuc2xhdGVGaWx0ZXIgPSBmdW5jdGlvbiAodHJhbnNsYXRpb25JZCwgaW50ZXJwb2xhdGVQYXJhbXMsIGludGVycG9sYXRpb24pIHtcblxuICAgIGlmICghYW5ndWxhci5pc09iamVjdChpbnRlcnBvbGF0ZVBhcmFtcykpIHtcbiAgICAgIGludGVycG9sYXRlUGFyYW1zID0gJHBhcnNlKGludGVycG9sYXRlUGFyYW1zKSh0aGlzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gJHRyYW5zbGF0ZS5pbnN0YW50KHRyYW5zbGF0aW9uSWQsIGludGVycG9sYXRlUGFyYW1zLCBpbnRlcnBvbGF0aW9uKTtcbiAgfTtcblxuICAvLyBTaW5jZSBBbmd1bGFySlMgMS4zLCBmaWx0ZXJzIHdoaWNoIGFyZSBub3Qgc3RhdGVsZXNzIChkZXBlbmRpbmcgYXQgdGhlIHNjb3BlKVxuICAvLyBoYXZlIHRvIGV4cGxpY2l0IGRlZmluZSB0aGlzIGJlaGF2aW9yLlxuICB0cmFuc2xhdGVGaWx0ZXIuJHN0YXRlZnVsID0gdHJ1ZTtcblxuICByZXR1cm4gdHJhbnNsYXRlRmlsdGVyO1xufV0pO1xuXG4vKiFcbiAqIGFuZ3VsYXItdHJhbnNsYXRlIC0gdjIuNS4yIC0gMjAxNC0xMi0xMFxuICogaHR0cDovL2dpdGh1Yi5jb20vYW5ndWxhci10cmFuc2xhdGUvYW5ndWxhci10cmFuc2xhdGVcbiAqIENvcHlyaWdodCAoYykgMjAxNCA7IExpY2Vuc2VkIE1JVFxuICovXG5hbmd1bGFyLm1vZHVsZSgncGFzY2FscHJlY2h0LnRyYW5zbGF0ZScpXG4vKipcbiAqIEBuZ2RvYyBvYmplY3RcbiAqIEBuYW1lIHBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVN0YXRpY0ZpbGVzTG9hZGVyXG4gKiBAcmVxdWlyZXMgJHFcbiAqIEByZXF1aXJlcyAkaHR0cFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGEgdHlwaWNhbCBzdGF0aWMgZmlsZSB1cmwgcGF0dGVybjpcbiAqIFwibGFuZy1lbl9VUy5qc29uXCIsIFwibGFuZy1kZV9ERS5qc29uXCIsIGV0Yy4gVXNpbmcgdGhpcyBidWlsZGVyLFxuICogdGhlIHJlc3BvbnNlIG9mIHRoZXNlIHVybHMgbXVzdCBiZSBhbiBvYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIE9wdGlvbnMgb2JqZWN0LCB3aGljaCBnZXRzIHByZWZpeCwgc3VmZml4IGFuZCBrZXkuXG4gKi9cbi5mYWN0b3J5KCckdHJhbnNsYXRlU3RhdGljRmlsZXNMb2FkZXInLCBbJyRxJywgJyRodHRwJywgZnVuY3Rpb24gKCRxLCAkaHR0cCkge1xuXG4gIHJldHVybiBmdW5jdGlvbiAob3B0aW9ucykge1xuXG4gICAgaWYgKCFvcHRpb25zIHx8ICghYW5ndWxhci5pc1N0cmluZyhvcHRpb25zLnByZWZpeCkgfHwgIWFuZ3VsYXIuaXNTdHJpbmcob3B0aW9ucy5zdWZmaXgpKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZG5cXCd0IGxvYWQgc3RhdGljIGZpbGVzLCBubyBwcmVmaXggb3Igc3VmZml4IHNwZWNpZmllZCEnKTtcbiAgICB9XG5cbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgJGh0dHAoYW5ndWxhci5leHRlbmQoe1xuICAgICAgdXJsOiBbXG4gICAgICAgIG9wdGlvbnMucHJlZml4LFxuICAgICAgICBvcHRpb25zLmtleSxcbiAgICAgICAgb3B0aW9ucy5zdWZmaXhcbiAgICAgIF0uam9pbignJyksXG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgcGFyYW1zOiAnJ1xuICAgIH0sIG9wdGlvbnMuJGh0dHApKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xuICAgIH0pLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBkZWZlcnJlZC5yZWplY3Qob3B0aW9ucy5rZXkpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH07XG59XSk7XG5cblwidXNlIHN0cmljdFwiO1xuLyogZ2xvYmFsIGFuZ3VsYXIsIHdpbmRvdyAqL1xuXG4vKipcbiAqIFJlaW1wbGVtZW50YXRpb24gb2YgJHRyYW5zbGF0ZVN0YXRpY0ZpbGVzTG9hZGVyIHRvIGhhbmRsZSBtaXNzaW5nIGZpbGVzIGFuZCBsb2NhbGUgaGllcmFyY2h5IChlbi9lbl9VUylcbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJwYXNjYWxwcmVjaHQudHJhbnNsYXRlXCIpLmZhY3RvcnkoXCIkdHJhbnNsYXRlU3RhdGljRmlsZXNMb2FkZXJcIiwgW1xuICBcIiRxXCIsXG4gIFwiJGh0dHBcIixcbiAgZnVuY3Rpb24gKCRxLCAkaHR0cCkge1xuICAgIGZ1bmN0aW9uIGxvYWRUcmFuc2xhdGlvbkZpbGUob3B0aW9ucywgZGVmZXJyZWQpIHtcbiAgICAgICRodHRwKGFuZ3VsYXIuZXh0ZW5kKHtcbiAgICAgICAgdXJsOiBbXG4gICAgICAgICAgb3B0aW9ucy5wcmVmaXgsXG4gICAgICAgICAgb3B0aW9ucy5rZXkudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICBvcHRpb25zLnN1ZmZpeFxuICAgICAgICBdLmpvaW4oXCJcIiksXG4gICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgcGFyYW1zOiBcIlwiXG4gICAgICB9LCBvcHRpb25zLiRodHRwKSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xuICAgICAgfSkuZXJyb3IoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZihvcHRpb25zLmtleS5pbmRleE9mKFwiX1wiKSA+PSAwKSB7XG4gICAgICAgICAgdmFyIGtleSA9IG9wdGlvbnMua2V5LnN1YnN0cigwLCBvcHRpb25zLmtleS5sYXN0SW5kZXhPZihcIl9cIikpO1xuICAgICAgICAgIHZhciBvcHRzID0gYW5ndWxhci5leHRlbmQoe30sIG9wdGlvbnMsIHsga2V5OiBrZXkgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgbG9hZFRyYW5zbGF0aW9uRmlsZShvcHRzLCBkZWZlcnJlZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShcInt9XCIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIGlmICghb3B0aW9ucyB8fCAoIWFuZ3VsYXIuaXNTdHJpbmcob3B0aW9ucy5wcmVmaXgpIHx8ICFhbmd1bGFyLmlzU3RyaW5nKG9wdGlvbnMuc3VmZml4KSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuXFxcInQgbG9hZCBzdGF0aWMgZmlsZXMsIG5vIHByZWZpeCBvciBzdWZmaXggc3BlY2lmaWVkIVwiKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgbG9hZFRyYW5zbGF0aW9uRmlsZShvcHRpb25zLCBkZWZlcnJlZCk7XG5cbiAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG4gIH1cbl0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24uY29tbW9uLmkxOG5cIiwgW1wicGFzY2FscHJlY2h0LnRyYW5zbGF0ZVwiLCBcInJpc2V2aXNpb24uY29tbW9uLmkxOG4uY29uZmlnXCJdKVxuLmNvbmZpZyhbXCIkdHJhbnNsYXRlUHJvdmlkZXJcIiwgXCJMT0NBTEVTX1BSRUZJWFwiLCBcIkxPQ0FMRVNfU1VGSVhcIiwgZnVuY3Rpb24gKCR0cmFuc2xhdGVQcm92aWRlciwgTE9DQUxFU19QUkVGSVgsIExPQ0FMRVNfU1VGSVgpIHtcbiAgLy8gVHJpZXMgdG8gZGV0ZXJtaW5lIHRoZSBicm93c2VycyBsb2NhbGVcbiAgJHRyYW5zbGF0ZVByb3ZpZGVyLnVzZVN0YXRpY0ZpbGVzTG9hZGVyKHtcbiAgICBwcmVmaXg6IExPQ0FMRVNfUFJFRklYLFxuICAgIHN1ZmZpeDogTE9DQUxFU19TVUZJWFxuICB9KTtcbiAgXG4gICR0cmFuc2xhdGVQcm92aWRlclxuICAgIC5kZXRlcm1pbmVQcmVmZXJyZWRMYW5ndWFnZSgpXG4gICAgLmZhbGxiYWNrTGFuZ3VhZ2UoXCJlblwiKTtcbn1dKTtcblxuLypcbiAqIGFuZ3VsYXItdWktYm9vdHN0cmFwXG4gKiBodHRwOi8vYW5ndWxhci11aS5naXRodWIuaW8vYm9vdHN0cmFwL1xuXG4gKiBWZXJzaW9uOiAwLjExLjAgLSAyMDE0LTA1LTAxXG4gKiBMaWNlbnNlOiBNSVRcbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXBcIiwgW1widWkuYm9vdHN0cmFwLnRwbHNcIiwgXCJ1aS5ib290c3RyYXAudHJhbnNpdGlvblwiLFwidWkuYm9vdHN0cmFwLmNvbGxhcHNlXCIsXCJ1aS5ib290c3RyYXAuYWNjb3JkaW9uXCIsXCJ1aS5ib290c3RyYXAuYWxlcnRcIixcInVpLmJvb3RzdHJhcC5iaW5kSHRtbFwiLFwidWkuYm9vdHN0cmFwLmJ1dHRvbnNcIixcInVpLmJvb3RzdHJhcC5jYXJvdXNlbFwiLFwidWkuYm9vdHN0cmFwLmRhdGVwYXJzZXJcIixcInVpLmJvb3RzdHJhcC5wb3NpdGlvblwiLFwidWkuYm9vdHN0cmFwLmRhdGVwaWNrZXJcIixcInVpLmJvb3RzdHJhcC5kcm9wZG93blwiLFwidWkuYm9vdHN0cmFwLm1vZGFsXCIsXCJ1aS5ib290c3RyYXAucGFnaW5hdGlvblwiLFwidWkuYm9vdHN0cmFwLnRvb2x0aXBcIixcInVpLmJvb3RzdHJhcC5wb3BvdmVyXCIsXCJ1aS5ib290c3RyYXAucHJvZ3Jlc3NiYXJcIixcInVpLmJvb3RzdHJhcC5yYXRpbmdcIixcInVpLmJvb3RzdHJhcC50YWJzXCIsXCJ1aS5ib290c3RyYXAudGltZXBpY2tlclwiLFwidWkuYm9vdHN0cmFwLnR5cGVhaGVhZFwiXSk7XG5hbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC50cGxzXCIsIFtcInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24tZ3JvdXAuaHRtbFwiLFwidGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi5odG1sXCIsXCJ0ZW1wbGF0ZS9hbGVydC9hbGVydC5odG1sXCIsXCJ0ZW1wbGF0ZS9jYXJvdXNlbC9jYXJvdXNlbC5odG1sXCIsXCJ0ZW1wbGF0ZS9jYXJvdXNlbC9zbGlkZS5odG1sXCIsXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL2RhdGVwaWNrZXIuaHRtbFwiLFwidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXkuaHRtbFwiLFwidGVtcGxhdGUvZGF0ZXBpY2tlci9tb250aC5odG1sXCIsXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL3BvcHVwLmh0bWxcIixcInRlbXBsYXRlL2RhdGVwaWNrZXIveWVhci5odG1sXCIsXCJ0ZW1wbGF0ZS9tb2RhbC9iYWNrZHJvcC5odG1sXCIsXCJ0ZW1wbGF0ZS9tb2RhbC93aW5kb3cuaHRtbFwiLFwidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdlci5odG1sXCIsXCJ0ZW1wbGF0ZS9wYWdpbmF0aW9uL3BhZ2luYXRpb24uaHRtbFwiLFwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLWh0bWwtdW5zYWZlLXBvcHVwLmh0bWxcIixcInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1wb3B1cC5odG1sXCIsXCJ0ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXIuaHRtbFwiLFwidGVtcGxhdGUvcHJvZ3Jlc3NiYXIvYmFyLmh0bWxcIixcInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzLmh0bWxcIixcInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmh0bWxcIixcInRlbXBsYXRlL3JhdGluZy9yYXRpbmcuaHRtbFwiLFwidGVtcGxhdGUvdGFicy90YWIuaHRtbFwiLFwidGVtcGxhdGUvdGFicy90YWJzZXQuaHRtbFwiLFwidGVtcGxhdGUvdGltZXBpY2tlci90aW1lcGlja2VyLmh0bWxcIixcInRlbXBsYXRlL3R5cGVhaGVhZC90eXBlYWhlYWQtbWF0Y2guaHRtbFwiLFwidGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1wb3B1cC5odG1sXCJdKTtcbmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAudHJhbnNpdGlvbicsIFtdKVxuXG4vKipcbiAqICR0cmFuc2l0aW9uIHNlcnZpY2UgcHJvdmlkZXMgYSBjb25zaXN0ZW50IGludGVyZmFjZSB0byB0cmlnZ2VyIENTUyAzIHRyYW5zaXRpb25zIGFuZCB0byBiZSBpbmZvcm1lZCB3aGVuIHRoZXkgY29tcGxldGUuXG4gKiBAcGFyYW0gIHtET01FbGVtZW50fSBlbGVtZW50ICBUaGUgRE9NRWxlbWVudCB0aGF0IHdpbGwgYmUgYW5pbWF0ZWQuXG4gKiBAcGFyYW0gIHtzdHJpbmd8b2JqZWN0fGZ1bmN0aW9ufSB0cmlnZ2VyICBUaGUgdGhpbmcgdGhhdCB3aWxsIGNhdXNlIHRoZSB0cmFuc2l0aW9uIHRvIHN0YXJ0OlxuICogICAtIEFzIGEgc3RyaW5nLCBpdCByZXByZXNlbnRzIHRoZSBjc3MgY2xhc3MgdG8gYmUgYWRkZWQgdG8gdGhlIGVsZW1lbnQuXG4gKiAgIC0gQXMgYW4gb2JqZWN0LCBpdCByZXByZXNlbnRzIGEgaGFzaCBvZiBzdHlsZSBhdHRyaWJ1dGVzIHRvIGJlIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnQuXG4gKiAgIC0gQXMgYSBmdW5jdGlvbiwgaXQgcmVwcmVzZW50cyBhIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB0aGF0IHdpbGwgY2F1c2UgdGhlIHRyYW5zaXRpb24gdG8gb2NjdXIuXG4gKiBAcmV0dXJuIHtQcm9taXNlfSAgQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgdHJhbnNpdGlvbiBmaW5pc2hlcy5cbiAqL1xuLmZhY3RvcnkoJyR0cmFuc2l0aW9uJywgWyckcScsICckdGltZW91dCcsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHEsICR0aW1lb3V0LCAkcm9vdFNjb3BlKSB7XG5cbiAgdmFyICR0cmFuc2l0aW9uID0gZnVuY3Rpb24oZWxlbWVudCwgdHJpZ2dlciwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgdmFyIGVuZEV2ZW50TmFtZSA9ICR0cmFuc2l0aW9uW29wdGlvbnMuYW5pbWF0aW9uID8gJ2FuaW1hdGlvbkVuZEV2ZW50TmFtZScgOiAndHJhbnNpdGlvbkVuZEV2ZW50TmFtZSddO1xuXG4gICAgdmFyIHRyYW5zaXRpb25FbmRIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICBlbGVtZW50LnVuYmluZChlbmRFdmVudE5hbWUsIHRyYW5zaXRpb25FbmRIYW5kbGVyKTtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShlbGVtZW50KTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBpZiAoZW5kRXZlbnROYW1lKSB7XG4gICAgICBlbGVtZW50LmJpbmQoZW5kRXZlbnROYW1lLCB0cmFuc2l0aW9uRW5kSGFuZGxlcik7XG4gICAgfVxuXG4gICAgLy8gV3JhcCBpbiBhIHRpbWVvdXQgdG8gYWxsb3cgdGhlIGJyb3dzZXIgdGltZSB0byB1cGRhdGUgdGhlIERPTSBiZWZvcmUgdGhlIHRyYW5zaXRpb24gaXMgdG8gb2NjdXJcbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGlmICggYW5ndWxhci5pc1N0cmluZyh0cmlnZ2VyKSApIHtcbiAgICAgICAgZWxlbWVudC5hZGRDbGFzcyh0cmlnZ2VyKTtcbiAgICAgIH0gZWxzZSBpZiAoIGFuZ3VsYXIuaXNGdW5jdGlvbih0cmlnZ2VyKSApIHtcbiAgICAgICAgdHJpZ2dlcihlbGVtZW50KTtcbiAgICAgIH0gZWxzZSBpZiAoIGFuZ3VsYXIuaXNPYmplY3QodHJpZ2dlcikgKSB7XG4gICAgICAgIGVsZW1lbnQuY3NzKHRyaWdnZXIpO1xuICAgICAgfVxuICAgICAgLy9JZiBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgdHJhbnNpdGlvbnMsIGluc3RhbnRseSByZXNvbHZlXG4gICAgICBpZiAoICFlbmRFdmVudE5hbWUgKSB7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoZWxlbWVudCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgb3VyIGN1c3RvbSBjYW5jZWwgZnVuY3Rpb24gdG8gdGhlIHByb21pc2UgdGhhdCBpcyByZXR1cm5lZFxuICAgIC8vIFdlIGNhbiBjYWxsIHRoaXMgaWYgd2UgYXJlIGFib3V0IHRvIHJ1biBhIG5ldyB0cmFuc2l0aW9uLCB3aGljaCB3ZSBrbm93IHdpbGwgcHJldmVudCB0aGlzIHRyYW5zaXRpb24gZnJvbSBlbmRpbmcsXG4gICAgLy8gaS5lLiBpdCB3aWxsIHRoZXJlZm9yZSBuZXZlciByYWlzZSBhIHRyYW5zaXRpb25FbmQgZXZlbnQgZm9yIHRoYXQgdHJhbnNpdGlvblxuICAgIGRlZmVycmVkLnByb21pc2UuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIGVuZEV2ZW50TmFtZSApIHtcbiAgICAgICAgZWxlbWVudC51bmJpbmQoZW5kRXZlbnROYW1lLCB0cmFuc2l0aW9uRW5kSGFuZGxlcik7XG4gICAgICB9XG4gICAgICBkZWZlcnJlZC5yZWplY3QoJ1RyYW5zaXRpb24gY2FuY2VsbGVkJyk7XG4gICAgfTtcblxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9O1xuXG4gIC8vIFdvcmsgb3V0IHRoZSBuYW1lIG9mIHRoZSB0cmFuc2l0aW9uRW5kIGV2ZW50XG4gIHZhciB0cmFuc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cmFucycpO1xuICB2YXIgdHJhbnNpdGlvbkVuZEV2ZW50TmFtZXMgPSB7XG4gICAgJ1dlYmtpdFRyYW5zaXRpb24nOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsXG4gICAgJ01velRyYW5zaXRpb24nOiAndHJhbnNpdGlvbmVuZCcsXG4gICAgJ09UcmFuc2l0aW9uJzogJ29UcmFuc2l0aW9uRW5kJyxcbiAgICAndHJhbnNpdGlvbic6ICd0cmFuc2l0aW9uZW5kJ1xuICB9O1xuICB2YXIgYW5pbWF0aW9uRW5kRXZlbnROYW1lcyA9IHtcbiAgICAnV2Via2l0VHJhbnNpdGlvbic6ICd3ZWJraXRBbmltYXRpb25FbmQnLFxuICAgICdNb3pUcmFuc2l0aW9uJzogJ2FuaW1hdGlvbmVuZCcsXG4gICAgJ09UcmFuc2l0aW9uJzogJ29BbmltYXRpb25FbmQnLFxuICAgICd0cmFuc2l0aW9uJzogJ2FuaW1hdGlvbmVuZCdcbiAgfTtcbiAgZnVuY3Rpb24gZmluZEVuZEV2ZW50TmFtZShlbmRFdmVudE5hbWVzKSB7XG4gICAgZm9yICh2YXIgbmFtZSBpbiBlbmRFdmVudE5hbWVzKXtcbiAgICAgIGlmICh0cmFuc0VsZW1lbnQuc3R5bGVbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZW5kRXZlbnROYW1lc1tuYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgJHRyYW5zaXRpb24udHJhbnNpdGlvbkVuZEV2ZW50TmFtZSA9IGZpbmRFbmRFdmVudE5hbWUodHJhbnNpdGlvbkVuZEV2ZW50TmFtZXMpO1xuICAkdHJhbnNpdGlvbi5hbmltYXRpb25FbmRFdmVudE5hbWUgPSBmaW5kRW5kRXZlbnROYW1lKGFuaW1hdGlvbkVuZEV2ZW50TmFtZXMpO1xuICByZXR1cm4gJHRyYW5zaXRpb247XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAuY29sbGFwc2UnLCBbJ3VpLmJvb3RzdHJhcC50cmFuc2l0aW9uJ10pXG5cbiAgLmRpcmVjdGl2ZSgnY29sbGFwc2UnLCBbJyR0cmFuc2l0aW9uJywgZnVuY3Rpb24gKCR0cmFuc2l0aW9uKSB7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuXG4gICAgICAgIHZhciBpbml0aWFsQW5pbVNraXAgPSB0cnVlO1xuICAgICAgICB2YXIgY3VycmVudFRyYW5zaXRpb247XG5cbiAgICAgICAgZnVuY3Rpb24gZG9UcmFuc2l0aW9uKGNoYW5nZSkge1xuICAgICAgICAgIHZhciBuZXdUcmFuc2l0aW9uID0gJHRyYW5zaXRpb24oZWxlbWVudCwgY2hhbmdlKTtcbiAgICAgICAgICBpZiAoY3VycmVudFRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uLmNhbmNlbCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbiA9IG5ld1RyYW5zaXRpb247XG4gICAgICAgICAgbmV3VHJhbnNpdGlvbi50aGVuKG5ld1RyYW5zaXRpb25Eb25lLCBuZXdUcmFuc2l0aW9uRG9uZSk7XG4gICAgICAgICAgcmV0dXJuIG5ld1RyYW5zaXRpb247XG5cbiAgICAgICAgICBmdW5jdGlvbiBuZXdUcmFuc2l0aW9uRG9uZSgpIHtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBpdCdzIHRoaXMgdHJhbnNpdGlvbiwgb3RoZXJ3aXNlLCBsZWF2ZSBpdCBhbG9uZS5cbiAgICAgICAgICAgIGlmIChjdXJyZW50VHJhbnNpdGlvbiA9PT0gbmV3VHJhbnNpdGlvbikge1xuICAgICAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBleHBhbmQoKSB7XG4gICAgICAgICAgaWYgKGluaXRpYWxBbmltU2tpcCkge1xuICAgICAgICAgICAgaW5pdGlhbEFuaW1Ta2lwID0gZmFsc2U7XG4gICAgICAgICAgICBleHBhbmREb25lKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNlJykuYWRkQ2xhc3MoJ2NvbGxhcHNpbmcnKTtcbiAgICAgICAgICAgIGRvVHJhbnNpdGlvbih7IGhlaWdodDogZWxlbWVudFswXS5zY3JvbGxIZWlnaHQgKyAncHgnIH0pLnRoZW4oZXhwYW5kRG9uZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZXhwYW5kRG9uZSgpIHtcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCdjb2xsYXBzaW5nJyk7XG4gICAgICAgICAgZWxlbWVudC5hZGRDbGFzcygnY29sbGFwc2UgaW4nKTtcbiAgICAgICAgICBlbGVtZW50LmNzcyh7aGVpZ2h0OiAnYXV0byd9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNvbGxhcHNlKCkge1xuICAgICAgICAgIGlmIChpbml0aWFsQW5pbVNraXApIHtcbiAgICAgICAgICAgIGluaXRpYWxBbmltU2tpcCA9IGZhbHNlO1xuICAgICAgICAgICAgY29sbGFwc2VEb25lKCk7XG4gICAgICAgICAgICBlbGVtZW50LmNzcyh7aGVpZ2h0OiAwfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIENTUyB0cmFuc2l0aW9ucyBkb24ndCB3b3JrIHdpdGggaGVpZ2h0OiBhdXRvLCBzbyB3ZSBoYXZlIHRvIG1hbnVhbGx5IGNoYW5nZSB0aGUgaGVpZ2h0IHRvIGEgc3BlY2lmaWMgdmFsdWVcbiAgICAgICAgICAgIGVsZW1lbnQuY3NzKHsgaGVpZ2h0OiBlbGVtZW50WzBdLnNjcm9sbEhlaWdodCArICdweCcgfSk7XG4gICAgICAgICAgICAvL3RyaWdnZXIgcmVmbG93IHNvIGEgYnJvd3NlciByZWFsaXplcyB0aGF0IGhlaWdodCB3YXMgdXBkYXRlZCBmcm9tIGF1dG8gdG8gYSBzcGVjaWZpYyB2YWx1ZVxuICAgICAgICAgICAgdmFyIHggPSBlbGVtZW50WzBdLm9mZnNldFdpZHRoO1xuXG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCdjb2xsYXBzZSBpbicpLmFkZENsYXNzKCdjb2xsYXBzaW5nJyk7XG5cbiAgICAgICAgICAgIGRvVHJhbnNpdGlvbih7IGhlaWdodDogMCB9KS50aGVuKGNvbGxhcHNlRG9uZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY29sbGFwc2VEb25lKCkge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNpbmcnKTtcbiAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdjb2xsYXBzZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHJzLmNvbGxhcHNlLCBmdW5jdGlvbiAoc2hvdWxkQ29sbGFwc2UpIHtcbiAgICAgICAgICBpZiAoc2hvdWxkQ29sbGFwc2UpIHtcbiAgICAgICAgICAgIGNvbGxhcHNlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGV4cGFuZCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfV0pO1xuXG5hbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLmFjY29yZGlvbicsIFsndWkuYm9vdHN0cmFwLmNvbGxhcHNlJ10pXG5cbi5jb25zdGFudCgnYWNjb3JkaW9uQ29uZmlnJywge1xuICBjbG9zZU90aGVyczogdHJ1ZVxufSlcblxuLmNvbnRyb2xsZXIoJ0FjY29yZGlvbkNvbnRyb2xsZXInLCBbJyRzY29wZScsICckYXR0cnMnLCAnYWNjb3JkaW9uQ29uZmlnJywgZnVuY3Rpb24gKCRzY29wZSwgJGF0dHJzLCBhY2NvcmRpb25Db25maWcpIHtcblxuICAvLyBUaGlzIGFycmF5IGtlZXBzIHRyYWNrIG9mIHRoZSBhY2NvcmRpb24gZ3JvdXBzXG4gIHRoaXMuZ3JvdXBzID0gW107XG5cbiAgLy8gRW5zdXJlIHRoYXQgYWxsIHRoZSBncm91cHMgaW4gdGhpcyBhY2NvcmRpb24gYXJlIGNsb3NlZCwgdW5sZXNzIGNsb3NlLW90aGVycyBleHBsaWNpdGx5IHNheXMgbm90IHRvXG4gIHRoaXMuY2xvc2VPdGhlcnMgPSBmdW5jdGlvbihvcGVuR3JvdXApIHtcbiAgICB2YXIgY2xvc2VPdGhlcnMgPSBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMuY2xvc2VPdGhlcnMpID8gJHNjb3BlLiRldmFsKCRhdHRycy5jbG9zZU90aGVycykgOiBhY2NvcmRpb25Db25maWcuY2xvc2VPdGhlcnM7XG4gICAgaWYgKCBjbG9zZU90aGVycyApIHtcbiAgICAgIGFuZ3VsYXIuZm9yRWFjaCh0aGlzLmdyb3VwcywgZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgICAgIGlmICggZ3JvdXAgIT09IG9wZW5Hcm91cCApIHtcbiAgICAgICAgICBncm91cC5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFRoaXMgaXMgY2FsbGVkIGZyb20gdGhlIGFjY29yZGlvbi1ncm91cCBkaXJlY3RpdmUgdG8gYWRkIGl0c2VsZiB0byB0aGUgYWNjb3JkaW9uXG4gIHRoaXMuYWRkR3JvdXAgPSBmdW5jdGlvbihncm91cFNjb3BlKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHRoaXMuZ3JvdXBzLnB1c2goZ3JvdXBTY29wZSk7XG5cbiAgICBncm91cFNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHRoYXQucmVtb3ZlR3JvdXAoZ3JvdXBTY29wZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gVGhpcyBpcyBjYWxsZWQgZnJvbSB0aGUgYWNjb3JkaW9uLWdyb3VwIGRpcmVjdGl2ZSB3aGVuIHRvIHJlbW92ZSBpdHNlbGZcbiAgdGhpcy5yZW1vdmVHcm91cCA9IGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5ncm91cHMuaW5kZXhPZihncm91cCk7XG4gICAgaWYgKCBpbmRleCAhPT0gLTEgKSB7XG4gICAgICB0aGlzLmdyb3Vwcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgfTtcblxufV0pXG5cbi8vIFRoZSBhY2NvcmRpb24gZGlyZWN0aXZlIHNpbXBseSBzZXRzIHVwIHRoZSBkaXJlY3RpdmUgY29udHJvbGxlclxuLy8gYW5kIGFkZHMgYW4gYWNjb3JkaW9uIENTUyBjbGFzcyB0byBpdHNlbGYgZWxlbWVudC5cbi5kaXJlY3RpdmUoJ2FjY29yZGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDonRUEnLFxuICAgIGNvbnRyb2xsZXI6J0FjY29yZGlvbkNvbnRyb2xsZXInLFxuICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgcmVwbGFjZTogZmFsc2UsXG4gICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLmh0bWwnXG4gIH07XG59KVxuXG4vLyBUaGUgYWNjb3JkaW9uLWdyb3VwIGRpcmVjdGl2ZSBpbmRpY2F0ZXMgYSBibG9jayBvZiBodG1sIHRoYXQgd2lsbCBleHBhbmQgYW5kIGNvbGxhcHNlIGluIGFuIGFjY29yZGlvblxuLmRpcmVjdGl2ZSgnYWNjb3JkaW9uR3JvdXAnLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXF1aXJlOideYWNjb3JkaW9uJywgICAgICAgICAvLyBXZSBuZWVkIHRoaXMgZGlyZWN0aXZlIHRvIGJlIGluc2lkZSBhbiBhY2NvcmRpb25cbiAgICByZXN0cmljdDonRUEnLFxuICAgIHRyYW5zY2x1ZGU6dHJ1ZSwgICAgICAgICAgICAgIC8vIEl0IHRyYW5zY2x1ZGVzIHRoZSBjb250ZW50cyBvZiB0aGUgZGlyZWN0aXZlIGludG8gdGhlIHRlbXBsYXRlXG4gICAgcmVwbGFjZTogdHJ1ZSwgICAgICAgICAgICAgICAgLy8gVGhlIGVsZW1lbnQgY29udGFpbmluZyB0aGUgZGlyZWN0aXZlIHdpbGwgYmUgcmVwbGFjZWQgd2l0aCB0aGUgdGVtcGxhdGVcbiAgICB0ZW1wbGF0ZVVybDondGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi1ncm91cC5odG1sJyxcbiAgICBzY29wZToge1xuICAgICAgaGVhZGluZzogJ0AnLCAgICAgICAgICAgICAgIC8vIEludGVycG9sYXRlIHRoZSBoZWFkaW5nIGF0dHJpYnV0ZSBvbnRvIHRoaXMgc2NvcGVcbiAgICAgIGlzT3BlbjogJz0/JyxcbiAgICAgIGlzRGlzYWJsZWQ6ICc9PydcbiAgICB9LFxuICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5zZXRIZWFkaW5nID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICB0aGlzLmhlYWRpbmcgPSBlbGVtZW50O1xuICAgICAgfTtcbiAgICB9LFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgYWNjb3JkaW9uQ3RybCkge1xuICAgICAgYWNjb3JkaW9uQ3RybC5hZGRHcm91cChzY29wZSk7XG5cbiAgICAgIHNjb3BlLiR3YXRjaCgnaXNPcGVuJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgaWYgKCB2YWx1ZSApIHtcbiAgICAgICAgICBhY2NvcmRpb25DdHJsLmNsb3NlT3RoZXJzKHNjb3BlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHNjb3BlLnRvZ2dsZU9wZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCAhc2NvcGUuaXNEaXNhYmxlZCApIHtcbiAgICAgICAgICBzY29wZS5pc09wZW4gPSAhc2NvcGUuaXNPcGVuO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn0pXG5cbi8vIFVzZSBhY2NvcmRpb24taGVhZGluZyBiZWxvdyBhbiBhY2NvcmRpb24tZ3JvdXAgdG8gcHJvdmlkZSBhIGhlYWRpbmcgY29udGFpbmluZyBIVE1MXG4vLyA8YWNjb3JkaW9uLWdyb3VwPlxuLy8gICA8YWNjb3JkaW9uLWhlYWRpbmc+SGVhZGluZyBjb250YWluaW5nIEhUTUwgLSA8aW1nIHNyYz1cIi4uLlwiPjwvYWNjb3JkaW9uLWhlYWRpbmc+XG4vLyA8L2FjY29yZGlvbi1ncm91cD5cbi5kaXJlY3RpdmUoJ2FjY29yZGlvbkhlYWRpbmcnLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VBJyxcbiAgICB0cmFuc2NsdWRlOiB0cnVlLCAgIC8vIEdyYWIgdGhlIGNvbnRlbnRzIHRvIGJlIHVzZWQgYXMgdGhlIGhlYWRpbmdcbiAgICB0ZW1wbGF0ZTogJycsICAgICAgIC8vIEluIGVmZmVjdCByZW1vdmUgdGhpcyBlbGVtZW50IVxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgcmVxdWlyZTogJ15hY2NvcmRpb25Hcm91cCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGFjY29yZGlvbkdyb3VwQ3RybCwgdHJhbnNjbHVkZSkge1xuICAgICAgLy8gUGFzcyB0aGUgaGVhZGluZyB0byB0aGUgYWNjb3JkaW9uLWdyb3VwIGNvbnRyb2xsZXJcbiAgICAgIC8vIHNvIHRoYXQgaXQgY2FuIGJlIHRyYW5zY2x1ZGVkIGludG8gdGhlIHJpZ2h0IHBsYWNlIGluIHRoZSB0ZW1wbGF0ZVxuICAgICAgLy8gW1RoZSBzZWNvbmQgcGFyYW1ldGVyIHRvIHRyYW5zY2x1ZGUgY2F1c2VzIHRoZSBlbGVtZW50cyB0byBiZSBjbG9uZWQgc28gdGhhdCB0aGV5IHdvcmsgaW4gbmctcmVwZWF0XVxuICAgICAgYWNjb3JkaW9uR3JvdXBDdHJsLnNldEhlYWRpbmcodHJhbnNjbHVkZShzY29wZSwgZnVuY3Rpb24oKSB7fSkpO1xuICAgIH1cbiAgfTtcbn0pXG5cbi8vIFVzZSBpbiB0aGUgYWNjb3JkaW9uLWdyb3VwIHRlbXBsYXRlIHRvIGluZGljYXRlIHdoZXJlIHlvdSB3YW50IHRoZSBoZWFkaW5nIHRvIGJlIHRyYW5zY2x1ZGVkXG4vLyBZb3UgbXVzdCBwcm92aWRlIHRoZSBwcm9wZXJ0eSBvbiB0aGUgYWNjb3JkaW9uLWdyb3VwIGNvbnRyb2xsZXIgdGhhdCB3aWxsIGhvbGQgdGhlIHRyYW5zY2x1ZGVkIGVsZW1lbnRcbi8vIDxkaXYgY2xhc3M9XCJhY2NvcmRpb24tZ3JvdXBcIj5cbi8vICAgPGRpdiBjbGFzcz1cImFjY29yZGlvbi1oZWFkaW5nXCIgPjxhIC4uLiBhY2NvcmRpb24tdHJhbnNjbHVkZT1cImhlYWRpbmdcIj4uLi48L2E+PC9kaXY+XG4vLyAgIC4uLlxuLy8gPC9kaXY+XG4uZGlyZWN0aXZlKCdhY2NvcmRpb25UcmFuc2NsdWRlJywgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcmVxdWlyZTogJ15hY2NvcmRpb25Hcm91cCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGNvbnRyb2xsZXIpIHtcbiAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbigpIHsgcmV0dXJuIGNvbnRyb2xsZXJbYXR0ci5hY2NvcmRpb25UcmFuc2NsdWRlXTsgfSwgZnVuY3Rpb24oaGVhZGluZykge1xuICAgICAgICBpZiAoIGhlYWRpbmcgKSB7XG4gICAgICAgICAgZWxlbWVudC5odG1sKCcnKTtcbiAgICAgICAgICBlbGVtZW50LmFwcGVuZChoZWFkaW5nKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSk7XG5cbmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAuYWxlcnQnLCBbXSlcblxuLmNvbnRyb2xsZXIoJ0FsZXJ0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRhdHRycycsIGZ1bmN0aW9uICgkc2NvcGUsICRhdHRycykge1xuICAkc2NvcGUuY2xvc2VhYmxlID0gJ2Nsb3NlJyBpbiAkYXR0cnM7XG59XSlcblxuLmRpcmVjdGl2ZSgnYWxlcnQnLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6J0VBJyxcbiAgICBjb250cm9sbGVyOidBbGVydENvbnRyb2xsZXInLFxuICAgIHRlbXBsYXRlVXJsOid0ZW1wbGF0ZS9hbGVydC9hbGVydC5odG1sJyxcbiAgICB0cmFuc2NsdWRlOnRydWUsXG4gICAgcmVwbGFjZTp0cnVlLFxuICAgIHNjb3BlOiB7XG4gICAgICB0eXBlOiAnQCcsXG4gICAgICBjbG9zZTogJyYnXG4gICAgfVxuICB9O1xufSk7XG5cbmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAuYmluZEh0bWwnLCBbXSlcblxuICAuZGlyZWN0aXZlKCdiaW5kSHRtbFVuc2FmZScsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICBlbGVtZW50LmFkZENsYXNzKCduZy1iaW5kaW5nJykuZGF0YSgnJGJpbmRpbmcnLCBhdHRyLmJpbmRIdG1sVW5zYWZlKTtcbiAgICAgIHNjb3BlLiR3YXRjaChhdHRyLmJpbmRIdG1sVW5zYWZlLCBmdW5jdGlvbiBiaW5kSHRtbFVuc2FmZVdhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGVsZW1lbnQuaHRtbCh2YWx1ZSB8fCAnJyk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcbmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAuYnV0dG9ucycsIFtdKVxuXG4uY29uc3RhbnQoJ2J1dHRvbkNvbmZpZycsIHtcbiAgYWN0aXZlQ2xhc3M6ICdhY3RpdmUnLFxuICB0b2dnbGVFdmVudDogJ2NsaWNrJ1xufSlcblxuLmNvbnRyb2xsZXIoJ0J1dHRvbnNDb250cm9sbGVyJywgWydidXR0b25Db25maWcnLCBmdW5jdGlvbihidXR0b25Db25maWcpIHtcbiAgdGhpcy5hY3RpdmVDbGFzcyA9IGJ1dHRvbkNvbmZpZy5hY3RpdmVDbGFzcyB8fCAnYWN0aXZlJztcbiAgdGhpcy50b2dnbGVFdmVudCA9IGJ1dHRvbkNvbmZpZy50b2dnbGVFdmVudCB8fCAnY2xpY2snO1xufV0pXG5cbi5kaXJlY3RpdmUoJ2J0blJhZGlvJywgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlcXVpcmU6IFsnYnRuUmFkaW8nLCAnbmdNb2RlbCddLFxuICAgIGNvbnRyb2xsZXI6ICdCdXR0b25zQ29udHJvbGxlcicsXG4gICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybHMpIHtcbiAgICAgIHZhciBidXR0b25zQ3RybCA9IGN0cmxzWzBdLCBuZ01vZGVsQ3RybCA9IGN0cmxzWzFdO1xuXG4gICAgICAvL21vZGVsIC0+IFVJXG4gICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBlbGVtZW50LnRvZ2dsZUNsYXNzKGJ1dHRvbnNDdHJsLmFjdGl2ZUNsYXNzLCBhbmd1bGFyLmVxdWFscyhuZ01vZGVsQ3RybC4kbW9kZWxWYWx1ZSwgc2NvcGUuJGV2YWwoYXR0cnMuYnRuUmFkaW8pKSk7XG4gICAgICB9O1xuXG4gICAgICAvL3VpLT5tb2RlbFxuICAgICAgZWxlbWVudC5iaW5kKGJ1dHRvbnNDdHJsLnRvZ2dsZUV2ZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpc0FjdGl2ZSA9IGVsZW1lbnQuaGFzQ2xhc3MoYnV0dG9uc0N0cmwuYWN0aXZlQ2xhc3MpO1xuXG4gICAgICAgIGlmICghaXNBY3RpdmUgfHwgYW5ndWxhci5pc0RlZmluZWQoYXR0cnMudW5jaGVja2FibGUpKSB7XG4gICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoaXNBY3RpdmUgPyBudWxsIDogc2NvcGUuJGV2YWwoYXR0cnMuYnRuUmFkaW8pKTtcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSlcblxuLmRpcmVjdGl2ZSgnYnRuQ2hlY2tib3gnLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVxdWlyZTogWydidG5DaGVja2JveCcsICduZ01vZGVsJ10sXG4gICAgY29udHJvbGxlcjogJ0J1dHRvbnNDb250cm9sbGVyJyxcbiAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJscykge1xuICAgICAgdmFyIGJ1dHRvbnNDdHJsID0gY3RybHNbMF0sIG5nTW9kZWxDdHJsID0gY3RybHNbMV07XG5cbiAgICAgIGZ1bmN0aW9uIGdldFRydWVWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIGdldENoZWNrYm94VmFsdWUoYXR0cnMuYnRuQ2hlY2tib3hUcnVlLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZ2V0RmFsc2VWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIGdldENoZWNrYm94VmFsdWUoYXR0cnMuYnRuQ2hlY2tib3hGYWxzZSwgZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBnZXRDaGVja2JveFZhbHVlKGF0dHJpYnV0ZVZhbHVlLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgdmFyIHZhbCA9IHNjb3BlLiRldmFsKGF0dHJpYnV0ZVZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGFuZ3VsYXIuaXNEZWZpbmVkKHZhbCkgPyB2YWwgOiBkZWZhdWx0VmFsdWU7XG4gICAgICB9XG5cbiAgICAgIC8vbW9kZWwgLT4gVUlcbiAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGVsZW1lbnQudG9nZ2xlQ2xhc3MoYnV0dG9uc0N0cmwuYWN0aXZlQ2xhc3MsIGFuZ3VsYXIuZXF1YWxzKG5nTW9kZWxDdHJsLiRtb2RlbFZhbHVlLCBnZXRUcnVlVmFsdWUoKSkpO1xuICAgICAgfTtcblxuICAgICAgLy91aS0+bW9kZWxcbiAgICAgIGVsZW1lbnQuYmluZChidXR0b25zQ3RybC50b2dnbGVFdmVudCwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoZWxlbWVudC5oYXNDbGFzcyhidXR0b25zQ3RybC5hY3RpdmVDbGFzcykgPyBnZXRGYWxzZVZhbHVlKCkgOiBnZXRUcnVlVmFsdWUoKSk7XG4gICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn0pO1xuXG4vKipcbiogQG5nZG9jIG92ZXJ2aWV3XG4qIEBuYW1lIHVpLmJvb3RzdHJhcC5jYXJvdXNlbFxuKlxuKiBAZGVzY3JpcHRpb25cbiogQW5ndWxhckpTIHZlcnNpb24gb2YgYW4gaW1hZ2UgY2Fyb3VzZWwuXG4qXG4qL1xuYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC5jYXJvdXNlbCcsIFsndWkuYm9vdHN0cmFwLnRyYW5zaXRpb24nXSlcbi5jb250cm9sbGVyKCdDYXJvdXNlbENvbnRyb2xsZXInLCBbJyRzY29wZScsICckdGltZW91dCcsICckdHJhbnNpdGlvbicsIGZ1bmN0aW9uICgkc2NvcGUsICR0aW1lb3V0LCAkdHJhbnNpdGlvbikge1xuICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgc2xpZGVzID0gc2VsZi5zbGlkZXMgPSAkc2NvcGUuc2xpZGVzID0gW10sXG4gICAgY3VycmVudEluZGV4ID0gLTEsXG4gICAgY3VycmVudFRpbWVvdXQsIGlzUGxheWluZztcbiAgc2VsZi5jdXJyZW50U2xpZGUgPSBudWxsO1xuXG4gIHZhciBkZXN0cm95ZWQgPSBmYWxzZTtcbiAgLyogZGlyZWN0aW9uOiBcInByZXZcIiBvciBcIm5leHRcIiAqL1xuICBzZWxmLnNlbGVjdCA9ICRzY29wZS5zZWxlY3QgPSBmdW5jdGlvbihuZXh0U2xpZGUsIGRpcmVjdGlvbikge1xuICAgIHZhciBuZXh0SW5kZXggPSBzbGlkZXMuaW5kZXhPZihuZXh0U2xpZGUpO1xuICAgIC8vRGVjaWRlIGRpcmVjdGlvbiBpZiBpdCdzIG5vdCBnaXZlblxuICAgIGlmIChkaXJlY3Rpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgZGlyZWN0aW9uID0gbmV4dEluZGV4ID4gY3VycmVudEluZGV4ID8gJ25leHQnIDogJ3ByZXYnO1xuICAgIH1cbiAgICBpZiAobmV4dFNsaWRlICYmIG5leHRTbGlkZSAhPT0gc2VsZi5jdXJyZW50U2xpZGUpIHtcbiAgICAgIGlmICgkc2NvcGUuJGN1cnJlbnRUcmFuc2l0aW9uKSB7XG4gICAgICAgICRzY29wZS4kY3VycmVudFRyYW5zaXRpb24uY2FuY2VsKCk7XG4gICAgICAgIC8vVGltZW91dCBzbyBuZy1jbGFzcyBpbiB0ZW1wbGF0ZSBoYXMgdGltZSB0byBmaXggY2xhc3NlcyBmb3IgZmluaXNoZWQgc2xpZGVcbiAgICAgICAgJHRpbWVvdXQoZ29OZXh0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdvTmV4dCgpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnb05leHQoKSB7XG4gICAgICAvLyBTY29wZSBoYXMgYmVlbiBkZXN0cm95ZWQsIHN0b3AgaGVyZS5cbiAgICAgIGlmIChkZXN0cm95ZWQpIHsgcmV0dXJuOyB9XG4gICAgICAvL0lmIHdlIGhhdmUgYSBzbGlkZSB0byB0cmFuc2l0aW9uIGZyb20gYW5kIHdlIGhhdmUgYSB0cmFuc2l0aW9uIHR5cGUgYW5kIHdlJ3JlIGFsbG93ZWQsIGdvXG4gICAgICBpZiAoc2VsZi5jdXJyZW50U2xpZGUgJiYgYW5ndWxhci5pc1N0cmluZyhkaXJlY3Rpb24pICYmICEkc2NvcGUubm9UcmFuc2l0aW9uICYmIG5leHRTbGlkZS4kZWxlbWVudCkge1xuICAgICAgICAvL1dlIHNob3VsZG4ndCBkbyBjbGFzcyBtYW5pcCBpbiBoZXJlLCBidXQgaXQncyB0aGUgc2FtZSB3ZWlyZCB0aGluZyBib290c3RyYXAgZG9lcy4gbmVlZCB0byBmaXggc29tZXRpbWVcbiAgICAgICAgbmV4dFNsaWRlLiRlbGVtZW50LmFkZENsYXNzKGRpcmVjdGlvbik7XG4gICAgICAgIHZhciByZWZsb3cgPSBuZXh0U2xpZGUuJGVsZW1lbnRbMF0ub2Zmc2V0V2lkdGg7IC8vZm9yY2UgcmVmbG93XG5cbiAgICAgICAgLy9TZXQgYWxsIG90aGVyIHNsaWRlcyB0byBzdG9wIGRvaW5nIHRoZWlyIHN0dWZmIGZvciB0aGUgbmV3IHRyYW5zaXRpb25cbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKHNsaWRlcywgZnVuY3Rpb24oc2xpZGUpIHtcbiAgICAgICAgICBhbmd1bGFyLmV4dGVuZChzbGlkZSwge2RpcmVjdGlvbjogJycsIGVudGVyaW5nOiBmYWxzZSwgbGVhdmluZzogZmFsc2UsIGFjdGl2ZTogZmFsc2V9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFuZ3VsYXIuZXh0ZW5kKG5leHRTbGlkZSwge2RpcmVjdGlvbjogZGlyZWN0aW9uLCBhY3RpdmU6IHRydWUsIGVudGVyaW5nOiB0cnVlfSk7XG4gICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHNlbGYuY3VycmVudFNsaWRlfHx7fSwge2RpcmVjdGlvbjogZGlyZWN0aW9uLCBsZWF2aW5nOiB0cnVlfSk7XG5cbiAgICAgICAgJHNjb3BlLiRjdXJyZW50VHJhbnNpdGlvbiA9ICR0cmFuc2l0aW9uKG5leHRTbGlkZS4kZWxlbWVudCwge30pO1xuICAgICAgICAvL1dlIGhhdmUgdG8gY3JlYXRlIG5ldyBwb2ludGVycyBpbnNpZGUgYSBjbG9zdXJlIHNpbmNlIG5leHQgJiBjdXJyZW50IHdpbGwgY2hhbmdlXG4gICAgICAgIChmdW5jdGlvbihuZXh0LGN1cnJlbnQpIHtcbiAgICAgICAgICAkc2NvcGUuJGN1cnJlbnRUcmFuc2l0aW9uLnRoZW4oXG4gICAgICAgICAgICBmdW5jdGlvbigpeyB0cmFuc2l0aW9uRG9uZShuZXh0LCBjdXJyZW50KTsgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uKCl7IHRyYW5zaXRpb25Eb25lKG5leHQsIGN1cnJlbnQpOyB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfShuZXh0U2xpZGUsIHNlbGYuY3VycmVudFNsaWRlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmFuc2l0aW9uRG9uZShuZXh0U2xpZGUsIHNlbGYuY3VycmVudFNsaWRlKTtcbiAgICAgIH1cbiAgICAgIHNlbGYuY3VycmVudFNsaWRlID0gbmV4dFNsaWRlO1xuICAgICAgY3VycmVudEluZGV4ID0gbmV4dEluZGV4O1xuICAgICAgLy9ldmVyeSB0aW1lIHlvdSBjaGFuZ2Ugc2xpZGVzLCByZXNldCB0aGUgdGltZXJcbiAgICAgIHJlc3RhcnRUaW1lcigpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0cmFuc2l0aW9uRG9uZShuZXh0LCBjdXJyZW50KSB7XG4gICAgICBhbmd1bGFyLmV4dGVuZChuZXh0LCB7ZGlyZWN0aW9uOiAnJywgYWN0aXZlOiB0cnVlLCBsZWF2aW5nOiBmYWxzZSwgZW50ZXJpbmc6IGZhbHNlfSk7XG4gICAgICBhbmd1bGFyLmV4dGVuZChjdXJyZW50fHx7fSwge2RpcmVjdGlvbjogJycsIGFjdGl2ZTogZmFsc2UsIGxlYXZpbmc6IGZhbHNlLCBlbnRlcmluZzogZmFsc2V9KTtcbiAgICAgICRzY29wZS4kY3VycmVudFRyYW5zaXRpb24gPSBudWxsO1xuICAgIH1cbiAgfTtcbiAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgZGVzdHJveWVkID0gdHJ1ZTtcbiAgfSk7XG5cbiAgLyogQWxsb3cgb3V0c2lkZSBwZW9wbGUgdG8gY2FsbCBpbmRleE9mIG9uIHNsaWRlcyBhcnJheSAqL1xuICBzZWxmLmluZGV4T2ZTbGlkZSA9IGZ1bmN0aW9uKHNsaWRlKSB7XG4gICAgcmV0dXJuIHNsaWRlcy5pbmRleE9mKHNsaWRlKTtcbiAgfTtcblxuICAkc2NvcGUubmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuZXdJbmRleCA9IChjdXJyZW50SW5kZXggKyAxKSAlIHNsaWRlcy5sZW5ndGg7XG5cbiAgICAvL1ByZXZlbnQgdGhpcyB1c2VyLXRyaWdnZXJlZCB0cmFuc2l0aW9uIGZyb20gb2NjdXJyaW5nIGlmIHRoZXJlIGlzIGFscmVhZHkgb25lIGluIHByb2dyZXNzXG4gICAgaWYgKCEkc2NvcGUuJGN1cnJlbnRUcmFuc2l0aW9uKSB7XG4gICAgICByZXR1cm4gc2VsZi5zZWxlY3Qoc2xpZGVzW25ld0luZGV4XSwgJ25leHQnKTtcbiAgICB9XG4gIH07XG5cbiAgJHNjb3BlLnByZXYgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbmV3SW5kZXggPSBjdXJyZW50SW5kZXggLSAxIDwgMCA/IHNsaWRlcy5sZW5ndGggLSAxIDogY3VycmVudEluZGV4IC0gMTtcblxuICAgIC8vUHJldmVudCB0aGlzIHVzZXItdHJpZ2dlcmVkIHRyYW5zaXRpb24gZnJvbSBvY2N1cnJpbmcgaWYgdGhlcmUgaXMgYWxyZWFkeSBvbmUgaW4gcHJvZ3Jlc3NcbiAgICBpZiAoISRzY29wZS4kY3VycmVudFRyYW5zaXRpb24pIHtcbiAgICAgIHJldHVybiBzZWxmLnNlbGVjdChzbGlkZXNbbmV3SW5kZXhdLCAncHJldicpO1xuICAgIH1cbiAgfTtcblxuICAkc2NvcGUuaXNBY3RpdmUgPSBmdW5jdGlvbihzbGlkZSkge1xuICAgICByZXR1cm4gc2VsZi5jdXJyZW50U2xpZGUgPT09IHNsaWRlO1xuICB9O1xuXG4gICRzY29wZS4kd2F0Y2goJ2ludGVydmFsJywgcmVzdGFydFRpbWVyKTtcbiAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCByZXNldFRpbWVyKTtcblxuICBmdW5jdGlvbiByZXN0YXJ0VGltZXIoKSB7XG4gICAgcmVzZXRUaW1lcigpO1xuICAgIHZhciBpbnRlcnZhbCA9ICskc2NvcGUuaW50ZXJ2YWw7XG4gICAgaWYgKCFpc05hTihpbnRlcnZhbCkgJiYgaW50ZXJ2YWw+PTApIHtcbiAgICAgIGN1cnJlbnRUaW1lb3V0ID0gJHRpbWVvdXQodGltZXJGbiwgaW50ZXJ2YWwpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0VGltZXIoKSB7XG4gICAgaWYgKGN1cnJlbnRUaW1lb3V0KSB7XG4gICAgICAkdGltZW91dC5jYW5jZWwoY3VycmVudFRpbWVvdXQpO1xuICAgICAgY3VycmVudFRpbWVvdXQgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRpbWVyRm4oKSB7XG4gICAgaWYgKGlzUGxheWluZykge1xuICAgICAgJHNjb3BlLm5leHQoKTtcbiAgICAgIHJlc3RhcnRUaW1lcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkc2NvcGUucGF1c2UoKTtcbiAgICB9XG4gIH1cblxuICAkc2NvcGUucGxheSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghaXNQbGF5aW5nKSB7XG4gICAgICBpc1BsYXlpbmcgPSB0cnVlO1xuICAgICAgcmVzdGFydFRpbWVyKCk7XG4gICAgfVxuICB9O1xuICAkc2NvcGUucGF1c2UgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoISRzY29wZS5ub1BhdXNlKSB7XG4gICAgICBpc1BsYXlpbmcgPSBmYWxzZTtcbiAgICAgIHJlc2V0VGltZXIoKTtcbiAgICB9XG4gIH07XG5cbiAgc2VsZi5hZGRTbGlkZSA9IGZ1bmN0aW9uKHNsaWRlLCBlbGVtZW50KSB7XG4gICAgc2xpZGUuJGVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHNsaWRlcy5wdXNoKHNsaWRlKTtcbiAgICAvL2lmIHRoaXMgaXMgdGhlIGZpcnN0IHNsaWRlIG9yIHRoZSBzbGlkZSBpcyBzZXQgdG8gYWN0aXZlLCBzZWxlY3QgaXRcbiAgICBpZihzbGlkZXMubGVuZ3RoID09PSAxIHx8IHNsaWRlLmFjdGl2ZSkge1xuICAgICAgc2VsZi5zZWxlY3Qoc2xpZGVzW3NsaWRlcy5sZW5ndGgtMV0pO1xuICAgICAgaWYgKHNsaWRlcy5sZW5ndGggPT0gMSkge1xuICAgICAgICAkc2NvcGUucGxheSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzbGlkZS5hY3RpdmUgPSBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgc2VsZi5yZW1vdmVTbGlkZSA9IGZ1bmN0aW9uKHNsaWRlKSB7XG4gICAgLy9nZXQgdGhlIGluZGV4IG9mIHRoZSBzbGlkZSBpbnNpZGUgdGhlIGNhcm91c2VsXG4gICAgdmFyIGluZGV4ID0gc2xpZGVzLmluZGV4T2Yoc2xpZGUpO1xuICAgIHNsaWRlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIGlmIChzbGlkZXMubGVuZ3RoID4gMCAmJiBzbGlkZS5hY3RpdmUpIHtcbiAgICAgIGlmIChpbmRleCA+PSBzbGlkZXMubGVuZ3RoKSB7XG4gICAgICAgIHNlbGYuc2VsZWN0KHNsaWRlc1tpbmRleC0xXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLnNlbGVjdChzbGlkZXNbaW5kZXhdKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRJbmRleCA+IGluZGV4KSB7XG4gICAgICBjdXJyZW50SW5kZXgtLTtcbiAgICB9XG4gIH07XG5cbn1dKVxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIHVpLmJvb3RzdHJhcC5jYXJvdXNlbC5kaXJlY3RpdmU6Y2Fyb3VzZWxcbiAqIEByZXN0cmljdCBFQVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ2Fyb3VzZWwgaXMgdGhlIG91dGVyIGNvbnRhaW5lciBmb3IgYSBzZXQgb2YgaW1hZ2UgJ3NsaWRlcycgdG8gc2hvd2Nhc2UuXG4gKlxuICogQHBhcmFtIHtudW1iZXI9fSBpbnRlcnZhbCBUaGUgdGltZSwgaW4gbWlsbGlzZWNvbmRzLCB0aGF0IGl0IHdpbGwgdGFrZSB0aGUgY2Fyb3VzZWwgdG8gZ28gdG8gdGhlIG5leHQgc2xpZGUuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBub1RyYW5zaXRpb24gV2hldGhlciB0byBkaXNhYmxlIHRyYW5zaXRpb25zIG9uIHRoZSBjYXJvdXNlbC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG5vUGF1c2UgV2hldGhlciB0byBkaXNhYmxlIHBhdXNpbmcgb24gdGhlIGNhcm91c2VsIChieSBkZWZhdWx0LCB0aGUgY2Fyb3VzZWwgaW50ZXJ2YWwgcGF1c2VzIG9uIGhvdmVyKS5cbiAqXG4gKiBAZXhhbXBsZVxuPGV4YW1wbGUgbW9kdWxlPVwidWkuYm9vdHN0cmFwXCI+XG4gIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgPGNhcm91c2VsPlxuICAgICAgPHNsaWRlPlxuICAgICAgICA8aW1nIHNyYz1cImh0dHA6Ly9wbGFjZWtpdHRlbi5jb20vMTUwLzE1MFwiIHN0eWxlPVwibWFyZ2luOmF1dG87XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjYXJvdXNlbC1jYXB0aW9uXCI+XG4gICAgICAgICAgPHA+QmVhdXRpZnVsITwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L3NsaWRlPlxuICAgICAgPHNsaWRlPlxuICAgICAgICA8aW1nIHNyYz1cImh0dHA6Ly9wbGFjZWtpdHRlbi5jb20vMTAwLzE1MFwiIHN0eWxlPVwibWFyZ2luOmF1dG87XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjYXJvdXNlbC1jYXB0aW9uXCI+XG4gICAgICAgICAgPHA+RCdhd3chPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvc2xpZGU+XG4gICAgPC9jYXJvdXNlbD5cbiAgPC9maWxlPlxuICA8ZmlsZSBuYW1lPVwiZGVtby5jc3NcIj5cbiAgICAuY2Fyb3VzZWwtaW5kaWNhdG9ycyB7XG4gICAgICB0b3A6IGF1dG87XG4gICAgICBib3R0b206IDE1cHg7XG4gICAgfVxuICA8L2ZpbGU+XG48L2V4YW1wbGU+XG4gKi9cbi5kaXJlY3RpdmUoJ2Nhcm91c2VsJywgW2Z1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICBjb250cm9sbGVyOiAnQ2Fyb3VzZWxDb250cm9sbGVyJyxcbiAgICByZXF1aXJlOiAnY2Fyb3VzZWwnLFxuICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUvY2Fyb3VzZWwvY2Fyb3VzZWwuaHRtbCcsXG4gICAgc2NvcGU6IHtcbiAgICAgIGludGVydmFsOiAnPScsXG4gICAgICBub1RyYW5zaXRpb246ICc9JyxcbiAgICAgIG5vUGF1c2U6ICc9J1xuICAgIH1cbiAgfTtcbn1dKVxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIHVpLmJvb3RzdHJhcC5jYXJvdXNlbC5kaXJlY3RpdmU6c2xpZGVcbiAqIEByZXN0cmljdCBFQVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIHNsaWRlIGluc2lkZSBhIHtAbGluayB1aS5ib290c3RyYXAuY2Fyb3VzZWwuZGlyZWN0aXZlOmNhcm91c2VsIGNhcm91c2VsfS4gIE11c3QgYmUgcGxhY2VkIGFzIGEgY2hpbGQgb2YgYSBjYXJvdXNlbCBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IGFjdGl2ZSBNb2RlbCBiaW5kaW5nLCB3aGV0aGVyIG9yIG5vdCB0aGlzIHNsaWRlIGlzIGN1cnJlbnRseSBhY3RpdmUuXG4gKlxuICogQGV4YW1wbGVcbjxleGFtcGxlIG1vZHVsZT1cInVpLmJvb3RzdHJhcFwiPlxuICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuPGRpdiBuZy1jb250cm9sbGVyPVwiQ2Fyb3VzZWxEZW1vQ3RybFwiPlxuICA8Y2Fyb3VzZWw+XG4gICAgPHNsaWRlIG5nLXJlcGVhdD1cInNsaWRlIGluIHNsaWRlc1wiIGFjdGl2ZT1cInNsaWRlLmFjdGl2ZVwiPlxuICAgICAgPGltZyBuZy1zcmM9XCJ7e3NsaWRlLmltYWdlfX1cIiBzdHlsZT1cIm1hcmdpbjphdXRvO1wiPlxuICAgICAgPGRpdiBjbGFzcz1cImNhcm91c2VsLWNhcHRpb25cIj5cbiAgICAgICAgPGg0PlNsaWRlIHt7JGluZGV4fX08L2g0PlxuICAgICAgICA8cD57e3NsaWRlLnRleHR9fTwvcD5cbiAgICAgIDwvZGl2PlxuICAgIDwvc2xpZGU+XG4gIDwvY2Fyb3VzZWw+XG4gIEludGVydmFsLCBpbiBtaWxsaXNlY29uZHM6IDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJteUludGVydmFsXCI+XG4gIDxiciAvPkVudGVyIGEgbmVnYXRpdmUgbnVtYmVyIHRvIHN0b3AgdGhlIGludGVydmFsLlxuPC9kaXY+XG4gIDwvZmlsZT5cbiAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuZnVuY3Rpb24gQ2Fyb3VzZWxEZW1vQ3RybCgkc2NvcGUpIHtcbiAgJHNjb3BlLm15SW50ZXJ2YWwgPSA1MDAwO1xufVxuICA8L2ZpbGU+XG4gIDxmaWxlIG5hbWU9XCJkZW1vLmNzc1wiPlxuICAgIC5jYXJvdXNlbC1pbmRpY2F0b3JzIHtcbiAgICAgIHRvcDogYXV0bztcbiAgICAgIGJvdHRvbTogMTVweDtcbiAgICB9XG4gIDwvZmlsZT5cbjwvZXhhbXBsZT5cbiovXG5cbi5kaXJlY3RpdmUoJ3NsaWRlJywgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcmVxdWlyZTogJ15jYXJvdXNlbCcsXG4gICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUvY2Fyb3VzZWwvc2xpZGUuaHRtbCcsXG4gICAgc2NvcGU6IHtcbiAgICAgIGFjdGl2ZTogJz0/J1xuICAgIH0sXG4gICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY2Fyb3VzZWxDdHJsKSB7XG4gICAgICBjYXJvdXNlbEN0cmwuYWRkU2xpZGUoc2NvcGUsIGVsZW1lbnQpO1xuICAgICAgLy93aGVuIHRoZSBzY29wZSBpcyBkZXN0cm95ZWQgdGhlbiByZW1vdmUgdGhlIHNsaWRlIGZyb20gdGhlIGN1cnJlbnQgc2xpZGVzIGFycmF5XG4gICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNhcm91c2VsQ3RybC5yZW1vdmVTbGlkZShzY29wZSk7XG4gICAgICB9KTtcblxuICAgICAgc2NvcGUuJHdhdGNoKCdhY3RpdmUnLCBmdW5jdGlvbihhY3RpdmUpIHtcbiAgICAgICAgaWYgKGFjdGl2ZSkge1xuICAgICAgICAgIGNhcm91c2VsQ3RybC5zZWxlY3Qoc2NvcGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59KTtcblxuYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC5kYXRlcGFyc2VyJywgW10pXG5cbi5zZXJ2aWNlKCdkYXRlUGFyc2VyJywgWyckbG9jYWxlJywgJ29yZGVyQnlGaWx0ZXInLCBmdW5jdGlvbigkbG9jYWxlLCBvcmRlckJ5RmlsdGVyKSB7XG5cbiAgdGhpcy5wYXJzZXJzID0ge307XG5cbiAgdmFyIGZvcm1hdENvZGVUb1JlZ2V4ID0ge1xuICAgICd5eXl5Jzoge1xuICAgICAgcmVnZXg6ICdcXFxcZHs0fScsXG4gICAgICBhcHBseTogZnVuY3Rpb24odmFsdWUpIHsgdGhpcy55ZWFyID0gK3ZhbHVlOyB9XG4gICAgfSxcbiAgICAneXknOiB7XG4gICAgICByZWdleDogJ1xcXFxkezJ9JyxcbiAgICAgIGFwcGx5OiBmdW5jdGlvbih2YWx1ZSkgeyB0aGlzLnllYXIgPSArdmFsdWUgKyAyMDAwOyB9XG4gICAgfSxcbiAgICAneSc6IHtcbiAgICAgIHJlZ2V4OiAnXFxcXGR7MSw0fScsXG4gICAgICBhcHBseTogZnVuY3Rpb24odmFsdWUpIHsgdGhpcy55ZWFyID0gK3ZhbHVlOyB9XG4gICAgfSxcbiAgICAnTU1NTSc6IHtcbiAgICAgIHJlZ2V4OiAkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFMuTU9OVEguam9pbignfCcpLFxuICAgICAgYXBwbHk6IGZ1bmN0aW9uKHZhbHVlKSB7IHRoaXMubW9udGggPSAkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFMuTU9OVEguaW5kZXhPZih2YWx1ZSk7IH1cbiAgICB9LFxuICAgICdNTU0nOiB7XG4gICAgICByZWdleDogJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLlNIT1JUTU9OVEguam9pbignfCcpLFxuICAgICAgYXBwbHk6IGZ1bmN0aW9uKHZhbHVlKSB7IHRoaXMubW9udGggPSAkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFMuU0hPUlRNT05USC5pbmRleE9mKHZhbHVlKTsgfVxuICAgIH0sXG4gICAgJ01NJzoge1xuICAgICAgcmVnZXg6ICcwWzEtOV18MVswLTJdJyxcbiAgICAgIGFwcGx5OiBmdW5jdGlvbih2YWx1ZSkgeyB0aGlzLm1vbnRoID0gdmFsdWUgLSAxOyB9XG4gICAgfSxcbiAgICAnTSc6IHtcbiAgICAgIHJlZ2V4OiAnWzEtOV18MVswLTJdJyxcbiAgICAgIGFwcGx5OiBmdW5jdGlvbih2YWx1ZSkgeyB0aGlzLm1vbnRoID0gdmFsdWUgLSAxOyB9XG4gICAgfSxcbiAgICAnZGQnOiB7XG4gICAgICByZWdleDogJ1swLTJdWzAtOV17MX18M1swLTFdezF9JyxcbiAgICAgIGFwcGx5OiBmdW5jdGlvbih2YWx1ZSkgeyB0aGlzLmRhdGUgPSArdmFsdWU7IH1cbiAgICB9LFxuICAgICdkJzoge1xuICAgICAgcmVnZXg6ICdbMS0yXT9bMC05XXsxfXwzWzAtMV17MX0nLFxuICAgICAgYXBwbHk6IGZ1bmN0aW9uKHZhbHVlKSB7IHRoaXMuZGF0ZSA9ICt2YWx1ZTsgfVxuICAgIH0sXG4gICAgJ0VFRUUnOiB7XG4gICAgICByZWdleDogJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLkRBWS5qb2luKCd8JylcbiAgICB9LFxuICAgICdFRUUnOiB7XG4gICAgICByZWdleDogJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLlNIT1JUREFZLmpvaW4oJ3wnKVxuICAgIH1cbiAgfTtcblxuICB0aGlzLmNyZWF0ZVBhcnNlciA9IGZ1bmN0aW9uKGZvcm1hdCkge1xuICAgIHZhciBtYXAgPSBbXSwgcmVnZXggPSBmb3JtYXQuc3BsaXQoJycpO1xuXG4gICAgYW5ndWxhci5mb3JFYWNoKGZvcm1hdENvZGVUb1JlZ2V4LCBmdW5jdGlvbihkYXRhLCBjb2RlKSB7XG4gICAgICB2YXIgaW5kZXggPSBmb3JtYXQuaW5kZXhPZihjb2RlKTtcblxuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgZm9ybWF0ID0gZm9ybWF0LnNwbGl0KCcnKTtcblxuICAgICAgICByZWdleFtpbmRleF0gPSAnKCcgKyBkYXRhLnJlZ2V4ICsgJyknO1xuICAgICAgICBmb3JtYXRbaW5kZXhdID0gJyQnOyAvLyBDdXN0b20gc3ltYm9sIHRvIGRlZmluZSBjb25zdW1lZCBwYXJ0IG9mIGZvcm1hdFxuICAgICAgICBmb3IgKHZhciBpID0gaW5kZXggKyAxLCBuID0gaW5kZXggKyBjb2RlLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgIHJlZ2V4W2ldID0gJyc7XG4gICAgICAgICAgZm9ybWF0W2ldID0gJyQnO1xuICAgICAgICB9XG4gICAgICAgIGZvcm1hdCA9IGZvcm1hdC5qb2luKCcnKTtcblxuICAgICAgICBtYXAucHVzaCh7IGluZGV4OiBpbmRleCwgYXBwbHk6IGRhdGEuYXBwbHkgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVnZXg6IG5ldyBSZWdFeHAoJ14nICsgcmVnZXguam9pbignJykgKyAnJCcpLFxuICAgICAgbWFwOiBvcmRlckJ5RmlsdGVyKG1hcCwgJ2luZGV4JylcbiAgICB9O1xuICB9O1xuXG4gIHRoaXMucGFyc2UgPSBmdW5jdGlvbihpbnB1dCwgZm9ybWF0KSB7XG4gICAgaWYgKCAhYW5ndWxhci5pc1N0cmluZyhpbnB1dCkgKSB7XG4gICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxuXG4gICAgZm9ybWF0ID0gJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTW2Zvcm1hdF0gfHwgZm9ybWF0O1xuXG4gICAgaWYgKCAhdGhpcy5wYXJzZXJzW2Zvcm1hdF0gKSB7XG4gICAgICB0aGlzLnBhcnNlcnNbZm9ybWF0XSA9IHRoaXMuY3JlYXRlUGFyc2VyKGZvcm1hdCk7XG4gICAgfVxuXG4gICAgdmFyIHBhcnNlciA9IHRoaXMucGFyc2Vyc1tmb3JtYXRdLFxuICAgICAgICByZWdleCA9IHBhcnNlci5yZWdleCxcbiAgICAgICAgbWFwID0gcGFyc2VyLm1hcCxcbiAgICAgICAgcmVzdWx0cyA9IGlucHV0Lm1hdGNoKHJlZ2V4KTtcblxuICAgIGlmICggcmVzdWx0cyAmJiByZXN1bHRzLmxlbmd0aCApIHtcbiAgICAgIHZhciBmaWVsZHMgPSB7IHllYXI6IDE5MDAsIG1vbnRoOiAwLCBkYXRlOiAxLCBob3VyczogMCB9LCBkdDtcblxuICAgICAgZm9yKCB2YXIgaSA9IDEsIG4gPSByZXN1bHRzLmxlbmd0aDsgaSA8IG47IGkrKyApIHtcbiAgICAgICAgdmFyIG1hcHBlciA9IG1hcFtpLTFdO1xuICAgICAgICBpZiAoIG1hcHBlci5hcHBseSApIHtcbiAgICAgICAgICBtYXBwZXIuYXBwbHkuY2FsbChmaWVsZHMsIHJlc3VsdHNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICggaXNWYWxpZChmaWVsZHMueWVhciwgZmllbGRzLm1vbnRoLCBmaWVsZHMuZGF0ZSkgKSB7XG4gICAgICAgIGR0ID0gbmV3IERhdGUoIGZpZWxkcy55ZWFyLCBmaWVsZHMubW9udGgsIGZpZWxkcy5kYXRlLCBmaWVsZHMuaG91cnMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZHQ7XG4gICAgfVxuICB9O1xuXG4gIC8vIENoZWNrIGlmIGRhdGUgaXMgdmFsaWQgZm9yIHNwZWNpZmljIG1vbnRoIChhbmQgeWVhciBmb3IgRmVicnVhcnkpLlxuICAvLyBNb250aDogMCA9IEphbiwgMSA9IEZlYiwgZXRjXG4gIGZ1bmN0aW9uIGlzVmFsaWQoeWVhciwgbW9udGgsIGRhdGUpIHtcbiAgICBpZiAoIG1vbnRoID09PSAxICYmIGRhdGUgPiAyOCkge1xuICAgICAgICByZXR1cm4gZGF0ZSA9PT0gMjkgJiYgKCh5ZWFyICUgNCA9PT0gMCAmJiB5ZWFyICUgMTAwICE9PSAwKSB8fCB5ZWFyICUgNDAwID09PSAwKTtcbiAgICB9XG5cbiAgICBpZiAoIG1vbnRoID09PSAzIHx8IG1vbnRoID09PSA1IHx8IG1vbnRoID09PSA4IHx8IG1vbnRoID09PSAxMCkge1xuICAgICAgICByZXR1cm4gZGF0ZSA8IDMxO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAucG9zaXRpb24nLCBbXSlcblxuLyoqXG4gKiBBIHNldCBvZiB1dGlsaXR5IG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlIHRvIHJldHJpZXZlIHBvc2l0aW9uIG9mIERPTSBlbGVtZW50cy5cbiAqIEl0IGlzIG1lYW50IHRvIGJlIHVzZWQgd2hlcmUgd2UgbmVlZCB0byBhYnNvbHV0ZS1wb3NpdGlvbiBET00gZWxlbWVudHMgaW5cbiAqIHJlbGF0aW9uIHRvIG90aGVyLCBleGlzdGluZyBlbGVtZW50cyAodGhpcyBpcyB0aGUgY2FzZSBmb3IgdG9vbHRpcHMsIHBvcG92ZXJzLFxuICogdHlwZWFoZWFkIHN1Z2dlc3Rpb25zIGV0Yy4pLlxuICovXG4gIC5mYWN0b3J5KCckcG9zaXRpb24nLCBbJyRkb2N1bWVudCcsICckd2luZG93JywgZnVuY3Rpb24gKCRkb2N1bWVudCwgJHdpbmRvdykge1xuXG4gICAgZnVuY3Rpb24gZ2V0U3R5bGUoZWwsIGNzc3Byb3ApIHtcbiAgICAgIGlmIChlbC5jdXJyZW50U3R5bGUpIHsgLy9JRVxuICAgICAgICByZXR1cm4gZWwuY3VycmVudFN0eWxlW2Nzc3Byb3BdO1xuICAgICAgfSBlbHNlIGlmICgkd2luZG93LmdldENvbXB1dGVkU3R5bGUpIHtcbiAgICAgICAgcmV0dXJuICR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbClbY3NzcHJvcF07XG4gICAgICB9XG4gICAgICAvLyBmaW5hbGx5IHRyeSBhbmQgZ2V0IGlubGluZSBzdHlsZVxuICAgICAgcmV0dXJuIGVsLnN0eWxlW2Nzc3Byb3BdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBhIGdpdmVuIGVsZW1lbnQgaXMgc3RhdGljYWxseSBwb3NpdGlvbmVkXG4gICAgICogQHBhcmFtIGVsZW1lbnQgLSByYXcgRE9NIGVsZW1lbnRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc1N0YXRpY1Bvc2l0aW9uZWQoZWxlbWVudCkge1xuICAgICAgcmV0dXJuIChnZXRTdHlsZShlbGVtZW50LCAncG9zaXRpb24nKSB8fCAnc3RhdGljJyApID09PSAnc3RhdGljJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIHRoZSBjbG9zZXN0LCBub24tc3RhdGljYWxseSBwb3NpdGlvbmVkIHBhcmVudE9mZnNldCBvZiBhIGdpdmVuIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gZWxlbWVudFxuICAgICAqL1xuICAgIHZhciBwYXJlbnRPZmZzZXRFbCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICB2YXIgZG9jRG9tRWwgPSAkZG9jdW1lbnRbMF07XG4gICAgICB2YXIgb2Zmc2V0UGFyZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQgfHwgZG9jRG9tRWw7XG4gICAgICB3aGlsZSAob2Zmc2V0UGFyZW50ICYmIG9mZnNldFBhcmVudCAhPT0gZG9jRG9tRWwgJiYgaXNTdGF0aWNQb3NpdGlvbmVkKG9mZnNldFBhcmVudCkgKSB7XG4gICAgICAgIG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudC5vZmZzZXRQYXJlbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gb2Zmc2V0UGFyZW50IHx8IGRvY0RvbUVsO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgLyoqXG4gICAgICAgKiBQcm92aWRlcyByZWFkLW9ubHkgZXF1aXZhbGVudCBvZiBqUXVlcnkncyBwb3NpdGlvbiBmdW5jdGlvbjpcbiAgICAgICAqIGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9wb3NpdGlvbi9cbiAgICAgICAqL1xuICAgICAgcG9zaXRpb246IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHZhciBlbEJDUiA9IHRoaXMub2Zmc2V0KGVsZW1lbnQpO1xuICAgICAgICB2YXIgb2Zmc2V0UGFyZW50QkNSID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcbiAgICAgICAgdmFyIG9mZnNldFBhcmVudEVsID0gcGFyZW50T2Zmc2V0RWwoZWxlbWVudFswXSk7XG4gICAgICAgIGlmIChvZmZzZXRQYXJlbnRFbCAhPSAkZG9jdW1lbnRbMF0pIHtcbiAgICAgICAgICBvZmZzZXRQYXJlbnRCQ1IgPSB0aGlzLm9mZnNldChhbmd1bGFyLmVsZW1lbnQob2Zmc2V0UGFyZW50RWwpKTtcbiAgICAgICAgICBvZmZzZXRQYXJlbnRCQ1IudG9wICs9IG9mZnNldFBhcmVudEVsLmNsaWVudFRvcCAtIG9mZnNldFBhcmVudEVsLnNjcm9sbFRvcDtcbiAgICAgICAgICBvZmZzZXRQYXJlbnRCQ1IubGVmdCArPSBvZmZzZXRQYXJlbnRFbC5jbGllbnRMZWZ0IC0gb2Zmc2V0UGFyZW50RWwuc2Nyb2xsTGVmdDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBib3VuZGluZ0NsaWVudFJlY3QgPSBlbGVtZW50WzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHdpZHRoOiBib3VuZGluZ0NsaWVudFJlY3Qud2lkdGggfHwgZWxlbWVudC5wcm9wKCdvZmZzZXRXaWR0aCcpLFxuICAgICAgICAgIGhlaWdodDogYm91bmRpbmdDbGllbnRSZWN0LmhlaWdodCB8fCBlbGVtZW50LnByb3AoJ29mZnNldEhlaWdodCcpLFxuICAgICAgICAgIHRvcDogZWxCQ1IudG9wIC0gb2Zmc2V0UGFyZW50QkNSLnRvcCxcbiAgICAgICAgICBsZWZ0OiBlbEJDUi5sZWZ0IC0gb2Zmc2V0UGFyZW50QkNSLmxlZnRcbiAgICAgICAgfTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogUHJvdmlkZXMgcmVhZC1vbmx5IGVxdWl2YWxlbnQgb2YgalF1ZXJ5J3Mgb2Zmc2V0IGZ1bmN0aW9uOlxuICAgICAgICogaHR0cDovL2FwaS5qcXVlcnkuY29tL29mZnNldC9cbiAgICAgICAqL1xuICAgICAgb2Zmc2V0OiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICB2YXIgYm91bmRpbmdDbGllbnRSZWN0ID0gZWxlbWVudFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB3aWR0aDogYm91bmRpbmdDbGllbnRSZWN0LndpZHRoIHx8IGVsZW1lbnQucHJvcCgnb2Zmc2V0V2lkdGgnKSxcbiAgICAgICAgICBoZWlnaHQ6IGJvdW5kaW5nQ2xpZW50UmVjdC5oZWlnaHQgfHwgZWxlbWVudC5wcm9wKCdvZmZzZXRIZWlnaHQnKSxcbiAgICAgICAgICB0b3A6IGJvdW5kaW5nQ2xpZW50UmVjdC50b3AgKyAoJHdpbmRvdy5wYWdlWU9mZnNldCB8fCAkZG9jdW1lbnRbMF0uZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCksXG4gICAgICAgICAgbGVmdDogYm91bmRpbmdDbGllbnRSZWN0LmxlZnQgKyAoJHdpbmRvdy5wYWdlWE9mZnNldCB8fCAkZG9jdW1lbnRbMF0uZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQpXG4gICAgICAgIH07XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIFByb3ZpZGVzIGNvb3JkaW5hdGVzIGZvciB0aGUgdGFyZ2V0RWwgaW4gcmVsYXRpb24gdG8gaG9zdEVsXG4gICAgICAgKi9cbiAgICAgIHBvc2l0aW9uRWxlbWVudHM6IGZ1bmN0aW9uIChob3N0RWwsIHRhcmdldEVsLCBwb3NpdGlvblN0ciwgYXBwZW5kVG9Cb2R5KSB7XG5cbiAgICAgICAgdmFyIHBvc2l0aW9uU3RyUGFydHMgPSBwb3NpdGlvblN0ci5zcGxpdCgnLScpO1xuICAgICAgICB2YXIgcG9zMCA9IHBvc2l0aW9uU3RyUGFydHNbMF0sIHBvczEgPSBwb3NpdGlvblN0clBhcnRzWzFdIHx8ICdjZW50ZXInO1xuXG4gICAgICAgIHZhciBob3N0RWxQb3MsXG4gICAgICAgICAgdGFyZ2V0RWxXaWR0aCxcbiAgICAgICAgICB0YXJnZXRFbEhlaWdodCxcbiAgICAgICAgICB0YXJnZXRFbFBvcztcblxuICAgICAgICBob3N0RWxQb3MgPSBhcHBlbmRUb0JvZHkgPyB0aGlzLm9mZnNldChob3N0RWwpIDogdGhpcy5wb3NpdGlvbihob3N0RWwpO1xuXG4gICAgICAgIHRhcmdldEVsV2lkdGggPSB0YXJnZXRFbC5wcm9wKCdvZmZzZXRXaWR0aCcpO1xuICAgICAgICB0YXJnZXRFbEhlaWdodCA9IHRhcmdldEVsLnByb3AoJ29mZnNldEhlaWdodCcpO1xuXG4gICAgICAgIHZhciBzaGlmdFdpZHRoID0ge1xuICAgICAgICAgIGNlbnRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGhvc3RFbFBvcy5sZWZ0ICsgaG9zdEVsUG9zLndpZHRoIC8gMiAtIHRhcmdldEVsV2lkdGggLyAyO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbGVmdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGhvc3RFbFBvcy5sZWZ0O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcmlnaHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBob3N0RWxQb3MubGVmdCArIGhvc3RFbFBvcy53aWR0aDtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHNoaWZ0SGVpZ2h0ID0ge1xuICAgICAgICAgIGNlbnRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGhvc3RFbFBvcy50b3AgKyBob3N0RWxQb3MuaGVpZ2h0IC8gMiAtIHRhcmdldEVsSGVpZ2h0IC8gMjtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGhvc3RFbFBvcy50b3A7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBib3R0b206IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBob3N0RWxQb3MudG9wICsgaG9zdEVsUG9zLmhlaWdodDtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc3dpdGNoIChwb3MwKSB7XG4gICAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgdGFyZ2V0RWxQb3MgPSB7XG4gICAgICAgICAgICAgIHRvcDogc2hpZnRIZWlnaHRbcG9zMV0oKSxcbiAgICAgICAgICAgICAgbGVmdDogc2hpZnRXaWR0aFtwb3MwXSgpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgICAgICB0YXJnZXRFbFBvcyA9IHtcbiAgICAgICAgICAgICAgdG9wOiBzaGlmdEhlaWdodFtwb3MxXSgpLFxuICAgICAgICAgICAgICBsZWZ0OiBob3N0RWxQb3MubGVmdCAtIHRhcmdldEVsV2lkdGhcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICAgICAgdGFyZ2V0RWxQb3MgPSB7XG4gICAgICAgICAgICAgIHRvcDogc2hpZnRIZWlnaHRbcG9zMF0oKSxcbiAgICAgICAgICAgICAgbGVmdDogc2hpZnRXaWR0aFtwb3MxXSgpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRhcmdldEVsUG9zID0ge1xuICAgICAgICAgICAgICB0b3A6IGhvc3RFbFBvcy50b3AgLSB0YXJnZXRFbEhlaWdodCxcbiAgICAgICAgICAgICAgbGVmdDogc2hpZnRXaWR0aFtwb3MxXSgpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFyZ2V0RWxQb3M7XG4gICAgICB9XG4gICAgfTtcbiAgfV0pO1xuXG5hbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLmRhdGVwaWNrZXInLCBbJ3VpLmJvb3RzdHJhcC5kYXRlcGFyc2VyJywgJ3VpLmJvb3RzdHJhcC5wb3NpdGlvbiddKVxuXG4uY29uc3RhbnQoJ2RhdGVwaWNrZXJDb25maWcnLCB7XG4gIGZvcm1hdERheTogJ2RkJyxcbiAgZm9ybWF0TW9udGg6ICdNTU1NJyxcbiAgZm9ybWF0WWVhcjogJ3l5eXknLFxuICBmb3JtYXREYXlIZWFkZXI6ICdFRUUnLFxuICBmb3JtYXREYXlUaXRsZTogJ01NTU0geXl5eScsXG4gIGZvcm1hdE1vbnRoVGl0bGU6ICd5eXl5JyxcbiAgZGF0ZXBpY2tlck1vZGU6ICdkYXknLFxuICBtaW5Nb2RlOiAnZGF5JyxcbiAgbWF4TW9kZTogJ3llYXInLFxuICBzaG93V2Vla3M6IHRydWUsXG4gIHN0YXJ0aW5nRGF5OiAwLFxuICB5ZWFyUmFuZ2U6IDIwLFxuICBtaW5EYXRlOiBudWxsLFxuICBtYXhEYXRlOiBudWxsXG59KVxuXG4uY29udHJvbGxlcignRGF0ZXBpY2tlckNvbnRyb2xsZXInLCBbJyRzY29wZScsICckYXR0cnMnLCAnJHBhcnNlJywgJyRpbnRlcnBvbGF0ZScsICckdGltZW91dCcsICckbG9nJywgJ2RhdGVGaWx0ZXInLCAnZGF0ZXBpY2tlckNvbmZpZycsIGZ1bmN0aW9uKCRzY29wZSwgJGF0dHJzLCAkcGFyc2UsICRpbnRlcnBvbGF0ZSwgJHRpbWVvdXQsICRsb2csIGRhdGVGaWx0ZXIsIGRhdGVwaWNrZXJDb25maWcpIHtcbiAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgbmdNb2RlbEN0cmwgPSB7ICRzZXRWaWV3VmFsdWU6IGFuZ3VsYXIubm9vcCB9OyAvLyBudWxsTW9kZWxDdHJsO1xuXG4gIC8vIE1vZGVzIGNoYWluXG4gIHRoaXMubW9kZXMgPSBbJ2RheScsICdtb250aCcsICd5ZWFyJ107XG5cbiAgLy8gQ29uZmlndXJhdGlvbiBhdHRyaWJ1dGVzXG4gIGFuZ3VsYXIuZm9yRWFjaChbJ2Zvcm1hdERheScsICdmb3JtYXRNb250aCcsICdmb3JtYXRZZWFyJywgJ2Zvcm1hdERheUhlYWRlcicsICdmb3JtYXREYXlUaXRsZScsICdmb3JtYXRNb250aFRpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAnbWluTW9kZScsICdtYXhNb2RlJywgJ3Nob3dXZWVrcycsICdzdGFydGluZ0RheScsICd5ZWFyUmFuZ2UnXSwgZnVuY3Rpb24oIGtleSwgaW5kZXggKSB7XG4gICAgc2VsZltrZXldID0gYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzW2tleV0pID8gKGluZGV4IDwgOCA/ICRpbnRlcnBvbGF0ZSgkYXR0cnNba2V5XSkoJHNjb3BlLiRwYXJlbnQpIDogJHNjb3BlLiRwYXJlbnQuJGV2YWwoJGF0dHJzW2tleV0pKSA6IGRhdGVwaWNrZXJDb25maWdba2V5XTtcbiAgfSk7XG5cbiAgLy8gV2F0Y2hhYmxlIGF0dHJpYnV0ZXNcbiAgYW5ndWxhci5mb3JFYWNoKFsnbWluRGF0ZScsICdtYXhEYXRlJ10sIGZ1bmN0aW9uKCBrZXkgKSB7XG4gICAgaWYgKCAkYXR0cnNba2V5XSApIHtcbiAgICAgICRzY29wZS4kcGFyZW50LiR3YXRjaCgkcGFyc2UoJGF0dHJzW2tleV0pLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBzZWxmW2tleV0gPSB2YWx1ZSA/IG5ldyBEYXRlKHZhbHVlKSA6IG51bGw7XG4gICAgICAgIHNlbGYucmVmcmVzaFZpZXcoKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmW2tleV0gPSBkYXRlcGlja2VyQ29uZmlnW2tleV0gPyBuZXcgRGF0ZShkYXRlcGlja2VyQ29uZmlnW2tleV0pIDogbnVsbDtcbiAgICB9XG4gIH0pO1xuXG4gICRzY29wZS5kYXRlcGlja2VyTW9kZSA9ICRzY29wZS5kYXRlcGlja2VyTW9kZSB8fCBkYXRlcGlja2VyQ29uZmlnLmRhdGVwaWNrZXJNb2RlO1xuICAkc2NvcGUudW5pcXVlSWQgPSAnZGF0ZXBpY2tlci0nICsgJHNjb3BlLiRpZCArICctJyArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwKTtcbiAgdGhpcy5hY3RpdmVEYXRlID0gYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLmluaXREYXRlKSA/ICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5pbml0RGF0ZSkgOiBuZXcgRGF0ZSgpO1xuXG4gICRzY29wZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uKGRhdGVPYmplY3QpIHtcbiAgICBpZiAoc2VsZi5jb21wYXJlKGRhdGVPYmplY3QuZGF0ZSwgc2VsZi5hY3RpdmVEYXRlKSA9PT0gMCkge1xuICAgICAgJHNjb3BlLmFjdGl2ZURhdGVJZCA9IGRhdGVPYmplY3QudWlkO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICB0aGlzLmluaXQgPSBmdW5jdGlvbiggbmdNb2RlbEN0cmxfICkge1xuICAgIG5nTW9kZWxDdHJsID0gbmdNb2RlbEN0cmxfO1xuXG4gICAgbmdNb2RlbEN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5yZW5kZXIoKTtcbiAgICB9O1xuICB9O1xuXG4gIHRoaXMucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCBuZ01vZGVsQ3RybC4kbW9kZWxWYWx1ZSApIHtcbiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoIG5nTW9kZWxDdHJsLiRtb2RlbFZhbHVlICksXG4gICAgICAgICAgaXNWYWxpZCA9ICFpc05hTihkYXRlKTtcblxuICAgICAgaWYgKCBpc1ZhbGlkICkge1xuICAgICAgICB0aGlzLmFjdGl2ZURhdGUgPSBkYXRlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGxvZy5lcnJvcignRGF0ZXBpY2tlciBkaXJlY3RpdmU6IFwibmctbW9kZWxcIiB2YWx1ZSBtdXN0IGJlIGEgRGF0ZSBvYmplY3QsIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSAwMS4wMS4xOTcwIG9yIGEgc3RyaW5nIHJlcHJlc2VudGluZyBhbiBSRkMyODIyIG9yIElTTyA4NjAxIGRhdGUuJyk7XG4gICAgICB9XG4gICAgICBuZ01vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ2RhdGUnLCBpc1ZhbGlkKTtcbiAgICB9XG4gICAgdGhpcy5yZWZyZXNoVmlldygpO1xuICB9O1xuXG4gIHRoaXMucmVmcmVzaFZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIHRoaXMuZWxlbWVudCApIHtcbiAgICAgIHRoaXMuX3JlZnJlc2hWaWV3KCk7XG5cbiAgICAgIHZhciBkYXRlID0gbmdNb2RlbEN0cmwuJG1vZGVsVmFsdWUgPyBuZXcgRGF0ZShuZ01vZGVsQ3RybC4kbW9kZWxWYWx1ZSkgOiBudWxsO1xuICAgICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdkYXRlLWRpc2FibGVkJywgIWRhdGUgfHwgKHRoaXMuZWxlbWVudCAmJiAhdGhpcy5pc0Rpc2FibGVkKGRhdGUpKSk7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuY3JlYXRlRGF0ZU9iamVjdCA9IGZ1bmN0aW9uKGRhdGUsIGZvcm1hdCkge1xuICAgIHZhciBtb2RlbCA9IG5nTW9kZWxDdHJsLiRtb2RlbFZhbHVlID8gbmV3IERhdGUobmdNb2RlbEN0cmwuJG1vZGVsVmFsdWUpIDogbnVsbDtcbiAgICByZXR1cm4ge1xuICAgICAgZGF0ZTogZGF0ZSxcbiAgICAgIGxhYmVsOiBkYXRlRmlsdGVyKGRhdGUsIGZvcm1hdCksXG4gICAgICBzZWxlY3RlZDogbW9kZWwgJiYgdGhpcy5jb21wYXJlKGRhdGUsIG1vZGVsKSA9PT0gMCxcbiAgICAgIGRpc2FibGVkOiB0aGlzLmlzRGlzYWJsZWQoZGF0ZSksXG4gICAgICBjdXJyZW50OiB0aGlzLmNvbXBhcmUoZGF0ZSwgbmV3IERhdGUoKSkgPT09IDBcbiAgICB9O1xuICB9O1xuXG4gIHRoaXMuaXNEaXNhYmxlZCA9IGZ1bmN0aW9uKCBkYXRlICkge1xuICAgIHJldHVybiAoKHRoaXMubWluRGF0ZSAmJiB0aGlzLmNvbXBhcmUoZGF0ZSwgdGhpcy5taW5EYXRlKSA8IDApIHx8ICh0aGlzLm1heERhdGUgJiYgdGhpcy5jb21wYXJlKGRhdGUsIHRoaXMubWF4RGF0ZSkgPiAwKSB8fCAoJGF0dHJzLmRhdGVEaXNhYmxlZCAmJiAkc2NvcGUuZGF0ZURpc2FibGVkKHtkYXRlOiBkYXRlLCBtb2RlOiAkc2NvcGUuZGF0ZXBpY2tlck1vZGV9KSkpO1xuICB9O1xuXG4gIC8vIFNwbGl0IGFycmF5IGludG8gc21hbGxlciBhcnJheXNcbiAgdGhpcy5zcGxpdCA9IGZ1bmN0aW9uKGFyciwgc2l6ZSkge1xuICAgIHZhciBhcnJheXMgPSBbXTtcbiAgICB3aGlsZSAoYXJyLmxlbmd0aCA+IDApIHtcbiAgICAgIGFycmF5cy5wdXNoKGFyci5zcGxpY2UoMCwgc2l6ZSkpO1xuICAgIH1cbiAgICByZXR1cm4gYXJyYXlzO1xuICB9O1xuXG4gICRzY29wZS5zZWxlY3QgPSBmdW5jdGlvbiggZGF0ZSApIHtcbiAgICBpZiAoICRzY29wZS5kYXRlcGlja2VyTW9kZSA9PT0gc2VsZi5taW5Nb2RlICkge1xuICAgICAgdmFyIGR0ID0gbmdNb2RlbEN0cmwuJG1vZGVsVmFsdWUgPyBuZXcgRGF0ZSggbmdNb2RlbEN0cmwuJG1vZGVsVmFsdWUgKSA6IG5ldyBEYXRlKDAsIDAsIDAsIDAsIDAsIDAsIDApO1xuICAgICAgZHQuc2V0RnVsbFllYXIoIGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpLCBkYXRlLmdldERhdGUoKSApO1xuICAgICAgbmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZSggZHQgKTtcbiAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5hY3RpdmVEYXRlID0gZGF0ZTtcbiAgICAgICRzY29wZS5kYXRlcGlja2VyTW9kZSA9IHNlbGYubW9kZXNbIHNlbGYubW9kZXMuaW5kZXhPZiggJHNjb3BlLmRhdGVwaWNrZXJNb2RlICkgLSAxIF07XG4gICAgfVxuICB9O1xuXG4gICRzY29wZS5tb3ZlID0gZnVuY3Rpb24oIGRpcmVjdGlvbiApIHtcbiAgICB2YXIgeWVhciA9IHNlbGYuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpICsgZGlyZWN0aW9uICogKHNlbGYuc3RlcC55ZWFycyB8fCAwKSxcbiAgICAgICAgbW9udGggPSBzZWxmLmFjdGl2ZURhdGUuZ2V0TW9udGgoKSArIGRpcmVjdGlvbiAqIChzZWxmLnN0ZXAubW9udGhzIHx8IDApO1xuICAgIHNlbGYuYWN0aXZlRGF0ZS5zZXRGdWxsWWVhcih5ZWFyLCBtb250aCwgMSk7XG4gICAgc2VsZi5yZWZyZXNoVmlldygpO1xuICB9O1xuXG4gICRzY29wZS50b2dnbGVNb2RlID0gZnVuY3Rpb24oIGRpcmVjdGlvbiApIHtcbiAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24gfHwgMTtcblxuICAgIGlmICgoJHNjb3BlLmRhdGVwaWNrZXJNb2RlID09PSBzZWxmLm1heE1vZGUgJiYgZGlyZWN0aW9uID09PSAxKSB8fCAoJHNjb3BlLmRhdGVwaWNrZXJNb2RlID09PSBzZWxmLm1pbk1vZGUgJiYgZGlyZWN0aW9uID09PSAtMSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAkc2NvcGUuZGF0ZXBpY2tlck1vZGUgPSBzZWxmLm1vZGVzWyBzZWxmLm1vZGVzLmluZGV4T2YoICRzY29wZS5kYXRlcGlja2VyTW9kZSApICsgZGlyZWN0aW9uIF07XG4gIH07XG5cbiAgLy8gS2V5IGV2ZW50IG1hcHBlclxuICAkc2NvcGUua2V5cyA9IHsgMTM6J2VudGVyJywgMzI6J3NwYWNlJywgMzM6J3BhZ2V1cCcsIDM0OidwYWdlZG93bicsIDM1OidlbmQnLCAzNjonaG9tZScsIDM3OidsZWZ0JywgMzg6J3VwJywgMzk6J3JpZ2h0JywgNDA6J2Rvd24nIH07XG5cbiAgdmFyIGZvY3VzRWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5lbGVtZW50WzBdLmZvY3VzKCk7XG4gICAgfSwgMCAsIGZhbHNlKTtcbiAgfTtcblxuICAvLyBMaXN0ZW4gZm9yIGZvY3VzIHJlcXVlc3RzIGZyb20gcG9wdXAgZGlyZWN0aXZlXG4gICRzY29wZS4kb24oJ2RhdGVwaWNrZXIuZm9jdXMnLCBmb2N1c0VsZW1lbnQpO1xuXG4gICRzY29wZS5rZXlkb3duID0gZnVuY3Rpb24oIGV2dCApIHtcbiAgICB2YXIga2V5ID0gJHNjb3BlLmtleXNbZXZ0LndoaWNoXTtcblxuICAgIGlmICggIWtleSB8fCBldnQuc2hpZnRLZXkgfHwgZXZ0LmFsdEtleSApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICBpZiAoa2V5ID09PSAnZW50ZXInIHx8IGtleSA9PT0gJ3NwYWNlJykge1xuICAgICAgaWYgKCBzZWxmLmlzRGlzYWJsZWQoc2VsZi5hY3RpdmVEYXRlKSkge1xuICAgICAgICByZXR1cm47IC8vIGRvIG5vdGhpbmdcbiAgICAgIH1cbiAgICAgICRzY29wZS5zZWxlY3Qoc2VsZi5hY3RpdmVEYXRlKTtcbiAgICAgIGZvY3VzRWxlbWVudCgpO1xuICAgIH0gZWxzZSBpZiAoZXZ0LmN0cmxLZXkgJiYgKGtleSA9PT0gJ3VwJyB8fCBrZXkgPT09ICdkb3duJykpIHtcbiAgICAgICRzY29wZS50b2dnbGVNb2RlKGtleSA9PT0gJ3VwJyA/IDEgOiAtMSk7XG4gICAgICBmb2N1c0VsZW1lbnQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5oYW5kbGVLZXlEb3duKGtleSwgZXZ0KTtcbiAgICAgIHNlbGYucmVmcmVzaFZpZXcoKTtcbiAgICB9XG4gIH07XG59XSlcblxuLmRpcmVjdGl2ZSggJ2RhdGVwaWNrZXInLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5odG1sJyxcbiAgICBzY29wZToge1xuICAgICAgZGF0ZXBpY2tlck1vZGU6ICc9PycsXG4gICAgICBkYXRlRGlzYWJsZWQ6ICcmJ1xuICAgIH0sXG4gICAgcmVxdWlyZTogWydkYXRlcGlja2VyJywgJz9ebmdNb2RlbCddLFxuICAgIGNvbnRyb2xsZXI6ICdEYXRlcGlja2VyQ29udHJvbGxlcicsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJscykge1xuICAgICAgdmFyIGRhdGVwaWNrZXJDdHJsID0gY3RybHNbMF0sIG5nTW9kZWxDdHJsID0gY3RybHNbMV07XG5cbiAgICAgIGlmICggbmdNb2RlbEN0cmwgKSB7XG4gICAgICAgIGRhdGVwaWNrZXJDdHJsLmluaXQoIG5nTW9kZWxDdHJsICk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufSlcblxuLmRpcmVjdGl2ZSgnZGF5cGlja2VyJywgWydkYXRlRmlsdGVyJywgZnVuY3Rpb24gKGRhdGVGaWx0ZXIpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VBJyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUvZGF0ZXBpY2tlci9kYXkuaHRtbCcsXG4gICAgcmVxdWlyZTogJ15kYXRlcGlja2VyJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmwpIHtcbiAgICAgIHNjb3BlLnNob3dXZWVrcyA9IGN0cmwuc2hvd1dlZWtzO1xuXG4gICAgICBjdHJsLnN0ZXAgPSB7IG1vbnRoczogMSB9O1xuICAgICAgY3RybC5lbGVtZW50ID0gZWxlbWVudDtcblxuICAgICAgdmFyIERBWVNfSU5fTU9OVEggPSBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV07XG4gICAgICBmdW5jdGlvbiBnZXREYXlzSW5Nb250aCggeWVhciwgbW9udGggKSB7XG4gICAgICAgIHJldHVybiAoKG1vbnRoID09PSAxKSAmJiAoeWVhciAlIDQgPT09IDApICYmICgoeWVhciAlIDEwMCAhPT0gMCkgfHwgKHllYXIgJSA0MDAgPT09IDApKSkgPyAyOSA6IERBWVNfSU5fTU9OVEhbbW9udGhdO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBnZXREYXRlcyhzdGFydERhdGUsIG4pIHtcbiAgICAgICAgdmFyIGRhdGVzID0gbmV3IEFycmF5KG4pLCBjdXJyZW50ID0gbmV3IERhdGUoc3RhcnREYXRlKSwgaSA9IDA7XG4gICAgICAgIGN1cnJlbnQuc2V0SG91cnMoMTIpOyAvLyBQcmV2ZW50IHJlcGVhdGVkIGRhdGVzIGJlY2F1c2Ugb2YgdGltZXpvbmUgYnVnXG4gICAgICAgIHdoaWxlICggaSA8IG4gKSB7XG4gICAgICAgICAgZGF0ZXNbaSsrXSA9IG5ldyBEYXRlKGN1cnJlbnQpO1xuICAgICAgICAgIGN1cnJlbnQuc2V0RGF0ZSggY3VycmVudC5nZXREYXRlKCkgKyAxICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGVzO1xuICAgICAgfVxuXG4gICAgICBjdHJsLl9yZWZyZXNoVmlldyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgeWVhciA9IGN0cmwuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpLFxuICAgICAgICAgIG1vbnRoID0gY3RybC5hY3RpdmVEYXRlLmdldE1vbnRoKCksXG4gICAgICAgICAgZmlyc3REYXlPZk1vbnRoID0gbmV3IERhdGUoeWVhciwgbW9udGgsIDEpLFxuICAgICAgICAgIGRpZmZlcmVuY2UgPSBjdHJsLnN0YXJ0aW5nRGF5IC0gZmlyc3REYXlPZk1vbnRoLmdldERheSgpLFxuICAgICAgICAgIG51bURpc3BsYXllZEZyb21QcmV2aW91c01vbnRoID0gKGRpZmZlcmVuY2UgPiAwKSA/IDcgLSBkaWZmZXJlbmNlIDogLSBkaWZmZXJlbmNlLFxuICAgICAgICAgIGZpcnN0RGF0ZSA9IG5ldyBEYXRlKGZpcnN0RGF5T2ZNb250aCk7XG5cbiAgICAgICAgaWYgKCBudW1EaXNwbGF5ZWRGcm9tUHJldmlvdXNNb250aCA+IDAgKSB7XG4gICAgICAgICAgZmlyc3REYXRlLnNldERhdGUoIC0gbnVtRGlzcGxheWVkRnJvbVByZXZpb3VzTW9udGggKyAxICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyA0MiBpcyB0aGUgbnVtYmVyIG9mIGRheXMgb24gYSBzaXgtbW9udGggY2FsZW5kYXJcbiAgICAgICAgdmFyIGRheXMgPSBnZXREYXRlcyhmaXJzdERhdGUsIDQyKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0MjsgaSArKykge1xuICAgICAgICAgIGRheXNbaV0gPSBhbmd1bGFyLmV4dGVuZChjdHJsLmNyZWF0ZURhdGVPYmplY3QoZGF5c1tpXSwgY3RybC5mb3JtYXREYXkpLCB7XG4gICAgICAgICAgICBzZWNvbmRhcnk6IGRheXNbaV0uZ2V0TW9udGgoKSAhPT0gbW9udGgsXG4gICAgICAgICAgICB1aWQ6IHNjb3BlLnVuaXF1ZUlkICsgJy0nICsgaVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgc2NvcGUubGFiZWxzID0gbmV3IEFycmF5KDcpO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDc7IGorKykge1xuICAgICAgICAgIHNjb3BlLmxhYmVsc1tqXSA9IHtcbiAgICAgICAgICAgIGFiYnI6IGRhdGVGaWx0ZXIoZGF5c1tqXS5kYXRlLCBjdHJsLmZvcm1hdERheUhlYWRlciksXG4gICAgICAgICAgICBmdWxsOiBkYXRlRmlsdGVyKGRheXNbal0uZGF0ZSwgJ0VFRUUnKVxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBzY29wZS50aXRsZSA9IGRhdGVGaWx0ZXIoY3RybC5hY3RpdmVEYXRlLCBjdHJsLmZvcm1hdERheVRpdGxlKTtcbiAgICAgICAgc2NvcGUucm93cyA9IGN0cmwuc3BsaXQoZGF5cywgNyk7XG5cbiAgICAgICAgaWYgKCBzY29wZS5zaG93V2Vla3MgKSB7XG4gICAgICAgICAgc2NvcGUud2Vla051bWJlcnMgPSBbXTtcbiAgICAgICAgICB2YXIgd2Vla051bWJlciA9IGdldElTTzg2MDFXZWVrTnVtYmVyKCBzY29wZS5yb3dzWzBdWzBdLmRhdGUgKSxcbiAgICAgICAgICAgICAgbnVtV2Vla3MgPSBzY29wZS5yb3dzLmxlbmd0aDtcbiAgICAgICAgICB3aGlsZSggc2NvcGUud2Vla051bWJlcnMucHVzaCh3ZWVrTnVtYmVyKyspIDwgbnVtV2Vla3MgKSB7fVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjdHJsLmNvbXBhcmUgPSBmdW5jdGlvbihkYXRlMSwgZGF0ZTIpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgRGF0ZSggZGF0ZTEuZ2V0RnVsbFllYXIoKSwgZGF0ZTEuZ2V0TW9udGgoKSwgZGF0ZTEuZ2V0RGF0ZSgpICkgLSBuZXcgRGF0ZSggZGF0ZTIuZ2V0RnVsbFllYXIoKSwgZGF0ZTIuZ2V0TW9udGgoKSwgZGF0ZTIuZ2V0RGF0ZSgpICkgKTtcbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIGdldElTTzg2MDFXZWVrTnVtYmVyKGRhdGUpIHtcbiAgICAgICAgdmFyIGNoZWNrRGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xuICAgICAgICBjaGVja0RhdGUuc2V0RGF0ZShjaGVja0RhdGUuZ2V0RGF0ZSgpICsgNCAtIChjaGVja0RhdGUuZ2V0RGF5KCkgfHwgNykpOyAvLyBUaHVyc2RheVxuICAgICAgICB2YXIgdGltZSA9IGNoZWNrRGF0ZS5nZXRUaW1lKCk7XG4gICAgICAgIGNoZWNrRGF0ZS5zZXRNb250aCgwKTsgLy8gQ29tcGFyZSB3aXRoIEphbiAxXG4gICAgICAgIGNoZWNrRGF0ZS5zZXREYXRlKDEpO1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJvdW5kKCh0aW1lIC0gY2hlY2tEYXRlKSAvIDg2NDAwMDAwKSAvIDcpICsgMTtcbiAgICAgIH1cblxuICAgICAgY3RybC5oYW5kbGVLZXlEb3duID0gZnVuY3Rpb24oIGtleSwgZXZ0ICkge1xuICAgICAgICB2YXIgZGF0ZSA9IGN0cmwuYWN0aXZlRGF0ZS5nZXREYXRlKCk7XG5cbiAgICAgICAgaWYgKGtleSA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgZGF0ZSA9IGRhdGUgLSAxOyAgIC8vIHVwXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAndXAnKSB7XG4gICAgICAgICAgZGF0ZSA9IGRhdGUgLSA3OyAgIC8vIGRvd25cbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICBkYXRlID0gZGF0ZSArIDE7ICAgLy8gZG93blxuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2Rvd24nKSB7XG4gICAgICAgICAgZGF0ZSA9IGRhdGUgKyA3O1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ3BhZ2V1cCcgfHwga2V5ID09PSAncGFnZWRvd24nKSB7XG4gICAgICAgICAgdmFyIG1vbnRoID0gY3RybC5hY3RpdmVEYXRlLmdldE1vbnRoKCkgKyAoa2V5ID09PSAncGFnZXVwJyA/IC0gMSA6IDEpO1xuICAgICAgICAgIGN0cmwuYWN0aXZlRGF0ZS5zZXRNb250aChtb250aCwgMSk7XG4gICAgICAgICAgZGF0ZSA9IE1hdGgubWluKGdldERheXNJbk1vbnRoKGN0cmwuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpLCBjdHJsLmFjdGl2ZURhdGUuZ2V0TW9udGgoKSksIGRhdGUpO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2hvbWUnKSB7XG4gICAgICAgICAgZGF0ZSA9IDE7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnZW5kJykge1xuICAgICAgICAgIGRhdGUgPSBnZXREYXlzSW5Nb250aChjdHJsLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSwgY3RybC5hY3RpdmVEYXRlLmdldE1vbnRoKCkpO1xuICAgICAgICB9XG4gICAgICAgIGN0cmwuYWN0aXZlRGF0ZS5zZXREYXRlKGRhdGUpO1xuICAgICAgfTtcblxuICAgICAgY3RybC5yZWZyZXNoVmlldygpO1xuICAgIH1cbiAgfTtcbn1dKVxuXG4uZGlyZWN0aXZlKCdtb250aHBpY2tlcicsIFsnZGF0ZUZpbHRlcicsIGZ1bmN0aW9uIChkYXRlRmlsdGVyKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlL2RhdGVwaWNrZXIvbW9udGguaHRtbCcsXG4gICAgcmVxdWlyZTogJ15kYXRlcGlja2VyJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmwpIHtcbiAgICAgIGN0cmwuc3RlcCA9IHsgeWVhcnM6IDEgfTtcbiAgICAgIGN0cmwuZWxlbWVudCA9IGVsZW1lbnQ7XG5cbiAgICAgIGN0cmwuX3JlZnJlc2hWaWV3ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBtb250aHMgPSBuZXcgQXJyYXkoMTIpLFxuICAgICAgICAgICAgeWVhciA9IGN0cmwuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpO1xuXG4gICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IDEyOyBpKysgKSB7XG4gICAgICAgICAgbW9udGhzW2ldID0gYW5ndWxhci5leHRlbmQoY3RybC5jcmVhdGVEYXRlT2JqZWN0KG5ldyBEYXRlKHllYXIsIGksIDEpLCBjdHJsLmZvcm1hdE1vbnRoKSwge1xuICAgICAgICAgICAgdWlkOiBzY29wZS51bmlxdWVJZCArICctJyArIGlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNjb3BlLnRpdGxlID0gZGF0ZUZpbHRlcihjdHJsLmFjdGl2ZURhdGUsIGN0cmwuZm9ybWF0TW9udGhUaXRsZSk7XG4gICAgICAgIHNjb3BlLnJvd3MgPSBjdHJsLnNwbGl0KG1vbnRocywgMyk7XG4gICAgICB9O1xuXG4gICAgICBjdHJsLmNvbXBhcmUgPSBmdW5jdGlvbihkYXRlMSwgZGF0ZTIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCBkYXRlMS5nZXRGdWxsWWVhcigpLCBkYXRlMS5nZXRNb250aCgpICkgLSBuZXcgRGF0ZSggZGF0ZTIuZ2V0RnVsbFllYXIoKSwgZGF0ZTIuZ2V0TW9udGgoKSApO1xuICAgICAgfTtcblxuICAgICAgY3RybC5oYW5kbGVLZXlEb3duID0gZnVuY3Rpb24oIGtleSwgZXZ0ICkge1xuICAgICAgICB2YXIgZGF0ZSA9IGN0cmwuYWN0aXZlRGF0ZS5nZXRNb250aCgpO1xuXG4gICAgICAgIGlmIChrZXkgPT09ICdsZWZ0Jykge1xuICAgICAgICAgIGRhdGUgPSBkYXRlIC0gMTsgICAvLyB1cFxuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ3VwJykge1xuICAgICAgICAgIGRhdGUgPSBkYXRlIC0gMzsgICAvLyBkb3duXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgZGF0ZSA9IGRhdGUgKyAxOyAgIC8vIGRvd25cbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdkb3duJykge1xuICAgICAgICAgIGRhdGUgPSBkYXRlICsgMztcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdwYWdldXAnIHx8IGtleSA9PT0gJ3BhZ2Vkb3duJykge1xuICAgICAgICAgIHZhciB5ZWFyID0gY3RybC5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkgKyAoa2V5ID09PSAncGFnZXVwJyA/IC0gMSA6IDEpO1xuICAgICAgICAgIGN0cmwuYWN0aXZlRGF0ZS5zZXRGdWxsWWVhcih5ZWFyKTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdob21lJykge1xuICAgICAgICAgIGRhdGUgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2VuZCcpIHtcbiAgICAgICAgICBkYXRlID0gMTE7XG4gICAgICAgIH1cbiAgICAgICAgY3RybC5hY3RpdmVEYXRlLnNldE1vbnRoKGRhdGUpO1xuICAgICAgfTtcblxuICAgICAgY3RybC5yZWZyZXNoVmlldygpO1xuICAgIH1cbiAgfTtcbn1dKVxuXG4uZGlyZWN0aXZlKCd5ZWFycGlja2VyJywgWydkYXRlRmlsdGVyJywgZnVuY3Rpb24gKGRhdGVGaWx0ZXIpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VBJyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUvZGF0ZXBpY2tlci95ZWFyLmh0bWwnLFxuICAgIHJlcXVpcmU6ICdeZGF0ZXBpY2tlcicsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsKSB7XG4gICAgICB2YXIgcmFuZ2UgPSBjdHJsLnllYXJSYW5nZTtcblxuICAgICAgY3RybC5zdGVwID0geyB5ZWFyczogcmFuZ2UgfTtcbiAgICAgIGN0cmwuZWxlbWVudCA9IGVsZW1lbnQ7XG5cbiAgICAgIGZ1bmN0aW9uIGdldFN0YXJ0aW5nWWVhciggeWVhciApIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KCh5ZWFyIC0gMSkgLyByYW5nZSwgMTApICogcmFuZ2UgKyAxO1xuICAgICAgfVxuXG4gICAgICBjdHJsLl9yZWZyZXNoVmlldyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgeWVhcnMgPSBuZXcgQXJyYXkocmFuZ2UpO1xuXG4gICAgICAgIGZvciAoIHZhciBpID0gMCwgc3RhcnQgPSBnZXRTdGFydGluZ1llYXIoY3RybC5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkpOyBpIDwgcmFuZ2U7IGkrKyApIHtcbiAgICAgICAgICB5ZWFyc1tpXSA9IGFuZ3VsYXIuZXh0ZW5kKGN0cmwuY3JlYXRlRGF0ZU9iamVjdChuZXcgRGF0ZShzdGFydCArIGksIDAsIDEpLCBjdHJsLmZvcm1hdFllYXIpLCB7XG4gICAgICAgICAgICB1aWQ6IHNjb3BlLnVuaXF1ZUlkICsgJy0nICsgaVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgc2NvcGUudGl0bGUgPSBbeWVhcnNbMF0ubGFiZWwsIHllYXJzW3JhbmdlIC0gMV0ubGFiZWxdLmpvaW4oJyAtICcpO1xuICAgICAgICBzY29wZS5yb3dzID0gY3RybC5zcGxpdCh5ZWFycywgNSk7XG4gICAgICB9O1xuXG4gICAgICBjdHJsLmNvbXBhcmUgPSBmdW5jdGlvbihkYXRlMSwgZGF0ZTIpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUxLmdldEZ1bGxZZWFyKCkgLSBkYXRlMi5nZXRGdWxsWWVhcigpO1xuICAgICAgfTtcblxuICAgICAgY3RybC5oYW5kbGVLZXlEb3duID0gZnVuY3Rpb24oIGtleSwgZXZ0ICkge1xuICAgICAgICB2YXIgZGF0ZSA9IGN0cmwuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpO1xuXG4gICAgICAgIGlmIChrZXkgPT09ICdsZWZ0Jykge1xuICAgICAgICAgIGRhdGUgPSBkYXRlIC0gMTsgICAvLyB1cFxuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ3VwJykge1xuICAgICAgICAgIGRhdGUgPSBkYXRlIC0gNTsgICAvLyBkb3duXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgZGF0ZSA9IGRhdGUgKyAxOyAgIC8vIGRvd25cbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdkb3duJykge1xuICAgICAgICAgIGRhdGUgPSBkYXRlICsgNTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdwYWdldXAnIHx8IGtleSA9PT0gJ3BhZ2Vkb3duJykge1xuICAgICAgICAgIGRhdGUgKz0gKGtleSA9PT0gJ3BhZ2V1cCcgPyAtIDEgOiAxKSAqIGN0cmwuc3RlcC55ZWFycztcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdob21lJykge1xuICAgICAgICAgIGRhdGUgPSBnZXRTdGFydGluZ1llYXIoIGN0cmwuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpICk7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnZW5kJykge1xuICAgICAgICAgIGRhdGUgPSBnZXRTdGFydGluZ1llYXIoIGN0cmwuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpICkgKyByYW5nZSAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgY3RybC5hY3RpdmVEYXRlLnNldEZ1bGxZZWFyKGRhdGUpO1xuICAgICAgfTtcblxuICAgICAgY3RybC5yZWZyZXNoVmlldygpO1xuICAgIH1cbiAgfTtcbn1dKVxuXG4uY29uc3RhbnQoJ2RhdGVwaWNrZXJQb3B1cENvbmZpZycsIHtcbiAgZGF0ZXBpY2tlclBvcHVwOiAneXl5eS1NTS1kZCcsXG4gIGN1cnJlbnRUZXh0OiAnVG9kYXknLFxuICBjbGVhclRleHQ6ICdDbGVhcicsXG4gIGNsb3NlVGV4dDogJ0RvbmUnLFxuICBjbG9zZU9uRGF0ZVNlbGVjdGlvbjogdHJ1ZSxcbiAgYXBwZW5kVG9Cb2R5OiBmYWxzZSxcbiAgc2hvd0J1dHRvbkJhcjogdHJ1ZVxufSlcblxuLmRpcmVjdGl2ZSgnZGF0ZXBpY2tlclBvcHVwJywgWyckY29tcGlsZScsICckcGFyc2UnLCAnJGRvY3VtZW50JywgJyRwb3NpdGlvbicsICdkYXRlRmlsdGVyJywgJ2RhdGVQYXJzZXInLCAnZGF0ZXBpY2tlclBvcHVwQ29uZmlnJyxcbmZ1bmN0aW9uICgkY29tcGlsZSwgJHBhcnNlLCAkZG9jdW1lbnQsICRwb3NpdGlvbiwgZGF0ZUZpbHRlciwgZGF0ZVBhcnNlciwgZGF0ZXBpY2tlclBvcHVwQ29uZmlnKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgIHNjb3BlOiB7XG4gICAgICBpc09wZW46ICc9PycsXG4gICAgICBjdXJyZW50VGV4dDogJ0AnLFxuICAgICAgY2xlYXJUZXh0OiAnQCcsXG4gICAgICBjbG9zZVRleHQ6ICdAJyxcbiAgICAgIGRhdGVEaXNhYmxlZDogJyYnXG4gICAgfSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcbiAgICAgIHZhciBkYXRlRm9ybWF0LFxuICAgICAgICAgIGNsb3NlT25EYXRlU2VsZWN0aW9uID0gYW5ndWxhci5pc0RlZmluZWQoYXR0cnMuY2xvc2VPbkRhdGVTZWxlY3Rpb24pID8gc2NvcGUuJHBhcmVudC4kZXZhbChhdHRycy5jbG9zZU9uRGF0ZVNlbGVjdGlvbikgOiBkYXRlcGlja2VyUG9wdXBDb25maWcuY2xvc2VPbkRhdGVTZWxlY3Rpb24sXG4gICAgICAgICAgYXBwZW5kVG9Cb2R5ID0gYW5ndWxhci5pc0RlZmluZWQoYXR0cnMuZGF0ZXBpY2tlckFwcGVuZFRvQm9keSkgPyBzY29wZS4kcGFyZW50LiRldmFsKGF0dHJzLmRhdGVwaWNrZXJBcHBlbmRUb0JvZHkpIDogZGF0ZXBpY2tlclBvcHVwQ29uZmlnLmFwcGVuZFRvQm9keTtcblxuICAgICAgc2NvcGUuc2hvd0J1dHRvbkJhciA9IGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJzLnNob3dCdXR0b25CYXIpID8gc2NvcGUuJHBhcmVudC4kZXZhbChhdHRycy5zaG93QnV0dG9uQmFyKSA6IGRhdGVwaWNrZXJQb3B1cENvbmZpZy5zaG93QnV0dG9uQmFyO1xuXG4gICAgICBzY29wZS5nZXRUZXh0ID0gZnVuY3Rpb24oIGtleSApIHtcbiAgICAgICAgcmV0dXJuIHNjb3BlW2tleSArICdUZXh0J10gfHwgZGF0ZXBpY2tlclBvcHVwQ29uZmlnW2tleSArICdUZXh0J107XG4gICAgICB9O1xuXG4gICAgICBhdHRycy4kb2JzZXJ2ZSgnZGF0ZXBpY2tlclBvcHVwJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBkYXRlRm9ybWF0ID0gdmFsdWUgfHwgZGF0ZXBpY2tlclBvcHVwQ29uZmlnLmRhdGVwaWNrZXJQb3B1cDtcbiAgICAgICAgICBuZ01vZGVsLiRyZW5kZXIoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBwb3B1cCBlbGVtZW50IHVzZWQgdG8gZGlzcGxheSBjYWxlbmRhclxuICAgICAgdmFyIHBvcHVwRWwgPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXYgZGF0ZXBpY2tlci1wb3B1cC13cmFwPjxkaXYgZGF0ZXBpY2tlcj48L2Rpdj48L2Rpdj4nKTtcbiAgICAgIHBvcHVwRWwuYXR0cih7XG4gICAgICAgICduZy1tb2RlbCc6ICdkYXRlJyxcbiAgICAgICAgJ25nLWNoYW5nZSc6ICdkYXRlU2VsZWN0aW9uKCknXG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gY2FtZWx0b0Rhc2goIHN0cmluZyApe1xuICAgICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyhbQS1aXSkvZywgZnVuY3Rpb24oJDEpIHsgcmV0dXJuICctJyArICQxLnRvTG93ZXJDYXNlKCk7IH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBkYXRlcGlja2VyIGVsZW1lbnRcbiAgICAgIHZhciBkYXRlcGlja2VyRWwgPSBhbmd1bGFyLmVsZW1lbnQocG9wdXBFbC5jaGlsZHJlbigpWzBdKTtcbiAgICAgIGlmICggYXR0cnMuZGF0ZXBpY2tlck9wdGlvbnMgKSB7XG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzY29wZS4kcGFyZW50LiRldmFsKGF0dHJzLmRhdGVwaWNrZXJPcHRpb25zKSwgZnVuY3Rpb24oIHZhbHVlLCBvcHRpb24gKSB7XG4gICAgICAgICAgZGF0ZXBpY2tlckVsLmF0dHIoIGNhbWVsdG9EYXNoKG9wdGlvbiksIHZhbHVlICk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBhbmd1bGFyLmZvckVhY2goWydtaW5EYXRlJywgJ21heERhdGUnXSwgZnVuY3Rpb24oIGtleSApIHtcbiAgICAgICAgaWYgKCBhdHRyc1trZXldICkge1xuICAgICAgICAgIHNjb3BlLiRwYXJlbnQuJHdhdGNoKCRwYXJzZShhdHRyc1trZXldKSwgZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgICAgc2NvcGVba2V5XSA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRhdGVwaWNrZXJFbC5hdHRyKGNhbWVsdG9EYXNoKGtleSksIGtleSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGF0dHJzLmRhdGVEaXNhYmxlZCkge1xuICAgICAgICBkYXRlcGlja2VyRWwuYXR0cignZGF0ZS1kaXNhYmxlZCcsICdkYXRlRGlzYWJsZWQoeyBkYXRlOiBkYXRlLCBtb2RlOiBtb2RlIH0pJyk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHBhcnNlRGF0ZSh2aWV3VmFsdWUpIHtcbiAgICAgICAgaWYgKCF2aWV3VmFsdWUpIHtcbiAgICAgICAgICBuZ01vZGVsLiRzZXRWYWxpZGl0eSgnZGF0ZScsIHRydWUpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKGFuZ3VsYXIuaXNEYXRlKHZpZXdWYWx1ZSkgJiYgIWlzTmFOKHZpZXdWYWx1ZSkpIHtcbiAgICAgICAgICBuZ01vZGVsLiRzZXRWYWxpZGl0eSgnZGF0ZScsIHRydWUpO1xuICAgICAgICAgIHJldHVybiB2aWV3VmFsdWU7XG4gICAgICAgIH0gZWxzZSBpZiAoYW5ndWxhci5pc1N0cmluZyh2aWV3VmFsdWUpKSB7XG4gICAgICAgICAgdmFyIGRhdGUgPSBkYXRlUGFyc2VyLnBhcnNlKHZpZXdWYWx1ZSwgZGF0ZUZvcm1hdCkgfHwgbmV3IERhdGUodmlld1ZhbHVlKTtcbiAgICAgICAgICBpZiAoaXNOYU4oZGF0ZSkpIHtcbiAgICAgICAgICAgIG5nTW9kZWwuJHNldFZhbGlkaXR5KCdkYXRlJywgZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmdNb2RlbC4kc2V0VmFsaWRpdHkoJ2RhdGUnLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiBkYXRlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZ01vZGVsLiRzZXRWYWxpZGl0eSgnZGF0ZScsIGZhbHNlKTtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBuZ01vZGVsLiRwYXJzZXJzLnVuc2hpZnQocGFyc2VEYXRlKTtcblxuICAgICAgLy8gSW5uZXIgY2hhbmdlXG4gICAgICBzY29wZS5kYXRlU2VsZWN0aW9uID0gZnVuY3Rpb24oZHQpIHtcbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGR0KSkge1xuICAgICAgICAgIHNjb3BlLmRhdGUgPSBkdDtcbiAgICAgICAgfVxuICAgICAgICBuZ01vZGVsLiRzZXRWaWV3VmFsdWUoc2NvcGUuZGF0ZSk7XG4gICAgICAgIG5nTW9kZWwuJHJlbmRlcigpO1xuXG4gICAgICAgIGlmICggY2xvc2VPbkRhdGVTZWxlY3Rpb24gKSB7XG4gICAgICAgICAgc2NvcGUuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgZWxlbWVudFswXS5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBlbGVtZW50LmJpbmQoJ2lucHV0IGNoYW5nZSBrZXl1cCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2NvcGUuZGF0ZSA9IG5nTW9kZWwuJG1vZGVsVmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIE91dHRlciBjaGFuZ2VcbiAgICAgIG5nTW9kZWwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZGF0ZSA9IG5nTW9kZWwuJHZpZXdWYWx1ZSA/IGRhdGVGaWx0ZXIobmdNb2RlbC4kdmlld1ZhbHVlLCBkYXRlRm9ybWF0KSA6ICcnO1xuICAgICAgICBlbGVtZW50LnZhbChkYXRlKTtcbiAgICAgICAgc2NvcGUuZGF0ZSA9IHBhcnNlRGF0ZSggbmdNb2RlbC4kbW9kZWxWYWx1ZSApO1xuICAgICAgfTtcblxuICAgICAgdmFyIGRvY3VtZW50Q2xpY2tCaW5kID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKHNjb3BlLmlzT3BlbiAmJiBldmVudC50YXJnZXQgIT09IGVsZW1lbnRbMF0pIHtcbiAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzY29wZS5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIGtleWRvd24gPSBmdW5jdGlvbihldnQsIG5vQXBwbHkpIHtcbiAgICAgICAgc2NvcGUua2V5ZG93bihldnQpO1xuICAgICAgfTtcbiAgICAgIGVsZW1lbnQuYmluZCgna2V5ZG93bicsIGtleWRvd24pO1xuXG4gICAgICBzY29wZS5rZXlkb3duID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgIGlmIChldnQud2hpY2ggPT09IDI3KSB7XG4gICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIHNjb3BlLmNsb3NlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZ0LndoaWNoID09PSA0MCAmJiAhc2NvcGUuaXNPcGVuKSB7XG4gICAgICAgICAgc2NvcGUuaXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgc2NvcGUuJHdhdGNoKCdpc09wZW4nLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICBzY29wZS4kYnJvYWRjYXN0KCdkYXRlcGlja2VyLmZvY3VzJyk7XG4gICAgICAgICAgc2NvcGUucG9zaXRpb24gPSBhcHBlbmRUb0JvZHkgPyAkcG9zaXRpb24ub2Zmc2V0KGVsZW1lbnQpIDogJHBvc2l0aW9uLnBvc2l0aW9uKGVsZW1lbnQpO1xuICAgICAgICAgIHNjb3BlLnBvc2l0aW9uLnRvcCA9IHNjb3BlLnBvc2l0aW9uLnRvcCArIGVsZW1lbnQucHJvcCgnb2Zmc2V0SGVpZ2h0Jyk7XG5cbiAgICAgICAgICAkZG9jdW1lbnQuYmluZCgnY2xpY2snLCBkb2N1bWVudENsaWNrQmluZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJGRvY3VtZW50LnVuYmluZCgnY2xpY2snLCBkb2N1bWVudENsaWNrQmluZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBzY29wZS5zZWxlY3QgPSBmdW5jdGlvbiggZGF0ZSApIHtcbiAgICAgICAgaWYgKGRhdGUgPT09ICd0b2RheScpIHtcbiAgICAgICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGF0ZShuZ01vZGVsLiRtb2RlbFZhbHVlKSkge1xuICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKG5nTW9kZWwuJG1vZGVsVmFsdWUpO1xuICAgICAgICAgICAgZGF0ZS5zZXRGdWxsWWVhcih0b2RheS5nZXRGdWxsWWVhcigpLCB0b2RheS5nZXRNb250aCgpLCB0b2RheS5nZXREYXRlKCkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXRlID0gbmV3IERhdGUodG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzY29wZS5kYXRlU2VsZWN0aW9uKCBkYXRlICk7XG4gICAgICB9O1xuXG4gICAgICBzY29wZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzY29wZS5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgZWxlbWVudFswXS5mb2N1cygpO1xuICAgICAgfTtcblxuICAgICAgdmFyICRwb3B1cCA9ICRjb21waWxlKHBvcHVwRWwpKHNjb3BlKTtcbiAgICAgIGlmICggYXBwZW5kVG9Cb2R5ICkge1xuICAgICAgICAkZG9jdW1lbnQuZmluZCgnYm9keScpLmFwcGVuZCgkcG9wdXApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5hZnRlcigkcG9wdXApO1xuICAgICAgfVxuXG4gICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICRwb3B1cC5yZW1vdmUoKTtcbiAgICAgICAgZWxlbWVudC51bmJpbmQoJ2tleWRvd24nLCBrZXlkb3duKTtcbiAgICAgICAgJGRvY3VtZW50LnVuYmluZCgnY2xpY2snLCBkb2N1bWVudENsaWNrQmluZCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XSlcblxuLmRpcmVjdGl2ZSgnZGF0ZXBpY2tlclBvcHVwV3JhcCcsIGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OidFQScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUvZGF0ZXBpY2tlci9wb3B1cC5odG1sJyxcbiAgICBsaW5rOmZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgIGVsZW1lbnQuYmluZCgnY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn0pO1xuXG5hbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLmRyb3Bkb3duJywgW10pXG5cbi5jb25zdGFudCgnZHJvcGRvd25Db25maWcnLCB7XG4gIG9wZW5DbGFzczogJ29wZW4nXG59KVxuXG4uc2VydmljZSgnZHJvcGRvd25TZXJ2aWNlJywgWyckZG9jdW1lbnQnLCBmdW5jdGlvbigkZG9jdW1lbnQpIHtcbiAgdmFyIG9wZW5TY29wZSA9IG51bGw7XG5cbiAgdGhpcy5vcGVuID0gZnVuY3Rpb24oIGRyb3Bkb3duU2NvcGUgKSB7XG4gICAgaWYgKCAhb3BlblNjb3BlICkge1xuICAgICAgJGRvY3VtZW50LmJpbmQoJ2NsaWNrJywgY2xvc2VEcm9wZG93bik7XG4gICAgICAkZG9jdW1lbnQuYmluZCgna2V5ZG93bicsIGVzY2FwZUtleUJpbmQpO1xuICAgIH1cblxuICAgIGlmICggb3BlblNjb3BlICYmIG9wZW5TY29wZSAhPT0gZHJvcGRvd25TY29wZSApIHtcbiAgICAgICAgb3BlblNjb3BlLmlzT3BlbiA9IGZhbHNlO1xuICAgIH1cblxuICAgIG9wZW5TY29wZSA9IGRyb3Bkb3duU2NvcGU7XG4gIH07XG5cbiAgdGhpcy5jbG9zZSA9IGZ1bmN0aW9uKCBkcm9wZG93blNjb3BlICkge1xuICAgIGlmICggb3BlblNjb3BlID09PSBkcm9wZG93blNjb3BlICkge1xuICAgICAgb3BlblNjb3BlID0gbnVsbDtcbiAgICAgICRkb2N1bWVudC51bmJpbmQoJ2NsaWNrJywgY2xvc2VEcm9wZG93bik7XG4gICAgICAkZG9jdW1lbnQudW5iaW5kKCdrZXlkb3duJywgZXNjYXBlS2V5QmluZCk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBjbG9zZURyb3Bkb3duID0gZnVuY3Rpb24oIGV2dCApIHtcbiAgICBpZiAoZXZ0ICYmIGV2dC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgb3BlblNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgIG9wZW5TY29wZS5pc09wZW4gPSBmYWxzZTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgZXNjYXBlS2V5QmluZCA9IGZ1bmN0aW9uKCBldnQgKSB7XG4gICAgaWYgKCBldnQud2hpY2ggPT09IDI3ICkge1xuICAgICAgb3BlblNjb3BlLmZvY3VzVG9nZ2xlRWxlbWVudCgpO1xuICAgICAgY2xvc2VEcm9wZG93bigpO1xuICAgIH1cbiAgfTtcbn1dKVxuXG4uY29udHJvbGxlcignRHJvcGRvd25Db250cm9sbGVyJywgWyckc2NvcGUnLCAnJGF0dHJzJywgJyRwYXJzZScsICdkcm9wZG93bkNvbmZpZycsICdkcm9wZG93blNlcnZpY2UnLCAnJGFuaW1hdGUnLCBmdW5jdGlvbigkc2NvcGUsICRhdHRycywgJHBhcnNlLCBkcm9wZG93bkNvbmZpZywgZHJvcGRvd25TZXJ2aWNlLCAkYW5pbWF0ZSkge1xuICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICBzY29wZSA9ICRzY29wZS4kbmV3KCksIC8vIGNyZWF0ZSBhIGNoaWxkIHNjb3BlIHNvIHdlIGFyZSBub3QgcG9sbHV0aW5nIG9yaWdpbmFsIG9uZVxuICAgICAgb3BlbkNsYXNzID0gZHJvcGRvd25Db25maWcub3BlbkNsYXNzLFxuICAgICAgZ2V0SXNPcGVuLFxuICAgICAgc2V0SXNPcGVuID0gYW5ndWxhci5ub29wLFxuICAgICAgdG9nZ2xlSW52b2tlciA9ICRhdHRycy5vblRvZ2dsZSA/ICRwYXJzZSgkYXR0cnMub25Ub2dnbGUpIDogYW5ndWxhci5ub29wO1xuXG4gIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xuICAgIHNlbGYuJGVsZW1lbnQgPSBlbGVtZW50O1xuXG4gICAgaWYgKCAkYXR0cnMuaXNPcGVuICkge1xuICAgICAgZ2V0SXNPcGVuID0gJHBhcnNlKCRhdHRycy5pc09wZW4pO1xuICAgICAgc2V0SXNPcGVuID0gZ2V0SXNPcGVuLmFzc2lnbjtcblxuICAgICAgJHNjb3BlLiR3YXRjaChnZXRJc09wZW4sIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHNjb3BlLmlzT3BlbiA9ICEhdmFsdWU7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgdGhpcy50b2dnbGUgPSBmdW5jdGlvbiggb3BlbiApIHtcbiAgICByZXR1cm4gc2NvcGUuaXNPcGVuID0gYXJndW1lbnRzLmxlbmd0aCA/ICEhb3BlbiA6ICFzY29wZS5pc09wZW47XG4gIH07XG5cbiAgLy8gQWxsb3cgb3RoZXIgZGlyZWN0aXZlcyB0byB3YXRjaCBzdGF0dXNcbiAgdGhpcy5pc09wZW4gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2NvcGUuaXNPcGVuO1xuICB9O1xuXG4gIHNjb3BlLmZvY3VzVG9nZ2xlRWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICggc2VsZi50b2dnbGVFbGVtZW50ICkge1xuICAgICAgc2VsZi50b2dnbGVFbGVtZW50WzBdLmZvY3VzKCk7XG4gICAgfVxuICB9O1xuXG4gIHNjb3BlLiR3YXRjaCgnaXNPcGVuJywgZnVuY3Rpb24oIGlzT3Blbiwgd2FzT3BlbiApIHtcbiAgICAkYW5pbWF0ZVtpc09wZW4gPyAnYWRkQ2xhc3MnIDogJ3JlbW92ZUNsYXNzJ10oc2VsZi4kZWxlbWVudCwgb3BlbkNsYXNzKTtcblxuICAgIGlmICggaXNPcGVuICkge1xuICAgICAgc2NvcGUuZm9jdXNUb2dnbGVFbGVtZW50KCk7XG4gICAgICBkcm9wZG93blNlcnZpY2Uub3Blbiggc2NvcGUgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZHJvcGRvd25TZXJ2aWNlLmNsb3NlKCBzY29wZSApO1xuICAgIH1cblxuICAgIHNldElzT3Blbigkc2NvcGUsIGlzT3Blbik7XG4gICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGlzT3BlbikgJiYgaXNPcGVuICE9PSB3YXNPcGVuKSB7XG4gICAgICB0b2dnbGVJbnZva2VyKCRzY29wZSwgeyBvcGVuOiAhIWlzT3BlbiB9KTtcbiAgICB9XG4gIH0pO1xuXG4gICRzY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbigpIHtcbiAgICBzY29wZS5pc09wZW4gPSBmYWxzZTtcbiAgfSk7XG5cbiAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICBzY29wZS4kZGVzdHJveSgpO1xuICB9KTtcbn1dKVxuXG4uZGlyZWN0aXZlKCdkcm9wZG93bicsIGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQ0EnLFxuICAgIGNvbnRyb2xsZXI6ICdEcm9wZG93bkNvbnRyb2xsZXInLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgZHJvcGRvd25DdHJsKSB7XG4gICAgICBkcm9wZG93bkN0cmwuaW5pdCggZWxlbWVudCApO1xuICAgIH1cbiAgfTtcbn0pXG5cbi5kaXJlY3RpdmUoJ2Ryb3Bkb3duVG9nZ2xlJywgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdDQScsXG4gICAgcmVxdWlyZTogJz9eZHJvcGRvd24nLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgZHJvcGRvd25DdHJsKSB7XG4gICAgICBpZiAoICFkcm9wZG93bkN0cmwgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZHJvcGRvd25DdHJsLnRvZ2dsZUVsZW1lbnQgPSBlbGVtZW50O1xuXG4gICAgICB2YXIgdG9nZ2xlRHJvcGRvd24gPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGlmICggIWVsZW1lbnQuaGFzQ2xhc3MoJ2Rpc2FibGVkJykgJiYgIWF0dHJzLmRpc2FibGVkICkge1xuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGRyb3Bkb3duQ3RybC50b2dnbGUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgZWxlbWVudC5iaW5kKCdjbGljaycsIHRvZ2dsZURyb3Bkb3duKTtcblxuICAgICAgLy8gV0FJLUFSSUFcbiAgICAgIGVsZW1lbnQuYXR0cih7ICdhcmlhLWhhc3BvcHVwJzogdHJ1ZSwgJ2FyaWEtZXhwYW5kZWQnOiBmYWxzZSB9KTtcbiAgICAgIHNjb3BlLiR3YXRjaChkcm9wZG93bkN0cmwuaXNPcGVuLCBmdW5jdGlvbiggaXNPcGVuICkge1xuICAgICAgICBlbGVtZW50LmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAhIWlzT3Blbik7XG4gICAgICB9KTtcblxuICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBlbGVtZW50LnVuYmluZCgnY2xpY2snLCB0b2dnbGVEcm9wZG93bik7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59KTtcblxuYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC5tb2RhbCcsIFsndWkuYm9vdHN0cmFwLnRyYW5zaXRpb24nXSlcblxuLyoqXG4gKiBBIGhlbHBlciwgaW50ZXJuYWwgZGF0YSBzdHJ1Y3R1cmUgdGhhdCBhY3RzIGFzIGEgbWFwIGJ1dCBhbHNvIGFsbG93cyBnZXR0aW5nIC8gcmVtb3ZpbmdcbiAqIGVsZW1lbnRzIGluIHRoZSBMSUZPIG9yZGVyXG4gKi9cbiAgLmZhY3RvcnkoJyQkc3RhY2tlZE1hcCcsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3JlYXRlTmV3OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdGFjayA9IFtdO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgYWRkOiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YWNrLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmIChrZXkgPT0gc3RhY2tbaV0ua2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YWNrW2ldO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBrZXlzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YWNrLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGtleXMucHVzaChzdGFja1tpXS5rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0b3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgdmFyIGlkeCA9IC0xO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBpZiAoa2V5ID09IHN0YWNrW2ldLmtleSkge1xuICAgICAgICAgICAgICAgIGlkeCA9IGk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdGFjay5zcGxpY2UoaWR4LCAxKVswXTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlbW92ZVRvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHN0YWNrLnNwbGljZShzdGFjay5sZW5ndGggLSAxLCAxKVswXTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGxlbmd0aDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHN0YWNrLmxlbmd0aDtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcbiAgfSlcblxuLyoqXG4gKiBBIGhlbHBlciBkaXJlY3RpdmUgZm9yIHRoZSAkbW9kYWwgc2VydmljZS4gSXQgY3JlYXRlcyBhIGJhY2tkcm9wIGVsZW1lbnQuXG4gKi9cbiAgLmRpcmVjdGl2ZSgnbW9kYWxCYWNrZHJvcCcsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbiAoJHRpbWVvdXQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZS9tb2RhbC9iYWNrZHJvcC5odG1sJyxcbiAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSkge1xuXG4gICAgICAgIHNjb3BlLmFuaW1hdGUgPSBmYWxzZTtcblxuICAgICAgICAvL3RyaWdnZXIgQ1NTIHRyYW5zaXRpb25zXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzY29wZS5hbmltYXRlID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfV0pXG5cbiAgLmRpcmVjdGl2ZSgnbW9kYWxXaW5kb3cnLCBbJyRtb2RhbFN0YWNrJywgJyR0aW1lb3V0JywgZnVuY3Rpb24gKCRtb2RhbFN0YWNrLCAkdGltZW91dCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0VBJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGluZGV4OiAnQCcsXG4gICAgICAgIGFuaW1hdGU6ICc9J1xuICAgICAgfSxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgICAgdGVtcGxhdGVVcmw6IGZ1bmN0aW9uKHRFbGVtZW50LCB0QXR0cnMpIHtcbiAgICAgICAgcmV0dXJuIHRBdHRycy50ZW1wbGF0ZVVybCB8fCAndGVtcGxhdGUvbW9kYWwvd2luZG93Lmh0bWwnO1xuICAgICAgfSxcbiAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgZWxlbWVudC5hZGRDbGFzcyhhdHRycy53aW5kb3dDbGFzcyB8fCAnJyk7XG4gICAgICAgIHNjb3BlLnNpemUgPSBhdHRycy5zaXplO1xuXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvLyB0cmlnZ2VyIENTUyB0cmFuc2l0aW9uc1xuICAgICAgICAgIHNjb3BlLmFuaW1hdGUgPSB0cnVlO1xuICAgICAgICAgIC8vIGZvY3VzIGEgZnJlc2hseS1vcGVuZWQgbW9kYWxcbiAgICAgICAgICBlbGVtZW50WzBdLmZvY3VzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNjb3BlLmNsb3NlID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgIHZhciBtb2RhbCA9ICRtb2RhbFN0YWNrLmdldFRvcCgpO1xuICAgICAgICAgIGlmIChtb2RhbCAmJiBtb2RhbC52YWx1ZS5iYWNrZHJvcCAmJiBtb2RhbC52YWx1ZS5iYWNrZHJvcCAhPSAnc3RhdGljJyAmJiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpKSB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICRtb2RhbFN0YWNrLmRpc21pc3MobW9kYWwua2V5LCAnYmFja2Ryb3AgY2xpY2snKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcbiAgfV0pXG5cbiAgLmZhY3RvcnkoJyRtb2RhbFN0YWNrJywgWyckdHJhbnNpdGlvbicsICckdGltZW91dCcsICckZG9jdW1lbnQnLCAnJGNvbXBpbGUnLCAnJHJvb3RTY29wZScsICckJHN0YWNrZWRNYXAnLFxuICAgIGZ1bmN0aW9uICgkdHJhbnNpdGlvbiwgJHRpbWVvdXQsICRkb2N1bWVudCwgJGNvbXBpbGUsICRyb290U2NvcGUsICQkc3RhY2tlZE1hcCkge1xuXG4gICAgICB2YXIgT1BFTkVEX01PREFMX0NMQVNTID0gJ21vZGFsLW9wZW4nO1xuXG4gICAgICB2YXIgYmFja2Ryb3BEb21FbCwgYmFja2Ryb3BTY29wZTtcbiAgICAgIHZhciBvcGVuZWRXaW5kb3dzID0gJCRzdGFja2VkTWFwLmNyZWF0ZU5ldygpO1xuICAgICAgdmFyICRtb2RhbFN0YWNrID0ge307XG5cbiAgICAgIGZ1bmN0aW9uIGJhY2tkcm9wSW5kZXgoKSB7XG4gICAgICAgIHZhciB0b3BCYWNrZHJvcEluZGV4ID0gLTE7XG4gICAgICAgIHZhciBvcGVuZWQgPSBvcGVuZWRXaW5kb3dzLmtleXMoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcGVuZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAob3BlbmVkV2luZG93cy5nZXQob3BlbmVkW2ldKS52YWx1ZS5iYWNrZHJvcCkge1xuICAgICAgICAgICAgdG9wQmFja2Ryb3BJbmRleCA9IGk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b3BCYWNrZHJvcEluZGV4O1xuICAgICAgfVxuXG4gICAgICAkcm9vdFNjb3BlLiR3YXRjaChiYWNrZHJvcEluZGV4LCBmdW5jdGlvbihuZXdCYWNrZHJvcEluZGV4KXtcbiAgICAgICAgaWYgKGJhY2tkcm9wU2NvcGUpIHtcbiAgICAgICAgICBiYWNrZHJvcFNjb3BlLmluZGV4ID0gbmV3QmFja2Ryb3BJbmRleDtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGZ1bmN0aW9uIHJlbW92ZU1vZGFsV2luZG93KG1vZGFsSW5zdGFuY2UpIHtcblxuICAgICAgICB2YXIgYm9keSA9ICRkb2N1bWVudC5maW5kKCdib2R5JykuZXEoMCk7XG4gICAgICAgIHZhciBtb2RhbFdpbmRvdyA9IG9wZW5lZFdpbmRvd3MuZ2V0KG1vZGFsSW5zdGFuY2UpLnZhbHVlO1xuXG4gICAgICAgIC8vY2xlYW4gdXAgdGhlIHN0YWNrXG4gICAgICAgIG9wZW5lZFdpbmRvd3MucmVtb3ZlKG1vZGFsSW5zdGFuY2UpO1xuXG4gICAgICAgIC8vcmVtb3ZlIHdpbmRvdyBET00gZWxlbWVudFxuICAgICAgICByZW1vdmVBZnRlckFuaW1hdGUobW9kYWxXaW5kb3cubW9kYWxEb21FbCwgbW9kYWxXaW5kb3cubW9kYWxTY29wZSwgMzAwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2RhbFdpbmRvdy5tb2RhbFNjb3BlLiRkZXN0cm95KCk7XG4gICAgICAgICAgYm9keS50b2dnbGVDbGFzcyhPUEVORURfTU9EQUxfQ0xBU1MsIG9wZW5lZFdpbmRvd3MubGVuZ3RoKCkgPiAwKTtcbiAgICAgICAgICBjaGVja1JlbW92ZUJhY2tkcm9wKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjaGVja1JlbW92ZUJhY2tkcm9wKCkge1xuICAgICAgICAgIC8vcmVtb3ZlIGJhY2tkcm9wIGlmIG5vIGxvbmdlciBuZWVkZWRcbiAgICAgICAgICBpZiAoYmFja2Ryb3BEb21FbCAmJiBiYWNrZHJvcEluZGV4KCkgPT0gLTEpIHtcbiAgICAgICAgICAgIHZhciBiYWNrZHJvcFNjb3BlUmVmID0gYmFja2Ryb3BTY29wZTtcbiAgICAgICAgICAgIHJlbW92ZUFmdGVyQW5pbWF0ZShiYWNrZHJvcERvbUVsLCBiYWNrZHJvcFNjb3BlLCAxNTAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgYmFja2Ryb3BTY29wZVJlZi4kZGVzdHJveSgpO1xuICAgICAgICAgICAgICBiYWNrZHJvcFNjb3BlUmVmID0gbnVsbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYmFja2Ryb3BEb21FbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGJhY2tkcm9wU2NvcGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiByZW1vdmVBZnRlckFuaW1hdGUoZG9tRWwsIHNjb3BlLCBlbXVsYXRlVGltZSwgZG9uZSkge1xuICAgICAgICAvLyBDbG9zaW5nIGFuaW1hdGlvblxuICAgICAgICBzY29wZS5hbmltYXRlID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIHRyYW5zaXRpb25FbmRFdmVudE5hbWUgPSAkdHJhbnNpdGlvbi50cmFuc2l0aW9uRW5kRXZlbnROYW1lO1xuICAgICAgICBpZiAodHJhbnNpdGlvbkVuZEV2ZW50TmFtZSkge1xuICAgICAgICAgIC8vIHRyYW5zaXRpb24gb3V0XG4gICAgICAgICAgdmFyIHRpbWVvdXQgPSAkdGltZW91dChhZnRlckFuaW1hdGluZywgZW11bGF0ZVRpbWUpO1xuXG4gICAgICAgICAgZG9tRWwuYmluZCh0cmFuc2l0aW9uRW5kRXZlbnROYW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZW91dCk7XG4gICAgICAgICAgICBhZnRlckFuaW1hdGluZygpO1xuICAgICAgICAgICAgc2NvcGUuJGFwcGx5KCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRW5zdXJlIHRoaXMgY2FsbCBpcyBhc3luY1xuICAgICAgICAgICR0aW1lb3V0KGFmdGVyQW5pbWF0aW5nLCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFmdGVyQW5pbWF0aW5nKCkge1xuICAgICAgICAgIGlmIChhZnRlckFuaW1hdGluZy5kb25lKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGFmdGVyQW5pbWF0aW5nLmRvbmUgPSB0cnVlO1xuXG4gICAgICAgICAgZG9tRWwucmVtb3ZlKCk7XG4gICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJGRvY3VtZW50LmJpbmQoJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIHZhciBtb2RhbDtcblxuICAgICAgICBpZiAoZXZ0LndoaWNoID09PSAyNykge1xuICAgICAgICAgIG1vZGFsID0gb3BlbmVkV2luZG93cy50b3AoKTtcbiAgICAgICAgICBpZiAobW9kYWwgJiYgbW9kYWwudmFsdWUua2V5Ym9hcmQpIHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAkbW9kYWxTdGFjay5kaXNtaXNzKG1vZGFsLmtleSwgJ2VzY2FwZSBrZXkgcHJlc3MnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgICRtb2RhbFN0YWNrLm9wZW4gPSBmdW5jdGlvbiAobW9kYWxJbnN0YW5jZSwgbW9kYWwpIHtcblxuICAgICAgICBvcGVuZWRXaW5kb3dzLmFkZChtb2RhbEluc3RhbmNlLCB7XG4gICAgICAgICAgZGVmZXJyZWQ6IG1vZGFsLmRlZmVycmVkLFxuICAgICAgICAgIG1vZGFsU2NvcGU6IG1vZGFsLnNjb3BlLFxuICAgICAgICAgIGJhY2tkcm9wOiBtb2RhbC5iYWNrZHJvcCxcbiAgICAgICAgICBrZXlib2FyZDogbW9kYWwua2V5Ym9hcmRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGJvZHkgPSAkZG9jdW1lbnQuZmluZCgnYm9keScpLmVxKDApLFxuICAgICAgICAgICAgY3VyckJhY2tkcm9wSW5kZXggPSBiYWNrZHJvcEluZGV4KCk7XG5cbiAgICAgICAgaWYgKGN1cnJCYWNrZHJvcEluZGV4ID49IDAgJiYgIWJhY2tkcm9wRG9tRWwpIHtcbiAgICAgICAgICBiYWNrZHJvcFNjb3BlID0gJHJvb3RTY29wZS4kbmV3KHRydWUpO1xuICAgICAgICAgIGJhY2tkcm9wU2NvcGUuaW5kZXggPSBjdXJyQmFja2Ryb3BJbmRleDtcbiAgICAgICAgICBiYWNrZHJvcERvbUVsID0gJGNvbXBpbGUoJzxkaXYgbW9kYWwtYmFja2Ryb3A+PC9kaXY+JykoYmFja2Ryb3BTY29wZSk7XG4gICAgICAgICAgYm9keS5hcHBlbmQoYmFja2Ryb3BEb21FbCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYW5ndWxhckRvbUVsID0gYW5ndWxhci5lbGVtZW50KCc8ZGl2IG1vZGFsLXdpbmRvdz48L2Rpdj4nKTtcbiAgICAgICAgYW5ndWxhckRvbUVsLmF0dHIoe1xuICAgICAgICAgICd0ZW1wbGF0ZS11cmwnOiBtb2RhbC53aW5kb3dUZW1wbGF0ZVVybCxcbiAgICAgICAgICAnd2luZG93LWNsYXNzJzogbW9kYWwud2luZG93Q2xhc3MsXG4gICAgICAgICAgJ3NpemUnOiBtb2RhbC5zaXplLFxuICAgICAgICAgICdpbmRleCc6IG9wZW5lZFdpbmRvd3MubGVuZ3RoKCkgLSAxLFxuICAgICAgICAgICdhbmltYXRlJzogJ2FuaW1hdGUnXG4gICAgICAgIH0pLmh0bWwobW9kYWwuY29udGVudCk7XG5cbiAgICAgICAgdmFyIG1vZGFsRG9tRWwgPSAkY29tcGlsZShhbmd1bGFyRG9tRWwpKG1vZGFsLnNjb3BlKTtcbiAgICAgICAgb3BlbmVkV2luZG93cy50b3AoKS52YWx1ZS5tb2RhbERvbUVsID0gbW9kYWxEb21FbDtcbiAgICAgICAgYm9keS5hcHBlbmQobW9kYWxEb21FbCk7XG4gICAgICAgIGJvZHkuYWRkQ2xhc3MoT1BFTkVEX01PREFMX0NMQVNTKTtcbiAgICAgIH07XG5cbiAgICAgICRtb2RhbFN0YWNrLmNsb3NlID0gZnVuY3Rpb24gKG1vZGFsSW5zdGFuY2UsIHJlc3VsdCkge1xuICAgICAgICB2YXIgbW9kYWxXaW5kb3cgPSBvcGVuZWRXaW5kb3dzLmdldChtb2RhbEluc3RhbmNlKS52YWx1ZTtcbiAgICAgICAgaWYgKG1vZGFsV2luZG93KSB7XG4gICAgICAgICAgbW9kYWxXaW5kb3cuZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgIHJlbW92ZU1vZGFsV2luZG93KG1vZGFsSW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAkbW9kYWxTdGFjay5kaXNtaXNzID0gZnVuY3Rpb24gKG1vZGFsSW5zdGFuY2UsIHJlYXNvbikge1xuICAgICAgICB2YXIgbW9kYWxXaW5kb3cgPSBvcGVuZWRXaW5kb3dzLmdldChtb2RhbEluc3RhbmNlKS52YWx1ZTtcbiAgICAgICAgaWYgKG1vZGFsV2luZG93KSB7XG4gICAgICAgICAgbW9kYWxXaW5kb3cuZGVmZXJyZWQucmVqZWN0KHJlYXNvbik7XG4gICAgICAgICAgcmVtb3ZlTW9kYWxXaW5kb3cobW9kYWxJbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgICRtb2RhbFN0YWNrLmRpc21pc3NBbGwgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIHZhciB0b3BNb2RhbCA9IHRoaXMuZ2V0VG9wKCk7XG4gICAgICAgIHdoaWxlICh0b3BNb2RhbCkge1xuICAgICAgICAgIHRoaXMuZGlzbWlzcyh0b3BNb2RhbC5rZXksIHJlYXNvbik7XG4gICAgICAgICAgdG9wTW9kYWwgPSB0aGlzLmdldFRvcCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAkbW9kYWxTdGFjay5nZXRUb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBvcGVuZWRXaW5kb3dzLnRvcCgpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuICRtb2RhbFN0YWNrO1xuICAgIH1dKVxuXG4gIC5wcm92aWRlcignJG1vZGFsJywgZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyICRtb2RhbFByb3ZpZGVyID0ge1xuICAgICAgb3B0aW9uczoge1xuICAgICAgICBiYWNrZHJvcDogdHJ1ZSwgLy9jYW4gYmUgYWxzbyBmYWxzZSBvciAnc3RhdGljJ1xuICAgICAgICBrZXlib2FyZDogdHJ1ZVxuICAgICAgfSxcbiAgICAgICRnZXQ6IFsnJGluamVjdG9yJywgJyRyb290U2NvcGUnLCAnJHEnLCAnJGh0dHAnLCAnJHRlbXBsYXRlQ2FjaGUnLCAnJGNvbnRyb2xsZXInLCAnJG1vZGFsU3RhY2snLFxuICAgICAgICBmdW5jdGlvbiAoJGluamVjdG9yLCAkcm9vdFNjb3BlLCAkcSwgJGh0dHAsICR0ZW1wbGF0ZUNhY2hlLCAkY29udHJvbGxlciwgJG1vZGFsU3RhY2spIHtcblxuICAgICAgICAgIHZhciAkbW9kYWwgPSB7fTtcblxuICAgICAgICAgIGZ1bmN0aW9uIGdldFRlbXBsYXRlUHJvbWlzZShvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy50ZW1wbGF0ZSA/ICRxLndoZW4ob3B0aW9ucy50ZW1wbGF0ZSkgOlxuICAgICAgICAgICAgICAkaHR0cC5nZXQob3B0aW9ucy50ZW1wbGF0ZVVybCwge2NhY2hlOiAkdGVtcGxhdGVDYWNoZX0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVuY3Rpb24gZ2V0UmVzb2x2ZVByb21pc2VzKHJlc29sdmVzKSB7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZXNBcnIgPSBbXTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChyZXNvbHZlcywgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNGdW5jdGlvbih2YWx1ZSkgfHwgYW5ndWxhci5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHByb21pc2VzQXJyLnB1c2goJHEud2hlbigkaW5qZWN0b3IuaW52b2tlKHZhbHVlKSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlc0FycjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkbW9kYWwub3BlbiA9IGZ1bmN0aW9uIChtb2RhbE9wdGlvbnMpIHtcblxuICAgICAgICAgICAgdmFyIG1vZGFsUmVzdWx0RGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgdmFyIG1vZGFsT3BlbmVkRGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICAvL3ByZXBhcmUgYW4gaW5zdGFuY2Ugb2YgYSBtb2RhbCB0byBiZSBpbmplY3RlZCBpbnRvIGNvbnRyb2xsZXJzIGFuZCByZXR1cm5lZCB0byBhIGNhbGxlclxuICAgICAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSB7XG4gICAgICAgICAgICAgIHJlc3VsdDogbW9kYWxSZXN1bHREZWZlcnJlZC5wcm9taXNlLFxuICAgICAgICAgICAgICBvcGVuZWQ6IG1vZGFsT3BlbmVkRGVmZXJyZWQucHJvbWlzZSxcbiAgICAgICAgICAgICAgY2xvc2U6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAkbW9kYWxTdGFjay5jbG9zZShtb2RhbEluc3RhbmNlLCByZXN1bHQpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkaXNtaXNzOiBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgJG1vZGFsU3RhY2suZGlzbWlzcyhtb2RhbEluc3RhbmNlLCByZWFzb24pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvL21lcmdlIGFuZCBjbGVhbiB1cCBvcHRpb25zXG4gICAgICAgICAgICBtb2RhbE9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgJG1vZGFsUHJvdmlkZXIub3B0aW9ucywgbW9kYWxPcHRpb25zKTtcbiAgICAgICAgICAgIG1vZGFsT3B0aW9ucy5yZXNvbHZlID0gbW9kYWxPcHRpb25zLnJlc29sdmUgfHwge307XG5cbiAgICAgICAgICAgIC8vdmVyaWZ5IG9wdGlvbnNcbiAgICAgICAgICAgIGlmICghbW9kYWxPcHRpb25zLnRlbXBsYXRlICYmICFtb2RhbE9wdGlvbnMudGVtcGxhdGVVcmwpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPbmUgb2YgdGVtcGxhdGUgb3IgdGVtcGxhdGVVcmwgb3B0aW9ucyBpcyByZXF1aXJlZC4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlQW5kUmVzb2x2ZVByb21pc2UgPVxuICAgICAgICAgICAgICAkcS5hbGwoW2dldFRlbXBsYXRlUHJvbWlzZShtb2RhbE9wdGlvbnMpXS5jb25jYXQoZ2V0UmVzb2x2ZVByb21pc2VzKG1vZGFsT3B0aW9ucy5yZXNvbHZlKSkpO1xuXG5cbiAgICAgICAgICAgIHRlbXBsYXRlQW5kUmVzb2x2ZVByb21pc2UudGhlbihmdW5jdGlvbiByZXNvbHZlU3VjY2Vzcyh0cGxBbmRWYXJzKSB7XG5cbiAgICAgICAgICAgICAgdmFyIG1vZGFsU2NvcGUgPSAobW9kYWxPcHRpb25zLnNjb3BlIHx8ICRyb290U2NvcGUpLiRuZXcoKTtcbiAgICAgICAgICAgICAgbW9kYWxTY29wZS4kY2xvc2UgPSBtb2RhbEluc3RhbmNlLmNsb3NlO1xuICAgICAgICAgICAgICBtb2RhbFNjb3BlLiRkaXNtaXNzID0gbW9kYWxJbnN0YW5jZS5kaXNtaXNzO1xuXG4gICAgICAgICAgICAgIHZhciBjdHJsSW5zdGFuY2UsIGN0cmxMb2NhbHMgPSB7fTtcbiAgICAgICAgICAgICAgdmFyIHJlc29sdmVJdGVyID0gMTtcblxuICAgICAgICAgICAgICAvL2NvbnRyb2xsZXJzXG4gICAgICAgICAgICAgIGlmIChtb2RhbE9wdGlvbnMuY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIGN0cmxMb2NhbHMuJHNjb3BlID0gbW9kYWxTY29wZTtcbiAgICAgICAgICAgICAgICBjdHJsTG9jYWxzLiRtb2RhbEluc3RhbmNlID0gbW9kYWxJbnN0YW5jZTtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gobW9kYWxPcHRpb25zLnJlc29sdmUsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgICBjdHJsTG9jYWxzW2tleV0gPSB0cGxBbmRWYXJzW3Jlc29sdmVJdGVyKytdO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY3RybEluc3RhbmNlID0gJGNvbnRyb2xsZXIobW9kYWxPcHRpb25zLmNvbnRyb2xsZXIsIGN0cmxMb2NhbHMpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgJG1vZGFsU3RhY2sub3Blbihtb2RhbEluc3RhbmNlLCB7XG4gICAgICAgICAgICAgICAgc2NvcGU6IG1vZGFsU2NvcGUsXG4gICAgICAgICAgICAgICAgZGVmZXJyZWQ6IG1vZGFsUmVzdWx0RGVmZXJyZWQsXG4gICAgICAgICAgICAgICAgY29udGVudDogdHBsQW5kVmFyc1swXSxcbiAgICAgICAgICAgICAgICBiYWNrZHJvcDogbW9kYWxPcHRpb25zLmJhY2tkcm9wLFxuICAgICAgICAgICAgICAgIGtleWJvYXJkOiBtb2RhbE9wdGlvbnMua2V5Ym9hcmQsXG4gICAgICAgICAgICAgICAgd2luZG93Q2xhc3M6IG1vZGFsT3B0aW9ucy53aW5kb3dDbGFzcyxcbiAgICAgICAgICAgICAgICB3aW5kb3dUZW1wbGF0ZVVybDogbW9kYWxPcHRpb25zLndpbmRvd1RlbXBsYXRlVXJsLFxuICAgICAgICAgICAgICAgIHNpemU6IG1vZGFsT3B0aW9ucy5zaXplXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiByZXNvbHZlRXJyb3IocmVhc29uKSB7XG4gICAgICAgICAgICAgIG1vZGFsUmVzdWx0RGVmZXJyZWQucmVqZWN0KHJlYXNvbik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGVtcGxhdGVBbmRSZXNvbHZlUHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgbW9kYWxPcGVuZWREZWZlcnJlZC5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBtb2RhbE9wZW5lZERlZmVycmVkLnJlamVjdChmYWxzZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIG1vZGFsSW5zdGFuY2U7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHJldHVybiAkbW9kYWw7XG4gICAgICAgIH1dXG4gICAgfTtcblxuICAgIHJldHVybiAkbW9kYWxQcm92aWRlcjtcbiAgfSk7XG5cbmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAucGFnaW5hdGlvbicsIFtdKVxuXG4uY29udHJvbGxlcignUGFnaW5hdGlvbkNvbnRyb2xsZXInLCBbJyRzY29wZScsICckYXR0cnMnLCAnJHBhcnNlJywgZnVuY3Rpb24gKCRzY29wZSwgJGF0dHJzLCAkcGFyc2UpIHtcbiAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgbmdNb2RlbEN0cmwgPSB7ICRzZXRWaWV3VmFsdWU6IGFuZ3VsYXIubm9vcCB9LCAvLyBudWxsTW9kZWxDdHJsXG4gICAgICBzZXROdW1QYWdlcyA9ICRhdHRycy5udW1QYWdlcyA/ICRwYXJzZSgkYXR0cnMubnVtUGFnZXMpLmFzc2lnbiA6IGFuZ3VsYXIubm9vcDtcblxuICB0aGlzLmluaXQgPSBmdW5jdGlvbihuZ01vZGVsQ3RybF8sIGNvbmZpZykge1xuICAgIG5nTW9kZWxDdHJsID0gbmdNb2RlbEN0cmxfO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuXG4gICAgbmdNb2RlbEN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5yZW5kZXIoKTtcbiAgICB9O1xuXG4gICAgaWYgKCRhdHRycy5pdGVtc1BlclBhZ2UpIHtcbiAgICAgICRzY29wZS4kcGFyZW50LiR3YXRjaCgkcGFyc2UoJGF0dHJzLml0ZW1zUGVyUGFnZSksIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHNlbGYuaXRlbXNQZXJQYWdlID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICAgICAgJHNjb3BlLnRvdGFsUGFnZXMgPSBzZWxmLmNhbGN1bGF0ZVRvdGFsUGFnZXMoKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLml0ZW1zUGVyUGFnZSA9IGNvbmZpZy5pdGVtc1BlclBhZ2U7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuY2FsY3VsYXRlVG90YWxQYWdlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b3RhbFBhZ2VzID0gdGhpcy5pdGVtc1BlclBhZ2UgPCAxID8gMSA6IE1hdGguY2VpbCgkc2NvcGUudG90YWxJdGVtcyAvIHRoaXMuaXRlbXNQZXJQYWdlKTtcbiAgICByZXR1cm4gTWF0aC5tYXgodG90YWxQYWdlcyB8fCAwLCAxKTtcbiAgfTtcblxuICB0aGlzLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5wYWdlID0gcGFyc2VJbnQobmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSwgMTApIHx8IDE7XG4gIH07XG5cbiAgJHNjb3BlLnNlbGVjdFBhZ2UgPSBmdW5jdGlvbihwYWdlKSB7XG4gICAgaWYgKCAkc2NvcGUucGFnZSAhPT0gcGFnZSAmJiBwYWdlID4gMCAmJiBwYWdlIDw9ICRzY29wZS50b3RhbFBhZ2VzKSB7XG4gICAgICBuZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKHBhZ2UpO1xuICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgIH1cbiAgfTtcblxuICAkc2NvcGUuZ2V0VGV4dCA9IGZ1bmN0aW9uKCBrZXkgKSB7XG4gICAgcmV0dXJuICRzY29wZVtrZXkgKyAnVGV4dCddIHx8IHNlbGYuY29uZmlnW2tleSArICdUZXh0J107XG4gIH07XG4gICRzY29wZS5ub1ByZXZpb3VzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICRzY29wZS5wYWdlID09PSAxO1xuICB9O1xuICAkc2NvcGUubm9OZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICRzY29wZS5wYWdlID09PSAkc2NvcGUudG90YWxQYWdlcztcbiAgfTtcblxuICAkc2NvcGUuJHdhdGNoKCd0b3RhbEl0ZW1zJywgZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLnRvdGFsUGFnZXMgPSBzZWxmLmNhbGN1bGF0ZVRvdGFsUGFnZXMoKTtcbiAgfSk7XG5cbiAgJHNjb3BlLiR3YXRjaCgndG90YWxQYWdlcycsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgc2V0TnVtUGFnZXMoJHNjb3BlLiRwYXJlbnQsIHZhbHVlKTsgLy8gUmVhZG9ubHkgdmFyaWFibGVcblxuICAgIGlmICggJHNjb3BlLnBhZ2UgPiB2YWx1ZSApIHtcbiAgICAgICRzY29wZS5zZWxlY3RQYWdlKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgIH1cbiAgfSk7XG59XSlcblxuLmNvbnN0YW50KCdwYWdpbmF0aW9uQ29uZmlnJywge1xuICBpdGVtc1BlclBhZ2U6IDEwLFxuICBib3VuZGFyeUxpbmtzOiBmYWxzZSxcbiAgZGlyZWN0aW9uTGlua3M6IHRydWUsXG4gIGZpcnN0VGV4dDogJ0ZpcnN0JyxcbiAgcHJldmlvdXNUZXh0OiAnUHJldmlvdXMnLFxuICBuZXh0VGV4dDogJ05leHQnLFxuICBsYXN0VGV4dDogJ0xhc3QnLFxuICByb3RhdGU6IHRydWVcbn0pXG5cbi5kaXJlY3RpdmUoJ3BhZ2luYXRpb24nLCBbJyRwYXJzZScsICdwYWdpbmF0aW9uQ29uZmlnJywgZnVuY3Rpb24oJHBhcnNlLCBwYWdpbmF0aW9uQ29uZmlnKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgc2NvcGU6IHtcbiAgICAgIHRvdGFsSXRlbXM6ICc9JyxcbiAgICAgIGZpcnN0VGV4dDogJ0AnLFxuICAgICAgcHJldmlvdXNUZXh0OiAnQCcsXG4gICAgICBuZXh0VGV4dDogJ0AnLFxuICAgICAgbGFzdFRleHQ6ICdAJ1xuICAgIH0sXG4gICAgcmVxdWlyZTogWydwYWdpbmF0aW9uJywgJz9uZ01vZGVsJ10sXG4gICAgY29udHJvbGxlcjogJ1BhZ2luYXRpb25Db250cm9sbGVyJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlL3BhZ2luYXRpb24vcGFnaW5hdGlvbi5odG1sJyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybHMpIHtcbiAgICAgIHZhciBwYWdpbmF0aW9uQ3RybCA9IGN0cmxzWzBdLCBuZ01vZGVsQ3RybCA9IGN0cmxzWzFdO1xuXG4gICAgICBpZiAoIW5nTW9kZWxDdHJsKSB7XG4gICAgICAgICByZXR1cm47IC8vIGRvIG5vdGhpbmcgaWYgbm8gbmctbW9kZWxcbiAgICAgIH1cblxuICAgICAgLy8gU2V0dXAgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzXG4gICAgICB2YXIgbWF4U2l6ZSA9IGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJzLm1heFNpemUpID8gc2NvcGUuJHBhcmVudC4kZXZhbChhdHRycy5tYXhTaXplKSA6IHBhZ2luYXRpb25Db25maWcubWF4U2l6ZSxcbiAgICAgICAgICByb3RhdGUgPSBhbmd1bGFyLmlzRGVmaW5lZChhdHRycy5yb3RhdGUpID8gc2NvcGUuJHBhcmVudC4kZXZhbChhdHRycy5yb3RhdGUpIDogcGFnaW5hdGlvbkNvbmZpZy5yb3RhdGU7XG4gICAgICBzY29wZS5ib3VuZGFyeUxpbmtzID0gYW5ndWxhci5pc0RlZmluZWQoYXR0cnMuYm91bmRhcnlMaW5rcykgPyBzY29wZS4kcGFyZW50LiRldmFsKGF0dHJzLmJvdW5kYXJ5TGlua3MpIDogcGFnaW5hdGlvbkNvbmZpZy5ib3VuZGFyeUxpbmtzO1xuICAgICAgc2NvcGUuZGlyZWN0aW9uTGlua3MgPSBhbmd1bGFyLmlzRGVmaW5lZChhdHRycy5kaXJlY3Rpb25MaW5rcykgPyBzY29wZS4kcGFyZW50LiRldmFsKGF0dHJzLmRpcmVjdGlvbkxpbmtzKSA6IHBhZ2luYXRpb25Db25maWcuZGlyZWN0aW9uTGlua3M7XG5cbiAgICAgIHBhZ2luYXRpb25DdHJsLmluaXQobmdNb2RlbEN0cmwsIHBhZ2luYXRpb25Db25maWcpO1xuXG4gICAgICBpZiAoYXR0cnMubWF4U2l6ZSkge1xuICAgICAgICBzY29wZS4kcGFyZW50LiR3YXRjaCgkcGFyc2UoYXR0cnMubWF4U2l6ZSksIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgbWF4U2l6ZSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgICAgcGFnaW5hdGlvbkN0cmwucmVuZGVyKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgcGFnZSBvYmplY3QgdXNlZCBpbiB0ZW1wbGF0ZVxuICAgICAgZnVuY3Rpb24gbWFrZVBhZ2UobnVtYmVyLCB0ZXh0LCBpc0FjdGl2ZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG51bWJlcjogbnVtYmVyLFxuICAgICAgICAgIHRleHQ6IHRleHQsXG4gICAgICAgICAgYWN0aXZlOiBpc0FjdGl2ZVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBnZXRQYWdlcyhjdXJyZW50UGFnZSwgdG90YWxQYWdlcykge1xuICAgICAgICB2YXIgcGFnZXMgPSBbXTtcblxuICAgICAgICAvLyBEZWZhdWx0IHBhZ2UgbGltaXRzXG4gICAgICAgIHZhciBzdGFydFBhZ2UgPSAxLCBlbmRQYWdlID0gdG90YWxQYWdlcztcbiAgICAgICAgdmFyIGlzTWF4U2l6ZWQgPSAoIGFuZ3VsYXIuaXNEZWZpbmVkKG1heFNpemUpICYmIG1heFNpemUgPCB0b3RhbFBhZ2VzICk7XG5cbiAgICAgICAgLy8gcmVjb21wdXRlIGlmIG1heFNpemVcbiAgICAgICAgaWYgKCBpc01heFNpemVkICkge1xuICAgICAgICAgIGlmICggcm90YXRlICkge1xuICAgICAgICAgICAgLy8gQ3VycmVudCBwYWdlIGlzIGRpc3BsYXllZCBpbiB0aGUgbWlkZGxlIG9mIHRoZSB2aXNpYmxlIG9uZXNcbiAgICAgICAgICAgIHN0YXJ0UGFnZSA9IE1hdGgubWF4KGN1cnJlbnRQYWdlIC0gTWF0aC5mbG9vcihtYXhTaXplLzIpLCAxKTtcbiAgICAgICAgICAgIGVuZFBhZ2UgICA9IHN0YXJ0UGFnZSArIG1heFNpemUgLSAxO1xuXG4gICAgICAgICAgICAvLyBBZGp1c3QgaWYgbGltaXQgaXMgZXhjZWVkZWRcbiAgICAgICAgICAgIGlmIChlbmRQYWdlID4gdG90YWxQYWdlcykge1xuICAgICAgICAgICAgICBlbmRQYWdlICAgPSB0b3RhbFBhZ2VzO1xuICAgICAgICAgICAgICBzdGFydFBhZ2UgPSBlbmRQYWdlIC0gbWF4U2l6ZSArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFZpc2libGUgcGFnZXMgYXJlIHBhZ2luYXRlZCB3aXRoIG1heFNpemVcbiAgICAgICAgICAgIHN0YXJ0UGFnZSA9ICgoTWF0aC5jZWlsKGN1cnJlbnRQYWdlIC8gbWF4U2l6ZSkgLSAxKSAqIG1heFNpemUpICsgMTtcblxuICAgICAgICAgICAgLy8gQWRqdXN0IGxhc3QgcGFnZSBpZiBsaW1pdCBpcyBleGNlZWRlZFxuICAgICAgICAgICAgZW5kUGFnZSA9IE1hdGgubWluKHN0YXJ0UGFnZSArIG1heFNpemUgLSAxLCB0b3RhbFBhZ2VzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgcGFnZSBudW1iZXIgbGlua3NcbiAgICAgICAgZm9yICh2YXIgbnVtYmVyID0gc3RhcnRQYWdlOyBudW1iZXIgPD0gZW5kUGFnZTsgbnVtYmVyKyspIHtcbiAgICAgICAgICB2YXIgcGFnZSA9IG1ha2VQYWdlKG51bWJlciwgbnVtYmVyLCBudW1iZXIgPT09IGN1cnJlbnRQYWdlKTtcbiAgICAgICAgICBwYWdlcy5wdXNoKHBhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIGxpbmtzIHRvIG1vdmUgYmV0d2VlbiBwYWdlIHNldHNcbiAgICAgICAgaWYgKCBpc01heFNpemVkICYmICEgcm90YXRlICkge1xuICAgICAgICAgIGlmICggc3RhcnRQYWdlID4gMSApIHtcbiAgICAgICAgICAgIHZhciBwcmV2aW91c1BhZ2VTZXQgPSBtYWtlUGFnZShzdGFydFBhZ2UgLSAxLCAnLi4uJywgZmFsc2UpO1xuICAgICAgICAgICAgcGFnZXMudW5zaGlmdChwcmV2aW91c1BhZ2VTZXQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICggZW5kUGFnZSA8IHRvdGFsUGFnZXMgKSB7XG4gICAgICAgICAgICB2YXIgbmV4dFBhZ2VTZXQgPSBtYWtlUGFnZShlbmRQYWdlICsgMSwgJy4uLicsIGZhbHNlKTtcbiAgICAgICAgICAgIHBhZ2VzLnB1c2gobmV4dFBhZ2VTZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYWdlcztcbiAgICAgIH1cblxuICAgICAgdmFyIG9yaWdpbmFsUmVuZGVyID0gcGFnaW5hdGlvbkN0cmwucmVuZGVyO1xuICAgICAgcGFnaW5hdGlvbkN0cmwucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG9yaWdpbmFsUmVuZGVyKCk7XG4gICAgICAgIGlmIChzY29wZS5wYWdlID4gMCAmJiBzY29wZS5wYWdlIDw9IHNjb3BlLnRvdGFsUGFnZXMpIHtcbiAgICAgICAgICBzY29wZS5wYWdlcyA9IGdldFBhZ2VzKHNjb3BlLnBhZ2UsIHNjb3BlLnRvdGFsUGFnZXMpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1dKVxuXG4uY29uc3RhbnQoJ3BhZ2VyQ29uZmlnJywge1xuICBpdGVtc1BlclBhZ2U6IDEwLFxuICBwcmV2aW91c1RleHQ6ICfCqyBQcmV2aW91cycsXG4gIG5leHRUZXh0OiAnTmV4dCDCuycsXG4gIGFsaWduOiB0cnVlXG59KVxuXG4uZGlyZWN0aXZlKCdwYWdlcicsIFsncGFnZXJDb25maWcnLCBmdW5jdGlvbihwYWdlckNvbmZpZykge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgIHNjb3BlOiB7XG4gICAgICB0b3RhbEl0ZW1zOiAnPScsXG4gICAgICBwcmV2aW91c1RleHQ6ICdAJyxcbiAgICAgIG5leHRUZXh0OiAnQCdcbiAgICB9LFxuICAgIHJlcXVpcmU6IFsncGFnZXInLCAnP25nTW9kZWwnXSxcbiAgICBjb250cm9sbGVyOiAnUGFnaW5hdGlvbkNvbnRyb2xsZXInLFxuICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdlci5odG1sJyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybHMpIHtcbiAgICAgIHZhciBwYWdpbmF0aW9uQ3RybCA9IGN0cmxzWzBdLCBuZ01vZGVsQ3RybCA9IGN0cmxzWzFdO1xuXG4gICAgICBpZiAoIW5nTW9kZWxDdHJsKSB7XG4gICAgICAgICByZXR1cm47IC8vIGRvIG5vdGhpbmcgaWYgbm8gbmctbW9kZWxcbiAgICAgIH1cblxuICAgICAgc2NvcGUuYWxpZ24gPSBhbmd1bGFyLmlzRGVmaW5lZChhdHRycy5hbGlnbikgPyBzY29wZS4kcGFyZW50LiRldmFsKGF0dHJzLmFsaWduKSA6IHBhZ2VyQ29uZmlnLmFsaWduO1xuICAgICAgcGFnaW5hdGlvbkN0cmwuaW5pdChuZ01vZGVsQ3RybCwgcGFnZXJDb25maWcpO1xuICAgIH1cbiAgfTtcbn1dKTtcblxuLyoqXG4gKiBUaGUgZm9sbG93aW5nIGZlYXR1cmVzIGFyZSBzdGlsbCBvdXRzdGFuZGluZzogYW5pbWF0aW9uIGFzIGFcbiAqIGZ1bmN0aW9uLCBwbGFjZW1lbnQgYXMgYSBmdW5jdGlvbiwgaW5zaWRlLCBzdXBwb3J0IGZvciBtb3JlIHRyaWdnZXJzIHRoYW5cbiAqIGp1c3QgbW91c2UgZW50ZXIvbGVhdmUsIGh0bWwgdG9vbHRpcHMsIGFuZCBzZWxlY3RvciBkZWxlZ2F0aW9uLlxuICovXG5hbmd1bGFyLm1vZHVsZSggJ3VpLmJvb3RzdHJhcC50b29sdGlwJywgWyAndWkuYm9vdHN0cmFwLnBvc2l0aW9uJywgJ3VpLmJvb3RzdHJhcC5iaW5kSHRtbCcgXSApXG5cbi8qKlxuICogVGhlICR0b29sdGlwIHNlcnZpY2UgY3JlYXRlcyB0b29sdGlwLSBhbmQgcG9wb3Zlci1saWtlIGRpcmVjdGl2ZXMgYXMgd2VsbCBhc1xuICogaG91c2VzIGdsb2JhbCBvcHRpb25zIGZvciB0aGVtLlxuICovXG4ucHJvdmlkZXIoICckdG9vbHRpcCcsIGZ1bmN0aW9uICgpIHtcbiAgLy8gVGhlIGRlZmF1bHQgb3B0aW9ucyB0b29sdGlwIGFuZCBwb3BvdmVyLlxuICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgcGxhY2VtZW50OiAndG9wJyxcbiAgICBhbmltYXRpb246IHRydWUsXG4gICAgcG9wdXBEZWxheTogMFxuICB9O1xuXG4gIC8vIERlZmF1bHQgaGlkZSB0cmlnZ2VycyBmb3IgZWFjaCBzaG93IHRyaWdnZXJcbiAgdmFyIHRyaWdnZXJNYXAgPSB7XG4gICAgJ21vdXNlZW50ZXInOiAnbW91c2VsZWF2ZScsXG4gICAgJ2NsaWNrJzogJ2NsaWNrJyxcbiAgICAnZm9jdXMnOiAnYmx1cidcbiAgfTtcblxuICAvLyBUaGUgb3B0aW9ucyBzcGVjaWZpZWQgdG8gdGhlIHByb3ZpZGVyIGdsb2JhbGx5LlxuICB2YXIgZ2xvYmFsT3B0aW9ucyA9IHt9O1xuXG4gIC8qKlxuICAgKiBgb3B0aW9ucyh7fSlgIGFsbG93cyBnbG9iYWwgY29uZmlndXJhdGlvbiBvZiBhbGwgdG9vbHRpcHMgaW4gdGhlXG4gICAqIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSggJ0FwcCcsIFsndWkuYm9vdHN0cmFwLnRvb2x0aXAnXSwgZnVuY3Rpb24oICR0b29sdGlwUHJvdmlkZXIgKSB7XG4gICAqICAgICAvLyBwbGFjZSB0b29sdGlwcyBsZWZ0IGluc3RlYWQgb2YgdG9wIGJ5IGRlZmF1bHRcbiAgICogICAgICR0b29sdGlwUHJvdmlkZXIub3B0aW9ucyggeyBwbGFjZW1lbnQ6ICdsZWZ0JyB9ICk7XG4gICAqICAgfSk7XG4gICAqL1xuXHR0aGlzLm9wdGlvbnMgPSBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0YW5ndWxhci5leHRlbmQoIGdsb2JhbE9wdGlvbnMsIHZhbHVlICk7XG5cdH07XG5cbiAgLyoqXG4gICAqIFRoaXMgYWxsb3dzIHlvdSB0byBleHRlbmQgdGhlIHNldCBvZiB0cmlnZ2VyIG1hcHBpbmdzIGF2YWlsYWJsZS4gRS5nLjpcbiAgICpcbiAgICogICAkdG9vbHRpcFByb3ZpZGVyLnNldFRyaWdnZXJzKCAnb3BlblRyaWdnZXInOiAnY2xvc2VUcmlnZ2VyJyApO1xuICAgKi9cbiAgdGhpcy5zZXRUcmlnZ2VycyA9IGZ1bmN0aW9uIHNldFRyaWdnZXJzICggdHJpZ2dlcnMgKSB7XG4gICAgYW5ndWxhci5leHRlbmQoIHRyaWdnZXJNYXAsIHRyaWdnZXJzICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgYSBoZWxwZXIgZnVuY3Rpb24gZm9yIHRyYW5zbGF0aW5nIGNhbWVsLWNhc2UgdG8gc25ha2UtY2FzZS5cbiAgICovXG4gIGZ1bmN0aW9uIHNuYWtlX2Nhc2UobmFtZSl7XG4gICAgdmFyIHJlZ2V4cCA9IC9bQS1aXS9nO1xuICAgIHZhciBzZXBhcmF0b3IgPSAnLSc7XG4gICAgcmV0dXJuIG5hbWUucmVwbGFjZShyZWdleHAsIGZ1bmN0aW9uKGxldHRlciwgcG9zKSB7XG4gICAgICByZXR1cm4gKHBvcyA/IHNlcGFyYXRvciA6ICcnKSArIGxldHRlci50b0xvd2VyQ2FzZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFjdHVhbCBpbnN0YW5jZSBvZiB0aGUgJHRvb2x0aXAgc2VydmljZS5cbiAgICogVE9ETyBzdXBwb3J0IG11bHRpcGxlIHRyaWdnZXJzXG4gICAqL1xuICB0aGlzLiRnZXQgPSBbICckd2luZG93JywgJyRjb21waWxlJywgJyR0aW1lb3V0JywgJyRwYXJzZScsICckZG9jdW1lbnQnLCAnJHBvc2l0aW9uJywgJyRpbnRlcnBvbGF0ZScsIGZ1bmN0aW9uICggJHdpbmRvdywgJGNvbXBpbGUsICR0aW1lb3V0LCAkcGFyc2UsICRkb2N1bWVudCwgJHBvc2l0aW9uLCAkaW50ZXJwb2xhdGUgKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICR0b29sdGlwICggdHlwZSwgcHJlZml4LCBkZWZhdWx0VHJpZ2dlclNob3cgKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKCB7fSwgZGVmYXVsdE9wdGlvbnMsIGdsb2JhbE9wdGlvbnMgKTtcblxuICAgICAgLyoqXG4gICAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCBvZiBzaG93IGFuZCBoaWRlIHRyaWdnZXJzLlxuICAgICAgICpcbiAgICAgICAqIElmIGEgdHJpZ2dlciBpcyBzdXBwbGllZCxcbiAgICAgICAqIGl0IGlzIHVzZWQgdG8gc2hvdyB0aGUgdG9vbHRpcDsgb3RoZXJ3aXNlLCBpdCB3aWxsIHVzZSB0aGUgYHRyaWdnZXJgXG4gICAgICAgKiBvcHRpb24gcGFzc2VkIHRvIHRoZSBgJHRvb2x0aXBQcm92aWRlci5vcHRpb25zYCBtZXRob2Q7IGVsc2UgaXQgd2lsbFxuICAgICAgICogZGVmYXVsdCB0byB0aGUgdHJpZ2dlciBzdXBwbGllZCB0byB0aGlzIGRpcmVjdGl2ZSBmYWN0b3J5LlxuICAgICAgICpcbiAgICAgICAqIFRoZSBoaWRlIHRyaWdnZXIgaXMgYmFzZWQgb24gdGhlIHNob3cgdHJpZ2dlci4gSWYgdGhlIGB0cmlnZ2VyYCBvcHRpb25cbiAgICAgICAqIHdhcyBwYXNzZWQgdG8gdGhlIGAkdG9vbHRpcFByb3ZpZGVyLm9wdGlvbnNgIG1ldGhvZCwgaXQgd2lsbCB1c2UgdGhlXG4gICAgICAgKiBtYXBwZWQgdHJpZ2dlciBmcm9tIGB0cmlnZ2VyTWFwYCBvciB0aGUgcGFzc2VkIHRyaWdnZXIgaWYgdGhlIG1hcCBpc1xuICAgICAgICogdW5kZWZpbmVkOyBvdGhlcndpc2UsIGl0IHVzZXMgdGhlIGB0cmlnZ2VyTWFwYCB2YWx1ZSBvZiB0aGUgc2hvd1xuICAgICAgICogdHJpZ2dlcjsgZWxzZSBpdCB3aWxsIGp1c3QgdXNlIHRoZSBzaG93IHRyaWdnZXIuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGdldFRyaWdnZXJzICggdHJpZ2dlciApIHtcbiAgICAgICAgdmFyIHNob3cgPSB0cmlnZ2VyIHx8IG9wdGlvbnMudHJpZ2dlciB8fCBkZWZhdWx0VHJpZ2dlclNob3c7XG4gICAgICAgIHZhciBoaWRlID0gdHJpZ2dlck1hcFtzaG93XSB8fCBzaG93O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3c6IHNob3csXG4gICAgICAgICAgaGlkZTogaGlkZVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB2YXIgZGlyZWN0aXZlTmFtZSA9IHNuYWtlX2Nhc2UoIHR5cGUgKTtcblxuICAgICAgdmFyIHN0YXJ0U3ltID0gJGludGVycG9sYXRlLnN0YXJ0U3ltYm9sKCk7XG4gICAgICB2YXIgZW5kU3ltID0gJGludGVycG9sYXRlLmVuZFN5bWJvbCgpO1xuICAgICAgdmFyIHRlbXBsYXRlID1cbiAgICAgICAgJzxkaXYgJysgZGlyZWN0aXZlTmFtZSArJy1wb3B1cCAnK1xuICAgICAgICAgICd0aXRsZT1cIicrc3RhcnRTeW0rJ3R0X3RpdGxlJytlbmRTeW0rJ1wiICcrXG4gICAgICAgICAgJ2NvbnRlbnQ9XCInK3N0YXJ0U3ltKyd0dF9jb250ZW50JytlbmRTeW0rJ1wiICcrXG4gICAgICAgICAgJ3BsYWNlbWVudD1cIicrc3RhcnRTeW0rJ3R0X3BsYWNlbWVudCcrZW5kU3ltKydcIiAnK1xuICAgICAgICAgICdhbmltYXRpb249XCJ0dF9hbmltYXRpb25cIiAnK1xuICAgICAgICAgICdpcy1vcGVuPVwidHRfaXNPcGVuXCInK1xuICAgICAgICAgICc+JytcbiAgICAgICAgJzwvZGl2Pic7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgICBzY29wZTogdHJ1ZSxcbiAgICAgICAgY29tcGlsZTogZnVuY3Rpb24gKHRFbGVtLCB0QXR0cnMpIHtcbiAgICAgICAgICB2YXIgdG9vbHRpcExpbmtlciA9ICRjb21waWxlKCB0ZW1wbGF0ZSApO1xuXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxpbmsgKCBzY29wZSwgZWxlbWVudCwgYXR0cnMgKSB7XG4gICAgICAgICAgICB2YXIgdG9vbHRpcDtcbiAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uVGltZW91dDtcbiAgICAgICAgICAgIHZhciBwb3B1cFRpbWVvdXQ7XG4gICAgICAgICAgICB2YXIgYXBwZW5kVG9Cb2R5ID0gYW5ndWxhci5pc0RlZmluZWQoIG9wdGlvbnMuYXBwZW5kVG9Cb2R5ICkgPyBvcHRpb25zLmFwcGVuZFRvQm9keSA6IGZhbHNlO1xuICAgICAgICAgICAgdmFyIHRyaWdnZXJzID0gZ2V0VHJpZ2dlcnMoIHVuZGVmaW5lZCApO1xuICAgICAgICAgICAgdmFyIGhhc0VuYWJsZUV4cCA9IGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJzW3ByZWZpeCsnRW5hYmxlJ10pO1xuXG4gICAgICAgICAgICB2YXIgcG9zaXRpb25Ub29sdGlwID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgIHZhciB0dFBvc2l0aW9uID0gJHBvc2l0aW9uLnBvc2l0aW9uRWxlbWVudHMoZWxlbWVudCwgdG9vbHRpcCwgc2NvcGUudHRfcGxhY2VtZW50LCBhcHBlbmRUb0JvZHkpO1xuICAgICAgICAgICAgICB0dFBvc2l0aW9uLnRvcCArPSAncHgnO1xuICAgICAgICAgICAgICB0dFBvc2l0aW9uLmxlZnQgKz0gJ3B4JztcblxuICAgICAgICAgICAgICAvLyBOb3cgc2V0IHRoZSBjYWxjdWxhdGVkIHBvc2l0aW9uaW5nLlxuICAgICAgICAgICAgICB0b29sdGlwLmNzcyggdHRQb3NpdGlvbiApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gQnkgZGVmYXVsdCwgdGhlIHRvb2x0aXAgaXMgbm90IG9wZW4uXG4gICAgICAgICAgICAvLyBUT0RPIGFkZCBhYmlsaXR5IHRvIHN0YXJ0IHRvb2x0aXAgb3BlbmVkXG4gICAgICAgICAgICBzY29wZS50dF9pc09wZW4gPSBmYWxzZTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gdG9nZ2xlVG9vbHRpcEJpbmQgKCkge1xuICAgICAgICAgICAgICBpZiAoICEgc2NvcGUudHRfaXNPcGVuICkge1xuICAgICAgICAgICAgICAgIHNob3dUb29sdGlwQmluZCgpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGhpZGVUb29sdGlwQmluZCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNob3cgdGhlIHRvb2x0aXAgd2l0aCBkZWxheSBpZiBzcGVjaWZpZWQsIG90aGVyd2lzZSBzaG93IGl0IGltbWVkaWF0ZWx5XG4gICAgICAgICAgICBmdW5jdGlvbiBzaG93VG9vbHRpcEJpbmQoKSB7XG4gICAgICAgICAgICAgIGlmKGhhc0VuYWJsZUV4cCAmJiAhc2NvcGUuJGV2YWwoYXR0cnNbcHJlZml4KydFbmFibGUnXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKCBzY29wZS50dF9wb3B1cERlbGF5ICkge1xuICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmcgaWYgdGhlIHRvb2x0aXAgd2FzIGFscmVhZHkgc2NoZWR1bGVkIHRvIHBvcC11cC5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIGhhcHBlbnMgaWYgc2hvdyBpcyB0cmlnZ2VyZWQgbXVsdGlwbGUgdGltZXMgYmVmb3JlIGFueSBoaWRlIGlzIHRyaWdnZXJlZC5cbiAgICAgICAgICAgICAgICBpZiAoIXBvcHVwVGltZW91dCkge1xuICAgICAgICAgICAgICAgICAgcG9wdXBUaW1lb3V0ID0gJHRpbWVvdXQoIHNob3csIHNjb3BlLnR0X3BvcHVwRGVsYXksIGZhbHNlICk7XG4gICAgICAgICAgICAgICAgICBwb3B1cFRpbWVvdXQudGhlbihmdW5jdGlvbihyZXBvc2l0aW9uKXtyZXBvc2l0aW9uKCk7fSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNob3coKSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGhpZGVUb29sdGlwQmluZCAoKSB7XG4gICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaGlkZSgpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2hvdyB0aGUgdG9vbHRpcCBwb3B1cCBlbGVtZW50LlxuICAgICAgICAgICAgZnVuY3Rpb24gc2hvdygpIHtcblxuICAgICAgICAgICAgICBwb3B1cFRpbWVvdXQgPSBudWxsO1xuXG4gICAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGEgcGVuZGluZyByZW1vdmUgdHJhbnNpdGlvbiwgd2UgbXVzdCBjYW5jZWwgaXQsIGxlc3QgdGhlXG4gICAgICAgICAgICAgIC8vIHRvb2x0aXAgYmUgbXlzdGVyaW91c2x5IHJlbW92ZWQuXG4gICAgICAgICAgICAgIGlmICggdHJhbnNpdGlvblRpbWVvdXQgKSB7XG4gICAgICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKCB0cmFuc2l0aW9uVGltZW91dCApO1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25UaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIERvbid0IHNob3cgZW1wdHkgdG9vbHRpcHMuXG4gICAgICAgICAgICAgIGlmICggISBzY29wZS50dF9jb250ZW50ICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhbmd1bGFyLm5vb3A7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjcmVhdGVUb29sdGlwKCk7XG5cbiAgICAgICAgICAgICAgLy8gU2V0IHRoZSBpbml0aWFsIHBvc2l0aW9uaW5nLlxuICAgICAgICAgICAgICB0b29sdGlwLmNzcyh7IHRvcDogMCwgbGVmdDogMCwgZGlzcGxheTogJ2Jsb2NrJyB9KTtcblxuICAgICAgICAgICAgICAvLyBOb3cgd2UgYWRkIGl0IHRvIHRoZSBET00gYmVjYXVzZSBuZWVkIHNvbWUgaW5mbyBhYm91dCBpdC4gQnV0IGl0J3Mgbm90IFxuICAgICAgICAgICAgICAvLyB2aXNpYmxlIHlldCBhbnl3YXkuXG4gICAgICAgICAgICAgIGlmICggYXBwZW5kVG9Cb2R5ICkge1xuICAgICAgICAgICAgICAgICAgJGRvY3VtZW50LmZpbmQoICdib2R5JyApLmFwcGVuZCggdG9vbHRpcCApO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWZ0ZXIoIHRvb2x0aXAgKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHBvc2l0aW9uVG9vbHRpcCgpO1xuXG4gICAgICAgICAgICAgIC8vIEFuZCBzaG93IHRoZSB0b29sdGlwLlxuICAgICAgICAgICAgICBzY29wZS50dF9pc09wZW4gPSB0cnVlO1xuICAgICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7IC8vIGRpZ2VzdCByZXF1aXJlZCBhcyAkYXBwbHkgaXMgbm90IGNhbGxlZFxuXG4gICAgICAgICAgICAgIC8vIFJldHVybiBwb3NpdGlvbmluZyBmdW5jdGlvbiBhcyBwcm9taXNlIGNhbGxiYWNrIGZvciBjb3JyZWN0XG4gICAgICAgICAgICAgIC8vIHBvc2l0aW9uaW5nIGFmdGVyIGRyYXcuXG4gICAgICAgICAgICAgIHJldHVybiBwb3NpdGlvblRvb2x0aXA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEhpZGUgdGhlIHRvb2x0aXAgcG9wdXAgZWxlbWVudC5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGhpZGUoKSB7XG4gICAgICAgICAgICAgIC8vIEZpcnN0IHRoaW5ncyBmaXJzdDogd2UgZG9uJ3Qgc2hvdyBpdCBhbnltb3JlLlxuICAgICAgICAgICAgICBzY29wZS50dF9pc09wZW4gPSBmYWxzZTtcblxuICAgICAgICAgICAgICAvL2lmIHRvb2x0aXAgaXMgZ29pbmcgdG8gYmUgc2hvd24gYWZ0ZXIgZGVsYXksIHdlIG11c3QgY2FuY2VsIHRoaXNcbiAgICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKCBwb3B1cFRpbWVvdXQgKTtcbiAgICAgICAgICAgICAgcG9wdXBUaW1lb3V0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAvLyBBbmQgbm93IHdlIHJlbW92ZSBpdCBmcm9tIHRoZSBET00uIEhvd2V2ZXIsIGlmIHdlIGhhdmUgYW5pbWF0aW9uLCB3ZSBcbiAgICAgICAgICAgICAgLy8gbmVlZCB0byB3YWl0IGZvciBpdCB0byBleHBpcmUgYmVmb3JlaGFuZC5cbiAgICAgICAgICAgICAgLy8gRklYTUU6IHRoaXMgaXMgYSBwbGFjZWhvbGRlciBmb3IgYSBwb3J0IG9mIHRoZSB0cmFuc2l0aW9ucyBsaWJyYXJ5LlxuICAgICAgICAgICAgICBpZiAoIHNjb3BlLnR0X2FuaW1hdGlvbiApIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRyYW5zaXRpb25UaW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uVGltZW91dCA9ICR0aW1lb3V0KHJlbW92ZVRvb2x0aXAsIDUwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlbW92ZVRvb2x0aXAoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVUb29sdGlwKCkge1xuICAgICAgICAgICAgICAvLyBUaGVyZSBjYW4gb25seSBiZSBvbmUgdG9vbHRpcCBlbGVtZW50IHBlciBkaXJlY3RpdmUgc2hvd24gYXQgb25jZS5cbiAgICAgICAgICAgICAgaWYgKHRvb2x0aXApIHtcbiAgICAgICAgICAgICAgICByZW1vdmVUb29sdGlwKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdG9vbHRpcCA9IHRvb2x0aXBMaW5rZXIoc2NvcGUsIGZ1bmN0aW9uICgpIHt9KTtcblxuICAgICAgICAgICAgICAvLyBHZXQgY29udGVudHMgcmVuZGVyZWQgaW50byB0aGUgdG9vbHRpcFxuICAgICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZVRvb2x0aXAoKSB7XG4gICAgICAgICAgICAgIHRyYW5zaXRpb25UaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgaWYgKHRvb2x0aXApIHtcbiAgICAgICAgICAgICAgICB0b29sdGlwLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIHRvb2x0aXAgPSBudWxsO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogT2JzZXJ2ZSB0aGUgcmVsZXZhbnQgYXR0cmlidXRlcy5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgYXR0cnMuJG9ic2VydmUoIHR5cGUsIGZ1bmN0aW9uICggdmFsICkge1xuICAgICAgICAgICAgICBzY29wZS50dF9jb250ZW50ID0gdmFsO1xuXG4gICAgICAgICAgICAgIGlmICghdmFsICYmIHNjb3BlLnR0X2lzT3BlbiApIHtcbiAgICAgICAgICAgICAgICBoaWRlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhdHRycy4kb2JzZXJ2ZSggcHJlZml4KydUaXRsZScsIGZ1bmN0aW9uICggdmFsICkge1xuICAgICAgICAgICAgICBzY29wZS50dF90aXRsZSA9IHZhbDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhdHRycy4kb2JzZXJ2ZSggcHJlZml4KydQbGFjZW1lbnQnLCBmdW5jdGlvbiAoIHZhbCApIHtcbiAgICAgICAgICAgICAgc2NvcGUudHRfcGxhY2VtZW50ID0gYW5ndWxhci5pc0RlZmluZWQoIHZhbCApID8gdmFsIDogb3B0aW9ucy5wbGFjZW1lbnQ7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYXR0cnMuJG9ic2VydmUoIHByZWZpeCsnUG9wdXBEZWxheScsIGZ1bmN0aW9uICggdmFsICkge1xuICAgICAgICAgICAgICB2YXIgZGVsYXkgPSBwYXJzZUludCggdmFsLCAxMCApO1xuICAgICAgICAgICAgICBzY29wZS50dF9wb3B1cERlbGF5ID0gISBpc05hTihkZWxheSkgPyBkZWxheSA6IG9wdGlvbnMucG9wdXBEZWxheTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgdW5yZWdpc3RlclRyaWdnZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBlbGVtZW50LnVuYmluZCh0cmlnZ2Vycy5zaG93LCBzaG93VG9vbHRpcEJpbmQpO1xuICAgICAgICAgICAgICBlbGVtZW50LnVuYmluZCh0cmlnZ2Vycy5oaWRlLCBoaWRlVG9vbHRpcEJpbmQpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYXR0cnMuJG9ic2VydmUoIHByZWZpeCsnVHJpZ2dlcicsIGZ1bmN0aW9uICggdmFsICkge1xuICAgICAgICAgICAgICB1bnJlZ2lzdGVyVHJpZ2dlcnMoKTtcblxuICAgICAgICAgICAgICB0cmlnZ2VycyA9IGdldFRyaWdnZXJzKCB2YWwgKTtcblxuICAgICAgICAgICAgICBpZiAoIHRyaWdnZXJzLnNob3cgPT09IHRyaWdnZXJzLmhpZGUgKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5iaW5kKCB0cmlnZ2Vycy5zaG93LCB0b2dnbGVUb29sdGlwQmluZCApO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYmluZCggdHJpZ2dlcnMuc2hvdywgc2hvd1Rvb2x0aXBCaW5kICk7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5iaW5kKCB0cmlnZ2Vycy5oaWRlLCBoaWRlVG9vbHRpcEJpbmQgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBhbmltYXRpb24gPSBzY29wZS4kZXZhbChhdHRyc1twcmVmaXggKyAnQW5pbWF0aW9uJ10pO1xuICAgICAgICAgICAgc2NvcGUudHRfYW5pbWF0aW9uID0gYW5ndWxhci5pc0RlZmluZWQoYW5pbWF0aW9uKSA/ICEhYW5pbWF0aW9uIDogb3B0aW9ucy5hbmltYXRpb247XG5cbiAgICAgICAgICAgIGF0dHJzLiRvYnNlcnZlKCBwcmVmaXgrJ0FwcGVuZFRvQm9keScsIGZ1bmN0aW9uICggdmFsICkge1xuICAgICAgICAgICAgICBhcHBlbmRUb0JvZHkgPSBhbmd1bGFyLmlzRGVmaW5lZCggdmFsICkgPyAkcGFyc2UoIHZhbCApKCBzY29wZSApIDogYXBwZW5kVG9Cb2R5O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGlmIGEgdG9vbHRpcCBpcyBhdHRhY2hlZCB0byA8Ym9keT4gd2UgbmVlZCB0byByZW1vdmUgaXQgb25cbiAgICAgICAgICAgIC8vIGxvY2F0aW9uIGNoYW5nZSBhcyBpdHMgcGFyZW50IHNjb3BlIHdpbGwgcHJvYmFibHkgbm90IGJlIGRlc3Ryb3llZFxuICAgICAgICAgICAgLy8gYnkgdGhlIGNoYW5nZS5cbiAgICAgICAgICAgIGlmICggYXBwZW5kVG9Cb2R5ICkge1xuICAgICAgICAgICAgICBzY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiBjbG9zZVRvb2x0aXBPbkxvY2F0aW9uQ2hhbmdlU3VjY2VzcyAoKSB7XG4gICAgICAgICAgICAgIGlmICggc2NvcGUudHRfaXNPcGVuICkge1xuICAgICAgICAgICAgICAgIGhpZGUoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0b29sdGlwIGlzIGRlc3Ryb3llZCBhbmQgcmVtb3ZlZC5cbiAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiBvbkRlc3Ryb3lUb29sdGlwKCkge1xuICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwoIHRyYW5zaXRpb25UaW1lb3V0ICk7XG4gICAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbCggcG9wdXBUaW1lb3V0ICk7XG4gICAgICAgICAgICAgIHVucmVnaXN0ZXJUcmlnZ2VycygpO1xuICAgICAgICAgICAgICByZW1vdmVUb29sdGlwKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG4gIH1dO1xufSlcblxuLmRpcmVjdGl2ZSggJ3Rvb2x0aXBQb3B1cCcsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VBJyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIHNjb3BlOiB7IGNvbnRlbnQ6ICdAJywgcGxhY2VtZW50OiAnQCcsIGFuaW1hdGlvbjogJyYnLCBpc09wZW46ICcmJyB9LFxuICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXBvcHVwLmh0bWwnXG4gIH07XG59KVxuXG4uZGlyZWN0aXZlKCAndG9vbHRpcCcsIFsgJyR0b29sdGlwJywgZnVuY3Rpb24gKCAkdG9vbHRpcCApIHtcbiAgcmV0dXJuICR0b29sdGlwKCAndG9vbHRpcCcsICd0b29sdGlwJywgJ21vdXNlZW50ZXInICk7XG59XSlcblxuLmRpcmVjdGl2ZSggJ3Rvb2x0aXBIdG1sVW5zYWZlUG9wdXAnLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICBzY29wZTogeyBjb250ZW50OiAnQCcsIHBsYWNlbWVudDogJ0AnLCBhbmltYXRpb246ICcmJywgaXNPcGVuOiAnJicgfSxcbiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1odG1sLXVuc2FmZS1wb3B1cC5odG1sJ1xuICB9O1xufSlcblxuLmRpcmVjdGl2ZSggJ3Rvb2x0aXBIdG1sVW5zYWZlJywgWyAnJHRvb2x0aXAnLCBmdW5jdGlvbiAoICR0b29sdGlwICkge1xuICByZXR1cm4gJHRvb2x0aXAoICd0b29sdGlwSHRtbFVuc2FmZScsICd0b29sdGlwJywgJ21vdXNlZW50ZXInICk7XG59XSk7XG5cbi8qKlxuICogVGhlIGZvbGxvd2luZyBmZWF0dXJlcyBhcmUgc3RpbGwgb3V0c3RhbmRpbmc6IHBvcHVwIGRlbGF5LCBhbmltYXRpb24gYXMgYVxuICogZnVuY3Rpb24sIHBsYWNlbWVudCBhcyBhIGZ1bmN0aW9uLCBpbnNpZGUsIHN1cHBvcnQgZm9yIG1vcmUgdHJpZ2dlcnMgdGhhblxuICoganVzdCBtb3VzZSBlbnRlci9sZWF2ZSwgaHRtbCBwb3BvdmVycywgYW5kIHNlbGVjdG9yIGRlbGVnYXRhdGlvbi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoICd1aS5ib290c3RyYXAucG9wb3ZlcicsIFsgJ3VpLmJvb3RzdHJhcC50b29sdGlwJyBdIClcblxuLmRpcmVjdGl2ZSggJ3BvcG92ZXJQb3B1cCcsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VBJyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIHNjb3BlOiB7IHRpdGxlOiAnQCcsIGNvbnRlbnQ6ICdAJywgcGxhY2VtZW50OiAnQCcsIGFuaW1hdGlvbjogJyYnLCBpc09wZW46ICcmJyB9LFxuICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLmh0bWwnXG4gIH07XG59KVxuXG4uZGlyZWN0aXZlKCAncG9wb3ZlcicsIFsgJyR0b29sdGlwJywgZnVuY3Rpb24gKCAkdG9vbHRpcCApIHtcbiAgcmV0dXJuICR0b29sdGlwKCAncG9wb3ZlcicsICdwb3BvdmVyJywgJ2NsaWNrJyApO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLnByb2dyZXNzYmFyJywgW10pXG5cbi5jb25zdGFudCgncHJvZ3Jlc3NDb25maWcnLCB7XG4gIGFuaW1hdGU6IHRydWUsXG4gIG1heDogMTAwXG59KVxuXG4uY29udHJvbGxlcignUHJvZ3Jlc3NDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGF0dHJzJywgJ3Byb2dyZXNzQ29uZmlnJywgZnVuY3Rpb24oJHNjb3BlLCAkYXR0cnMsIHByb2dyZXNzQ29uZmlnKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICBhbmltYXRlID0gYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLmFuaW1hdGUpID8gJHNjb3BlLiRwYXJlbnQuJGV2YWwoJGF0dHJzLmFuaW1hdGUpIDogcHJvZ3Jlc3NDb25maWcuYW5pbWF0ZTtcblxuICAgIHRoaXMuYmFycyA9IFtdO1xuICAgICRzY29wZS5tYXggPSBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMubWF4KSA/ICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5tYXgpIDogcHJvZ3Jlc3NDb25maWcubWF4O1xuXG4gICAgdGhpcy5hZGRCYXIgPSBmdW5jdGlvbihiYXIsIGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCAhYW5pbWF0ZSApIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY3NzKHsndHJhbnNpdGlvbic6ICdub25lJ30pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5iYXJzLnB1c2goYmFyKTtcblxuICAgICAgICBiYXIuJHdhdGNoKCd2YWx1ZScsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcbiAgICAgICAgICAgIGJhci5wZXJjZW50ID0gKygxMDAgKiB2YWx1ZSAvICRzY29wZS5tYXgpLnRvRml4ZWQoMik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJhci4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBlbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHNlbGYucmVtb3ZlQmFyKGJhcik7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLnJlbW92ZUJhciA9IGZ1bmN0aW9uKGJhcikge1xuICAgICAgICB0aGlzLmJhcnMuc3BsaWNlKHRoaXMuYmFycy5pbmRleE9mKGJhciksIDEpO1xuICAgIH07XG59XSlcblxuLmRpcmVjdGl2ZSgncHJvZ3Jlc3MnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0VBJyxcbiAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgICAgY29udHJvbGxlcjogJ1Byb2dyZXNzQ29udHJvbGxlcicsXG4gICAgICAgIHJlcXVpcmU6ICdwcm9ncmVzcycsXG4gICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzcy5odG1sJ1xuICAgIH07XG59KVxuXG4uZGlyZWN0aXZlKCdiYXInLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0VBJyxcbiAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgICAgcmVxdWlyZTogJ15wcm9ncmVzcycsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICB2YWx1ZTogJz0nLFxuICAgICAgICAgICAgdHlwZTogJ0AnXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUvcHJvZ3Jlc3NiYXIvYmFyLmh0bWwnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIHByb2dyZXNzQ3RybCkge1xuICAgICAgICAgICAgcHJvZ3Jlc3NDdHJsLmFkZEJhcihzY29wZSwgZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9O1xufSlcblxuLmRpcmVjdGl2ZSgncHJvZ3Jlc3NiYXInLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0VBJyxcbiAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgICAgY29udHJvbGxlcjogJ1Byb2dyZXNzQ29udHJvbGxlcicsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICB2YWx1ZTogJz0nLFxuICAgICAgICAgICAgdHlwZTogJ0AnXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3NiYXIuaHRtbCcsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgcHJvZ3Jlc3NDdHJsKSB7XG4gICAgICAgICAgICBwcm9ncmVzc0N0cmwuYWRkQmFyKHNjb3BlLCBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudC5jaGlsZHJlbigpWzBdKSk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG5hbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLnJhdGluZycsIFtdKVxuXG4uY29uc3RhbnQoJ3JhdGluZ0NvbmZpZycsIHtcbiAgbWF4OiA1LFxuICBzdGF0ZU9uOiBudWxsLFxuICBzdGF0ZU9mZjogbnVsbFxufSlcblxuLmNvbnRyb2xsZXIoJ1JhdGluZ0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckYXR0cnMnLCAncmF0aW5nQ29uZmlnJywgZnVuY3Rpb24oJHNjb3BlLCAkYXR0cnMsIHJhdGluZ0NvbmZpZykge1xuICB2YXIgbmdNb2RlbEN0cmwgID0geyAkc2V0Vmlld1ZhbHVlOiBhbmd1bGFyLm5vb3AgfTtcblxuICB0aGlzLmluaXQgPSBmdW5jdGlvbihuZ01vZGVsQ3RybF8pIHtcbiAgICBuZ01vZGVsQ3RybCA9IG5nTW9kZWxDdHJsXztcbiAgICBuZ01vZGVsQ3RybC4kcmVuZGVyID0gdGhpcy5yZW5kZXI7XG5cbiAgICB0aGlzLnN0YXRlT24gPSBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMuc3RhdGVPbikgPyAkc2NvcGUuJHBhcmVudC4kZXZhbCgkYXR0cnMuc3RhdGVPbikgOiByYXRpbmdDb25maWcuc3RhdGVPbjtcbiAgICB0aGlzLnN0YXRlT2ZmID0gYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLnN0YXRlT2ZmKSA/ICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5zdGF0ZU9mZikgOiByYXRpbmdDb25maWcuc3RhdGVPZmY7XG5cbiAgICB2YXIgcmF0aW5nU3RhdGVzID0gYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLnJhdGluZ1N0YXRlcykgPyAkc2NvcGUuJHBhcmVudC4kZXZhbCgkYXR0cnMucmF0aW5nU3RhdGVzKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgQXJyYXkoIGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5tYXgpID8gJHNjb3BlLiRwYXJlbnQuJGV2YWwoJGF0dHJzLm1heCkgOiByYXRpbmdDb25maWcubWF4ICk7XG4gICAgJHNjb3BlLnJhbmdlID0gdGhpcy5idWlsZFRlbXBsYXRlT2JqZWN0cyhyYXRpbmdTdGF0ZXMpO1xuICB9O1xuXG4gIHRoaXMuYnVpbGRUZW1wbGF0ZU9iamVjdHMgPSBmdW5jdGlvbihzdGF0ZXMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbiA9IHN0YXRlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIHN0YXRlc1tpXSA9IGFuZ3VsYXIuZXh0ZW5kKHsgaW5kZXg6IGkgfSwgeyBzdGF0ZU9uOiB0aGlzLnN0YXRlT24sIHN0YXRlT2ZmOiB0aGlzLnN0YXRlT2ZmIH0sIHN0YXRlc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBzdGF0ZXM7XG4gIH07XG5cbiAgJHNjb3BlLnJhdGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmICggISRzY29wZS5yZWFkb25seSAmJiB2YWx1ZSA+PSAwICYmIHZhbHVlIDw9ICRzY29wZS5yYW5nZS5sZW5ndGggKSB7XG4gICAgICBuZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKHZhbHVlKTtcbiAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICB9XG4gIH07XG5cbiAgJHNjb3BlLmVudGVyID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoICEkc2NvcGUucmVhZG9ubHkgKSB7XG4gICAgICAkc2NvcGUudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgJHNjb3BlLm9uSG92ZXIoe3ZhbHVlOiB2YWx1ZX0pO1xuICB9O1xuXG4gICRzY29wZS5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS52YWx1ZSA9IG5nTW9kZWxDdHJsLiR2aWV3VmFsdWU7XG4gICAgJHNjb3BlLm9uTGVhdmUoKTtcbiAgfTtcblxuICAkc2NvcGUub25LZXlkb3duID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgaWYgKC8oMzd8Mzh8Mzl8NDApLy50ZXN0KGV2dC53aGljaCkpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgJHNjb3BlLnJhdGUoICRzY29wZS52YWx1ZSArIChldnQud2hpY2ggPT09IDM4IHx8IGV2dC53aGljaCA9PT0gMzkgPyAxIDogLTEpICk7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLnZhbHVlID0gbmdNb2RlbEN0cmwuJHZpZXdWYWx1ZTtcbiAgfTtcbn1dKVxuXG4uZGlyZWN0aXZlKCdyYXRpbmcnLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VBJyxcbiAgICByZXF1aXJlOiBbJ3JhdGluZycsICduZ01vZGVsJ10sXG4gICAgc2NvcGU6IHtcbiAgICAgIHJlYWRvbmx5OiAnPT8nLFxuICAgICAgb25Ib3ZlcjogJyYnLFxuICAgICAgb25MZWF2ZTogJyYnXG4gICAgfSxcbiAgICBjb250cm9sbGVyOiAnUmF0aW5nQ29udHJvbGxlcicsXG4gICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZS9yYXRpbmcvcmF0aW5nLmh0bWwnLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJscykge1xuICAgICAgdmFyIHJhdGluZ0N0cmwgPSBjdHJsc1swXSwgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXTtcblxuICAgICAgaWYgKCBuZ01vZGVsQ3RybCApIHtcbiAgICAgICAgcmF0aW5nQ3RybC5pbml0KCBuZ01vZGVsQ3RybCApO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn0pO1xuXG4vKipcbiAqIEBuZ2RvYyBvdmVydmlld1xuICogQG5hbWUgdWkuYm9vdHN0cmFwLnRhYnNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFuZ3VsYXJKUyB2ZXJzaW9uIG9mIHRoZSB0YWJzIGRpcmVjdGl2ZS5cbiAqL1xuXG5hbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLnRhYnMnLCBbXSlcblxuLmNvbnRyb2xsZXIoJ1RhYnNldENvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uIFRhYnNldEN0cmwoJHNjb3BlKSB7XG4gIHZhciBjdHJsID0gdGhpcyxcbiAgICAgIHRhYnMgPSBjdHJsLnRhYnMgPSAkc2NvcGUudGFicyA9IFtdO1xuXG4gIGN0cmwuc2VsZWN0ID0gZnVuY3Rpb24oc2VsZWN0ZWRUYWIpIHtcbiAgICBhbmd1bGFyLmZvckVhY2godGFicywgZnVuY3Rpb24odGFiKSB7XG4gICAgICBpZiAodGFiLmFjdGl2ZSAmJiB0YWIgIT09IHNlbGVjdGVkVGFiKSB7XG4gICAgICAgIHRhYi5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGFiLm9uRGVzZWxlY3QoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBzZWxlY3RlZFRhYi5hY3RpdmUgPSB0cnVlO1xuICAgIHNlbGVjdGVkVGFiLm9uU2VsZWN0KCk7XG4gIH07XG5cbiAgY3RybC5hZGRUYWIgPSBmdW5jdGlvbiBhZGRUYWIodGFiKSB7XG4gICAgdGFicy5wdXNoKHRhYik7XG4gICAgLy8gd2UgY2FuJ3QgcnVuIHRoZSBzZWxlY3QgZnVuY3Rpb24gb24gdGhlIGZpcnN0IHRhYlxuICAgIC8vIHNpbmNlIHRoYXQgd291bGQgc2VsZWN0IGl0IHR3aWNlXG4gICAgaWYgKHRhYnMubGVuZ3RoID09PSAxKSB7XG4gICAgICB0YWIuYWN0aXZlID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHRhYi5hY3RpdmUpIHtcbiAgICAgIGN0cmwuc2VsZWN0KHRhYik7XG4gICAgfVxuICB9O1xuXG4gIGN0cmwucmVtb3ZlVGFiID0gZnVuY3Rpb24gcmVtb3ZlVGFiKHRhYikge1xuICAgIHZhciBpbmRleCA9IHRhYnMuaW5kZXhPZih0YWIpO1xuICAgIC8vU2VsZWN0IGEgbmV3IHRhYiBpZiB0aGUgdGFiIHRvIGJlIHJlbW92ZWQgaXMgc2VsZWN0ZWRcbiAgICBpZiAodGFiLmFjdGl2ZSAmJiB0YWJzLmxlbmd0aCA+IDEpIHtcbiAgICAgIC8vSWYgdGhpcyBpcyB0aGUgbGFzdCB0YWIsIHNlbGVjdCB0aGUgcHJldmlvdXMgdGFiLiBlbHNlLCB0aGUgbmV4dCB0YWIuXG4gICAgICB2YXIgbmV3QWN0aXZlSW5kZXggPSBpbmRleCA9PSB0YWJzLmxlbmd0aCAtIDEgPyBpbmRleCAtIDEgOiBpbmRleCArIDE7XG4gICAgICBjdHJsLnNlbGVjdCh0YWJzW25ld0FjdGl2ZUluZGV4XSk7XG4gICAgfVxuICAgIHRhYnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgfTtcbn1dKVxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIHVpLmJvb3RzdHJhcC50YWJzLmRpcmVjdGl2ZTp0YWJzZXRcbiAqIEByZXN0cmljdCBFQVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGFic2V0IGlzIHRoZSBvdXRlciBjb250YWluZXIgZm9yIHRoZSB0YWJzIGRpcmVjdGl2ZVxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IHZlcnRpY2FsIFdoZXRoZXIgb3Igbm90IHRvIHVzZSB2ZXJ0aWNhbCBzdHlsaW5nIGZvciB0aGUgdGFicy5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IGp1c3RpZmllZCBXaGV0aGVyIG9yIG5vdCB0byB1c2UganVzdGlmaWVkIHN0eWxpbmcgZm9yIHRoZSB0YWJzLlxuICpcbiAqIEBleGFtcGxlXG48ZXhhbXBsZSBtb2R1bGU9XCJ1aS5ib290c3RyYXBcIj5cbiAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICA8dGFic2V0PlxuICAgICAgPHRhYiBoZWFkaW5nPVwiVGFiIDFcIj48Yj5GaXJzdDwvYj4gQ29udGVudCE8L3RhYj5cbiAgICAgIDx0YWIgaGVhZGluZz1cIlRhYiAyXCI+PGk+U2Vjb25kPC9pPiBDb250ZW50ITwvdGFiPlxuICAgIDwvdGFic2V0PlxuICAgIDxociAvPlxuICAgIDx0YWJzZXQgdmVydGljYWw9XCJ0cnVlXCI+XG4gICAgICA8dGFiIGhlYWRpbmc9XCJWZXJ0aWNhbCBUYWIgMVwiPjxiPkZpcnN0PC9iPiBWZXJ0aWNhbCBDb250ZW50ITwvdGFiPlxuICAgICAgPHRhYiBoZWFkaW5nPVwiVmVydGljYWwgVGFiIDJcIj48aT5TZWNvbmQ8L2k+IFZlcnRpY2FsIENvbnRlbnQhPC90YWI+XG4gICAgPC90YWJzZXQ+XG4gICAgPHRhYnNldCBqdXN0aWZpZWQ9XCJ0cnVlXCI+XG4gICAgICA8dGFiIGhlYWRpbmc9XCJKdXN0aWZpZWQgVGFiIDFcIj48Yj5GaXJzdDwvYj4gSnVzdGlmaWVkIENvbnRlbnQhPC90YWI+XG4gICAgICA8dGFiIGhlYWRpbmc9XCJKdXN0aWZpZWQgVGFiIDJcIj48aT5TZWNvbmQ8L2k+IEp1c3RpZmllZCBDb250ZW50ITwvdGFiPlxuICAgIDwvdGFic2V0PlxuICA8L2ZpbGU+XG48L2V4YW1wbGU+XG4gKi9cbi5kaXJlY3RpdmUoJ3RhYnNldCcsIGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICBzY29wZToge1xuICAgICAgdHlwZTogJ0AnXG4gICAgfSxcbiAgICBjb250cm9sbGVyOiAnVGFic2V0Q29udHJvbGxlcicsXG4gICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZS90YWJzL3RhYnNldC5odG1sJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgIHNjb3BlLnZlcnRpY2FsID0gYW5ndWxhci5pc0RlZmluZWQoYXR0cnMudmVydGljYWwpID8gc2NvcGUuJHBhcmVudC4kZXZhbChhdHRycy52ZXJ0aWNhbCkgOiBmYWxzZTtcbiAgICAgIHNjb3BlLmp1c3RpZmllZCA9IGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJzLmp1c3RpZmllZCkgPyBzY29wZS4kcGFyZW50LiRldmFsKGF0dHJzLmp1c3RpZmllZCkgOiBmYWxzZTtcbiAgICB9XG4gIH07XG59KVxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIHVpLmJvb3RzdHJhcC50YWJzLmRpcmVjdGl2ZTp0YWJcbiAqIEByZXN0cmljdCBFQVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nPX0gaGVhZGluZyBUaGUgdmlzaWJsZSBoZWFkaW5nLCBvciB0aXRsZSwgb2YgdGhlIHRhYi4gU2V0IEhUTUwgaGVhZGluZ3Mgd2l0aCB7QGxpbmsgdWkuYm9vdHN0cmFwLnRhYnMuZGlyZWN0aXZlOnRhYkhlYWRpbmcgdGFiSGVhZGluZ30uXG4gKiBAcGFyYW0ge3N0cmluZz19IHNlbGVjdCBBbiBleHByZXNzaW9uIHRvIGV2YWx1YXRlIHdoZW4gdGhlIHRhYiBpcyBzZWxlY3RlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IGFjdGl2ZSBBIGJpbmRpbmcsIHRlbGxpbmcgd2hldGhlciBvciBub3QgdGhpcyB0YWIgaXMgc2VsZWN0ZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBkaXNhYmxlZCBBIGJpbmRpbmcsIHRlbGxpbmcgd2hldGhlciBvciBub3QgdGhpcyB0YWIgaXMgZGlzYWJsZWQuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGEgdGFiIHdpdGggYSBoZWFkaW5nIGFuZCBjb250ZW50LiBNdXN0IGJlIHBsYWNlZCB3aXRoaW4gYSB7QGxpbmsgdWkuYm9vdHN0cmFwLnRhYnMuZGlyZWN0aXZlOnRhYnNldCB0YWJzZXR9LlxuICpcbiAqIEBleGFtcGxlXG48ZXhhbXBsZSBtb2R1bGU9XCJ1aS5ib290c3RyYXBcIj5cbiAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJUYWJzRGVtb0N0cmxcIj5cbiAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLXNtYWxsXCIgbmctY2xpY2s9XCJpdGVtc1swXS5hY3RpdmUgPSB0cnVlXCI+XG4gICAgICAgIFNlbGVjdCBpdGVtIDEsIHVzaW5nIGFjdGl2ZSBiaW5kaW5nXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLXNtYWxsXCIgbmctY2xpY2s9XCJpdGVtc1sxXS5kaXNhYmxlZCA9ICFpdGVtc1sxXS5kaXNhYmxlZFwiPlxuICAgICAgICBFbmFibGUvZGlzYWJsZSBpdGVtIDIsIHVzaW5nIGRpc2FibGVkIGJpbmRpbmdcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgPGJyIC8+XG4gICAgICA8dGFic2V0PlxuICAgICAgICA8dGFiIGhlYWRpbmc9XCJUYWIgMVwiPkZpcnN0IFRhYjwvdGFiPlxuICAgICAgICA8dGFiIHNlbGVjdD1cImFsZXJ0TWUoKVwiPlxuICAgICAgICAgIDx0YWItaGVhZGluZz48aSBjbGFzcz1cImljb24tYmVsbFwiPjwvaT4gQWxlcnQgbWUhPC90YWItaGVhZGluZz5cbiAgICAgICAgICBTZWNvbmQgVGFiLCB3aXRoIGFsZXJ0IGNhbGxiYWNrIGFuZCBodG1sIGhlYWRpbmchXG4gICAgICAgIDwvdGFiPlxuICAgICAgICA8dGFiIG5nLXJlcGVhdD1cIml0ZW0gaW4gaXRlbXNcIlxuICAgICAgICAgIGhlYWRpbmc9XCJ7e2l0ZW0udGl0bGV9fVwiXG4gICAgICAgICAgZGlzYWJsZWQ9XCJpdGVtLmRpc2FibGVkXCJcbiAgICAgICAgICBhY3RpdmU9XCJpdGVtLmFjdGl2ZVwiPlxuICAgICAgICAgIHt7aXRlbS5jb250ZW50fX1cbiAgICAgICAgPC90YWI+XG4gICAgICA8L3RhYnNldD5cbiAgICA8L2Rpdj5cbiAgPC9maWxlPlxuICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgZnVuY3Rpb24gVGFic0RlbW9DdHJsKCRzY29wZSkge1xuICAgICAgJHNjb3BlLml0ZW1zID0gW1xuICAgICAgICB7IHRpdGxlOlwiRHluYW1pYyBUaXRsZSAxXCIsIGNvbnRlbnQ6XCJEeW5hbWljIEl0ZW0gMFwiIH0sXG4gICAgICAgIHsgdGl0bGU6XCJEeW5hbWljIFRpdGxlIDJcIiwgY29udGVudDpcIkR5bmFtaWMgSXRlbSAxXCIsIGRpc2FibGVkOiB0cnVlIH1cbiAgICAgIF07XG5cbiAgICAgICRzY29wZS5hbGVydE1lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgYWxlcnQoXCJZb3UndmUgc2VsZWN0ZWQgdGhlIGFsZXJ0IHRhYiFcIik7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9O1xuICA8L2ZpbGU+XG48L2V4YW1wbGU+XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSB1aS5ib290c3RyYXAudGFicy5kaXJlY3RpdmU6dGFiSGVhZGluZ1xuICogQHJlc3RyaWN0IEVBXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGFuIEhUTUwgaGVhZGluZyBmb3IgYSB7QGxpbmsgdWkuYm9vdHN0cmFwLnRhYnMuZGlyZWN0aXZlOnRhYiB0YWJ9LiBNdXN0IGJlIHBsYWNlZCBhcyBhIGNoaWxkIG9mIGEgdGFiIGVsZW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbjxleGFtcGxlIG1vZHVsZT1cInVpLmJvb3RzdHJhcFwiPlxuICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgIDx0YWJzZXQ+XG4gICAgICA8dGFiPlxuICAgICAgICA8dGFiLWhlYWRpbmc+PGI+SFRNTDwvYj4gaW4gbXkgdGl0bGVzPyE8L3RhYi1oZWFkaW5nPlxuICAgICAgICBBbmQgc29tZSBjb250ZW50LCB0b28hXG4gICAgICA8L3RhYj5cbiAgICAgIDx0YWI+XG4gICAgICAgIDx0YWItaGVhZGluZz48aSBjbGFzcz1cImljb24taGVhcnRcIj48L2k+IEljb24gaGVhZGluZz8hPzwvdGFiLWhlYWRpbmc+XG4gICAgICAgIFRoYXQncyByaWdodC5cbiAgICAgIDwvdGFiPlxuICAgIDwvdGFic2V0PlxuICA8L2ZpbGU+XG48L2V4YW1wbGU+XG4gKi9cbi5kaXJlY3RpdmUoJ3RhYicsIFsnJHBhcnNlJywgZnVuY3Rpb24oJHBhcnNlKSB7XG4gIHJldHVybiB7XG4gICAgcmVxdWlyZTogJ150YWJzZXQnLFxuICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZS90YWJzL3RhYi5odG1sJyxcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgIHNjb3BlOiB7XG4gICAgICBhY3RpdmU6ICc9PycsXG4gICAgICBoZWFkaW5nOiAnQCcsXG4gICAgICBvblNlbGVjdDogJyZzZWxlY3QnLCAvL1RoaXMgY2FsbGJhY2sgaXMgY2FsbGVkIGluIGNvbnRlbnRIZWFkaW5nVHJhbnNjbHVkZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvL29uY2UgaXQgaW5zZXJ0cyB0aGUgdGFiJ3MgY29udGVudCBpbnRvIHRoZSBkb21cbiAgICAgIG9uRGVzZWxlY3Q6ICcmZGVzZWxlY3QnXG4gICAgfSxcbiAgICBjb250cm9sbGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIC8vRW1wdHkgY29udHJvbGxlciBzbyBvdGhlciBkaXJlY3RpdmVzIGNhbiByZXF1aXJlIGJlaW5nICd1bmRlcicgYSB0YWJcbiAgICB9LFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uKGVsbSwgYXR0cnMsIHRyYW5zY2x1ZGUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxtLCBhdHRycywgdGFic2V0Q3RybCkge1xuICAgICAgICBzY29wZS4kd2F0Y2goJ2FjdGl2ZScsIGZ1bmN0aW9uKGFjdGl2ZSkge1xuICAgICAgICAgIGlmIChhY3RpdmUpIHtcbiAgICAgICAgICAgIHRhYnNldEN0cmwuc2VsZWN0KHNjb3BlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNjb3BlLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIGlmICggYXR0cnMuZGlzYWJsZWQgKSB7XG4gICAgICAgICAgc2NvcGUuJHBhcmVudC4kd2F0Y2goJHBhcnNlKGF0dHJzLmRpc2FibGVkKSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIHNjb3BlLmRpc2FibGVkID0gISEgdmFsdWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBzY29wZS5zZWxlY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoICFzY29wZS5kaXNhYmxlZCApIHtcbiAgICAgICAgICAgIHNjb3BlLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRhYnNldEN0cmwuYWRkVGFiKHNjb3BlKTtcbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHRhYnNldEN0cmwucmVtb3ZlVGFiKHNjb3BlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy9XZSBuZWVkIHRvIHRyYW5zY2x1ZGUgbGF0ZXIsIG9uY2UgdGhlIGNvbnRlbnQgY29udGFpbmVyIGlzIHJlYWR5LlxuICAgICAgICAvL3doZW4gdGhpcyBsaW5rIGhhcHBlbnMsIHdlJ3JlIGluc2lkZSBhIHRhYiBoZWFkaW5nLlxuICAgICAgICBzY29wZS4kdHJhbnNjbHVkZUZuID0gdHJhbnNjbHVkZTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufV0pXG5cbi5kaXJlY3RpdmUoJ3RhYkhlYWRpbmdUcmFuc2NsdWRlJywgW2Z1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcmVxdWlyZTogJ150YWInLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbG0sIGF0dHJzLCB0YWJDdHJsKSB7XG4gICAgICBzY29wZS4kd2F0Y2goJ2hlYWRpbmdFbGVtZW50JywgZnVuY3Rpb24gdXBkYXRlSGVhZGluZ0VsZW1lbnQoaGVhZGluZykge1xuICAgICAgICBpZiAoaGVhZGluZykge1xuICAgICAgICAgIGVsbS5odG1sKCcnKTtcbiAgICAgICAgICBlbG0uYXBwZW5kKGhlYWRpbmcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XSlcblxuLmRpcmVjdGl2ZSgndGFiQ29udGVudFRyYW5zY2x1ZGUnLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHJlcXVpcmU6ICdedGFic2V0JyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxtLCBhdHRycykge1xuICAgICAgdmFyIHRhYiA9IHNjb3BlLiRldmFsKGF0dHJzLnRhYkNvbnRlbnRUcmFuc2NsdWRlKTtcblxuICAgICAgLy9Ob3cgb3VyIHRhYiBpcyByZWFkeSB0byBiZSB0cmFuc2NsdWRlZDogYm90aCB0aGUgdGFiIGhlYWRpbmcgYXJlYVxuICAgICAgLy9hbmQgdGhlIHRhYiBjb250ZW50IGFyZWEgYXJlIGxvYWRlZC4gIFRyYW5zY2x1ZGUgJ2VtIGJvdGguXG4gICAgICB0YWIuJHRyYW5zY2x1ZGVGbih0YWIuJHBhcmVudCwgZnVuY3Rpb24oY29udGVudHMpIHtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKGNvbnRlbnRzLCBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgICAgaWYgKGlzVGFiSGVhZGluZyhub2RlKSkge1xuICAgICAgICAgICAgLy9MZXQgdGFiSGVhZGluZ1RyYW5zY2x1ZGUga25vdy5cbiAgICAgICAgICAgIHRhYi5oZWFkaW5nRWxlbWVudCA9IG5vZGU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsbS5hcHBlbmQobm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgZnVuY3Rpb24gaXNUYWJIZWFkaW5nKG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS50YWdOYW1lICYmICAoXG4gICAgICBub2RlLmhhc0F0dHJpYnV0ZSgndGFiLWhlYWRpbmcnKSB8fFxuICAgICAgbm9kZS5oYXNBdHRyaWJ1dGUoJ2RhdGEtdGFiLWhlYWRpbmcnKSB8fFxuICAgICAgbm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0YWItaGVhZGluZycgfHxcbiAgICAgIG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnZGF0YS10YWItaGVhZGluZydcbiAgICApO1xuICB9XG59KVxuXG47XG5cbmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAudGltZXBpY2tlcicsIFtdKVxuXG4uY29uc3RhbnQoJ3RpbWVwaWNrZXJDb25maWcnLCB7XG4gIGhvdXJTdGVwOiAxLFxuICBtaW51dGVTdGVwOiAxLFxuICBzaG93TWVyaWRpYW46IHRydWUsXG4gIG1lcmlkaWFuczogbnVsbCxcbiAgcmVhZG9ubHlJbnB1dDogZmFsc2UsXG4gIG1vdXNld2hlZWw6IHRydWVcbn0pXG5cbi5jb250cm9sbGVyKCdUaW1lcGlja2VyQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRhdHRycycsICckcGFyc2UnLCAnJGxvZycsICckbG9jYWxlJywgJ3RpbWVwaWNrZXJDb25maWcnLCBmdW5jdGlvbigkc2NvcGUsICRhdHRycywgJHBhcnNlLCAkbG9nLCAkbG9jYWxlLCB0aW1lcGlja2VyQ29uZmlnKSB7XG4gIHZhciBzZWxlY3RlZCA9IG5ldyBEYXRlKCksXG4gICAgICBuZ01vZGVsQ3RybCA9IHsgJHNldFZpZXdWYWx1ZTogYW5ndWxhci5ub29wIH0sIC8vIG51bGxNb2RlbEN0cmxcbiAgICAgIG1lcmlkaWFucyA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5tZXJpZGlhbnMpID8gJHNjb3BlLiRwYXJlbnQuJGV2YWwoJGF0dHJzLm1lcmlkaWFucykgOiB0aW1lcGlja2VyQ29uZmlnLm1lcmlkaWFucyB8fCAkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFMuQU1QTVM7XG5cbiAgdGhpcy5pbml0ID0gZnVuY3Rpb24oIG5nTW9kZWxDdHJsXywgaW5wdXRzICkge1xuICAgIG5nTW9kZWxDdHJsID0gbmdNb2RlbEN0cmxfO1xuICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIgPSB0aGlzLnJlbmRlcjtcblxuICAgIHZhciBob3Vyc0lucHV0RWwgPSBpbnB1dHMuZXEoMCksXG4gICAgICAgIG1pbnV0ZXNJbnB1dEVsID0gaW5wdXRzLmVxKDEpO1xuXG4gICAgdmFyIG1vdXNld2hlZWwgPSBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMubW91c2V3aGVlbCkgPyAkc2NvcGUuJHBhcmVudC4kZXZhbCgkYXR0cnMubW91c2V3aGVlbCkgOiB0aW1lcGlja2VyQ29uZmlnLm1vdXNld2hlZWw7XG4gICAgaWYgKCBtb3VzZXdoZWVsICkge1xuICAgICAgdGhpcy5zZXR1cE1vdXNld2hlZWxFdmVudHMoIGhvdXJzSW5wdXRFbCwgbWludXRlc0lucHV0RWwgKTtcbiAgICB9XG5cbiAgICAkc2NvcGUucmVhZG9ubHlJbnB1dCA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5yZWFkb25seUlucHV0KSA/ICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5yZWFkb25seUlucHV0KSA6IHRpbWVwaWNrZXJDb25maWcucmVhZG9ubHlJbnB1dDtcbiAgICB0aGlzLnNldHVwSW5wdXRFdmVudHMoIGhvdXJzSW5wdXRFbCwgbWludXRlc0lucHV0RWwgKTtcbiAgfTtcblxuICB2YXIgaG91clN0ZXAgPSB0aW1lcGlja2VyQ29uZmlnLmhvdXJTdGVwO1xuICBpZiAoJGF0dHJzLmhvdXJTdGVwKSB7XG4gICAgJHNjb3BlLiRwYXJlbnQuJHdhdGNoKCRwYXJzZSgkYXR0cnMuaG91clN0ZXApLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaG91clN0ZXAgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIG1pbnV0ZVN0ZXAgPSB0aW1lcGlja2VyQ29uZmlnLm1pbnV0ZVN0ZXA7XG4gIGlmICgkYXR0cnMubWludXRlU3RlcCkge1xuICAgICRzY29wZS4kcGFyZW50LiR3YXRjaCgkcGFyc2UoJGF0dHJzLm1pbnV0ZVN0ZXApLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgbWludXRlU3RlcCA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyAxMkggLyAyNEggbW9kZVxuICAkc2NvcGUuc2hvd01lcmlkaWFuID0gdGltZXBpY2tlckNvbmZpZy5zaG93TWVyaWRpYW47XG4gIGlmICgkYXR0cnMuc2hvd01lcmlkaWFuKSB7XG4gICAgJHNjb3BlLiRwYXJlbnQuJHdhdGNoKCRwYXJzZSgkYXR0cnMuc2hvd01lcmlkaWFuKSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICRzY29wZS5zaG93TWVyaWRpYW4gPSAhIXZhbHVlO1xuXG4gICAgICBpZiAoIG5nTW9kZWxDdHJsLiRlcnJvci50aW1lICkge1xuICAgICAgICAvLyBFdmFsdWF0ZSBmcm9tIHRlbXBsYXRlXG4gICAgICAgIHZhciBob3VycyA9IGdldEhvdXJzRnJvbVRlbXBsYXRlKCksIG1pbnV0ZXMgPSBnZXRNaW51dGVzRnJvbVRlbXBsYXRlKCk7XG4gICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCggaG91cnMgKSAmJiBhbmd1bGFyLmlzRGVmaW5lZCggbWludXRlcyApKSB7XG4gICAgICAgICAgc2VsZWN0ZWQuc2V0SG91cnMoIGhvdXJzICk7XG4gICAgICAgICAgcmVmcmVzaCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cGRhdGVUZW1wbGF0ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gR2V0ICRzY29wZS5ob3VycyBpbiAyNEggbW9kZSBpZiB2YWxpZFxuICBmdW5jdGlvbiBnZXRIb3Vyc0Zyb21UZW1wbGF0ZSAoICkge1xuICAgIHZhciBob3VycyA9IHBhcnNlSW50KCAkc2NvcGUuaG91cnMsIDEwICk7XG4gICAgdmFyIHZhbGlkID0gKCAkc2NvcGUuc2hvd01lcmlkaWFuICkgPyAoaG91cnMgPiAwICYmIGhvdXJzIDwgMTMpIDogKGhvdXJzID49IDAgJiYgaG91cnMgPCAyNCk7XG4gICAgaWYgKCAhdmFsaWQgKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmICggJHNjb3BlLnNob3dNZXJpZGlhbiApIHtcbiAgICAgIGlmICggaG91cnMgPT09IDEyICkge1xuICAgICAgICBob3VycyA9IDA7XG4gICAgICB9XG4gICAgICBpZiAoICRzY29wZS5tZXJpZGlhbiA9PT0gbWVyaWRpYW5zWzFdICkge1xuICAgICAgICBob3VycyA9IGhvdXJzICsgMTI7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBob3VycztcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldE1pbnV0ZXNGcm9tVGVtcGxhdGUoKSB7XG4gICAgdmFyIG1pbnV0ZXMgPSBwYXJzZUludCgkc2NvcGUubWludXRlcywgMTApO1xuICAgIHJldHVybiAoIG1pbnV0ZXMgPj0gMCAmJiBtaW51dGVzIDwgNjAgKSA/IG1pbnV0ZXMgOiB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBwYWQoIHZhbHVlICkge1xuICAgIHJldHVybiAoIGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSAmJiB2YWx1ZS50b1N0cmluZygpLmxlbmd0aCA8IDIgKSA/ICcwJyArIHZhbHVlIDogdmFsdWU7XG4gIH1cblxuICAvLyBSZXNwb25kIG9uIG1vdXNld2hlZWwgc3BpblxuICB0aGlzLnNldHVwTW91c2V3aGVlbEV2ZW50cyA9IGZ1bmN0aW9uKCBob3Vyc0lucHV0RWwsIG1pbnV0ZXNJbnB1dEVsICkge1xuICAgIHZhciBpc1Njcm9sbGluZ1VwID0gZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKGUub3JpZ2luYWxFdmVudCkge1xuICAgICAgICBlID0gZS5vcmlnaW5hbEV2ZW50O1xuICAgICAgfVxuICAgICAgLy9waWNrIGNvcnJlY3QgZGVsdGEgdmFyaWFibGUgZGVwZW5kaW5nIG9uIGV2ZW50XG4gICAgICB2YXIgZGVsdGEgPSAoZS53aGVlbERlbHRhKSA/IGUud2hlZWxEZWx0YSA6IC1lLmRlbHRhWTtcbiAgICAgIHJldHVybiAoZS5kZXRhaWwgfHwgZGVsdGEgPiAwKTtcbiAgICB9O1xuXG4gICAgaG91cnNJbnB1dEVsLmJpbmQoJ21vdXNld2hlZWwgd2hlZWwnLCBmdW5jdGlvbihlKSB7XG4gICAgICAkc2NvcGUuJGFwcGx5KCAoaXNTY3JvbGxpbmdVcChlKSkgPyAkc2NvcGUuaW5jcmVtZW50SG91cnMoKSA6ICRzY29wZS5kZWNyZW1lbnRIb3VycygpICk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICBtaW51dGVzSW5wdXRFbC5iaW5kKCdtb3VzZXdoZWVsIHdoZWVsJywgZnVuY3Rpb24oZSkge1xuICAgICAgJHNjb3BlLiRhcHBseSggKGlzU2Nyb2xsaW5nVXAoZSkpID8gJHNjb3BlLmluY3JlbWVudE1pbnV0ZXMoKSA6ICRzY29wZS5kZWNyZW1lbnRNaW51dGVzKCkgKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICB9O1xuXG4gIHRoaXMuc2V0dXBJbnB1dEV2ZW50cyA9IGZ1bmN0aW9uKCBob3Vyc0lucHV0RWwsIG1pbnV0ZXNJbnB1dEVsICkge1xuICAgIGlmICggJHNjb3BlLnJlYWRvbmx5SW5wdXQgKSB7XG4gICAgICAkc2NvcGUudXBkYXRlSG91cnMgPSBhbmd1bGFyLm5vb3A7XG4gICAgICAkc2NvcGUudXBkYXRlTWludXRlcyA9IGFuZ3VsYXIubm9vcDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaW52YWxpZGF0ZSA9IGZ1bmN0aW9uKGludmFsaWRIb3VycywgaW52YWxpZE1pbnV0ZXMpIHtcbiAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoIG51bGwgKTtcbiAgICAgIG5nTW9kZWxDdHJsLiRzZXRWYWxpZGl0eSgndGltZScsIGZhbHNlKTtcbiAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChpbnZhbGlkSG91cnMpKSB7XG4gICAgICAgICRzY29wZS5pbnZhbGlkSG91cnMgPSBpbnZhbGlkSG91cnM7XG4gICAgICB9XG4gICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoaW52YWxpZE1pbnV0ZXMpKSB7XG4gICAgICAgICRzY29wZS5pbnZhbGlkTWludXRlcyA9IGludmFsaWRNaW51dGVzO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAkc2NvcGUudXBkYXRlSG91cnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBob3VycyA9IGdldEhvdXJzRnJvbVRlbXBsYXRlKCk7XG5cbiAgICAgIGlmICggYW5ndWxhci5pc0RlZmluZWQoaG91cnMpICkge1xuICAgICAgICBzZWxlY3RlZC5zZXRIb3VycyggaG91cnMgKTtcbiAgICAgICAgcmVmcmVzaCggJ2gnICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnZhbGlkYXRlKHRydWUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBob3Vyc0lucHV0RWwuYmluZCgnYmx1cicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmICggISRzY29wZS5pbnZhbGlkSG91cnMgJiYgJHNjb3BlLmhvdXJzIDwgMTApIHtcbiAgICAgICAgJHNjb3BlLiRhcHBseSggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHNjb3BlLmhvdXJzID0gcGFkKCAkc2NvcGUuaG91cnMgKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAkc2NvcGUudXBkYXRlTWludXRlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1pbnV0ZXMgPSBnZXRNaW51dGVzRnJvbVRlbXBsYXRlKCk7XG5cbiAgICAgIGlmICggYW5ndWxhci5pc0RlZmluZWQobWludXRlcykgKSB7XG4gICAgICAgIHNlbGVjdGVkLnNldE1pbnV0ZXMoIG1pbnV0ZXMgKTtcbiAgICAgICAgcmVmcmVzaCggJ20nICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnZhbGlkYXRlKHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIG1pbnV0ZXNJbnB1dEVsLmJpbmQoJ2JsdXInLCBmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoICEkc2NvcGUuaW52YWxpZE1pbnV0ZXMgJiYgJHNjb3BlLm1pbnV0ZXMgPCAxMCApIHtcbiAgICAgICAgJHNjb3BlLiRhcHBseSggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHNjb3BlLm1pbnV0ZXMgPSBwYWQoICRzY29wZS5taW51dGVzICk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gIH07XG5cbiAgdGhpcy5yZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGF0ZSA9IG5nTW9kZWxDdHJsLiRtb2RlbFZhbHVlID8gbmV3IERhdGUoIG5nTW9kZWxDdHJsLiRtb2RlbFZhbHVlICkgOiBudWxsO1xuXG4gICAgaWYgKCBpc05hTihkYXRlKSApIHtcbiAgICAgIG5nTW9kZWxDdHJsLiRzZXRWYWxpZGl0eSgndGltZScsIGZhbHNlKTtcbiAgICAgICRsb2cuZXJyb3IoJ1RpbWVwaWNrZXIgZGlyZWN0aXZlOiBcIm5nLW1vZGVsXCIgdmFsdWUgbXVzdCBiZSBhIERhdGUgb2JqZWN0LCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgMDEuMDEuMTk3MCBvciBhIHN0cmluZyByZXByZXNlbnRpbmcgYW4gUkZDMjgyMiBvciBJU08gODYwMSBkYXRlLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIGRhdGUgKSB7XG4gICAgICAgIHNlbGVjdGVkID0gZGF0ZTtcbiAgICAgIH1cbiAgICAgIG1ha2VWYWxpZCgpO1xuICAgICAgdXBkYXRlVGVtcGxhdGUoKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gQ2FsbCBpbnRlcm5hbGx5IHdoZW4gd2Uga25vdyB0aGF0IG1vZGVsIGlzIHZhbGlkLlxuICBmdW5jdGlvbiByZWZyZXNoKCBrZXlib2FyZENoYW5nZSApIHtcbiAgICBtYWtlVmFsaWQoKTtcbiAgICBuZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKCBuZXcgRGF0ZShzZWxlY3RlZCkgKTtcbiAgICB1cGRhdGVUZW1wbGF0ZSgga2V5Ym9hcmRDaGFuZ2UgKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1ha2VWYWxpZCgpIHtcbiAgICBuZ01vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ3RpbWUnLCB0cnVlKTtcbiAgICAkc2NvcGUuaW52YWxpZEhvdXJzID0gZmFsc2U7XG4gICAgJHNjb3BlLmludmFsaWRNaW51dGVzID0gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVUZW1wbGF0ZSgga2V5Ym9hcmRDaGFuZ2UgKSB7XG4gICAgdmFyIGhvdXJzID0gc2VsZWN0ZWQuZ2V0SG91cnMoKSwgbWludXRlcyA9IHNlbGVjdGVkLmdldE1pbnV0ZXMoKTtcblxuICAgIGlmICggJHNjb3BlLnNob3dNZXJpZGlhbiApIHtcbiAgICAgIGhvdXJzID0gKCBob3VycyA9PT0gMCB8fCBob3VycyA9PT0gMTIgKSA/IDEyIDogaG91cnMgJSAxMjsgLy8gQ29udmVydCAyNCB0byAxMiBob3VyIHN5c3RlbVxuICAgIH1cblxuICAgICRzY29wZS5ob3VycyA9IGtleWJvYXJkQ2hhbmdlID09PSAnaCcgPyBob3VycyA6IHBhZChob3Vycyk7XG4gICAgJHNjb3BlLm1pbnV0ZXMgPSBrZXlib2FyZENoYW5nZSA9PT0gJ20nID8gbWludXRlcyA6IHBhZChtaW51dGVzKTtcbiAgICAkc2NvcGUubWVyaWRpYW4gPSBzZWxlY3RlZC5nZXRIb3VycygpIDwgMTIgPyBtZXJpZGlhbnNbMF0gOiBtZXJpZGlhbnNbMV07XG4gIH1cblxuICBmdW5jdGlvbiBhZGRNaW51dGVzKCBtaW51dGVzICkge1xuICAgIHZhciBkdCA9IG5ldyBEYXRlKCBzZWxlY3RlZC5nZXRUaW1lKCkgKyBtaW51dGVzICogNjAwMDAgKTtcbiAgICBzZWxlY3RlZC5zZXRIb3VycyggZHQuZ2V0SG91cnMoKSwgZHQuZ2V0TWludXRlcygpICk7XG4gICAgcmVmcmVzaCgpO1xuICB9XG5cbiAgJHNjb3BlLmluY3JlbWVudEhvdXJzID0gZnVuY3Rpb24oKSB7XG4gICAgYWRkTWludXRlcyggaG91clN0ZXAgKiA2MCApO1xuICB9O1xuICAkc2NvcGUuZGVjcmVtZW50SG91cnMgPSBmdW5jdGlvbigpIHtcbiAgICBhZGRNaW51dGVzKCAtIGhvdXJTdGVwICogNjAgKTtcbiAgfTtcbiAgJHNjb3BlLmluY3JlbWVudE1pbnV0ZXMgPSBmdW5jdGlvbigpIHtcbiAgICBhZGRNaW51dGVzKCBtaW51dGVTdGVwICk7XG4gIH07XG4gICRzY29wZS5kZWNyZW1lbnRNaW51dGVzID0gZnVuY3Rpb24oKSB7XG4gICAgYWRkTWludXRlcyggLSBtaW51dGVTdGVwICk7XG4gIH07XG4gICRzY29wZS50b2dnbGVNZXJpZGlhbiA9IGZ1bmN0aW9uKCkge1xuICAgIGFkZE1pbnV0ZXMoIDEyICogNjAgKiAoKCBzZWxlY3RlZC5nZXRIb3VycygpIDwgMTIgKSA/IDEgOiAtMSkgKTtcbiAgfTtcbn1dKVxuXG4uZGlyZWN0aXZlKCd0aW1lcGlja2VyJywgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgIHJlcXVpcmU6IFsndGltZXBpY2tlcicsICc/Xm5nTW9kZWwnXSxcbiAgICBjb250cm9sbGVyOidUaW1lcGlja2VyQ29udHJvbGxlcicsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICBzY29wZToge30sXG4gICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZS90aW1lcGlja2VyL3RpbWVwaWNrZXIuaHRtbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJscykge1xuICAgICAgdmFyIHRpbWVwaWNrZXJDdHJsID0gY3RybHNbMF0sIG5nTW9kZWxDdHJsID0gY3RybHNbMV07XG5cbiAgICAgIGlmICggbmdNb2RlbEN0cmwgKSB7XG4gICAgICAgIHRpbWVwaWNrZXJDdHJsLmluaXQoIG5nTW9kZWxDdHJsLCBlbGVtZW50LmZpbmQoJ2lucHV0JykgKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59KTtcblxuYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC50eXBlYWhlYWQnLCBbJ3VpLmJvb3RzdHJhcC5wb3NpdGlvbicsICd1aS5ib290c3RyYXAuYmluZEh0bWwnXSlcblxuLyoqXG4gKiBBIGhlbHBlciBzZXJ2aWNlIHRoYXQgY2FuIHBhcnNlIHR5cGVhaGVhZCdzIHN5bnRheCAoc3RyaW5nIHByb3ZpZGVkIGJ5IHVzZXJzKVxuICogRXh0cmFjdGVkIHRvIGEgc2VwYXJhdGUgc2VydmljZSBmb3IgZWFzZSBvZiB1bml0IHRlc3RpbmdcbiAqL1xuICAuZmFjdG9yeSgndHlwZWFoZWFkUGFyc2VyJywgWyckcGFyc2UnLCBmdW5jdGlvbiAoJHBhcnNlKSB7XG5cbiAgLy8gICAgICAgICAgICAgICAgICAgICAgMDAwMDAxMTEwMDAwMDAwMDAwMDAwMjIyMDAwMDAwMDAwMDAwMDAwMDMzMzMzMzMzMzMzMzMzMzAwMDAwMDAwMDAwNDQwMDBcbiAgdmFyIFRZUEVBSEVBRF9SRUdFWFAgPSAvXlxccyooLio/KSg/Olxccythc1xccysoLio/KSk/XFxzK2ZvclxccysoPzooW1xcJFxcd11bXFwkXFx3XFxkXSopKVxccytpblxccysoLiopJC87XG5cbiAgcmV0dXJuIHtcbiAgICBwYXJzZTpmdW5jdGlvbiAoaW5wdXQpIHtcblxuICAgICAgdmFyIG1hdGNoID0gaW5wdXQubWF0Y2goVFlQRUFIRUFEX1JFR0VYUCk7XG4gICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnRXhwZWN0ZWQgdHlwZWFoZWFkIHNwZWNpZmljYXRpb24gaW4gZm9ybSBvZiBcIl9tb2RlbFZhbHVlXyAoYXMgX2xhYmVsXyk/IGZvciBfaXRlbV8gaW4gX2NvbGxlY3Rpb25fXCInICtcbiAgICAgICAgICAgICcgYnV0IGdvdCBcIicgKyBpbnB1dCArICdcIi4nKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXRlbU5hbWU6bWF0Y2hbM10sXG4gICAgICAgIHNvdXJjZTokcGFyc2UobWF0Y2hbNF0pLFxuICAgICAgICB2aWV3TWFwcGVyOiRwYXJzZShtYXRjaFsyXSB8fCBtYXRjaFsxXSksXG4gICAgICAgIG1vZGVsTWFwcGVyOiRwYXJzZShtYXRjaFsxXSlcbiAgICAgIH07XG4gICAgfVxuICB9O1xufV0pXG5cbiAgLmRpcmVjdGl2ZSgndHlwZWFoZWFkJywgWyckY29tcGlsZScsICckcGFyc2UnLCAnJHEnLCAnJHRpbWVvdXQnLCAnJGRvY3VtZW50JywgJyRwb3NpdGlvbicsICd0eXBlYWhlYWRQYXJzZXInLFxuICAgIGZ1bmN0aW9uICgkY29tcGlsZSwgJHBhcnNlLCAkcSwgJHRpbWVvdXQsICRkb2N1bWVudCwgJHBvc2l0aW9uLCB0eXBlYWhlYWRQYXJzZXIpIHtcblxuICB2YXIgSE9UX0tFWVMgPSBbOSwgMTMsIDI3LCAzOCwgNDBdO1xuXG4gIHJldHVybiB7XG4gICAgcmVxdWlyZTonbmdNb2RlbCcsXG4gICAgbGluazpmdW5jdGlvbiAob3JpZ2luYWxTY29wZSwgZWxlbWVudCwgYXR0cnMsIG1vZGVsQ3RybCkge1xuXG4gICAgICAvL1NVUFBPUlRFRCBBVFRSSUJVVEVTIChPUFRJT05TKVxuXG4gICAgICAvL21pbmltYWwgbm8gb2YgY2hhcmFjdGVycyB0aGF0IG5lZWRzIHRvIGJlIGVudGVyZWQgYmVmb3JlIHR5cGVhaGVhZCBraWNrcy1pblxuICAgICAgdmFyIG1pblNlYXJjaCA9IG9yaWdpbmFsU2NvcGUuJGV2YWwoYXR0cnMudHlwZWFoZWFkTWluTGVuZ3RoKSB8fCAxO1xuXG4gICAgICAvL21pbmltYWwgd2FpdCB0aW1lIGFmdGVyIGxhc3QgY2hhcmFjdGVyIHR5cGVkIGJlZm9yZSB0eXBlaGVhZCBraWNrcy1pblxuICAgICAgdmFyIHdhaXRUaW1lID0gb3JpZ2luYWxTY29wZS4kZXZhbChhdHRycy50eXBlYWhlYWRXYWl0TXMpIHx8IDA7XG5cbiAgICAgIC8vc2hvdWxkIGl0IHJlc3RyaWN0IG1vZGVsIHZhbHVlcyB0byB0aGUgb25lcyBzZWxlY3RlZCBmcm9tIHRoZSBwb3B1cCBvbmx5P1xuICAgICAgdmFyIGlzRWRpdGFibGUgPSBvcmlnaW5hbFNjb3BlLiRldmFsKGF0dHJzLnR5cGVhaGVhZEVkaXRhYmxlKSAhPT0gZmFsc2U7XG5cbiAgICAgIC8vYmluZGluZyB0byBhIHZhcmlhYmxlIHRoYXQgaW5kaWNhdGVzIGlmIG1hdGNoZXMgYXJlIGJlaW5nIHJldHJpZXZlZCBhc3luY2hyb25vdXNseVxuICAgICAgdmFyIGlzTG9hZGluZ1NldHRlciA9ICRwYXJzZShhdHRycy50eXBlYWhlYWRMb2FkaW5nKS5hc3NpZ24gfHwgYW5ndWxhci5ub29wO1xuXG4gICAgICAvL2EgY2FsbGJhY2sgZXhlY3V0ZWQgd2hlbiBhIG1hdGNoIGlzIHNlbGVjdGVkXG4gICAgICB2YXIgb25TZWxlY3RDYWxsYmFjayA9ICRwYXJzZShhdHRycy50eXBlYWhlYWRPblNlbGVjdCk7XG5cbiAgICAgIHZhciBpbnB1dEZvcm1hdHRlciA9IGF0dHJzLnR5cGVhaGVhZElucHV0Rm9ybWF0dGVyID8gJHBhcnNlKGF0dHJzLnR5cGVhaGVhZElucHV0Rm9ybWF0dGVyKSA6IHVuZGVmaW5lZDtcblxuICAgICAgdmFyIGFwcGVuZFRvQm9keSA9ICBhdHRycy50eXBlYWhlYWRBcHBlbmRUb0JvZHkgPyBvcmlnaW5hbFNjb3BlLiRldmFsKGF0dHJzLnR5cGVhaGVhZEFwcGVuZFRvQm9keSkgOiBmYWxzZTtcblxuICAgICAgLy9JTlRFUk5BTCBWQVJJQUJMRVNcblxuICAgICAgLy9tb2RlbCBzZXR0ZXIgZXhlY3V0ZWQgdXBvbiBtYXRjaCBzZWxlY3Rpb25cbiAgICAgIHZhciAkc2V0TW9kZWxWYWx1ZSA9ICRwYXJzZShhdHRycy5uZ01vZGVsKS5hc3NpZ247XG5cbiAgICAgIC8vZXhwcmVzc2lvbnMgdXNlZCBieSB0eXBlYWhlYWRcbiAgICAgIHZhciBwYXJzZXJSZXN1bHQgPSB0eXBlYWhlYWRQYXJzZXIucGFyc2UoYXR0cnMudHlwZWFoZWFkKTtcblxuICAgICAgdmFyIGhhc0ZvY3VzO1xuXG4gICAgICAvL2NyZWF0ZSBhIGNoaWxkIHNjb3BlIGZvciB0aGUgdHlwZWFoZWFkIGRpcmVjdGl2ZSBzbyB3ZSBhcmUgbm90IHBvbGx1dGluZyBvcmlnaW5hbCBzY29wZVxuICAgICAgLy93aXRoIHR5cGVhaGVhZC1zcGVjaWZpYyBkYXRhIChtYXRjaGVzLCBxdWVyeSBldGMuKVxuICAgICAgdmFyIHNjb3BlID0gb3JpZ2luYWxTY29wZS4kbmV3KCk7XG4gICAgICBvcmlnaW5hbFNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpe1xuICAgICAgICBzY29wZS4kZGVzdHJveSgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFdBSS1BUklBXG4gICAgICB2YXIgcG9wdXBJZCA9ICd0eXBlYWhlYWQtJyArIHNjb3BlLiRpZCArICctJyArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwKTtcbiAgICAgIGVsZW1lbnQuYXR0cih7XG4gICAgICAgICdhcmlhLWF1dG9jb21wbGV0ZSc6ICdsaXN0JyxcbiAgICAgICAgJ2FyaWEtZXhwYW5kZWQnOiBmYWxzZSxcbiAgICAgICAgJ2FyaWEtb3ducyc6IHBvcHVwSWRcbiAgICAgIH0pO1xuXG4gICAgICAvL3BvcC11cCBlbGVtZW50IHVzZWQgdG8gZGlzcGxheSBtYXRjaGVzXG4gICAgICB2YXIgcG9wVXBFbCA9IGFuZ3VsYXIuZWxlbWVudCgnPGRpdiB0eXBlYWhlYWQtcG9wdXA+PC9kaXY+Jyk7XG4gICAgICBwb3BVcEVsLmF0dHIoe1xuICAgICAgICBpZDogcG9wdXBJZCxcbiAgICAgICAgbWF0Y2hlczogJ21hdGNoZXMnLFxuICAgICAgICBhY3RpdmU6ICdhY3RpdmVJZHgnLFxuICAgICAgICBzZWxlY3Q6ICdzZWxlY3QoYWN0aXZlSWR4KScsXG4gICAgICAgIHF1ZXJ5OiAncXVlcnknLFxuICAgICAgICBwb3NpdGlvbjogJ3Bvc2l0aW9uJ1xuICAgICAgfSk7XG4gICAgICAvL2N1c3RvbSBpdGVtIHRlbXBsYXRlXG4gICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoYXR0cnMudHlwZWFoZWFkVGVtcGxhdGVVcmwpKSB7XG4gICAgICAgIHBvcFVwRWwuYXR0cigndGVtcGxhdGUtdXJsJywgYXR0cnMudHlwZWFoZWFkVGVtcGxhdGVVcmwpO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVzZXRNYXRjaGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNjb3BlLm1hdGNoZXMgPSBbXTtcbiAgICAgICAgc2NvcGUuYWN0aXZlSWR4ID0gLTE7XG4gICAgICAgIGVsZW1lbnQuYXR0cignYXJpYS1leHBhbmRlZCcsIGZhbHNlKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBnZXRNYXRjaElkID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHBvcHVwSWQgKyAnLW9wdGlvbi0nICsgaW5kZXg7XG4gICAgICB9O1xuXG4gICAgICAvLyBJbmRpY2F0ZSB0aGF0IHRoZSBzcGVjaWZpZWQgbWF0Y2ggaXMgdGhlIGFjdGl2ZSAocHJlLXNlbGVjdGVkKSBpdGVtIGluIHRoZSBsaXN0IG93bmVkIGJ5IHRoaXMgdHlwZWFoZWFkLlxuICAgICAgLy8gVGhpcyBhdHRyaWJ1dGUgaXMgYWRkZWQgb3IgcmVtb3ZlZCBhdXRvbWF0aWNhbGx5IHdoZW4gdGhlIGBhY3RpdmVJZHhgIGNoYW5nZXMuXG4gICAgICBzY29wZS4kd2F0Y2goJ2FjdGl2ZUlkeCcsIGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHIoJ2FyaWEtYWN0aXZlZGVzY2VuZGFudCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsZW1lbnQuYXR0cignYXJpYS1hY3RpdmVkZXNjZW5kYW50JywgZ2V0TWF0Y2hJZChpbmRleCkpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdmFyIGdldE1hdGNoZXNBc3luYyA9IGZ1bmN0aW9uKGlucHV0VmFsdWUpIHtcblxuICAgICAgICB2YXIgbG9jYWxzID0geyR2aWV3VmFsdWU6IGlucHV0VmFsdWV9O1xuICAgICAgICBpc0xvYWRpbmdTZXR0ZXIob3JpZ2luYWxTY29wZSwgdHJ1ZSk7XG4gICAgICAgICRxLndoZW4ocGFyc2VyUmVzdWx0LnNvdXJjZShvcmlnaW5hbFNjb3BlLCBsb2NhbHMpKS50aGVuKGZ1bmN0aW9uKG1hdGNoZXMpIHtcblxuICAgICAgICAgIC8vaXQgbWlnaHQgaGFwcGVuIHRoYXQgc2V2ZXJhbCBhc3luYyBxdWVyaWVzIHdlcmUgaW4gcHJvZ3Jlc3MgaWYgYSB1c2VyIHdlcmUgdHlwaW5nIGZhc3RcbiAgICAgICAgICAvL2J1dCB3ZSBhcmUgaW50ZXJlc3RlZCBvbmx5IGluIHJlc3BvbnNlcyB0aGF0IGNvcnJlc3BvbmQgdG8gdGhlIGN1cnJlbnQgdmlldyB2YWx1ZVxuICAgICAgICAgIHZhciBvbkN1cnJlbnRSZXF1ZXN0ID0gKGlucHV0VmFsdWUgPT09IG1vZGVsQ3RybC4kdmlld1ZhbHVlKTtcbiAgICAgICAgICBpZiAob25DdXJyZW50UmVxdWVzdCAmJiBoYXNGb2N1cykge1xuICAgICAgICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoID4gMCkge1xuXG4gICAgICAgICAgICAgIHNjb3BlLmFjdGl2ZUlkeCA9IDA7XG4gICAgICAgICAgICAgIHNjb3BlLm1hdGNoZXMubGVuZ3RoID0gMDtcblxuICAgICAgICAgICAgICAvL3RyYW5zZm9ybSBsYWJlbHNcbiAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGk8bWF0Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxvY2Fsc1twYXJzZXJSZXN1bHQuaXRlbU5hbWVdID0gbWF0Y2hlc1tpXTtcbiAgICAgICAgICAgICAgICBzY29wZS5tYXRjaGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgaWQ6IGdldE1hdGNoSWQoaSksXG4gICAgICAgICAgICAgICAgICBsYWJlbDogcGFyc2VyUmVzdWx0LnZpZXdNYXBwZXIoc2NvcGUsIGxvY2FscyksXG4gICAgICAgICAgICAgICAgICBtb2RlbDogbWF0Y2hlc1tpXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc2NvcGUucXVlcnkgPSBpbnB1dFZhbHVlO1xuICAgICAgICAgICAgICAvL3Bvc2l0aW9uIHBvcC11cCB3aXRoIG1hdGNoZXMgLSB3ZSBuZWVkIHRvIHJlLWNhbGN1bGF0ZSBpdHMgcG9zaXRpb24gZWFjaCB0aW1lIHdlIGFyZSBvcGVuaW5nIGEgd2luZG93XG4gICAgICAgICAgICAgIC8vd2l0aCBtYXRjaGVzIGFzIGEgcG9wLXVwIG1pZ2h0IGJlIGFic29sdXRlLXBvc2l0aW9uZWQgYW5kIHBvc2l0aW9uIG9mIGFuIGlucHV0IG1pZ2h0IGhhdmUgY2hhbmdlZCBvbiBhIHBhZ2VcbiAgICAgICAgICAgICAgLy9kdWUgdG8gb3RoZXIgZWxlbWVudHMgYmVpbmcgcmVuZGVyZWRcbiAgICAgICAgICAgICAgc2NvcGUucG9zaXRpb24gPSBhcHBlbmRUb0JvZHkgPyAkcG9zaXRpb24ub2Zmc2V0KGVsZW1lbnQpIDogJHBvc2l0aW9uLnBvc2l0aW9uKGVsZW1lbnQpO1xuICAgICAgICAgICAgICBzY29wZS5wb3NpdGlvbi50b3AgPSBzY29wZS5wb3NpdGlvbi50b3AgKyBlbGVtZW50LnByb3AoJ29mZnNldEhlaWdodCcpO1xuXG4gICAgICAgICAgICAgIGVsZW1lbnQuYXR0cignYXJpYS1leHBhbmRlZCcsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzZXRNYXRjaGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChvbkN1cnJlbnRSZXF1ZXN0KSB7XG4gICAgICAgICAgICBpc0xvYWRpbmdTZXR0ZXIob3JpZ2luYWxTY29wZSwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24oKXtcbiAgICAgICAgICByZXNldE1hdGNoZXMoKTtcbiAgICAgICAgICBpc0xvYWRpbmdTZXR0ZXIob3JpZ2luYWxTY29wZSwgZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIHJlc2V0TWF0Y2hlcygpO1xuXG4gICAgICAvL3dlIG5lZWQgdG8gcHJvcGFnYXRlIHVzZXIncyBxdWVyeSBzbyB3ZSBjYW4gaGlnbGlnaHQgbWF0Y2hlc1xuICAgICAgc2NvcGUucXVlcnkgPSB1bmRlZmluZWQ7XG5cbiAgICAgIC8vRGVjbGFyZSB0aGUgdGltZW91dCBwcm9taXNlIHZhciBvdXRzaWRlIHRoZSBmdW5jdGlvbiBzY29wZSBzbyB0aGF0IHN0YWNrZWQgY2FsbHMgY2FuIGJlIGNhbmNlbGxlZCBsYXRlciBcbiAgICAgIHZhciB0aW1lb3V0UHJvbWlzZTtcblxuICAgICAgLy9wbHVnIGludG8gJHBhcnNlcnMgcGlwZWxpbmUgdG8gb3BlbiBhIHR5cGVhaGVhZCBvbiB2aWV3IGNoYW5nZXMgaW5pdGlhdGVkIGZyb20gRE9NXG4gICAgICAvLyRwYXJzZXJzIGtpY2staW4gb24gYWxsIHRoZSBjaGFuZ2VzIGNvbWluZyBmcm9tIHRoZSB2aWV3IGFzIHdlbGwgYXMgbWFudWFsbHkgdHJpZ2dlcmVkIGJ5ICRzZXRWaWV3VmFsdWVcbiAgICAgIG1vZGVsQ3RybC4kcGFyc2Vycy51bnNoaWZ0KGZ1bmN0aW9uIChpbnB1dFZhbHVlKSB7XG5cbiAgICAgICAgaGFzRm9jdXMgPSB0cnVlO1xuXG4gICAgICAgIGlmIChpbnB1dFZhbHVlICYmIGlucHV0VmFsdWUubGVuZ3RoID49IG1pblNlYXJjaCkge1xuICAgICAgICAgIGlmICh3YWl0VGltZSA+IDApIHtcbiAgICAgICAgICAgIGlmICh0aW1lb3V0UHJvbWlzZSkge1xuICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZW91dFByb21pc2UpOy8vY2FuY2VsIHByZXZpb3VzIHRpbWVvdXRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRpbWVvdXRQcm9taXNlID0gJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBnZXRNYXRjaGVzQXN5bmMoaW5wdXRWYWx1ZSk7XG4gICAgICAgICAgICB9LCB3YWl0VGltZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdldE1hdGNoZXNBc3luYyhpbnB1dFZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXNMb2FkaW5nU2V0dGVyKG9yaWdpbmFsU2NvcGUsIGZhbHNlKTtcbiAgICAgICAgICByZXNldE1hdGNoZXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0VkaXRhYmxlKSB7XG4gICAgICAgICAgcmV0dXJuIGlucHV0VmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCFpbnB1dFZhbHVlKSB7XG4gICAgICAgICAgICAvLyBSZXNldCBpbiBjYXNlIHVzZXIgaGFkIHR5cGVkIHNvbWV0aGluZyBwcmV2aW91c2x5LlxuICAgICAgICAgICAgbW9kZWxDdHJsLiRzZXRWYWxpZGl0eSgnZWRpdGFibGUnLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dFZhbHVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdlZGl0YWJsZScsIGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgbW9kZWxDdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24gKG1vZGVsVmFsdWUpIHtcblxuICAgICAgICB2YXIgY2FuZGlkYXRlVmlld1ZhbHVlLCBlbXB0eVZpZXdWYWx1ZTtcbiAgICAgICAgdmFyIGxvY2FscyA9IHt9O1xuXG4gICAgICAgIGlmIChpbnB1dEZvcm1hdHRlcikge1xuXG4gICAgICAgICAgbG9jYWxzWyckbW9kZWwnXSA9IG1vZGVsVmFsdWU7XG4gICAgICAgICAgcmV0dXJuIGlucHV0Rm9ybWF0dGVyKG9yaWdpbmFsU2NvcGUsIGxvY2Fscyk7XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIC8vaXQgbWlnaHQgaGFwcGVuIHRoYXQgd2UgZG9uJ3QgaGF2ZSBlbm91Z2ggaW5mbyB0byBwcm9wZXJseSByZW5kZXIgaW5wdXQgdmFsdWVcbiAgICAgICAgICAvL3dlIG5lZWQgdG8gY2hlY2sgZm9yIHRoaXMgc2l0dWF0aW9uIGFuZCBzaW1wbHkgcmV0dXJuIG1vZGVsIHZhbHVlIGlmIHdlIGNhbid0IGFwcGx5IGN1c3RvbSBmb3JtYXR0aW5nXG4gICAgICAgICAgbG9jYWxzW3BhcnNlclJlc3VsdC5pdGVtTmFtZV0gPSBtb2RlbFZhbHVlO1xuICAgICAgICAgIGNhbmRpZGF0ZVZpZXdWYWx1ZSA9IHBhcnNlclJlc3VsdC52aWV3TWFwcGVyKG9yaWdpbmFsU2NvcGUsIGxvY2Fscyk7XG4gICAgICAgICAgbG9jYWxzW3BhcnNlclJlc3VsdC5pdGVtTmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgZW1wdHlWaWV3VmFsdWUgPSBwYXJzZXJSZXN1bHQudmlld01hcHBlcihvcmlnaW5hbFNjb3BlLCBsb2NhbHMpO1xuXG4gICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZVZpZXdWYWx1ZSE9PSBlbXB0eVZpZXdWYWx1ZSA/IGNhbmRpZGF0ZVZpZXdWYWx1ZSA6IG1vZGVsVmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBzY29wZS5zZWxlY3QgPSBmdW5jdGlvbiAoYWN0aXZlSWR4KSB7XG4gICAgICAgIC8vY2FsbGVkIGZyb20gd2l0aGluIHRoZSAkZGlnZXN0KCkgY3ljbGVcbiAgICAgICAgdmFyIGxvY2FscyA9IHt9O1xuICAgICAgICB2YXIgbW9kZWwsIGl0ZW07XG5cbiAgICAgICAgbG9jYWxzW3BhcnNlclJlc3VsdC5pdGVtTmFtZV0gPSBpdGVtID0gc2NvcGUubWF0Y2hlc1thY3RpdmVJZHhdLm1vZGVsO1xuICAgICAgICBtb2RlbCA9IHBhcnNlclJlc3VsdC5tb2RlbE1hcHBlcihvcmlnaW5hbFNjb3BlLCBsb2NhbHMpO1xuICAgICAgICAkc2V0TW9kZWxWYWx1ZShvcmlnaW5hbFNjb3BlLCBtb2RlbCk7XG4gICAgICAgIG1vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ2VkaXRhYmxlJywgdHJ1ZSk7XG5cbiAgICAgICAgb25TZWxlY3RDYWxsYmFjayhvcmlnaW5hbFNjb3BlLCB7XG4gICAgICAgICAgJGl0ZW06IGl0ZW0sXG4gICAgICAgICAgJG1vZGVsOiBtb2RlbCxcbiAgICAgICAgICAkbGFiZWw6IHBhcnNlclJlc3VsdC52aWV3TWFwcGVyKG9yaWdpbmFsU2NvcGUsIGxvY2FscylcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVzZXRNYXRjaGVzKCk7XG5cbiAgICAgICAgLy9yZXR1cm4gZm9jdXMgdG8gdGhlIGlucHV0IGVsZW1lbnQgaWYgYSBtYXRjaCB3YXMgc2VsZWN0ZWQgdmlhIGEgbW91c2UgY2xpY2sgZXZlbnRcbiAgICAgICAgLy8gdXNlIHRpbWVvdXQgdG8gYXZvaWQgJHJvb3RTY29wZTppbnByb2cgZXJyb3JcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7IGVsZW1lbnRbMF0uZm9jdXMoKTsgfSwgMCwgZmFsc2UpO1xuICAgICAgfTtcblxuICAgICAgLy9iaW5kIGtleWJvYXJkIGV2ZW50czogYXJyb3dzIHVwKDM4KSAvIGRvd24oNDApLCBlbnRlcigxMykgYW5kIHRhYig5KSwgZXNjKDI3KVxuICAgICAgZWxlbWVudC5iaW5kKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2dCkge1xuXG4gICAgICAgIC8vdHlwZWFoZWFkIGlzIG9wZW4gYW5kIGFuIFwiaW50ZXJlc3RpbmdcIiBrZXkgd2FzIHByZXNzZWRcbiAgICAgICAgaWYgKHNjb3BlLm1hdGNoZXMubGVuZ3RoID09PSAwIHx8IEhPVF9LRVlTLmluZGV4T2YoZXZ0LndoaWNoKSA9PT0gLTEpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBpZiAoZXZ0LndoaWNoID09PSA0MCkge1xuICAgICAgICAgIHNjb3BlLmFjdGl2ZUlkeCA9IChzY29wZS5hY3RpdmVJZHggKyAxKSAlIHNjb3BlLm1hdGNoZXMubGVuZ3RoO1xuICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcblxuICAgICAgICB9IGVsc2UgaWYgKGV2dC53aGljaCA9PT0gMzgpIHtcbiAgICAgICAgICBzY29wZS5hY3RpdmVJZHggPSAoc2NvcGUuYWN0aXZlSWR4ID8gc2NvcGUuYWN0aXZlSWR4IDogc2NvcGUubWF0Y2hlcy5sZW5ndGgpIC0gMTtcbiAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChldnQud2hpY2ggPT09IDEzIHx8IGV2dC53aGljaCA9PT0gOSkge1xuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzY29wZS5zZWxlY3Qoc2NvcGUuYWN0aXZlSWR4KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICB9IGVsc2UgaWYgKGV2dC53aGljaCA9PT0gMjcpIHtcbiAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICByZXNldE1hdGNoZXMoKTtcbiAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBlbGVtZW50LmJpbmQoJ2JsdXInLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIGhhc0ZvY3VzID0gZmFsc2U7XG4gICAgICB9KTtcblxuICAgICAgLy8gS2VlcCByZWZlcmVuY2UgdG8gY2xpY2sgaGFuZGxlciB0byB1bmJpbmQgaXQuXG4gICAgICB2YXIgZGlzbWlzc0NsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnRbMF0gIT09IGV2dC50YXJnZXQpIHtcbiAgICAgICAgICByZXNldE1hdGNoZXMoKTtcbiAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgICRkb2N1bWVudC5iaW5kKCdjbGljaycsIGRpc21pc3NDbGlja0hhbmRsZXIpO1xuXG4gICAgICBvcmlnaW5hbFNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpe1xuICAgICAgICAkZG9jdW1lbnQudW5iaW5kKCdjbGljaycsIGRpc21pc3NDbGlja0hhbmRsZXIpO1xuICAgICAgfSk7XG5cbiAgICAgIHZhciAkcG9wdXAgPSAkY29tcGlsZShwb3BVcEVsKShzY29wZSk7XG4gICAgICBpZiAoIGFwcGVuZFRvQm9keSApIHtcbiAgICAgICAgJGRvY3VtZW50LmZpbmQoJ2JvZHknKS5hcHBlbmQoJHBvcHVwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuYWZ0ZXIoJHBvcHVwKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbn1dKVxuXG4gIC5kaXJlY3RpdmUoJ3R5cGVhaGVhZFBvcHVwJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDonRUEnLFxuICAgICAgc2NvcGU6e1xuICAgICAgICBtYXRjaGVzOic9JyxcbiAgICAgICAgcXVlcnk6Jz0nLFxuICAgICAgICBhY3RpdmU6Jz0nLFxuICAgICAgICBwb3NpdGlvbjonPScsXG4gICAgICAgIHNlbGVjdDonJidcbiAgICAgIH0sXG4gICAgICByZXBsYWNlOnRydWUsXG4gICAgICB0ZW1wbGF0ZVVybDondGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1wb3B1cC5odG1sJyxcbiAgICAgIGxpbms6ZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuXG4gICAgICAgIHNjb3BlLnRlbXBsYXRlVXJsID0gYXR0cnMudGVtcGxhdGVVcmw7XG5cbiAgICAgICAgc2NvcGUuaXNPcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBzY29wZS5tYXRjaGVzLmxlbmd0aCA+IDA7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2NvcGUuaXNBY3RpdmUgPSBmdW5jdGlvbiAobWF0Y2hJZHgpIHtcbiAgICAgICAgICByZXR1cm4gc2NvcGUuYWN0aXZlID09IG1hdGNoSWR4O1xuICAgICAgICB9O1xuXG4gICAgICAgIHNjb3BlLnNlbGVjdEFjdGl2ZSA9IGZ1bmN0aW9uIChtYXRjaElkeCkge1xuICAgICAgICAgIHNjb3BlLmFjdGl2ZSA9IG1hdGNoSWR4O1xuICAgICAgICB9O1xuXG4gICAgICAgIHNjb3BlLnNlbGVjdE1hdGNoID0gZnVuY3Rpb24gKGFjdGl2ZUlkeCkge1xuICAgICAgICAgIHNjb3BlLnNlbGVjdCh7YWN0aXZlSWR4OmFjdGl2ZUlkeH0pO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG4gIH0pXG5cbiAgLmRpcmVjdGl2ZSgndHlwZWFoZWFkTWF0Y2gnLCBbJyRodHRwJywgJyR0ZW1wbGF0ZUNhY2hlJywgJyRjb21waWxlJywgJyRwYXJzZScsIGZ1bmN0aW9uICgkaHR0cCwgJHRlbXBsYXRlQ2FjaGUsICRjb21waWxlLCAkcGFyc2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6J0VBJyxcbiAgICAgIHNjb3BlOntcbiAgICAgICAgaW5kZXg6Jz0nLFxuICAgICAgICBtYXRjaDonPScsXG4gICAgICAgIHF1ZXJ5Oic9J1xuICAgICAgfSxcbiAgICAgIGxpbms6ZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICB2YXIgdHBsVXJsID0gJHBhcnNlKGF0dHJzLnRlbXBsYXRlVXJsKShzY29wZS4kcGFyZW50KSB8fCAndGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1tYXRjaC5odG1sJztcbiAgICAgICAgJGh0dHAuZ2V0KHRwbFVybCwge2NhY2hlOiAkdGVtcGxhdGVDYWNoZX0pLnN1Y2Nlc3MoZnVuY3Rpb24odHBsQ29udGVudCl7XG4gICAgICAgICAgIGVsZW1lbnQucmVwbGFjZVdpdGgoJGNvbXBpbGUodHBsQ29udGVudC50cmltKCkpKHNjb3BlKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH1dKVxuXG4gIC5maWx0ZXIoJ3R5cGVhaGVhZEhpZ2hsaWdodCcsIGZ1bmN0aW9uKCkge1xuXG4gICAgZnVuY3Rpb24gZXNjYXBlUmVnZXhwKHF1ZXJ5VG9Fc2NhcGUpIHtcbiAgICAgIHJldHVybiBxdWVyeVRvRXNjYXBlLnJlcGxhY2UoLyhbLj8qK14kW1xcXVxcXFwoKXt9fC1dKS9nLCAnXFxcXCQxJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG1hdGNoSXRlbSwgcXVlcnkpIHtcbiAgICAgIHJldHVybiBxdWVyeSA/ICgnJyArIG1hdGNoSXRlbSkucmVwbGFjZShuZXcgUmVnRXhwKGVzY2FwZVJlZ2V4cChxdWVyeSksICdnaScpLCAnPHN0cm9uZz4kJjwvc3Ryb25nPicpIDogbWF0Y2hJdGVtO1xuICAgIH07XG4gIH0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24tZ3JvdXAuaHRtbFwiLCBbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dChcInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24tZ3JvdXAuaHRtbFwiLFxuICAgIFwiPGRpdiBjbGFzcz1cXFwicGFuZWwgcGFuZWwtZGVmYXVsdFxcXCI+XFxuXCIgK1xuICAgIFwiICA8ZGl2IGNsYXNzPVxcXCJwYW5lbC1oZWFkaW5nXFxcIj5cXG5cIiArXG4gICAgXCIgICAgPGg0IGNsYXNzPVxcXCJwYW5lbC10aXRsZVxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgPGEgY2xhc3M9XFxcImFjY29yZGlvbi10b2dnbGVcXFwiIG5nLWNsaWNrPVxcXCJ0b2dnbGVPcGVuKClcXFwiIGFjY29yZGlvbi10cmFuc2NsdWRlPVxcXCJoZWFkaW5nXFxcIj48c3BhbiBuZy1jbGFzcz1cXFwieyd0ZXh0LW11dGVkJzogaXNEaXNhYmxlZH1cXFwiPnt7aGVhZGluZ319PC9zcGFuPjwvYT5cXG5cIiArXG4gICAgXCIgICAgPC9oND5cXG5cIiArXG4gICAgXCIgIDwvZGl2PlxcblwiICtcbiAgICBcIiAgPGRpdiBjbGFzcz1cXFwicGFuZWwtY29sbGFwc2VcXFwiIGNvbGxhcHNlPVxcXCIhaXNPcGVuXFxcIj5cXG5cIiArXG4gICAgXCJcdCAgPGRpdiBjbGFzcz1cXFwicGFuZWwtYm9keVxcXCIgbmctdHJhbnNjbHVkZT48L2Rpdj5cXG5cIiArXG4gICAgXCIgIDwvZGl2PlxcblwiICtcbiAgICBcIjwvZGl2PlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLmh0bWxcIixcbiAgICBcIjxkaXYgY2xhc3M9XFxcInBhbmVsLWdyb3VwXFxcIiBuZy10cmFuc2NsdWRlPjwvZGl2PlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9hbGVydC9hbGVydC5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvYWxlcnQvYWxlcnQuaHRtbFwiLFxuICAgIFwiPGRpdiBjbGFzcz1cXFwiYWxlcnRcXFwiIG5nLWNsYXNzPVxcXCJ7J2FsZXJ0LXt7dHlwZSB8fCAnd2FybmluZyd9fSc6IHRydWUsICdhbGVydC1kaXNtaXNzYWJsZSc6IGNsb3NlYWJsZX1cXFwiIHJvbGU9XFxcImFsZXJ0XFxcIj5cXG5cIiArXG4gICAgXCIgICAgPGJ1dHRvbiBuZy1zaG93PVxcXCJjbG9zZWFibGVcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImNsb3NlXFxcIiBuZy1jbGljaz1cXFwiY2xvc2UoKVxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCI+JnRpbWVzOzwvc3Bhbj5cXG5cIiArXG4gICAgXCIgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJzci1vbmx5XFxcIj5DbG9zZTwvc3Bhbj5cXG5cIiArXG4gICAgXCIgICAgPC9idXR0b24+XFxuXCIgK1xuICAgIFwiICAgIDxkaXYgbmctdHJhbnNjbHVkZT48L2Rpdj5cXG5cIiArXG4gICAgXCI8L2Rpdj5cXG5cIiArXG4gICAgXCJcIik7XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvY2Fyb3VzZWwvY2Fyb3VzZWwuaHRtbFwiLCBbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dChcInRlbXBsYXRlL2Nhcm91c2VsL2Nhcm91c2VsLmh0bWxcIixcbiAgICBcIjxkaXYgbmctbW91c2VlbnRlcj1cXFwicGF1c2UoKVxcXCIgbmctbW91c2VsZWF2ZT1cXFwicGxheSgpXFxcIiBjbGFzcz1cXFwiY2Fyb3VzZWxcXFwiIG5nLXN3aXBlLXJpZ2h0PVxcXCJwcmV2KClcXFwiIG5nLXN3aXBlLWxlZnQ9XFxcIm5leHQoKVxcXCI+XFxuXCIgK1xuICAgIFwiICAgIDxvbCBjbGFzcz1cXFwiY2Fyb3VzZWwtaW5kaWNhdG9yc1xcXCIgbmctc2hvdz1cXFwic2xpZGVzLmxlbmd0aCA+IDFcXFwiPlxcblwiICtcbiAgICBcIiAgICAgICAgPGxpIG5nLXJlcGVhdD1cXFwic2xpZGUgaW4gc2xpZGVzIHRyYWNrIGJ5ICRpbmRleFxcXCIgbmctY2xhc3M9XFxcInthY3RpdmU6IGlzQWN0aXZlKHNsaWRlKX1cXFwiIG5nLWNsaWNrPVxcXCJzZWxlY3Qoc2xpZGUpXFxcIj48L2xpPlxcblwiICtcbiAgICBcIiAgICA8L29sPlxcblwiICtcbiAgICBcIiAgICA8ZGl2IGNsYXNzPVxcXCJjYXJvdXNlbC1pbm5lclxcXCIgbmctdHJhbnNjbHVkZT48L2Rpdj5cXG5cIiArXG4gICAgXCIgICAgPGEgY2xhc3M9XFxcImxlZnQgY2Fyb3VzZWwtY29udHJvbFxcXCIgbmctY2xpY2s9XFxcInByZXYoKVxcXCIgbmctc2hvdz1cXFwic2xpZGVzLmxlbmd0aCA+IDFcXFwiPjxzcGFuIGNsYXNzPVxcXCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tbGVmdFxcXCI+PC9zcGFuPjwvYT5cXG5cIiArXG4gICAgXCIgICAgPGEgY2xhc3M9XFxcInJpZ2h0IGNhcm91c2VsLWNvbnRyb2xcXFwiIG5nLWNsaWNrPVxcXCJuZXh0KClcXFwiIG5nLXNob3c9XFxcInNsaWRlcy5sZW5ndGggPiAxXFxcIj48c3BhbiBjbGFzcz1cXFwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0XFxcIj48L3NwYW4+PC9hPlxcblwiICtcbiAgICBcIjwvZGl2PlxcblwiICtcbiAgICBcIlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9jYXJvdXNlbC9zbGlkZS5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvY2Fyb3VzZWwvc2xpZGUuaHRtbFwiLFxuICAgIFwiPGRpdiBuZy1jbGFzcz1cXFwie1xcblwiICtcbiAgICBcIiAgICAnYWN0aXZlJzogbGVhdmluZyB8fCAoYWN0aXZlICYmICFlbnRlcmluZyksXFxuXCIgK1xuICAgIFwiICAgICdwcmV2JzogKG5leHQgfHwgYWN0aXZlKSAmJiBkaXJlY3Rpb249PSdwcmV2JyxcXG5cIiArXG4gICAgXCIgICAgJ25leHQnOiAobmV4dCB8fCBhY3RpdmUpICYmIGRpcmVjdGlvbj09J25leHQnLFxcblwiICtcbiAgICBcIiAgICAncmlnaHQnOiBkaXJlY3Rpb249PSdwcmV2JyxcXG5cIiArXG4gICAgXCIgICAgJ2xlZnQnOiBkaXJlY3Rpb249PSduZXh0J1xcblwiICtcbiAgICBcIiAgfVxcXCIgY2xhc3M9XFxcIml0ZW0gdGV4dC1jZW50ZXJcXFwiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+XFxuXCIgK1xuICAgIFwiXCIpO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXRlcGlja2VyLmh0bWxcIixcbiAgICBcIjxkaXYgbmctc3dpdGNoPVxcXCJkYXRlcGlja2VyTW9kZVxcXCIgcm9sZT1cXFwiYXBwbGljYXRpb25cXFwiIG5nLWtleWRvd249XFxcImtleWRvd24oJGV2ZW50KVxcXCI+XFxuXCIgK1xuICAgIFwiICA8ZGF5cGlja2VyIG5nLXN3aXRjaC13aGVuPVxcXCJkYXlcXFwiIHRhYmluZGV4PVxcXCIwXFxcIj48L2RheXBpY2tlcj5cXG5cIiArXG4gICAgXCIgIDxtb250aHBpY2tlciBuZy1zd2l0Y2gtd2hlbj1cXFwibW9udGhcXFwiIHRhYmluZGV4PVxcXCIwXFxcIj48L21vbnRocGlja2VyPlxcblwiICtcbiAgICBcIiAgPHllYXJwaWNrZXIgbmctc3dpdGNoLXdoZW49XFxcInllYXJcXFwiIHRhYmluZGV4PVxcXCIwXFxcIj48L3llYXJwaWNrZXI+XFxuXCIgK1xuICAgIFwiPC9kaXY+XCIpO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL2RhdGVwaWNrZXIvZGF5Lmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL2RheS5odG1sXCIsXG4gICAgXCI8dGFibGUgcm9sZT1cXFwiZ3JpZFxcXCIgYXJpYS1sYWJlbGxlZGJ5PVxcXCJ7e3VuaXF1ZUlkfX0tdGl0bGVcXFwiIGFyaWEtYWN0aXZlZGVzY2VuZGFudD1cXFwie3thY3RpdmVEYXRlSWR9fVxcXCI+XFxuXCIgK1xuICAgIFwiICA8dGhlYWQ+XFxuXCIgK1xuICAgIFwiICAgIDx0cj5cXG5cIiArXG4gICAgXCIgICAgICA8dGg+PGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtbGVmdFxcXCIgbmctY2xpY2s9XFxcIm1vdmUoLTEpXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiPjxpIGNsYXNzPVxcXCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tbGVmdFxcXCI+PC9pPjwvYnV0dG9uPjwvdGg+XFxuXCIgK1xuICAgIFwiICAgICAgPHRoIGNvbHNwYW49XFxcInt7NSArIHNob3dXZWVrc319XFxcIj48YnV0dG9uIGlkPVxcXCJ7e3VuaXF1ZUlkfX0tdGl0bGVcXFwiIHJvbGU9XFxcImhlYWRpbmdcXFwiIGFyaWEtbGl2ZT1cXFwiYXNzZXJ0aXZlXFxcIiBhcmlhLWF0b21pYz1cXFwidHJ1ZVxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbVxcXCIgbmctY2xpY2s9XFxcInRvZ2dsZU1vZGUoKVxcXCIgdGFiaW5kZXg9XFxcIi0xXFxcIiBzdHlsZT1cXFwid2lkdGg6MTAwJTtcXFwiPjxzdHJvbmc+e3t0aXRsZX19PC9zdHJvbmc+PC9idXR0b24+PC90aD5cXG5cIiArXG4gICAgXCIgICAgICA8dGg+PGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtcmlnaHRcXFwiIG5nLWNsaWNrPVxcXCJtb3ZlKDEpXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiPjxpIGNsYXNzPVxcXCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tcmlnaHRcXFwiPjwvaT48L2J1dHRvbj48L3RoPlxcblwiICtcbiAgICBcIiAgICA8L3RyPlxcblwiICtcbiAgICBcIiAgICA8dHI+XFxuXCIgK1xuICAgIFwiICAgICAgPHRoIG5nLXNob3c9XFxcInNob3dXZWVrc1xcXCIgY2xhc3M9XFxcInRleHQtY2VudGVyXFxcIj48L3RoPlxcblwiICtcbiAgICBcIiAgICAgIDx0aCBuZy1yZXBlYXQ9XFxcImxhYmVsIGluIGxhYmVscyB0cmFjayBieSAkaW5kZXhcXFwiIGNsYXNzPVxcXCJ0ZXh0LWNlbnRlclxcXCI+PHNtYWxsIGFyaWEtbGFiZWw9XFxcInt7bGFiZWwuZnVsbH19XFxcIj57e2xhYmVsLmFiYnJ9fTwvc21hbGw+PC90aD5cXG5cIiArXG4gICAgXCIgICAgPC90cj5cXG5cIiArXG4gICAgXCIgIDwvdGhlYWQ+XFxuXCIgK1xuICAgIFwiICA8dGJvZHk+XFxuXCIgK1xuICAgIFwiICAgIDx0ciBuZy1yZXBlYXQ9XFxcInJvdyBpbiByb3dzIHRyYWNrIGJ5ICRpbmRleFxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgPHRkIG5nLXNob3c9XFxcInNob3dXZWVrc1xcXCIgY2xhc3M9XFxcInRleHQtY2VudGVyIGg2XFxcIj48ZW0+e3sgd2Vla051bWJlcnNbJGluZGV4XSB9fTwvZW0+PC90ZD5cXG5cIiArXG4gICAgXCIgICAgICA8dGQgbmctcmVwZWF0PVxcXCJkdCBpbiByb3cgdHJhY2sgYnkgZHQuZGF0ZVxcXCIgY2xhc3M9XFxcInRleHQtY2VudGVyXFxcIiByb2xlPVxcXCJncmlkY2VsbFxcXCIgaWQ9XFxcInt7ZHQudWlkfX1cXFwiIGFyaWEtZGlzYWJsZWQ9XFxcInt7ISFkdC5kaXNhYmxlZH19XFxcIj5cXG5cIiArXG4gICAgXCIgICAgICAgIDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBzdHlsZT1cXFwid2lkdGg6MTAwJTtcXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXFxcIiBuZy1jbGFzcz1cXFwieydidG4taW5mbyc6IGR0LnNlbGVjdGVkLCBhY3RpdmU6IGlzQWN0aXZlKGR0KX1cXFwiIG5nLWNsaWNrPVxcXCJzZWxlY3QoZHQuZGF0ZSlcXFwiIG5nLWRpc2FibGVkPVxcXCJkdC5kaXNhYmxlZFxcXCIgdGFiaW5kZXg9XFxcIi0xXFxcIj48c3BhbiBuZy1jbGFzcz1cXFwieyd0ZXh0LW11dGVkJzogZHQuc2Vjb25kYXJ5LCAndGV4dC1pbmZvJzogZHQuY3VycmVudH1cXFwiPnt7ZHQubGFiZWx9fTwvc3Bhbj48L2J1dHRvbj5cXG5cIiArXG4gICAgXCIgICAgICA8L3RkPlxcblwiICtcbiAgICBcIiAgICA8L3RyPlxcblwiICtcbiAgICBcIiAgPC90Ym9keT5cXG5cIiArXG4gICAgXCI8L3RhYmxlPlxcblwiICtcbiAgICBcIlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL21vbnRoLmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL21vbnRoLmh0bWxcIixcbiAgICBcIjx0YWJsZSByb2xlPVxcXCJncmlkXFxcIiBhcmlhLWxhYmVsbGVkYnk9XFxcInt7dW5pcXVlSWR9fS10aXRsZVxcXCIgYXJpYS1hY3RpdmVkZXNjZW5kYW50PVxcXCJ7e2FjdGl2ZURhdGVJZH19XFxcIj5cXG5cIiArXG4gICAgXCIgIDx0aGVhZD5cXG5cIiArXG4gICAgXCIgICAgPHRyPlxcblwiICtcbiAgICBcIiAgICAgIDx0aD48YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdCBidG4tc20gcHVsbC1sZWZ0XFxcIiBuZy1jbGljaz1cXFwibW92ZSgtMSlcXFwiIHRhYmluZGV4PVxcXCItMVxcXCI+PGkgY2xhc3M9XFxcImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1sZWZ0XFxcIj48L2k+PC9idXR0b24+PC90aD5cXG5cIiArXG4gICAgXCIgICAgICA8dGg+PGJ1dHRvbiBpZD1cXFwie3t1bmlxdWVJZH19LXRpdGxlXFxcIiByb2xlPVxcXCJoZWFkaW5nXFxcIiBhcmlhLWxpdmU9XFxcImFzc2VydGl2ZVxcXCIgYXJpYS1hdG9taWM9XFxcInRydWVcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdCBidG4tc21cXFwiIG5nLWNsaWNrPVxcXCJ0b2dnbGVNb2RlKClcXFwiIHRhYmluZGV4PVxcXCItMVxcXCIgc3R5bGU9XFxcIndpZHRoOjEwMCU7XFxcIj48c3Ryb25nPnt7dGl0bGV9fTwvc3Ryb25nPjwvYnV0dG9uPjwvdGg+XFxuXCIgK1xuICAgIFwiICAgICAgPHRoPjxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBwdWxsLXJpZ2h0XFxcIiBuZy1jbGljaz1cXFwibW92ZSgxKVxcXCIgdGFiaW5kZXg9XFxcIi0xXFxcIj48aSBjbGFzcz1cXFwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0XFxcIj48L2k+PC9idXR0b24+PC90aD5cXG5cIiArXG4gICAgXCIgICAgPC90cj5cXG5cIiArXG4gICAgXCIgIDwvdGhlYWQ+XFxuXCIgK1xuICAgIFwiICA8dGJvZHk+XFxuXCIgK1xuICAgIFwiICAgIDx0ciBuZy1yZXBlYXQ9XFxcInJvdyBpbiByb3dzIHRyYWNrIGJ5ICRpbmRleFxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgPHRkIG5nLXJlcGVhdD1cXFwiZHQgaW4gcm93IHRyYWNrIGJ5IGR0LmRhdGVcXFwiIGNsYXNzPVxcXCJ0ZXh0LWNlbnRlclxcXCIgcm9sZT1cXFwiZ3JpZGNlbGxcXFwiIGlkPVxcXCJ7e2R0LnVpZH19XFxcIiBhcmlhLWRpc2FibGVkPVxcXCJ7eyEhZHQuZGlzYWJsZWR9fVxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgICA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgc3R5bGU9XFxcIndpZHRoOjEwMCU7XFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0XFxcIiBuZy1jbGFzcz1cXFwieydidG4taW5mbyc6IGR0LnNlbGVjdGVkLCBhY3RpdmU6IGlzQWN0aXZlKGR0KX1cXFwiIG5nLWNsaWNrPVxcXCJzZWxlY3QoZHQuZGF0ZSlcXFwiIG5nLWRpc2FibGVkPVxcXCJkdC5kaXNhYmxlZFxcXCIgdGFiaW5kZXg9XFxcIi0xXFxcIj48c3BhbiBuZy1jbGFzcz1cXFwieyd0ZXh0LWluZm8nOiBkdC5jdXJyZW50fVxcXCI+e3tkdC5sYWJlbH19PC9zcGFuPjwvYnV0dG9uPlxcblwiICtcbiAgICBcIiAgICAgIDwvdGQ+XFxuXCIgK1xuICAgIFwiICAgIDwvdHI+XFxuXCIgK1xuICAgIFwiICA8L3Rib2R5PlxcblwiICtcbiAgICBcIjwvdGFibGU+XFxuXCIgK1xuICAgIFwiXCIpO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL2RhdGVwaWNrZXIvcG9wdXAuaHRtbFwiLCBbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dChcInRlbXBsYXRlL2RhdGVwaWNrZXIvcG9wdXAuaHRtbFwiLFxuICAgIFwiPHVsIGNsYXNzPVxcXCJkcm9wZG93bi1tZW51XFxcIiBuZy1zdHlsZT1cXFwie2Rpc3BsYXk6IChpc09wZW4gJiYgJ2Jsb2NrJykgfHwgJ25vbmUnLCB0b3A6IHBvc2l0aW9uLnRvcCsncHgnLCBsZWZ0OiBwb3NpdGlvbi5sZWZ0KydweCd9XFxcIiBuZy1rZXlkb3duPVxcXCJrZXlkb3duKCRldmVudClcXFwiPlxcblwiICtcbiAgICBcIlx0PGxpIG5nLXRyYW5zY2x1ZGU+PC9saT5cXG5cIiArXG4gICAgXCJcdDxsaSBuZy1pZj1cXFwic2hvd0J1dHRvbkJhclxcXCIgc3R5bGU9XFxcInBhZGRpbmc6MTBweCA5cHggMnB4XFxcIj5cXG5cIiArXG4gICAgXCJcdFx0PHNwYW4gY2xhc3M9XFxcImJ0bi1ncm91cFxcXCI+XFxuXCIgK1xuICAgIFwiXHRcdFx0PGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidG4gYnRuLXNtIGJ0bi1pbmZvXFxcIiBuZy1jbGljaz1cXFwic2VsZWN0KCd0b2RheScpXFxcIj57eyBnZXRUZXh0KCdjdXJyZW50JykgfX08L2J1dHRvbj5cXG5cIiArXG4gICAgXCJcdFx0XHQ8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tc20gYnRuLWRhbmdlclxcXCIgbmctY2xpY2s9XFxcInNlbGVjdChudWxsKVxcXCI+e3sgZ2V0VGV4dCgnY2xlYXInKSB9fTwvYnV0dG9uPlxcblwiICtcbiAgICBcIlx0XHQ8L3NwYW4+XFxuXCIgK1xuICAgIFwiXHRcdDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1zbSBidG4tc3VjY2VzcyBwdWxsLXJpZ2h0XFxcIiBuZy1jbGljaz1cXFwiY2xvc2UoKVxcXCI+e3sgZ2V0VGV4dCgnY2xvc2UnKSB9fTwvYnV0dG9uPlxcblwiICtcbiAgICBcIlx0PC9saT5cXG5cIiArXG4gICAgXCI8L3VsPlxcblwiICtcbiAgICBcIlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL3llYXIuaHRtbFwiLCBbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dChcInRlbXBsYXRlL2RhdGVwaWNrZXIveWVhci5odG1sXCIsXG4gICAgXCI8dGFibGUgcm9sZT1cXFwiZ3JpZFxcXCIgYXJpYS1sYWJlbGxlZGJ5PVxcXCJ7e3VuaXF1ZUlkfX0tdGl0bGVcXFwiIGFyaWEtYWN0aXZlZGVzY2VuZGFudD1cXFwie3thY3RpdmVEYXRlSWR9fVxcXCI+XFxuXCIgK1xuICAgIFwiICA8dGhlYWQ+XFxuXCIgK1xuICAgIFwiICAgIDx0cj5cXG5cIiArXG4gICAgXCIgICAgICA8dGg+PGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtbGVmdFxcXCIgbmctY2xpY2s9XFxcIm1vdmUoLTEpXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiPjxpIGNsYXNzPVxcXCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tbGVmdFxcXCI+PC9pPjwvYnV0dG9uPjwvdGg+XFxuXCIgK1xuICAgIFwiICAgICAgPHRoIGNvbHNwYW49XFxcIjNcXFwiPjxidXR0b24gaWQ9XFxcInt7dW5pcXVlSWR9fS10aXRsZVxcXCIgcm9sZT1cXFwiaGVhZGluZ1xcXCIgYXJpYS1saXZlPVxcXCJhc3NlcnRpdmVcXFwiIGFyaWEtYXRvbWljPVxcXCJ0cnVlXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXFxcIiBuZy1jbGljaz1cXFwidG9nZ2xlTW9kZSgpXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiIHN0eWxlPVxcXCJ3aWR0aDoxMDAlO1xcXCI+PHN0cm9uZz57e3RpdGxlfX08L3N0cm9uZz48L2J1dHRvbj48L3RoPlxcblwiICtcbiAgICBcIiAgICAgIDx0aD48YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdCBidG4tc20gcHVsbC1yaWdodFxcXCIgbmctY2xpY2s9XFxcIm1vdmUoMSlcXFwiIHRhYmluZGV4PVxcXCItMVxcXCI+PGkgY2xhc3M9XFxcImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1yaWdodFxcXCI+PC9pPjwvYnV0dG9uPjwvdGg+XFxuXCIgK1xuICAgIFwiICAgIDwvdHI+XFxuXCIgK1xuICAgIFwiICA8L3RoZWFkPlxcblwiICtcbiAgICBcIiAgPHRib2R5PlxcblwiICtcbiAgICBcIiAgICA8dHIgbmctcmVwZWF0PVxcXCJyb3cgaW4gcm93cyB0cmFjayBieSAkaW5kZXhcXFwiPlxcblwiICtcbiAgICBcIiAgICAgIDx0ZCBuZy1yZXBlYXQ9XFxcImR0IGluIHJvdyB0cmFjayBieSBkdC5kYXRlXFxcIiBjbGFzcz1cXFwidGV4dC1jZW50ZXJcXFwiIHJvbGU9XFxcImdyaWRjZWxsXFxcIiBpZD1cXFwie3tkdC51aWR9fVxcXCIgYXJpYS1kaXNhYmxlZD1cXFwie3shIWR0LmRpc2FibGVkfX1cXFwiPlxcblwiICtcbiAgICBcIiAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIHN0eWxlPVxcXCJ3aWR0aDoxMDAlO1xcXCIgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdFxcXCIgbmctY2xhc3M9XFxcInsnYnRuLWluZm8nOiBkdC5zZWxlY3RlZCwgYWN0aXZlOiBpc0FjdGl2ZShkdCl9XFxcIiBuZy1jbGljaz1cXFwic2VsZWN0KGR0LmRhdGUpXFxcIiBuZy1kaXNhYmxlZD1cXFwiZHQuZGlzYWJsZWRcXFwiIHRhYmluZGV4PVxcXCItMVxcXCI+PHNwYW4gbmctY2xhc3M9XFxcInsndGV4dC1pbmZvJzogZHQuY3VycmVudH1cXFwiPnt7ZHQubGFiZWx9fTwvc3Bhbj48L2J1dHRvbj5cXG5cIiArXG4gICAgXCIgICAgICA8L3RkPlxcblwiICtcbiAgICBcIiAgICA8L3RyPlxcblwiICtcbiAgICBcIiAgPC90Ym9keT5cXG5cIiArXG4gICAgXCI8L3RhYmxlPlxcblwiICtcbiAgICBcIlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9tb2RhbC9iYWNrZHJvcC5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvbW9kYWwvYmFja2Ryb3AuaHRtbFwiLFxuICAgIFwiPGRpdiBjbGFzcz1cXFwibW9kYWwtYmFja2Ryb3AgZmFkZVxcXCJcXG5cIiArXG4gICAgXCIgICAgIG5nLWNsYXNzPVxcXCJ7aW46IGFuaW1hdGV9XFxcIlxcblwiICtcbiAgICBcIiAgICAgbmctc3R5bGU9XFxcInsnei1pbmRleCc6IDEwNDAgKyAoaW5kZXggJiYgMSB8fCAwKSArIGluZGV4KjEwfVxcXCJcXG5cIiArXG4gICAgXCI+PC9kaXY+XFxuXCIgK1xuICAgIFwiXCIpO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL21vZGFsL3dpbmRvdy5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvbW9kYWwvd2luZG93Lmh0bWxcIixcbiAgICBcIjxkaXYgdGFiaW5kZXg9XFxcIi0xXFxcIiByb2xlPVxcXCJkaWFsb2dcXFwiIGNsYXNzPVxcXCJtb2RhbCBmYWRlXFxcIiBuZy1jbGFzcz1cXFwie2luOiBhbmltYXRlfVxcXCIgbmctc3R5bGU9XFxcInsnei1pbmRleCc6IDEwNTAgKyBpbmRleCoxMCwgZGlzcGxheTogJ2Jsb2NrJ31cXFwiIG5nLWNsaWNrPVxcXCJjbG9zZSgkZXZlbnQpXFxcIj5cXG5cIiArXG4gICAgXCIgICAgPGRpdiBjbGFzcz1cXFwibW9kYWwtZGlhbG9nXFxcIiBuZy1jbGFzcz1cXFwieydtb2RhbC1zbSc6IHNpemUgPT0gJ3NtJywgJ21vZGFsLWxnJzogc2l6ZSA9PSAnbGcnfVxcXCI+PGRpdiBjbGFzcz1cXFwibW9kYWwtY29udGVudFxcXCIgbmctdHJhbnNjbHVkZT48L2Rpdj48L2Rpdj5cXG5cIiArXG4gICAgXCI8L2Rpdj5cIik7XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdlci5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdlci5odG1sXCIsXG4gICAgXCI8dWwgY2xhc3M9XFxcInBhZ2VyXFxcIj5cXG5cIiArXG4gICAgXCIgIDxsaSBuZy1jbGFzcz1cXFwie2Rpc2FibGVkOiBub1ByZXZpb3VzKCksIHByZXZpb3VzOiBhbGlnbn1cXFwiPjxhIGhyZWYgbmctY2xpY2s9XFxcInNlbGVjdFBhZ2UocGFnZSAtIDEpXFxcIj57e2dldFRleHQoJ3ByZXZpb3VzJyl9fTwvYT48L2xpPlxcblwiICtcbiAgICBcIiAgPGxpIG5nLWNsYXNzPVxcXCJ7ZGlzYWJsZWQ6IG5vTmV4dCgpLCBuZXh0OiBhbGlnbn1cXFwiPjxhIGhyZWYgbmctY2xpY2s9XFxcInNlbGVjdFBhZ2UocGFnZSArIDEpXFxcIj57e2dldFRleHQoJ25leHQnKX19PC9hPjwvbGk+XFxuXCIgK1xuICAgIFwiPC91bD5cIik7XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS9wYWdpbmF0aW9uL3BhZ2luYXRpb24uaHRtbFwiLFxuICAgIFwiPHVsIGNsYXNzPVxcXCJwYWdpbmF0aW9uXFxcIj5cXG5cIiArXG4gICAgXCIgIDxsaSBuZy1pZj1cXFwiYm91bmRhcnlMaW5rc1xcXCIgbmctY2xhc3M9XFxcIntkaXNhYmxlZDogbm9QcmV2aW91cygpfVxcXCI+PGEgaHJlZiBuZy1jbGljaz1cXFwic2VsZWN0UGFnZSgxKVxcXCI+e3tnZXRUZXh0KCdmaXJzdCcpfX08L2E+PC9saT5cXG5cIiArXG4gICAgXCIgIDxsaSBuZy1pZj1cXFwiZGlyZWN0aW9uTGlua3NcXFwiIG5nLWNsYXNzPVxcXCJ7ZGlzYWJsZWQ6IG5vUHJldmlvdXMoKX1cXFwiPjxhIGhyZWYgbmctY2xpY2s9XFxcInNlbGVjdFBhZ2UocGFnZSAtIDEpXFxcIj57e2dldFRleHQoJ3ByZXZpb3VzJyl9fTwvYT48L2xpPlxcblwiICtcbiAgICBcIiAgPGxpIG5nLXJlcGVhdD1cXFwicGFnZSBpbiBwYWdlcyB0cmFjayBieSAkaW5kZXhcXFwiIG5nLWNsYXNzPVxcXCJ7YWN0aXZlOiBwYWdlLmFjdGl2ZX1cXFwiPjxhIGhyZWYgbmctY2xpY2s9XFxcInNlbGVjdFBhZ2UocGFnZS5udW1iZXIpXFxcIj57e3BhZ2UudGV4dH19PC9hPjwvbGk+XFxuXCIgK1xuICAgIFwiICA8bGkgbmctaWY9XFxcImRpcmVjdGlvbkxpbmtzXFxcIiBuZy1jbGFzcz1cXFwie2Rpc2FibGVkOiBub05leHQoKX1cXFwiPjxhIGhyZWYgbmctY2xpY2s9XFxcInNlbGVjdFBhZ2UocGFnZSArIDEpXFxcIj57e2dldFRleHQoJ25leHQnKX19PC9hPjwvbGk+XFxuXCIgK1xuICAgIFwiICA8bGkgbmctaWY9XFxcImJvdW5kYXJ5TGlua3NcXFwiIG5nLWNsYXNzPVxcXCJ7ZGlzYWJsZWQ6IG5vTmV4dCgpfVxcXCI+PGEgaHJlZiBuZy1jbGljaz1cXFwic2VsZWN0UGFnZSh0b3RhbFBhZ2VzKVxcXCI+e3tnZXRUZXh0KCdsYXN0Jyl9fTwvYT48L2xpPlxcblwiICtcbiAgICBcIjwvdWw+XCIpO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1odG1sLXVuc2FmZS1wb3B1cC5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLWh0bWwtdW5zYWZlLXBvcHVwLmh0bWxcIixcbiAgICBcIjxkaXYgY2xhc3M9XFxcInRvb2x0aXAge3twbGFjZW1lbnR9fVxcXCIgbmctY2xhc3M9XFxcInsgaW46IGlzT3BlbigpLCBmYWRlOiBhbmltYXRpb24oKSB9XFxcIj5cXG5cIiArXG4gICAgXCIgIDxkaXYgY2xhc3M9XFxcInRvb2x0aXAtYXJyb3dcXFwiPjwvZGl2PlxcblwiICtcbiAgICBcIiAgPGRpdiBjbGFzcz1cXFwidG9vbHRpcC1pbm5lclxcXCIgYmluZC1odG1sLXVuc2FmZT1cXFwiY29udGVudFxcXCI+PC9kaXY+XFxuXCIgK1xuICAgIFwiPC9kaXY+XFxuXCIgK1xuICAgIFwiXCIpO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1wb3B1cC5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXBvcHVwLmh0bWxcIixcbiAgICBcIjxkaXYgY2xhc3M9XFxcInRvb2x0aXAge3twbGFjZW1lbnR9fVxcXCIgbmctY2xhc3M9XFxcInsgaW46IGlzT3BlbigpLCBmYWRlOiBhbmltYXRpb24oKSB9XFxcIj5cXG5cIiArXG4gICAgXCIgIDxkaXYgY2xhc3M9XFxcInRvb2x0aXAtYXJyb3dcXFwiPjwvZGl2PlxcblwiICtcbiAgICBcIiAgPGRpdiBjbGFzcz1cXFwidG9vbHRpcC1pbm5lclxcXCIgbmctYmluZD1cXFwiY29udGVudFxcXCI+PC9kaXY+XFxuXCIgK1xuICAgIFwiPC9kaXY+XFxuXCIgK1xuICAgIFwiXCIpO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLmh0bWxcIixcbiAgICBcIjxkaXYgY2xhc3M9XFxcInBvcG92ZXIge3twbGFjZW1lbnR9fVxcXCIgbmctY2xhc3M9XFxcInsgaW46IGlzT3BlbigpLCBmYWRlOiBhbmltYXRpb24oKSB9XFxcIj5cXG5cIiArXG4gICAgXCIgIDxkaXYgY2xhc3M9XFxcImFycm93XFxcIj48L2Rpdj5cXG5cIiArXG4gICAgXCJcXG5cIiArXG4gICAgXCIgIDxkaXYgY2xhc3M9XFxcInBvcG92ZXItaW5uZXJcXFwiPlxcblwiICtcbiAgICBcIiAgICAgIDxoMyBjbGFzcz1cXFwicG9wb3Zlci10aXRsZVxcXCIgbmctYmluZD1cXFwidGl0bGVcXFwiIG5nLXNob3c9XFxcInRpdGxlXFxcIj48L2gzPlxcblwiICtcbiAgICBcIiAgICAgIDxkaXYgY2xhc3M9XFxcInBvcG92ZXItY29udGVudFxcXCIgbmctYmluZD1cXFwiY29udGVudFxcXCI+PC9kaXY+XFxuXCIgK1xuICAgIFwiICA8L2Rpdj5cXG5cIiArXG4gICAgXCI8L2Rpdj5cXG5cIiArXG4gICAgXCJcIik7XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvcHJvZ3Jlc3NiYXIvYmFyLmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9iYXIuaHRtbFwiLFxuICAgIFwiPGRpdiBjbGFzcz1cXFwicHJvZ3Jlc3MtYmFyXFxcIiBuZy1jbGFzcz1cXFwidHlwZSAmJiAncHJvZ3Jlc3MtYmFyLScgKyB0eXBlXFxcIiByb2xlPVxcXCJwcm9ncmVzc2JhclxcXCIgYXJpYS12YWx1ZW5vdz1cXFwie3t2YWx1ZX19XFxcIiBhcmlhLXZhbHVlbWluPVxcXCIwXFxcIiBhcmlhLXZhbHVlbWF4PVxcXCJ7e21heH19XFxcIiBuZy1zdHlsZT1cXFwie3dpZHRoOiBwZXJjZW50ICsgJyUnfVxcXCIgYXJpYS12YWx1ZXRleHQ9XFxcInt7cGVyY2VudCB8IG51bWJlcjowfX0lXFxcIiBuZy10cmFuc2NsdWRlPjwvZGl2PlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzcy5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3MuaHRtbFwiLFxuICAgIFwiPGRpdiBjbGFzcz1cXFwicHJvZ3Jlc3NcXFwiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+XCIpO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzc2Jhci5odG1sXCIsXG4gICAgXCI8ZGl2IGNsYXNzPVxcXCJwcm9ncmVzc1xcXCI+XFxuXCIgK1xuICAgIFwiICA8ZGl2IGNsYXNzPVxcXCJwcm9ncmVzcy1iYXJcXFwiIG5nLWNsYXNzPVxcXCJ0eXBlICYmICdwcm9ncmVzcy1iYXItJyArIHR5cGVcXFwiIHJvbGU9XFxcInByb2dyZXNzYmFyXFxcIiBhcmlhLXZhbHVlbm93PVxcXCJ7e3ZhbHVlfX1cXFwiIGFyaWEtdmFsdWVtaW49XFxcIjBcXFwiIGFyaWEtdmFsdWVtYXg9XFxcInt7bWF4fX1cXFwiIG5nLXN0eWxlPVxcXCJ7d2lkdGg6IHBlcmNlbnQgKyAnJSd9XFxcIiBhcmlhLXZhbHVldGV4dD1cXFwie3twZXJjZW50IHwgbnVtYmVyOjB9fSVcXFwiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+XFxuXCIgK1xuICAgIFwiPC9kaXY+XCIpO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3JhdGluZy9yYXRpbmcuaHRtbFwiLCBbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dChcInRlbXBsYXRlL3JhdGluZy9yYXRpbmcuaHRtbFwiLFxuICAgIFwiPHNwYW4gbmctbW91c2VsZWF2ZT1cXFwicmVzZXQoKVxcXCIgbmcta2V5ZG93bj1cXFwib25LZXlkb3duKCRldmVudClcXFwiIHRhYmluZGV4PVxcXCIwXFxcIiByb2xlPVxcXCJzbGlkZXJcXFwiIGFyaWEtdmFsdWVtaW49XFxcIjBcXFwiIGFyaWEtdmFsdWVtYXg9XFxcInt7cmFuZ2UubGVuZ3RofX1cXFwiIGFyaWEtdmFsdWVub3c9XFxcInt7dmFsdWV9fVxcXCI+XFxuXCIgK1xuICAgIFwiICAgIDxpIG5nLXJlcGVhdD1cXFwiciBpbiByYW5nZSB0cmFjayBieSAkaW5kZXhcXFwiIG5nLW1vdXNlZW50ZXI9XFxcImVudGVyKCRpbmRleCArIDEpXFxcIiBuZy1jbGljaz1cXFwicmF0ZSgkaW5kZXggKyAxKVxcXCIgY2xhc3M9XFxcImdseXBoaWNvblxcXCIgbmctY2xhc3M9XFxcIiRpbmRleCA8IHZhbHVlICYmIChyLnN0YXRlT24gfHwgJ2dseXBoaWNvbi1zdGFyJykgfHwgKHIuc3RhdGVPZmYgfHwgJ2dseXBoaWNvbi1zdGFyLWVtcHR5JylcXFwiPlxcblwiICtcbiAgICBcIiAgICAgICAgPHNwYW4gY2xhc3M9XFxcInNyLW9ubHlcXFwiPih7eyAkaW5kZXggPCB2YWx1ZSA/ICcqJyA6ICcgJyB9fSk8L3NwYW4+XFxuXCIgK1xuICAgIFwiICAgIDwvaT5cXG5cIiArXG4gICAgXCI8L3NwYW4+XCIpO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3RhYnMvdGFiLmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS90YWJzL3RhYi5odG1sXCIsXG4gICAgXCI8bGkgbmctY2xhc3M9XFxcInthY3RpdmU6IGFjdGl2ZSwgZGlzYWJsZWQ6IGRpc2FibGVkfVxcXCI+XFxuXCIgK1xuICAgIFwiICA8YSBuZy1jbGljaz1cXFwic2VsZWN0KClcXFwiIHRhYi1oZWFkaW5nLXRyYW5zY2x1ZGU+e3toZWFkaW5nfX08L2E+XFxuXCIgK1xuICAgIFwiPC9saT5cXG5cIiArXG4gICAgXCJcIik7XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvdGFicy90YWJzZXQtdGl0bGVzLmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS90YWJzL3RhYnNldC10aXRsZXMuaHRtbFwiLFxuICAgIFwiPHVsIGNsYXNzPVxcXCJuYXYge3t0eXBlICYmICduYXYtJyArIHR5cGV9fVxcXCIgbmctY2xhc3M9XFxcInsnbmF2LXN0YWNrZWQnOiB2ZXJ0aWNhbH1cXFwiPlxcblwiICtcbiAgICBcIjwvdWw+XFxuXCIgK1xuICAgIFwiXCIpO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3RhYnMvdGFic2V0Lmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS90YWJzL3RhYnNldC5odG1sXCIsXG4gICAgXCJcXG5cIiArXG4gICAgXCI8ZGl2PlxcblwiICtcbiAgICBcIiAgPHVsIGNsYXNzPVxcXCJuYXYgbmF2LXt7dHlwZSB8fCAndGFicyd9fVxcXCIgbmctY2xhc3M9XFxcInsnbmF2LXN0YWNrZWQnOiB2ZXJ0aWNhbCwgJ25hdi1qdXN0aWZpZWQnOiBqdXN0aWZpZWR9XFxcIiBuZy10cmFuc2NsdWRlPjwvdWw+XFxuXCIgK1xuICAgIFwiICA8ZGl2IGNsYXNzPVxcXCJ0YWItY29udGVudFxcXCI+XFxuXCIgK1xuICAgIFwiICAgIDxkaXYgY2xhc3M9XFxcInRhYi1wYW5lXFxcIiBcXG5cIiArXG4gICAgXCIgICAgICAgICBuZy1yZXBlYXQ9XFxcInRhYiBpbiB0YWJzXFxcIiBcXG5cIiArXG4gICAgXCIgICAgICAgICBuZy1jbGFzcz1cXFwie2FjdGl2ZTogdGFiLmFjdGl2ZX1cXFwiXFxuXCIgK1xuICAgIFwiICAgICAgICAgdGFiLWNvbnRlbnQtdHJhbnNjbHVkZT1cXFwidGFiXFxcIj5cXG5cIiArXG4gICAgXCIgICAgPC9kaXY+XFxuXCIgK1xuICAgIFwiICA8L2Rpdj5cXG5cIiArXG4gICAgXCI8L2Rpdj5cXG5cIiArXG4gICAgXCJcIik7XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvdGltZXBpY2tlci90aW1lcGlja2VyLmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS90aW1lcGlja2VyL3RpbWVwaWNrZXIuaHRtbFwiLFxuICAgIFwiPHRhYmxlPlxcblwiICtcbiAgICBcIlx0PHRib2R5PlxcblwiICtcbiAgICBcIlx0XHQ8dHIgY2xhc3M9XFxcInRleHQtY2VudGVyXFxcIj5cXG5cIiArXG4gICAgXCJcdFx0XHQ8dGQ+PGEgbmctY2xpY2s9XFxcImluY3JlbWVudEhvdXJzKClcXFwiIGNsYXNzPVxcXCJidG4gYnRuLWxpbmtcXFwiPjxzcGFuIGNsYXNzPVxcXCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tdXBcXFwiPjwvc3Bhbj48L2E+PC90ZD5cXG5cIiArXG4gICAgXCJcdFx0XHQ8dGQ+Jm5ic3A7PC90ZD5cXG5cIiArXG4gICAgXCJcdFx0XHQ8dGQ+PGEgbmctY2xpY2s9XFxcImluY3JlbWVudE1pbnV0ZXMoKVxcXCIgY2xhc3M9XFxcImJ0biBidG4tbGlua1xcXCI+PHNwYW4gY2xhc3M9XFxcImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi11cFxcXCI+PC9zcGFuPjwvYT48L3RkPlxcblwiICtcbiAgICBcIlx0XHRcdDx0ZCBuZy1zaG93PVxcXCJzaG93TWVyaWRpYW5cXFwiPjwvdGQ+XFxuXCIgK1xuICAgIFwiXHRcdDwvdHI+XFxuXCIgK1xuICAgIFwiXHRcdDx0cj5cXG5cIiArXG4gICAgXCJcdFx0XHQ8dGQgc3R5bGU9XFxcIndpZHRoOjUwcHg7XFxcIiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCIgbmctY2xhc3M9XFxcInsnaGFzLWVycm9yJzogaW52YWxpZEhvdXJzfVxcXCI+XFxuXCIgK1xuICAgIFwiXHRcdFx0XHQ8aW5wdXQgdHlwZT1cXFwidGV4dFxcXCIgbmctbW9kZWw9XFxcImhvdXJzXFxcIiBuZy1jaGFuZ2U9XFxcInVwZGF0ZUhvdXJzKClcXFwiIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wgdGV4dC1jZW50ZXJcXFwiIG5nLW1vdXNld2hlZWw9XFxcImluY3JlbWVudEhvdXJzKClcXFwiIG5nLXJlYWRvbmx5PVxcXCJyZWFkb25seUlucHV0XFxcIiBtYXhsZW5ndGg9XFxcIjJcXFwiPlxcblwiICtcbiAgICBcIlx0XHRcdDwvdGQ+XFxuXCIgK1xuICAgIFwiXHRcdFx0PHRkPjo8L3RkPlxcblwiICtcbiAgICBcIlx0XHRcdDx0ZCBzdHlsZT1cXFwid2lkdGg6NTBweDtcXFwiIGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIiBuZy1jbGFzcz1cXFwieydoYXMtZXJyb3InOiBpbnZhbGlkTWludXRlc31cXFwiPlxcblwiICtcbiAgICBcIlx0XHRcdFx0PGlucHV0IHR5cGU9XFxcInRleHRcXFwiIG5nLW1vZGVsPVxcXCJtaW51dGVzXFxcIiBuZy1jaGFuZ2U9XFxcInVwZGF0ZU1pbnV0ZXMoKVxcXCIgY2xhc3M9XFxcImZvcm0tY29udHJvbCB0ZXh0LWNlbnRlclxcXCIgbmctcmVhZG9ubHk9XFxcInJlYWRvbmx5SW5wdXRcXFwiIG1heGxlbmd0aD1cXFwiMlxcXCI+XFxuXCIgK1xuICAgIFwiXHRcdFx0PC90ZD5cXG5cIiArXG4gICAgXCJcdFx0XHQ8dGQgbmctc2hvdz1cXFwic2hvd01lcmlkaWFuXFxcIj48YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdCB0ZXh0LWNlbnRlclxcXCIgbmctY2xpY2s9XFxcInRvZ2dsZU1lcmlkaWFuKClcXFwiPnt7bWVyaWRpYW59fTwvYnV0dG9uPjwvdGQ+XFxuXCIgK1xuICAgIFwiXHRcdDwvdHI+XFxuXCIgK1xuICAgIFwiXHRcdDx0ciBjbGFzcz1cXFwidGV4dC1jZW50ZXJcXFwiPlxcblwiICtcbiAgICBcIlx0XHRcdDx0ZD48YSBuZy1jbGljaz1cXFwiZGVjcmVtZW50SG91cnMoKVxcXCIgY2xhc3M9XFxcImJ0biBidG4tbGlua1xcXCI+PHNwYW4gY2xhc3M9XFxcImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1kb3duXFxcIj48L3NwYW4+PC9hPjwvdGQ+XFxuXCIgK1xuICAgIFwiXHRcdFx0PHRkPiZuYnNwOzwvdGQ+XFxuXCIgK1xuICAgIFwiXHRcdFx0PHRkPjxhIG5nLWNsaWNrPVxcXCJkZWNyZW1lbnRNaW51dGVzKClcXFwiIGNsYXNzPVxcXCJidG4gYnRuLWxpbmtcXFwiPjxzcGFuIGNsYXNzPVxcXCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tZG93blxcXCI+PC9zcGFuPjwvYT48L3RkPlxcblwiICtcbiAgICBcIlx0XHRcdDx0ZCBuZy1zaG93PVxcXCJzaG93TWVyaWRpYW5cXFwiPjwvdGQ+XFxuXCIgK1xuICAgIFwiXHRcdDwvdHI+XFxuXCIgK1xuICAgIFwiXHQ8L3Rib2R5PlxcblwiICtcbiAgICBcIjwvdGFibGU+XFxuXCIgK1xuICAgIFwiXCIpO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3R5cGVhaGVhZC90eXBlYWhlYWQtbWF0Y2guaHRtbFwiLCBbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dChcInRlbXBsYXRlL3R5cGVhaGVhZC90eXBlYWhlYWQtbWF0Y2guaHRtbFwiLFxuICAgIFwiPGEgdGFiaW5kZXg9XFxcIi0xXFxcIiBiaW5kLWh0bWwtdW5zYWZlPVxcXCJtYXRjaC5sYWJlbCB8IHR5cGVhaGVhZEhpZ2hsaWdodDpxdWVyeVxcXCI+PC9hPlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLXBvcHVwLmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLXBvcHVwLmh0bWxcIixcbiAgICBcIjx1bCBjbGFzcz1cXFwiZHJvcGRvd24tbWVudVxcXCIgbmctaWY9XFxcImlzT3BlbigpXFxcIiBuZy1zdHlsZT1cXFwie3RvcDogcG9zaXRpb24udG9wKydweCcsIGxlZnQ6IHBvc2l0aW9uLmxlZnQrJ3B4J31cXFwiIHN0eWxlPVxcXCJkaXNwbGF5OiBibG9jaztcXFwiIHJvbGU9XFxcImxpc3Rib3hcXFwiIGFyaWEtaGlkZGVuPVxcXCJ7eyFpc09wZW4oKX19XFxcIj5cXG5cIiArXG4gICAgXCIgICAgPGxpIG5nLXJlcGVhdD1cXFwibWF0Y2ggaW4gbWF0Y2hlcyB0cmFjayBieSAkaW5kZXhcXFwiIG5nLWNsYXNzPVxcXCJ7YWN0aXZlOiBpc0FjdGl2ZSgkaW5kZXgpIH1cXFwiIG5nLW1vdXNlZW50ZXI9XFxcInNlbGVjdEFjdGl2ZSgkaW5kZXgpXFxcIiBuZy1jbGljaz1cXFwic2VsZWN0TWF0Y2goJGluZGV4KVxcXCIgcm9sZT1cXFwib3B0aW9uXFxcIiBpZD1cXFwie3ttYXRjaC5pZH19XFxcIj5cXG5cIiArXG4gICAgXCIgICAgICAgIDxkaXYgdHlwZWFoZWFkLW1hdGNoIGluZGV4PVxcXCIkaW5kZXhcXFwiIG1hdGNoPVxcXCJtYXRjaFxcXCIgcXVlcnk9XFxcInF1ZXJ5XFxcIiB0ZW1wbGF0ZS11cmw9XFxcInRlbXBsYXRlVXJsXFxcIj48L2Rpdj5cXG5cIiArXG4gICAgXCIgICAgPC9saT5cXG5cIiArXG4gICAgXCI8L3VsPlwiKTtcbn1dKTtcblxuaWYgKHR5cGVvZiBhbmd1bGFyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi53aWRnZXQuY29tbW9uLnN0b3JhZ2Utc2VsZWN0b3IuY29uZmlnXCIsIFtdKVxuICAgIC52YWx1ZShcIlNUT1JBR0VfTU9EQUxcIiwgXCJodHRwOi8vc3RvcmFnZS5yaXNldmlzaW9uLmNvbS9zdG9yYWdlLW1vZGFsLmh0bWwjL2ZpbGVzL1wiKTtcbn1cblxuKGZ1bmN0aW9uICgpIHtcblxuICBcInVzZSBzdHJpY3RcIjtcblxuICBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24ud2lkZ2V0LmNvbW1vbi5zdG9yYWdlLXNlbGVjdG9yXCIsIFtcbiAgICBcInVpLmJvb3RzdHJhcFwiLFxuICAgIFwicmlzZXZpc2lvbi53aWRnZXQuY29tbW9uLnN0b3JhZ2Utc2VsZWN0b3IuY29uZmlnXCJcbiAgXSlcbiAgLmRpcmVjdGl2ZShcInN0b3JhZ2VTZWxlY3RvclwiLCBbXCIkd2luZG93XCIsIFwiJHRlbXBsYXRlQ2FjaGVcIiwgXCIkbW9kYWxcIiwgXCIkc2NlXCIsIFwiJGxvZ1wiLCBcIlNUT1JBR0VfTU9EQUxcIixcbiAgICBmdW5jdGlvbigkd2luZG93LCAkdGVtcGxhdGVDYWNoZSwgJG1vZGFsLCAkc2NlLCAkbG9nLCBTVE9SQUdFX01PREFMKXtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiBcIkVBXCIsXG4gICAgICAgIHNjb3BlIDoge1xuICAgICAgICAgIGxvY2FsOiBcIkBcIixcbiAgICAgICAgICB1c2VDdHJsOiBcIkBcIixcbiAgICAgICAgICBpbnN0YW5jZVRlbXBsYXRlOiBcIkBcIixcbiAgICAgICAgICBjb21wYW55SWQgOiBcIkBcIlxuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KFwic3RvcmFnZS1zZWxlY3Rvci5odG1sXCIpLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUpIHtcblxuICAgICAgICAgIHNjb3BlLnN0b3JhZ2VVcmwgPSBcIlwiO1xuXG4gICAgICAgICAgc2NvcGUub3BlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG4gICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBzY29wZS5pbnN0YW5jZVRlbXBsYXRlIHx8IFwic3RvcmFnZS5odG1sXCIsXG4gICAgICAgICAgICAgIGNvbnRyb2xsZXI6IHNjb3BlLnVzZUN0cmwgfHwgXCJTdG9yYWdlQ3RybFwiLFxuICAgICAgICAgICAgICBzaXplOiBcImxnXCIsXG4gICAgICAgICAgICAgIGJhY2tkcm9wOiB0cnVlLFxuICAgICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgc3RvcmFnZVVybDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHt1cmw6ICRzY2UudHJ1c3RBc1Jlc291cmNlVXJsKHNjb3BlLnN0b3JhZ2VVcmwpfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChmaWxlcykge1xuICAgICAgICAgICAgICAvLyBlbWl0IGFuIGV2ZW50IHdpdGggbmFtZSBcImZpbGVzXCIsIHBhc3NpbmcgdGhlIGFycmF5IG9mIGZpbGVzIHNlbGVjdGVkIGZyb20gc3RvcmFnZVxuICAgICAgICAgICAgICBzY29wZS4kZW1pdChcInBpY2tlZFwiLCBmaWxlcyk7XG5cbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgJGxvZy5pbmZvKFwiTW9kYWwgZGlzbWlzc2VkIGF0OiBcIiArIG5ldyBEYXRlKCkpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgaWYgKHNjb3BlLmxvY2FsKXtcbiAgICAgICAgICAgIHNjb3BlLnN0b3JhZ2VVcmwgPSBTVE9SQUdFX01PREFMICsgXCJsb2NhbFwiO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzY29wZS4kd2F0Y2goXCJjb21wYW55SWRcIiwgZnVuY3Rpb24gKGNvbXBhbnlJZCkge1xuICAgICAgICAgICAgICBpZiAoY29tcGFueUlkKSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuc3RvcmFnZVVybCA9IFNUT1JBR0VfTU9EQUwgKyBjb21wYW55SWQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgIH1cbiAgXSk7XG59KSgpO1xuXG5cblxuYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLndpZGdldC5jb21tb24uc3RvcmFnZS1zZWxlY3RvclwiKVxuICAuY29udHJvbGxlcihcIlN0b3JhZ2VDdHJsXCIsIFtcIiRzY29wZVwiLCBcIiRtb2RhbEluc3RhbmNlXCIsIFwic3RvcmFnZVVybFwiLCBcIiR3aW5kb3dcIiwgXCIkbG9nXCIsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSwgc3RvcmFnZVVybCwgJHdpbmRvdy8qLCAkbG9nKi8pe1xuXG4gICAgJHNjb3BlLnN0b3JhZ2VVcmwgPSBzdG9yYWdlVXJsO1xuXG4gICAgJHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciBzdG9yYWdlVGVzdCA9IFwic3RvcmFnZS1zdGFnZS1ydmEtdGVzdC5yaXNldmlzaW9uLmNvbVwiLFxuICAgICAgICBzdG9yYWdlUHJvZCA9IFwic3RvcmFnZS5yaXNldmlzaW9uLmNvbVwiO1xuXG4gICAgICBpZiAoZXZlbnQub3JpZ2luLmluZGV4T2Yoc3RvcmFnZVRlc3QpID09PSAtMSAmJiBldmVudC5vcmlnaW4uaW5kZXhPZihzdG9yYWdlUHJvZCkgPT09IC0xKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnQuZGF0YSkpIHtcbiAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoZXZlbnQuZGF0YSk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGlmIChldmVudC5kYXRhID09PSBcImNsb3NlXCIpIHtcbiAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKFwiY2FuY2VsXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgfV0pO1xuXG4oZnVuY3Rpb24obW9kdWxlKSB7XG50cnkgeyBhcHAgPSBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24ud2lkZ2V0LmNvbW1vbi5zdG9yYWdlLXNlbGVjdG9yXCIpOyB9XG5jYXRjaChlcnIpIHsgYXBwID0gYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLndpZGdldC5jb21tb24uc3RvcmFnZS1zZWxlY3RvclwiLCBbXSk7IH1cbmFwcC5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dChcInN0b3JhZ2Utc2VsZWN0b3IuaHRtbFwiLFxuICAgIFwiPGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi13aWRnZXQtaWNvbi1zdG9yYWdlXFxcIiBuZy1jbGljaz1cXFwib3BlbigpXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIC8+XFxuXCIgK1xuICAgIFwiPHNjcmlwdCB0eXBlPVxcXCJ0ZXh0L25nLXRlbXBsYXRlXFxcIiBpZD1cXFwic3RvcmFnZS5odG1sXFxcIj5cXG5cIiArXG4gICAgXCIgICAgICAgIDxpZnJhbWUgY2xhc3M9XFxcIm1vZGFsLWRpYWxvZ1xcXCIgc2Nyb2xsaW5nPVxcXCJub1xcXCIgbWFyZ2lud2lkdGg9XFxcIjBcXFwiIHNyYz1cXFwie3sgc3RvcmFnZVVybC51cmwgfX1cXFwiPjwvaWZyYW1lPlxcblwiICtcbiAgICBcIjwvc2NyaXB0PlxcblwiICtcbiAgICBcIlwiKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi53aWRnZXQuY29tbW9uLnRvb2x0aXBcIiwgW1widWkuYm9vdHN0cmFwXCJdKVxuICAgIC5kaXJlY3RpdmUoXCJydlRvb2x0aXBcIiwgW2Z1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyhcImZhXCIpO1xuICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoXCJmYS1xdWVzdGlvbi1jaXJjbGVcIik7XG4gICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyhcImZhLWxnXCIpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1dKTtcbn0oKSk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi53aWRnZXQuY29tbW9uLnVybC1maWVsZFwiLCBbXG4gICAgXCJyaXNldmlzaW9uLmNvbW1vbi5pMThuXCIsXG4gICAgXCJyaXNldmlzaW9uLndpZGdldC5jb21tb24udG9vbHRpcFwiLFxuICAgIFwicmlzZXZpc2lvbi53aWRnZXQuY29tbW9uLnN0b3JhZ2Utc2VsZWN0b3JcIlxuICBdKVxuICAgIC5kaXJlY3RpdmUoXCJ1cmxGaWVsZFwiLCBbXCIkdGVtcGxhdGVDYWNoZVwiLCBcIiRsb2dcIiwgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlLCAkbG9nKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogXCJFXCIsXG4gICAgICAgIHJlcXVpcmU6IFwiP25nTW9kZWxcIixcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICB1cmw6IFwiPVwiLFxuICAgICAgICAgIGhpZGVMYWJlbDogXCJAXCIsXG4gICAgICAgICAgaGlkZVN0b3JhZ2U6IFwiQFwiLFxuICAgICAgICAgIGNvbXBhbnlJZDogXCJAXCIsXG4gICAgICAgICAgZmlsZVR5cGU6IFwiQFwiXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoXCJfYW5ndWxhci91cmwtZmllbGQvdXJsLWZpZWxkLmh0bWxcIiksXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmwpIHtcblxuICAgICAgICAgIGZ1bmN0aW9uIGhhc1ZhbGlkRXh0ZW5zaW9uKHVybCwgZmlsZVR5cGUpIHtcbiAgICAgICAgICAgIHZhciB0ZXN0VXJsID0gdXJsLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICAgIGV4dGVuc2lvbnM7XG5cbiAgICAgICAgICAgIHN3aXRjaChmaWxlVHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiaW1hZ2VcIjpcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zID0gW1wiLmpwZ1wiLCBcIi5qcGVnXCIsIFwiLnBuZ1wiLCBcIi5ibXBcIiwgXCIuc3ZnXCIsIFwiLmdpZlwiXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSBcInZpZGVvXCI6XG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9ucyA9IFtcIi53ZWJtXCIsIFwiLm1wNFwiLCBcIi5vZ3ZcIiwgXCIub2dnXCJdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbnMgPSBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGV4dGVuc2lvbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgaWYgKHRlc3RVcmwuaW5kZXhPZihleHRlbnNpb25zW2ldKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuXG5cbiAgICAgICAgICBmdW5jdGlvbiB0ZXN0VXJsKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdXJsUmVnRXhwLFxuICAgICAgICAgICAgICBpc1ZhbGlkO1xuXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgIERpc2N1c3Npb25cbiAgICAgICAgICAgICBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM3Njg0L2hvdy10by1yZXBsYWNlLXBsYWluLXVybHMtd2l0aC1saW5rcyMyMTkyNTQ5MVxuXG4gICAgICAgICAgICAgVXNpbmdcbiAgICAgICAgICAgICBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9kcGVyaW5pLzcyOTI5NFxuICAgICAgICAgICAgIFJlYXNvbmluZ1xuICAgICAgICAgICAgIGh0dHA6Ly9tYXRoaWFzYnluZW5zLmJlL2RlbW8vdXJsLXJlZ2V4ICovXG5cbiAgICAgICAgICAgIC8qIGpzaGludCBpZ25vcmU6c3RhcnQgKi9cbiAgICAgICAgICAgIHVybFJlZ0V4cCA9IC9eKD86KD86aHR0cHM/fGZ0cCk6XFwvXFwvKSg/OlxcUysoPzo6XFxTKik/QCk/KD86KD8hKD86MTB8MTI3KSg/OlxcLlxcZHsxLDN9KXszfSkoPyEoPzoxNjlcXC4yNTR8MTkyXFwuMTY4KSg/OlxcLlxcZHsxLDN9KXsyfSkoPyExNzJcXC4oPzoxWzYtOV18MlxcZHwzWzAtMV0pKD86XFwuXFxkezEsM30pezJ9KSg/OlsxLTldXFxkP3wxXFxkXFxkfDJbMDFdXFxkfDIyWzAtM10pKD86XFwuKD86MT9cXGR7MSwyfXwyWzAtNF1cXGR8MjVbMC01XSkpezJ9KD86XFwuKD86WzEtOV1cXGQ/fDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNF0pKXwoPzooPzpbYS16XFx1MDBhMS1cXHVmZmZmMC05XSstPykqW2EtelxcdTAwYTEtXFx1ZmZmZjAtOV0rKSg/OlxcLig/OlthLXpcXHUwMGExLVxcdWZmZmYwLTldKy0/KSpbYS16XFx1MDBhMS1cXHVmZmZmMC05XSspKig/OlxcLig/OlthLXpcXHUwMGExLVxcdWZmZmZdezIsfSkpKSg/OjpcXGR7Miw1fSk/KD86XFwvW15cXHNdKik/JC9pO1xuICAgICAgICAgICAgLyoganNoaW50IGlnbm9yZTplbmQgKi9cblxuICAgICAgICAgICAgLy8gQWRkIGh0dHA6Ly8gaWYgbm8gcHJvdG9jb2wgcGFyYW1ldGVyIGV4aXN0c1xuICAgICAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoXCI6Ly9cIikgPT09IC0xKSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gXCJodHRwOi8vXCIgKyB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaXNWYWxpZCA9IHVybFJlZ0V4cC50ZXN0KHZhbHVlKTtcblxuICAgICAgICAgICAgaWYgKGlzVmFsaWQgJiYgdHlwZW9mIHNjb3BlLmZpbGVUeXBlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgIGlzVmFsaWQgPSBoYXNWYWxpZEV4dGVuc2lvbih2YWx1ZSwgc2NvcGUuZmlsZVR5cGUpO1xuICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICBzY29wZS5pbnZhbGlkVHlwZSA9IHNjb3BlLmZpbGVUeXBlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzY29wZS5pbnZhbGlkVHlwZSA9IFwidXJsXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEJ5IGRlZmF1bHQgZW5mb3JjZSB2YWxpZGF0aW9uXG4gICAgICAgICAgc2NvcGUuZG9WYWxpZGF0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAvLyBBIGZsYWcgdG8gc2V0IGlmIHRoZSB1c2VyIHR1cm5lZCBvZmYgdmFsaWRhdGlvblxuICAgICAgICAgIHNjb3BlLmZvcmNlZFZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgLy8gVmFsaWRhdGlvbiBzdGF0ZVxuICAgICAgICAgIHNjb3BlLnZhbGlkID0gdHJ1ZTtcblxuICAgICAgICAgIHNjb3BlLmludmFsaWRUeXBlID0gXCJ1cmxcIjtcblxuICAgICAgICAgIHNjb3BlLmFsbG93SW5pdEVtcHR5ID0gKHR5cGVvZiBhdHRycy5pbml0RW1wdHkgIT09IFwidW5kZWZpbmVkXCIpID8gdHJ1ZSA6IGZhbHNlO1xuXG4gICAgICAgICAgaWYgKCFzY29wZS5oaWRlU3RvcmFnZSkge1xuICAgICAgICAgICAgc2NvcGUuJG9uKFwicGlja2VkXCIsIGZ1bmN0aW9uIChldmVudCwgZGF0YSkge1xuICAgICAgICAgICAgICBzY29wZS51cmwgPSBkYXRhWzBdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2NvcGUuYmx1ciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2NvcGUuJGVtaXQoXCJ1cmxGaWVsZEJsdXJcIik7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHNjb3BlLiR3YXRjaChcInVybFwiLCBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVybCAhPT0gXCJ1bmRlZmluZWRcIiAmJiB1cmwgIT09IG51bGwpIHtcblxuICAgICAgICAgICAgICBpZiAodXJsICE9PSBcIlwiICYmIHNjb3BlLmFsbG93SW5pdEVtcHR5KSB7XG4gICAgICAgICAgICAgICAgLy8gZW5zdXJlIGFuIGVtcHR5IFwiXCIgdmFsdWUgbm93IGdldHMgdmFsaWRhdGVkXG4gICAgICAgICAgICAgICAgc2NvcGUuYWxsb3dJbml0RW1wdHkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChzY29wZS5kb1ZhbGlkYXRpb24gJiYgIXNjb3BlLmFsbG93SW5pdEVtcHR5KSB7XG4gICAgICAgICAgICAgICAgc2NvcGUudmFsaWQgPSB0ZXN0VXJsKHNjb3BlLnVybCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHNjb3BlLiR3YXRjaChcInZhbGlkXCIsIGZ1bmN0aW9uICh2YWxpZCkge1xuICAgICAgICAgICAgaWYgKGN0cmwpIHtcbiAgICAgICAgICAgICAgJGxvZy5pbmZvKFwiQ2FsbGluZyAkc2V0VmFsaWRpdHkoKSBvbiBwYXJlbnQgY29udHJvbGxlclwiKTtcbiAgICAgICAgICAgICAgY3RybC4kc2V0VmFsaWRpdHkoXCJ2YWxpZFwiLCB2YWxpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBzY29wZS4kd2F0Y2goXCJkb1ZhbGlkYXRpb25cIiwgZnVuY3Rpb24gKGRvVmFsaWRhdGlvbikge1xuICAgICAgICAgICAgaWYodHlwZW9mIHNjb3BlLnVybCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICBpZiAoZG9WYWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuZm9yY2VkVmFsaWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGlmICghc2NvcGUuYWxsb3dJbml0RW1wdHkpIHtcbiAgICAgICAgICAgICAgICAgIHNjb3BlLnZhbGlkID0gdGVzdFVybChzY29wZS51cmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzY29wZS5mb3JjZWRWYWxpZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2NvcGUudmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XSk7XG59KCkpO1xuXG4oZnVuY3Rpb24obW9kdWxlKSB7XG50cnkgeyBhcHAgPSBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24ud2lkZ2V0LmNvbW1vbi51cmwtZmllbGRcIik7IH1cbmNhdGNoKGVycikgeyBhcHAgPSBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24ud2lkZ2V0LmNvbW1vbi51cmwtZmllbGRcIiwgW10pOyB9XG5hcHAucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJfYW5ndWxhci91cmwtZmllbGQvdXJsLWZpZWxkLmh0bWxcIixcbiAgICBcIjxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiID5cXG5cIiArXG4gICAgXCIgIDxsYWJlbCBuZy1pZj1cXFwiIWhpZGVMYWJlbFxcXCI+e3sgXFxcInVybC5sYWJlbFxcXCIgfCB0cmFuc2xhdGUgfX08L2xhYmVsPlxcblwiICtcbiAgICBcIiAgPGRpdiBuZy1jbGFzcz1cXFwieydpbnB1dC1ncm91cCc6IWhpZGVTdG9yYWdlfVxcXCI+XFxuXCIgK1xuICAgIFwiICAgIDxpbnB1dCBuYW1lPVxcXCJ1cmxcXFwiIHR5cGU9XFxcInRleHRcXFwiIG5nLW1vZGVsPVxcXCJ1cmxcXFwiIG5nLWJsdXI9XFxcImJsdXIoKVxcXCIgY2xhc3M9XFxcImZvcm0tY29udHJvbFxcXCIgcGxhY2Vob2xkZXI9XFxcImh0dHA6Ly9cXFwiPlxcblwiICtcbiAgICBcIiAgICA8c3BhbiBjbGFzcz1cXFwiaW5wdXQtdXJsLWFkZG9uXFxcIiBuZy1pZj1cXFwiIWhpZGVTdG9yYWdlXFxcIj48c3RvcmFnZS1zZWxlY3RvciBjb21wYW55LWlkPVxcXCJ7e2NvbXBhbnlJZH19XFxcIj48L3N0b3JhZ2Utc2VsZWN0b3I+PC9zcGFuPlxcblwiICtcbiAgICBcIiAgPC9kaXY+XFxuXCIgK1xuICAgIFwiICA8cCBuZy1pZj1cXFwiIXZhbGlkICYmIGludmFsaWRUeXBlID09PSAndXJsJ1xcXCIgY2xhc3M9XFxcInRleHQtZGFuZ2VyXFxcIj57eyBcXFwidXJsLmVycm9ycy51cmxcXFwiIHwgdHJhbnNsYXRlIH19PC9wPlxcblwiICtcbiAgICBcIiAgPHAgbmctaWY9XFxcIiF2YWxpZCAmJiBpbnZhbGlkVHlwZSA9PT0gJ2ltYWdlJ1xcXCIgY2xhc3M9XFxcInRleHQtZGFuZ2VyXFxcIj57eyBcXFwidXJsLmVycm9ycy5pbWFnZVxcXCIgfCB0cmFuc2xhdGUgfX08L3A+XFxuXCIgK1xuICAgIFwiICA8cCBuZy1pZj1cXFwiIXZhbGlkICYmIGludmFsaWRUeXBlID09PSAndmlkZW8nXFxcIiBjbGFzcz1cXFwidGV4dC1kYW5nZXJcXFwiPnt7IFxcXCJ1cmwuZXJyb3JzLnZpZGVvXFxcIiB8IHRyYW5zbGF0ZSB9fTwvcD5cXG5cIiArXG4gICAgXCIgIDxkaXYgY2xhc3M9XFxcImNoZWNrYm94XFxcIiBuZy1zaG93PVxcXCJmb3JjZWRWYWxpZCB8fCAhdmFsaWRcXFwiPlxcblwiICtcbiAgICBcIiAgICA8bGFiZWw+XFxuXCIgK1xuICAgIFwiICAgICAgPGlucHV0IG5hbWU9XFxcInZhbGlkYXRlLXVybFxcXCIgbmctY2xpY2s9XFxcImRvVmFsaWRhdGlvbiA9ICFkb1ZhbGlkYXRpb25cXFwiIHR5cGU9XFxcImNoZWNrYm94XFxcIlxcblwiICtcbiAgICBcIiAgICAgICAgICAgICB2YWx1ZT1cXFwidmFsaWRhdGUtdXJsXFxcIiBjaGVja2VkPVxcXCJjaGVja2VkXFxcIj4ge3tcXFwidXJsLnZhbGlkYXRlLmxhYmVsXFxcIiB8IHRyYW5zbGF0ZX19XFxuXCIgK1xuICAgIFwiICAgIDwvbGFiZWw+XFxuXCIgK1xuICAgIFwiICAgIDxzcGFuIHBvcG92ZXI9XFxcInt7J3VybC52YWxpZGF0ZS50b29sdGlwJyB8IHRyYW5zbGF0ZX19XFxcIiBwb3BvdmVyLXRyaWdnZXI9XFxcImNsaWNrXFxcIlxcblwiICtcbiAgICBcIiAgICAgICAgICBwb3BvdmVyLXBsYWNlbWVudD1cXFwidG9wXFxcIiBydi10b29sdGlwPjwvc3Bhbj5cXG5cIiArXG4gICAgXCIgIDwvZGl2PlxcblwiICtcbiAgICBcIjwvZGl2PlxcblwiICtcbiAgICBcIlwiKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi53aWRnZXQuY29tbW9uLnBvc2l0aW9uLXNldHRpbmdcIiwgW1wicmlzZXZpc2lvbi5jb21tb24uaTE4blwiXSlcbiAgICAuZGlyZWN0aXZlKFwicG9zaXRpb25TZXR0aW5nXCIsIFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIFwiJGxvZ1wiLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUvKiwgJGxvZyovKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogXCJFXCIsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgcG9zaXRpb246IFwiPVwiLFxuICAgICAgICAgIGhpZGVMYWJlbDogXCJAXCJcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldChcIl9hbmd1bGFyL3Bvc2l0aW9uLXNldHRpbmcvcG9zaXRpb24tc2V0dGluZy5odG1sXCIpLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoJHNjb3BlKSB7XG4gICAgICAgICAgJHNjb3BlLiR3YXRjaChcInBvc2l0aW9uXCIsIGZ1bmN0aW9uKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBvc2l0aW9uID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgIC8vIHNldCBhIGRlZmF1bHRcbiAgICAgICAgICAgICAgJHNjb3BlLnBvc2l0aW9uID0gXCJ0b3AtbGVmdFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1dKTtcbn0oKSk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7IGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi53aWRnZXQuY29tbW9uLnBvc2l0aW9uLXNldHRpbmdcIik7IH1cbmNhdGNoKGVycikgeyBhcHAgPSBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24ud2lkZ2V0LmNvbW1vbi5wb3NpdGlvbi1zZXR0aW5nXCIsIFtdKTsgfVxuYXBwLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICBcInVzZSBzdHJpY3RcIjtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwiX2FuZ3VsYXIvcG9zaXRpb24tc2V0dGluZy9wb3NpdGlvbi1zZXR0aW5nLmh0bWxcIixcbiAgICBcIjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+XFxuXCIgK1xuICAgIFwiICA8ZGl2IGNsYXNzPVxcXCJjb2wtbWQtM1xcXCI+XFxuXCIgK1xuICAgIFwiICAgIDxsYWJlbCBuZy1pZj1cXFwiIWhpZGVMYWJlbFxcXCI+IHt7J3dpZGdldHMuYWxpZ25tZW50JyB8IHRyYW5zbGF0ZX19PC9sYWJlbD5cXG5cIiArXG4gICAgXCIgICAgPHNlbGVjdCBuYW1lPVxcXCJwb3NpdGlvblxcXCIgbmctbW9kZWw9XFxcInBvc2l0aW9uXFxcIiBjbGFzcz1cXFwiZm9ybS1jb250cm9sXFxcIj5cXG5cIiArXG4gICAgXCIgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJ0b3AtbGVmdFxcXCI+e3sncG9zaXRpb24udG9wLmxlZnQnIHwgdHJhbnNsYXRlfX08L29wdGlvbj5cXG5cIiArXG4gICAgXCIgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJ0b3AtY2VudGVyXFxcIj57eydwb3NpdGlvbi50b3AuY2VudGVyJyB8IHRyYW5zbGF0ZX19PC9vcHRpb24+XFxuXCIgK1xuICAgIFwiICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwidG9wLXJpZ2h0XFxcIj57eydwb3NpdGlvbi50b3AucmlnaHQnIHwgdHJhbnNsYXRlfX08L29wdGlvbj5cXG5cIiArXG4gICAgXCIgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJtaWRkbGUtbGVmdFxcXCI+e3sncG9zaXRpb24ubWlkZGxlLmxlZnQnIHwgdHJhbnNsYXRlfX08L29wdGlvbj5cXG5cIiArXG4gICAgXCIgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJtaWRkbGUtY2VudGVyXFxcIj57eydwb3NpdGlvbi5taWRkbGUuY2VudGVyJyB8IHRyYW5zbGF0ZX19PC9vcHRpb24+XFxuXCIgK1xuICAgIFwiICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwibWlkZGxlLXJpZ2h0XFxcIj57eydwb3NpdGlvbi5taWRkbGUucmlnaHQnIHwgdHJhbnNsYXRlfX08L29wdGlvbj5cXG5cIiArXG4gICAgXCIgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJib3R0b20tbGVmdFxcXCI+e3sncG9zaXRpb24uYm90dG9tLmxlZnQnIHwgdHJhbnNsYXRlfX08L29wdGlvbj5cXG5cIiArXG4gICAgXCIgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJib3R0b20tY2VudGVyXFxcIj57eydwb3NpdGlvbi5ib3R0b20uY2VudGVyJyB8IHRyYW5zbGF0ZX19PC9vcHRpb24+XFxuXCIgK1xuICAgIFwiICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiYm90dG9tLXJpZ2h0XFxcIj57eydwb3NpdGlvbi5ib3R0b20ucmlnaHQnIHwgdHJhbnNsYXRlfX08L29wdGlvbj5cXG5cIiArXG4gICAgXCIgICAgPC9zZWxlY3Q+XFxuXCIgK1xuICAgIFwiICA8L2Rpdj5cXG5cIiArXG4gICAgXCI8L2Rpdj5cXG5cIiArXG4gICAgXCJcIik7XG59XSk7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24ud2lkZ2V0LmNvbW1vbi53aWRnZXQtYnV0dG9uLXRvb2xiYXJcIiwgW1wicmlzZXZpc2lvbi5jb21tb24uaTE4blwiXSlcbiAgICAuZGlyZWN0aXZlKFwid2lkZ2V0QnV0dG9uVG9vbGJhclwiLCBbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICBoZWxwOiBcIkBcIixcbiAgICAgICAgICBjb250cmlidXRlOiBcIkBcIixcbiAgICAgICAgICBzYXZlOiBcIiZcIixcbiAgICAgICAgICBjYW5jZWw6IFwiJlwiLFxuICAgICAgICAgIGRpc2FibGVTYXZlOiBcIiZcIlxuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KFwiX2FuZ3VsYXIvd2lkZ2V0LWJ1dHRvbi10b29sYmFyL3dpZGdldC1idXR0b24tdG9vbGJhci5odG1sXCIpLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoJHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICAgICRzY29wZS5oZWxwUmVmID0gXCJcIjtcbiAgICAgICAgICAkc2NvcGUuY29udHJpYnV0ZVJlZiA9IFwiXCI7XG5cbiAgICAgICAgICBpZiAodHlwZW9mIGF0dHJzLmhlbHAgIT09IFwidW5kZWZpbmVkXCIgJiYgYXR0cnMuaGVscCAhPT0gXCJcIikge1xuICAgICAgICAgICAgJHNjb3BlLmhlbHBSZWYgPSBhdHRycy5oZWxwO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0eXBlb2YgYXR0cnMuY29udHJpYnV0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBhdHRycy5jb250cmlidXRlICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAkc2NvcGUuY29udHJpYnV0ZVJlZiA9IGF0dHJzLmNvbnRyaWJ1dGU7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfV0pO1xufSgpKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHsgYXBwID0gYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLndpZGdldC5jb21tb24ud2lkZ2V0LWJ1dHRvbi10b29sYmFyXCIpOyB9XG5jYXRjaChlcnIpIHsgYXBwID0gYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLndpZGdldC5jb21tb24ud2lkZ2V0LWJ1dHRvbi10b29sYmFyXCIsIFtdKTsgfVxuYXBwLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICBcInVzZSBzdHJpY3RcIjtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwiX2FuZ3VsYXIvd2lkZ2V0LWJ1dHRvbi10b29sYmFyL3dpZGdldC1idXR0b24tdG9vbGJhci5odG1sXCIsXG4gICAgXCI8ZGl2IGNsYXNzPVxcXCJidG4tdG9vbGJhciBzdGlja3ktYnV0dG9uc1xcXCI+XFxuXCIgK1xuICAgIFwiICA8YnV0dG9uIGlkPVxcXCJzYXZlXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1maXhlZC13aWR0aFxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiBuZy1jbGljaz1cXFwic2F2ZSgpXFxcIiBuZy1kaXNhYmxlZD1cXFwiZGlzYWJsZVNhdmUoKVxcXCI+XFxuXCIgK1xuICAgIFwiICAgIDxzcGFuPnt7XFxcImNvbW1vbi5zYXZlXFxcIiB8IHRyYW5zbGF0ZX19PC9zcGFuPlxcblwiICtcbiAgICBcIiAgICA8aSBjbGFzcz1cXFwiZmEgZmEtd2hpdGUgZmEtY2hlY2sgZmEtbGcgaWNvbi1yaWdodFxcXCI+PC9pPlxcblwiICtcbiAgICBcIiAgPC9idXR0b24+XFxuXCIgK1xuICAgIFwiICA8YnV0dG9uIGlkPVxcXCJjYW5jZWxcXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHQgYnRuLWZpeGVkLXdpZHRoXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIG5nLWNsaWNrPVxcXCJjYW5jZWwoKVxcXCI+XFxuXCIgK1xuICAgIFwiICAgIDxzcGFuPnt7XFxcImNvbW1vbi5jYW5jZWxcXFwiIHwgdHJhbnNsYXRlfX08L3NwYW4+XFxuXCIgK1xuICAgIFwiICAgIDxpIGNsYXNzPVxcXCJmYSBmYS13aGl0ZSBmYS10aW1lcyBmYS1sZyBpY29uLXJpZ2h0XFxcIj48L2k+XFxuXCIgK1xuICAgIFwiICA8L2J1dHRvbj5cXG5cIiArXG4gICAgXCIgIDxhIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tcnYtaGVscCBidG4tZml4ZWQtd2lkdGhcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIiBocmVmPXt7aGVscFJlZn19IG5nLWlmPVxcXCJoZWxwUmVmICE9PSAnJ1xcXCI+XFxuXCIgK1xuICAgIFwiICAgIDxzcGFuPnt7XFxcImNvbW1vbi5oZWxwXFxcIiB8IHRyYW5zbGF0ZX19PC9zcGFuPlxcblwiICtcbiAgICBcIiAgICA8aSBjbGFzcz1cXFwiZmEgZmEtcXVlc3Rpb24tY2lyY2xlIGZhLWxnIGljb24tcmlnaHRcXFwiPjwvaT5cXG5cIiArXG4gICAgXCIgIDwvYT5cXG5cIiArXG4gICAgXCIgIDxhIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tcnYtaGVscCBidG4tZml4ZWQtd2lkdGhcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIiBocmVmPXt7Y29udHJpYnV0ZVJlZn19IG5nLWlmPVxcXCJjb250cmlidXRlUmVmICE9PSAnJ1xcXCI+XFxuXCIgK1xuICAgIFwiICAgIDxzcGFuPnt7XFxcImNvbW1vbi5jb250cmlidXRlXFxcIiB8IHRyYW5zbGF0ZX19PC9zcGFuPlxcblwiICtcbiAgICBcIiAgICA8aSBjbGFzcz1cXFwiZmEgZmEtZ2l0aHViIGZhLWxnIGljb24tcmlnaHRcXFwiPjwvaT5cXG5cIiArXG4gICAgXCIgIDwvYT5cXG5cIiArXG4gICAgXCI8L2Rpdj5cXG5cIiArXG4gICAgXCJcIik7XG59XSk7XG59KSgpO1xuXG5pZiAodHlwZW9mIGFuZ3VsYXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLmNvbW1vbi5pMThuLmNvbmZpZ1wiLCBbXSlcbiAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1BSRUZJWFwiLCBcImxvY2FsZXMvdHJhbnNsYXRpb25fXCIpXG4gICAgLmNvbnN0YW50KFwiTE9DQUxFU19TVUZJWFwiLCBcIi5qc29uXCIpO1xufVxuXG5hbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24ud2lkZ2V0LmltYWdlRm9sZGVyLnNldHRpbmdzXCIsIFtcbiAgXCJyaXNldmlzaW9uLmNvbW1vbi5pMThuXCIsXG4gIFwicmlzZXZpc2lvbi53aWRnZXQuY29tbW9uXCIsXG4gIFwicmlzZXZpc2lvbi53aWRnZXQuY29tbW9uLnRvb2x0aXBcIixcbiAgXCJyaXNldmlzaW9uLndpZGdldC5jb21tb24ud2lkZ2V0LWJ1dHRvbi10b29sYmFyXCIsXG4gIFwicmlzZXZpc2lvbi53aWRnZXQuY29tbW9uLnVybC1maWVsZFwiLFxuICBcInJpc2V2aXNpb24ud2lkZ2V0LmNvbW1vbi5wb3NpdGlvbi1zZXR0aW5nXCJcbl0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24ud2lkZ2V0LmltYWdlRm9sZGVyLnNldHRpbmdzXCIpXG4gIC5jb250cm9sbGVyKFwiaW1hZ2VGb2xkZXJTZXR0aW5nc0NvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwiY29tbW9uU2V0dGluZ3NcIixcbiAgICBmdW5jdGlvbiAoJHNjb3BlLCBjb21tb25TZXR0aW5ncykge1xuICAgICAgJHNjb3BlLmlzRm9sZGVyID0gdHJ1ZTtcblxuICAgICAgZnVuY3Rpb24gaXNGb2xkZXJTZWxlY3RlZCh1cmwpIHtcbiAgICAgICAgdmFyIHBhcmFtcyA9IHVybC5zcGxpdChcIj9cIiksXG4gICAgICAgICAgcGFpcjtcblxuICAgICAgICAkc2NvcGUuaXNGb2xkZXIgPSBmYWxzZTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHBhaXIgPSBwYXJhbXNbaV0uc3BsaXQoXCI9XCIpO1xuXG4gICAgICAgICAgaWYgKHBhaXJbMF0gPT09IFwicHJlZml4XCIgJiYgcGFpclsxXSAhPT0gdW5kZWZpbmVkICYmIHBhaXJbMV0gIT09IFwiXCIpIHtcbiAgICAgICAgICAgICRzY29wZS5pc0ZvbGRlciA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuc2V0dGluZ3NGb3JtLiRzZXRWYWxpZGl0eShcInVybEZpZWxkXCIsICRzY29wZS5pc0ZvbGRlcik7XG5cbiAgICAgICAgcmV0dXJuICRzY29wZS5pc0ZvbGRlcjtcbiAgICAgIH1cblxuICAgICAgJHNjb3BlLiR3YXRjaChcInNldHRpbmdzLmFkZGl0aW9uYWxQYXJhbXMudXJsXCIsIGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgaWYgKHVybCAhPT0gdW5kZWZpbmVkICYmIHVybCAhPT0gXCJcIikge1xuICAgICAgICAgIGlmICgkc2NvcGUuc2V0dGluZ3NGb3JtLnVybEZpZWxkLiR2YWxpZCkge1xuICAgICAgICAgICAgaWYgKGlzRm9sZGVyU2VsZWN0ZWQodXJsKSkge1xuICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3MuYWRkaXRpb25hbFBhcmFtcy5zdG9yYWdlID0gY29tbW9uU2V0dGluZ3MuZ2V0U3RvcmFnZVVybERhdGEodXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3MuYWRkaXRpb25hbFBhcmFtcy5zdG9yYWdlID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgJHNjb3BlLmlzRm9sZGVyID0gdHJ1ZTtcbiAgICAgICAgICAgICRzY29wZS5zZXR0aW5ncy5hZGRpdGlvbmFsUGFyYW1zLnN0b3JhZ2UgPSB7fTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1dKVxuICAudmFsdWUoXCJkZWZhdWx0U2V0dGluZ3NcIiwge1xuICAgIFwicGFyYW1zXCI6IHt9LFxuICAgIFwiYWRkaXRpb25hbFBhcmFtc1wiOiB7XG4gICAgICBcInVybFwiOiBcIlwiLFxuICAgICAgXCJzdG9yYWdlXCI6IHt9LFxuICAgICAgXCJzY2FsZVRvRml0XCI6IHRydWUsXG4gICAgICBcInBvc2l0aW9uXCI6IFwidG9wLWxlZnRcIixcbiAgICAgIFwib3JkZXJcIjogXCJhbHBoYS1hc2NcIixcbiAgICAgIFwiZHVyYXRpb25cIjogMTAsXG4gICAgICBcInBhdXNlXCI6IDEwLFxuICAgICAgXCJhdXRvSGlkZVwiOiBmYWxzZVxuICAgIH1cbiAgfSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi53aWRnZXQuY29tbW9uXCIsIFtdKTtcblxuYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLndpZGdldC5jb21tb25cIilcbiAgLmNvbnRyb2xsZXIoXCJzZXR0aW5nc0NvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwic2V0dGluZ3NTYXZlclwiLCBcInNldHRpbmdzR2V0dGVyXCIsIFwic2V0dGluZ3NDbG9zZXJcIixcbiAgICBmdW5jdGlvbiAoJHNjb3BlLCBzZXR0aW5nc1NhdmVyLCBzZXR0aW5nc0dldHRlciwgc2V0dGluZ3NDbG9zZXIpIHtcblxuICAgICRzY29wZS5zZXR0aW5ncyA9IHsgcGFyYW1zOiB7fSwgYWRkaXRpb25hbFBhcmFtczoge319O1xuICAgICRzY29wZS5hbGVydHMgPSBbXTtcblxuICAgICRzY29wZS5nZXRBZGRpdGlvbmFsUGFyYW0gPSBmdW5jdGlvbiAobmFtZSwgZGVmYXVsdFZhbCkge1xuICAgICAgdmFyIHZhbCA9ICRzY29wZS5zZXR0aW5ncy5hZGRpdGlvbmFsUGFyYW1zW25hbWVdO1xuICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZCh2YWwpKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5zZXRBZGRpdGlvbmFsUGFyYW0gPSBmdW5jdGlvbiAobmFtZSwgdmFsKSB7XG4gICAgICAkc2NvcGUuc2V0dGluZ3MuYWRkaXRpb25hbFBhcmFtc1tuYW1lXSA9IHZhbDtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmxvYWRBZGRpdGlvbmFsUGFyYW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgc2V0dGluZ3NHZXR0ZXIuZ2V0QWRkaXRpb25hbFBhcmFtcygpLnRoZW4oZnVuY3Rpb24gKGFkZGl0aW9uYWxQYXJhbXMpIHtcbiAgICAgICAgJHNjb3BlLnNldHRpbmdzLmFkZGl0aW9uYWxQYXJhbXMgPSBhZGRpdGlvbmFsUGFyYW1zO1xuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdChcImxvYWRBZGRpdGlvbmFsUGFyYW1zXCIsIGFkZGl0aW9uYWxQYXJhbXMpO1xuICAgICAgfSxcbiAgICAgIGZ1bmN0aW9uIChlcnIpIHthbGVydCAoZXJyKTsgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5zZXRBZGRpdGlvbmFsUGFyYW1zID0gZnVuY3Rpb24gKG5hbWUsIHZhbCkge1xuICAgICAgJHNjb3BlLnNldHRpbmdzLmFkZGl0aW9uYWxQYXJhbXNbbmFtZV0gPSB2YWw7XG4gICAgfTtcblxuICAgICRzY29wZS5zYXZlU2V0dGluZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAvL2NsZWFyIG91dCBwcmV2aW91cyBhbGVydHMsIGlmIGFueVxuICAgICAgJHNjb3BlLmFsZXJ0cyA9IFtdO1xuXG4gICAgICAkc2NvcGUuJGJyb2FkY2FzdChcImNvbGxlY3RBZGRpdGlvbmFsUGFyYW1zXCIpO1xuXG4gICAgICBzZXR0aW5nc1NhdmVyLnNhdmVTZXR0aW5ncygkc2NvcGUuc2V0dGluZ3MpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAvL1RPRE86IHBlcmhhcHMgc2hvdyBzb21lIGluZGljYXRvciBpbiBVST9cbiAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgJHNjb3BlLmFsZXJ0cyA9IGVyci5hbGVydHM7XG4gICAgICB9KTtcblxuICAgIH07XG5cbiAgICAkc2NvcGUuY2xvc2VTZXR0aW5ncyA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2V0dGluZ3NDbG9zZXIuY2xvc2VTZXR0aW5ncygpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAvL1RPRE86XG4gICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICRzY29wZS5hbGVydHMgPSBlcnIuYWxlcnRzO1xuICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgJHNjb3BlLnNldHRpbmdzLnBhcmFtcyA9IHNldHRpbmdzR2V0dGVyLmdldFBhcmFtcygpO1xuICAgICRzY29wZS5sb2FkQWRkaXRpb25hbFBhcmFtcygpO1xuICB9XSlcblxuICAuZGlyZWN0aXZlKFwic2Nyb2xsT25BbGVydHNcIiwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiBcIkFcIiwgLy9yZXN0cmljdHMgdG8gYXR0cmlidXRlc1xuICAgICAgc2NvcGU6IGZhbHNlLFxuICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxtKSB7XG4gICAgICAgICRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKFwiYWxlcnRzXCIsIGZ1bmN0aW9uIChuZXdBbGVydHMsIG9sZEFsZXJ0cykge1xuICAgICAgICAgIGlmKG5ld0FsZXJ0cy5sZW5ndGggPiAwICYmIG9sZEFsZXJ0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICQoXCJib2R5XCIpLmFuaW1hdGUoe3Njcm9sbFRvcDogJGVsbS5vZmZzZXQoKS50b3B9LCBcImZhc3RcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xufSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi53aWRnZXQuY29tbW9uXCIpXG4gIC5jb25zdGFudChcIlNUT1JBR0VfRklMRV9VUkxfQkFTRVwiLCBcInN0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vcmlzZW1lZGlhbGlicmFyeS1cIilcbiAgLmNvbnN0YW50KFwiU1RPUkFHRV9GT0xERVJfVVJMX0JBU0VcIiwgXCJnb29nbGVhcGlzLmNvbS9zdG9yYWdlL1wiKVxuICAuZmFjdG9yeShcImNvbW1vblNldHRpbmdzXCIsIFtcIiRsb2dcIiwgXCJTVE9SQUdFX0ZJTEVfVVJMX0JBU0VcIiwgXCJTVE9SQUdFX0ZPTERFUl9VUkxfQkFTRVwiLFxuICAgIGZ1bmN0aW9uICgkbG9nLCBTVE9SQUdFX0ZJTEVfVVJMX0JBU0UsIFNUT1JBR0VfRk9MREVSX1VSTF9CQVNFKSB7XG5cbiAgICB2YXIgZmFjdG9yeSA9IHtcbiAgICAgIGdldFN0b3JhZ2VVcmxEYXRhOiBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHZhciBzdG9yYWdlID0ge30sXG4gICAgICAgICAgc3RyLCBhcnIsIHBhcmFtcywgcGFpcjtcblxuICAgICAgICBmdW5jdGlvbiBnZXRTdG9yYWdlVHlwZShzdG9yYWdlVXJsKSB7XG4gICAgICAgICAgaWYgKHN0b3JhZ2VVcmwuaW5kZXhPZihTVE9SQUdFX0ZJTEVfVVJMX0JBU0UpICE9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiZmlsZVwiO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzdG9yYWdlVXJsLmluZGV4T2YoU1RPUkFHRV9GT0xERVJfVVJMX0JBU0UpICE9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiZm9sZGVyXCI7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRDb21wYW55SWQoc3RvcmFnZVVybCkge1xuICAgICAgICAgIHZhciBwID0gc3RvcmFnZVVybC5zcGxpdChcInJpc2VtZWRpYWxpYnJhcnktXCIpO1xuXG4gICAgICAgICAgcmV0dXJuIHBbMV0uc2xpY2UoMCwgcFsxXS5pbmRleE9mKFwiL1wiKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZ2V0U3RvcmFnZVR5cGUodXJsKSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgICAgICBzdHIgPSB1cmwuc3BsaXQoU1RPUkFHRV9GSUxFX1VSTF9CQVNFKVsxXTtcbiAgICAgICAgICBzdHIgPSBkZWNvZGVVUklDb21wb25lbnQoc3RyLnNsaWNlKHN0ci5pbmRleE9mKFwiL1wiKSArIDEpKTtcbiAgICAgICAgICBhcnIgPSBzdHIuc3BsaXQoXCIvXCIpO1xuXG4gICAgICAgICAgc3RvcmFnZS5jb21wYW55SWQgPSBnZXRDb21wYW55SWQodXJsKTtcbiAgICAgICAgICBzdG9yYWdlLmZpbGVOYW1lID0gYXJyLnBvcCgpO1xuICAgICAgICAgIHN0b3JhZ2UuZm9sZGVyID0gYXJyLmxlbmd0aCA+IDAgPyBhcnIuam9pbihcIi9cIikgOiBcIlwiO1xuXG4gICAgICAgICAgaWYgKHN0b3JhZ2UuZm9sZGVyICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAvLyBhZGQgZW5kaW5nIFwiL1wiIHRvIHRoZSBmb2xkZXIgcGF0aFxuICAgICAgICAgICAgc3RvcmFnZS5mb2xkZXIgKz0gXCIvXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGdldFN0b3JhZ2VUeXBlKHVybCkgPT09IFwiZm9sZGVyXCIpIHtcbiAgICAgICAgICBwYXJhbXMgPSB1cmwuc3BsaXQoXCI/XCIpO1xuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJhbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHBhaXIgPSBwYXJhbXNbaV0uc3BsaXQoXCI9XCIpO1xuXG4gICAgICAgICAgICBpZiAocGFpclswXSA9PT0gXCJwcmVmaXhcIiAmJiB0eXBlb2YgcGFpclsxXSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwYWlyWzFdICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgIHN0b3JhZ2UuY29tcGFueUlkID0gZ2V0Q29tcGFueUlkKHVybCk7XG4gICAgICAgICAgICAgIHN0b3JhZ2UuZm9sZGVyID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pO1xuICAgICAgICAgICAgICBzdG9yYWdlLmZpbGVOYW1lID0gXCJcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0b3JhZ2U7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBmYWN0b3J5O1xuICB9XSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi53aWRnZXQuY29tbW9uXCIpXG4gIC5mYWN0b3J5KFwiZ2FkZ2V0c0FwaVwiLCBbXCIkd2luZG93XCIsIGZ1bmN0aW9uICgkd2luZG93KSB7XG4gICAgcmV0dXJuICR3aW5kb3cuZ2FkZ2V0cztcbiAgfV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24ud2lkZ2V0LmNvbW1vblwiKVxuICAuc2VydmljZShcImkxOG5Mb2FkZXJcIiwgW1wiJHdpbmRvd1wiLCBcIiRxXCIsIGZ1bmN0aW9uICgkd2luZG93LCAkcSkge1xuICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAkd2luZG93LmkxOG4uaW5pdCh7IFxuICAgICAgZmFsbGJhY2tMbmc6IFwiZW5cIixcbiAgICAgIHJlc0dldFBhdGg6IFwibG9jYWxlcy9fX25zX19fX19sbmdfXy5qc29uXCJcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKCR3aW5kb3cuaTE4bik7XG4gICAgfSk7XG5cbiAgICB0aGlzLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG4gIH1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLndpZGdldC5jb21tb25cIilcbiAgLmZhY3RvcnkoXCJpbWFnZVZhbGlkYXRvclwiLCBbXCIkcVwiLCBmdW5jdGlvbiAoJHEpIHtcbiAgICB2YXIgZmFjdG9yeSA9IHtcbiAgICAgIC8vIFZlcmlmeSB0aGF0IFVSTCBpcyBhIHZhbGlkIGltYWdlIGZpbGUuXG4gICAgICBpc0ltYWdlOiBmdW5jdGlvbihzcmMpIHtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKSxcbiAgICAgICAgICBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuXG4gICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaW1hZ2Uub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGltYWdlLnNyYyA9IHNyYztcblxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGZhY3Rvcnk7XG4gIH1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLndpZGdldC5jb21tb25cIilcbiAgLnNlcnZpY2UoXCJzZXR0aW5nc1NhdmVyXCIsIFtcIiRxXCIsIFwiJGxvZ1wiLCBcImdhZGdldHNBcGlcIiwgXCJzZXR0aW5nc1BhcnNlclwiLFxuICBmdW5jdGlvbiAoJHEsICRsb2csIGdhZGdldHNBcGksIHNldHRpbmdzUGFyc2VyKSB7XG5cbiAgICB0aGlzLnNhdmVTZXR0aW5ncyA9IGZ1bmN0aW9uIChzZXR0aW5ncywgdmFsaWRhdG9yKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgdmFyIGFsZXJ0cyA9IFtdLCBzdHIgPSBcIlwiO1xuXG4gICAgICBzZXR0aW5ncyA9IHByb2Nlc3NTZXR0aW5ncyhzZXR0aW5ncyk7XG5cbiAgICAgIGlmICh2YWxpZGF0b3IpIHtcbiAgICAgICAgYWxlcnRzID0gdmFsaWRhdG9yKHNldHRpbmdzKTtcbiAgICAgIH1cblxuICAgICAgaWYoYWxlcnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgJGxvZy5kZWJ1ZyhcIlZhbGlkYXRpb24gZmFpbGVkLlwiLCBhbGVydHMpO1xuICAgICAgICBkZWZlcnJlZC5yZWplY3Qoe2FsZXJ0czogYWxlcnRzfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzZXR0aW5ncy5wYXJhbXMuaGFzT3duUHJvcGVydHkoXCJsYXlvdXRVUkxcIikpIHtcbiAgICAgICAgLy8gZW5zdXJlIHRoZSB1cmwgaXMgdGhlIHN0YXJ0IG9mIHRoZSBzdHJpbmdcbiAgICAgICAgc3RyICs9IHNldHRpbmdzLnBhcmFtcy5sYXlvdXRVUkwgKyBcIj9cIjtcbiAgICAgICAgLy8gZGVsZXRlIHRoaXMgcHJvcGVydHkgc28gaXRzIG5vdCBpbmNsdWRlZCBiZWxvdyBpbiBlbmNvZGVQYXJhbXMgY2FsbFxuICAgICAgICBkZWxldGUgc2V0dGluZ3MucGFyYW1zLmxheW91dFVSTDtcbiAgICAgIH1cblxuICAgICAgc3RyICs9IHNldHRpbmdzUGFyc2VyLmVuY29kZVBhcmFtcyhzZXR0aW5ncy5wYXJhbXMpO1xuXG4gICAgICB2YXIgYWRkaXRpb25hbFBhcmFtc1N0ciA9XG4gICAgICAgIHNldHRpbmdzUGFyc2VyLmVuY29kZUFkZGl0aW9uYWxQYXJhbXMoc2V0dGluZ3MuYWRkaXRpb25hbFBhcmFtcyk7XG5cbiAgICAgIGdhZGdldHNBcGkucnBjLmNhbGwoXCJcIiwgXCJyc2NtZF9zYXZlU2V0dGluZ3NcIiwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAkbG9nLmRlYnVnKFwiZW5jb2RlZCBzZXR0aW5nc1wiLCBKU09OLnN0cmluZ2lmeShyZXN1bHQpKTtcbiAgICAgICAgJGxvZy5kZWJ1ZyhcIlNldHRpbmdzIHNhdmVkLiBcIiwgc2V0dGluZ3MpO1xuXG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzdWx0KTtcbiAgICAgIH0sIHtcbiAgICAgICAgcGFyYW1zOiBzdHIsXG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbXM6IGFkZGl0aW9uYWxQYXJhbXNTdHJcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcHJvY2Vzc1NldHRpbmdzKHNldHRpbmdzKSB7XG4gICAgICB2YXIgbmV3U2V0dGluZ3MgPSBhbmd1bGFyLmNvcHkoc2V0dGluZ3MpO1xuXG4gICAgICBkZWxldGUgbmV3U2V0dGluZ3MucGFyYW1zLmlkO1xuICAgICAgZGVsZXRlIG5ld1NldHRpbmdzLnBhcmFtcy5jb21wYW55SWQ7XG4gICAgICBkZWxldGUgbmV3U2V0dGluZ3MucGFyYW1zLnJzVztcbiAgICAgIGRlbGV0ZSBuZXdTZXR0aW5ncy5wYXJhbXMucnNIO1xuXG4gICAgICByZXR1cm4gbmV3U2V0dGluZ3M7XG4gICAgfVxuXG4gIH1dKVxuXG4gIC5zZXJ2aWNlKFwic2V0dGluZ3NHZXR0ZXJcIiwgW1wiJHFcIiwgXCJnYWRnZXRzQXBpXCIsIFwiJGxvZ1wiLCBcInNldHRpbmdzUGFyc2VyXCIsIFwiJHdpbmRvd1wiLCBcImRlZmF1bHRTZXR0aW5nc1wiLFxuICAgIGZ1bmN0aW9uICgkcSwgZ2FkZ2V0c0FwaSwgJGxvZywgc2V0dGluZ3NQYXJzZXIsICR3aW5kb3csIGRlZmF1bHRTZXR0aW5ncykge1xuXG4gICAgICB0aGlzLmdldEFkZGl0aW9uYWxQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIHZhciBkZWZhdWx0QWRkaXRpb25hbFBhcmFtcyA9IGRlZmF1bHRTZXR0aW5ncy5hZGRpdGlvbmFsUGFyYW1zIHx8IHt9O1xuICAgICAgICBnYWRnZXRzQXBpLnJwYy5jYWxsKFwiXCIsIFwicnNjbWRfZ2V0QWRkaXRpb25hbFBhcmFtc1wiLCBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgaWYocmVzdWx0KSB7XG4gICAgICAgICAgICByZXN1bHQgPSBzZXR0aW5nc1BhcnNlci5wYXJzZUFkZGl0aW9uYWxQYXJhbXMocmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSB7fTtcbiAgICAgICAgICB9XG4gICAgICAgICAgJGxvZy5kZWJ1ZyhcImdldEFkZGl0aW9uYWxQYXJhbXMgcmV0dXJucyBcIiwgcmVzdWx0KTtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGFuZ3VsYXIuZXh0ZW5kKGRlZmF1bHRBZGRpdGlvbmFsUGFyYW1zLCByZXN1bHQpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLmdldFBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlZmF1bHRQYXJhbXMgPSBkZWZhdWx0U2V0dGluZ3MucGFyYW1zIHx8IHt9O1xuICAgICAgICByZXR1cm4gYW5ndWxhci5leHRlbmQoZGVmYXVsdFBhcmFtcyxcbiAgICAgICAgICBzZXR0aW5nc1BhcnNlci5wYXJzZVBhcmFtcygkd2luZG93LmxvY2F0aW9uLnNlYXJjaCkpO1xuICAgICAgfTtcbiAgfV0pXG5cbiAgLnNlcnZpY2UoXCJzZXR0aW5nc1BhcnNlclwiLCBbZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucGFyc2VBZGRpdGlvbmFsUGFyYW1zID0gZnVuY3Rpb24gKGFkZGl0aW9uYWxQYXJhbXNTdHIpIHtcbiAgICAgIGlmKGFkZGl0aW9uYWxQYXJhbXNTdHIpIHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoYWRkaXRpb25hbFBhcmFtc1N0cik7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmVuY29kZUFkZGl0aW9uYWxQYXJhbXMgPSBmdW5jdGlvbiAoYWRkaXRpb25hbFBhcmFtcykge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFkZGl0aW9uYWxQYXJhbXMpO1xuICAgIH07XG5cbiAgICB0aGlzLmVuY29kZVBhcmFtcyA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgIHZhciBzdHIgPSBbXTtcbiAgICAgIGZvcih2YXIgcCBpbiBwYXJhbXMpIHtcbiAgICAgICAgaWYgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShwKSkge1xuICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICBpZiAodHlwZW9mIHBhcmFtc1twXSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeShwYXJhbXNbcF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhbHVlID0gcGFyYW1zW3BdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdHIucHVzaChcInVwX1wiICsgZW5jb2RlVVJJQ29tcG9uZW50KHApICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3RyLmpvaW4oXCImXCIpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzdHJpcFByZWZpeChuYW1lKSB7XG4gICAgICBpZihuYW1lLmluZGV4T2YoXCJ1cF9cIikgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIG5hbWUuc2xpY2UoMyk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5wYXJzZVBhcmFtcyA9IGZ1bmN0aW9uIChwYXJhbXNTdHIpIHtcbiAgICAgIC8vZ2V0IHJpZCBvZiBwcmVjZWVkaW5nIFwiP1wiXG4gICAgICBpZihwYXJhbXNTdHJbMF0gPT09IFwiP1wiKSB7XG4gICAgICAgIHBhcmFtc1N0ciA9IHBhcmFtc1N0ci5zbGljZSgxKTtcbiAgICAgIH1cbiAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgIHZhciB2YXJzID0gcGFyYW1zU3RyLnNwbGl0KFwiJlwiKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcGFpciA9IHZhcnNbaV0uc3BsaXQoXCI9XCIpO1xuICAgICAgICB2YXIgbmFtZSA9IHN0cmlwUHJlZml4KGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzBdKSk7XG4gICAgICAgIC8vc2F2ZSBzZXR0aW5ncyBvbmx5IGlmIGl0IGhhcyB1cF8gcHJlZml4LiBJZ25vcmUgb3RoZXJ3aXNlXG4gICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdFtuYW1lXSA9IEpTT04ucGFyc2UoZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJlc3VsdFtuYW1lXSA9IGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICB9XSlcblxuICAuc2VydmljZShcInNldHRpbmdzQ2xvc2VyXCIsIFtcIiRxXCIsIFwiJGxvZ1wiLCBcImdhZGdldHNBcGlcIixcbiAgZnVuY3Rpb24gKCRxLCAkbG9nLCBnYWRnZXRzQXBpKSB7XG5cbiAgICB0aGlzLmNsb3NlU2V0dGluZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICBnYWRnZXRzQXBpLnJwYy5jYWxsKFwiXCIsIFwicnNjbWRfY2xvc2VTZXR0aW5nc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcblxuICB9XSlcblxuICAudmFsdWUoXCJkZWZhdWx0U2V0dGluZ3NcIiwge30pO1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLndpZGdldC5jb21tb24udmlzdWFsaXphdGlvblwiLCBbXSlcbiAgICAuZmFjdG9yeShcInZpc3VhbGl6YXRpb25BcGlcIiwgW1wiJHFcIiwgXCIkd2luZG93XCIsIGZ1bmN0aW9uICgkcSwgJHdpbmRvdykge1xuICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBwcm9taXNlO1xuXG4gICAgICB2YXIgZmFjdG9yeSA9IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKCFwcm9taXNlKSB7XG4gICAgICAgICAgICBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgICAgIGlmICghJHdpbmRvdy5nb29nbGUudmlzdWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAkd2luZG93Lmdvb2dsZS5zZXRPbkxvYWRDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgkd2luZG93Lmdvb2dsZS52aXN1YWxpemF0aW9uKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgkd2luZG93Lmdvb2dsZS52aXN1YWxpemF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICByZXR1cm4gZmFjdG9yeTtcblxuICAgIH1dKTtcblxufSkoYW5ndWxhcik7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=